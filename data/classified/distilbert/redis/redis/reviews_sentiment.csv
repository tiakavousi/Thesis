id,pr_number,user,submitted_at,state,body,distilbert_sentiment_label,distilbert_confidence
1242527620,11695,zuiderkwast,2023-01-10T17:20:22Z,COMMENTED,"i have skimmed though the diff. this looks very promising! regarding the topics in the top comment: i think your solution looks good. i think it needs to be more fair. i have commented on the diff. see comment on the diff. yes i think we need to do this, at least for checking if it affects performance. a simple way could be to cache the last computed hash inside hashkeyslot itself: [code block] for simplicity, i like that we have all the dicts allocated, but if we use an array of dict structs (see also comment in the diff) instead of an array of dict pointers, we probably get a bit faster as there are less pointers to follow thus less memory accesses.",1,0.9839171171188354
1243088686,11695,molian6,2023-01-11T00:32:54Z,COMMENTED,"thanks for publishing the pr . i'm really excited for this change! i reviewed db.c and left some questions, will continue reviewing the remaining files tmr.",1,0.992391049861908
1283352450,11695,madolson,2023-02-04T01:27:05Z,COMMENTED,"took another look. the only think i still don't really like is the random key selection, but i'm not sure how much it really matters. do we have any performance testing for eviction? that might be more heavily impacted by the increased time spent selecting a random db. i would still bias towards making the random db selection faster, and random over a long time frame, then necessarily accurate at a given point in time.",-1,0.8603057861328125
1287219509,11695,oranagra,2023-02-09T12:14:54Z,COMMENTED,"i skimmed through the changes (not too deeply though). added a few questions, observations and suggestions.",0,0.9549806118011475
1325168337,11695,oranagra,2023-03-05T12:26:03Z,COMMENTED,"i skimmed through the recent changes one commit at the time. in retrospect it might have been wrong, due to the repeated changes to the same code, and some of my comment may be outdated or misplaced. also, i think due to some glitch in gh it looked as if i'm reviewing some changes out of order, seeing code that should have been gone already changes in an outdated form. or maybe some commits are incomplete, or something else i don't understand. bottom line, please ignore comments that you think are already handled.",0,0.7922843098640442
1338031193,11695,madolson,2023-03-14T04:38:41Z,COMMENTED,"mostly lgtm, still curious about the fairness of the lru for two conditions: 1. some large slots. 2. uniform distribution of slots. i think if we cover those two cases for eviction, i'm happy with the results.",1,0.8314893245697021
1369891163,11695,madolson,2023-04-03T22:52:26Z,COMMENTED,"i'm now conceptually happy with the changes. i have no outstanding concerns for the design, just some minor comments.",1,0.8196499943733215
1376601156,11695,madolson,2023-04-07T21:35:00Z,APPROVED,lgtm,0,0.9795994758605957
1575782756,11695,oranagra,2023-08-13T18:08:51Z,COMMENTED,"i've re-reviewed everything line by line. i must say that unlike the first time i took a look at it, i no longer have a bad feeling about it. maybe it's because this pr had gone through some cleanup and refactory (i don't recall), or maybe it's a matter of expectations, which are now different. i added a few comments with minor questions and suggestions for improvements. after that, and the other pending comments (about expires dict?), i suppose we can proceed. thanks.",1,0.7948421239852905
1612505162,11695,oranagra,2023-09-06T05:52:44Z,COMMENTED,"thanks. please go over the comments that you resolved and mark them as such, so it'll be easy to keep track of what's left.",1,0.7650056481361389
1618765488,11695,madolson,2023-09-15T17:30:53Z,COMMENTED,"mostly a partial review, will try to finish some time next week.",0,0.9766342043876648
1654553842,11695,oranagra,2023-10-03T07:51:49Z,COMMENTED,"i went over my (and a few others that were old) comments that were unresolved, and resolved the ones that are handled. there are still some that aren't, and it's hard to go over everything each time. maybe for some we should add a todo section in the top comment and resolve them.",0,0.9526083469390869
1663219180,11695,oranagra,2023-10-08T11:58:54Z,COMMENTED,"conceptually approving the pr, and the handling of the remaining issues later. went over the unresolved comments, and saw two small things that i didn't see in your list. [a link] - about benchmarking mset ~~[a link] - please ack that it's handled.`~~",0,0.9224247336387634
1663721630,11695,madolson,2023-10-09T04:52:27Z,APPROVED,"we should close on oran's comments, but i'm happy with all the updates and have nothng else to add. , pinging you as well for approval. the top comment seems mostly up to date as of this point.",1,0.8318755626678467
807470673,9788,oranagra,2021-11-16T16:30:59Z,COMMENTED,"thank you. i started reviewing the pr, and also edited the pr top comment to make it clearer (please check if it looks right). so far i reviewed just parts of it (namely all the files excluding aof.c and the tests). i.d like to post my comments for discussion before i proceed with the other parts, to see if we agree on things, or maybe i have a misunderstanding.",1,0.9495963454246521
808236545,9788,oranagra,2021-11-17T20:25:48Z,COMMENTED,"done reviewing aof.c, didn't review the tests yet.",0,0.9641192555427551
817221984,9788,yossigo,2021-11-29T14:40:24Z,COMMENTED,"hey , i have done a quick initial review and have some comments - but there are also some bigger topics i'd like to raise here. the two main concerns i have are these: * things being more complex for users who wish to backup or migrate aof files around, and in particular failing to copy the right files. * upgrade path. one way to address the first concern, that came up in the past, is to treat the `appendfilename` as a name of a directory we create (under `dir`) and place all files there. users then basically have to backup or transfer the **entire** directory. any down sides to that? regarding the upgrade path, the most common scenario i consider is where the user simply replaces `redis-server`, restarts and expects everything to work. if we simply treat `appendfilename` as a prefix we'd be creating aof data that existing scripts/tools/etc. may not be aware of and silently fail to handle. worse, if the old `appendonly.aof` is still there it could later be used to restore stale data. to address that, we should probably rename the old-style file pointed by `appendfilename` to the new-style structure (as a base). another issue is that unless the configuration parameter is changed, we'd end up with something like `appendonly.aof.25.aof` which would be weird. here, the above proposal to use a dedicated directly might help - because `appendonly.aof` would still exist but become a directory instead of a single file.",0,0.6892336010932922
834071770,9788,oranagra,2021-12-16T20:31:15Z,COMMENTED,"here's some feedback (maybe i'm reviewing an intermediate commit). i was under the impression that we decided to start by adding a separate config for the folder name, and use the old config as both a way to locate the old file on upgrades, and maybe also use it as a pattern for the file names we create inside the dir. i.e. agreed with you that this is cleaner than using the old config as a folder name. i was afraid of some edge cases with this approach that we should look into and try to resolve. or actually if we use the old config as a pattern for the files we create in the folder, maybe there's no problem. did you reach some new conclusion on the matter which caused you to go with the approach of using the old config only?",0,0.6575297713279724
840074691,9788,yoav-steinberg,2021-12-26T11:43:56Z,COMMENTED,some phrasing..,0,0.967365562915802
840061102,9788,oranagra,2021-12-26T12:58:26Z,COMMENTED,"did another top-to-bottom review of the c code and found some final comments. also, finally had time to review the tests.. all in all they look good, i added a few suggestion got improvements.",1,0.7321020364761353
840829269,9788,oranagra,2021-12-28T12:07:39Z,COMMENTED,finished reviewing the c file. posting first part of my review.,0,0.970674991607666
840857119,9788,oranagra,2021-12-28T13:03:32Z,COMMENTED,"i only reviewed the changes in the tests and not re-reviewed the whole thing (tests). this means that if some of my previous set of comments was not handled (or had two asks, and only one was handled), i'll miss this. just stating this to make sure you think you understood everything, and if you think there's a chance something wasn't clear, please open that discussion and add a comment in it.",0,0.742401659488678
840929608,9788,oranagra,2021-12-28T14:44:46Z,APPROVED,another full ci: [a link],0,0.9849458932876587
842039844,9788,yossigo,2021-12-30T19:05:41Z,COMMENTED,"lgtm with a few comments, mostly around typos / suggestions for improved log messages.",0,0.9863142967224121
842456619,9788,madolson,2022-01-03T01:14:46Z,APPROVED,"adding my approval from the high level design, didn't look at the details.",0,0.8369807600975037
1126880845,11012,madolson,2022-09-30T14:59:57Z,COMMENTED,"we probably need to add some tests are doing recursive lmove commands, which don't seem to exist.",0,0.9793215394020081
1127641614,11012,oranagra,2022-10-02T14:48:15Z,COMMENTED,"thanks ran. this area needed some cleanup. in fact, we could rename it to be part of the ""sort out the mess"" series :smile: fyi: #11310 (not sure which one to merge first) cc there is a ton of deleted code here, it's impossible to make sure it didn't have any specific logic for blocked command edge cases that's missing from the actual commands. i just hope we have enough tests to spot these. cc -binbin maybe you can spot something.",1,0.9078119397163391
1187956233,11012,oranagra,2022-11-21T11:36:54Z,APPROVED,"thanks , so this is basically ready for merge? i skimmed though the code again (not a real review) and added a few minor comments. please make sure the top comment is updated with all the important details people may wanna know without reading the code. i wonder if we should do something to benchmark any performance regressions from this maybe you have an idea? i.e. create a scenario where the benchmark keeps creating a mass of blocked clients and releasing them and compare the performance to the old code.",0,0.7654443979263306
1190257026,11012,madolson,2022-11-22T15:18:06Z,APPROVED,lgtm. i also think it would be good to do performance testing.,1,0.5335896611213684
1233431181,11012,oranagra,2023-01-01T14:28:55Z,APPROVED,can you please add some trivial monitor + blocked client test in unit/instospection.tcl? [edit] and make sure the top comment is updated,0,0.9874228239059448
730201916,9357,oranagra,2021-08-16T07:23:05Z,COMMENTED,"initial review. the two important aspects are maybe: 1. terminology: maybe if we'll call the non-ziplist nodes ""plain"" instead of ""none"" it'll be easier to refer to them anywhere in the code. 2. i feel that we didn't handle compressed nodes correctly, not sure how well this is covered by the tests.",0,0.7180505990982056
735574014,9357,oranagra,2021-08-22T15:49:08Z,COMMENTED,"i saw a commit so i reviewed it. i now realize it's half baked, but since i already wrote down some comments i'll post them.",0,0.8992190957069397
752399766,9357,oranagra,2021-09-13T09:25:04Z,COMMENTED,"i went over the diff from the last commit i reviewed. since it was a diff between two commits i didn't see the older comments still pending, so i may have commented on something that's already commented. please go over all the existing comments, if they're already solved, mark them as resolved. if you have two discussions on the same topic you can add cross-reference links and resolve one, or resolve them when they're done.",0,0.9830117225646973
787499618,9357,yossigo,2021-10-24T11:31:24Z,APPROVED,"not a full code review, but lgtm (with one typo).",0,0.9882315993309021
787506539,9357,itamarhaber,2021-10-24T12:27:41Z,APPROVED,"no cr, yes approval.",0,0.9750038981437683
787568513,9357,madolson,2021-10-24T23:53:41Z,APPROVED,lgtm,0,0.9795994758605957
880971895,10285,oranagra,2022-02-13T14:03:53Z,COMMENTED,"i haven't reviewed the code yet, just responding to the top comment of the pr, the discussion points, and a few other things i noticed. i decided to find places to post these as code-comments so that separate discussion threads can be handled in parallel.",0,0.9447618722915649
881027300,10285,yossigo,2022-02-13T18:11:22Z,COMMENTED,"i've just had a quick look at this, so posting some initial feedback mostly based on 's and the top comment. not in favor of that. the problem is we lose track of explicit config vs default config, which tends to become an issue over time when defaults change. is there a problem to expose something similar to what redis already does, and let the module control if a value is to be rewritten or not? i very briefly proposed an alternative. i am sure we need to support multi-param set as a basic feature of the api. possibly, also support both push and pull (where pull is done by the module at `onload` time).",0,0.8980486989021301
888008342,10285,oranagra,2022-02-20T15:18:04Z,COMMENTED,"i think the module api is rather solid, other than maybe: 1. a few more flags we could expose (like percent_config) 2. improved enums configs (not relying on implicit int values). 3. improved apply callback that takes a redismodulectx and / or privdata i posted quite a few comments about the implementation, but most importantly there's a lot of logic copied from config.c into module.c, and i think we could maybe find a way to avoid that (see my comments in parseandsetnumericconfig). so maybe we need to look into a poc for that approach before dealing with the test of the comments? p.s. haven't reviewed the test code.",0,0.6914318799972534
907955094,10285,madolson,2022-03-12T06:50:45Z,COMMENTED,"thanks ! i think the refactoring definitely cut down on the duplication. i took a pass through the code. i didn't read too much of the documentation updates, but i think i will just push some updates tomorrow.",1,0.978293240070343
911226823,10285,oranagra,2022-03-16T14:26:06Z,COMMENTED,imho looks a lot better than the initial version i reviewed. thanks. added a bunch of small comments. haven't reviewed the tests yet.,1,0.9788565635681152
912364657,10285,madolson,2022-03-17T02:31:06Z,COMMENTED,"looks pretty good to me, mostly minor comments now.",1,0.9576167464256287
918533350,10285,oranagra,2022-03-23T13:46:46Z,COMMENTED,"another round of review. i'm gonna edit the docs for rm_registerstringconfig myself (would be easier than reviewing suggestions), so feel free to fix / argue after my edit.",0,0.7959957718849182
920749426,10285,oranagra,2022-03-24T19:25:31Z,COMMENTED,thank you. this is close to being perfect 8-),1,0.9913030862808228
922405824,10285,oranagra,2022-03-27T06:43:37Z,COMMENTED,"i went over all the unresolved comments, and resolved most of them (mostly outdated or handled). finally reviewed the tests too. please go over the pr top comment and make sure it's updated thank you!",1,0.9639040231704712
923827406,10285,madolson,2022-03-28T22:57:07Z,COMMENTED,"i finally got around to finishing reading the documentation. ""effectively"" an approve from me, as i'm okay with the tradeoffs made in this pr, but would like to see them get closed in the discussion.",0,0.9505537152290344
925269835,10285,madolson,2022-03-29T21:42:04Z,APPROVED,"lgtm. i still prefer the char *, but it's not something i honestly feel that strongly about.",-1,0.7425356507301331
1407081072,12109,oranagra,2023-04-30T10:57:57Z,COMMENTED,"thanks. i didn't really dive into the derails and code, but i do have a few comments about a few things i noticed. p.s. still not certain about using a second socket rather than multiplexing yet, each has its pros and cons.",1,0.9262792468070984
1438416107,12109,madolson,2023-05-23T04:52:50Z,COMMENTED,"finally circled around to this again. it still feels like there is a lot of code and it feels like there should be less, and i think there is some duplication between regular and two channel sync",0,0.762977659702301
1526335332,12109,oranagra,2023-07-17T09:13:53Z,COMMENTED,"thank you for the pr. i reviewed the code, without the tests for now and added many comments. here are a few top level notes (**each also has a thread of it's own in the comments, but i wanna draw the attention to these first**): * the review took long and it could be that some comments are duplicates. * i think that before merging this we better refactor replication.c into two files (master related code and replica related code, i'll discuss this with the core team. * i think we should change the state machine / connection sequence to a different way to do capability exchange and fallback to old mechanism without a reconnect. * i think we're mixing several different aspects in replconf that should be kept separate * i feel that the two connections should be coupled in some way (redis will be aware that they're a pair). this could help us make sure the end-offset doesn't disappear from the backlock if it is small. * i feel the terminology isn't consistent (rdb channel, vs second channel and so on), and that we need to decide on it and sort it out.",1,0.9747325778007507
1861423638,12109,oranagra,2024-02-04T18:08:03Z,COMMENTED,"i only reviewed the incremental diff from my last commit, didn't re-review the diff against unstable. but since so much time passed since my last review, i'm not sure i have the right context in my head for a partial review. if you're gonna now work on it till completion, i'll need to re-review it from scratch sooner or later, but hopefully i'll do that after some terminology and comments cleanup, and maybe after any missing parts are complete (so that i don't have to repeat that again too many times) please mark all the resolved comments as such, and if there are big ones that require design discussion and decisions, let's do that first, before reviewing and arguing about nonsense. p.s. didn't look at the tests.",0,0.8226004838943481
1896045887,12109,oranagra,2024-02-25T10:46:24Z,COMMENTED,"some of my comments are overlapping / contradicting since they suggest changing the pending_slaves mechanism in different ways. we need to figure this out, but i don't have a concrete suggestion.",0,0.8035572171211243
725127812,9323,oranagra,2021-08-09T19:08:44Z,COMMENTED,"thank you, i think this pr shows the potential of that concept quite well, and it's nice to see that the code was nearly prepared for this concept and you were able to apply it nicely without too many changes. i did a quick review and gave a few comments, the main issue to be resolved is probably around the module api and complex modules with out of keyspace data. few other things i must note: 1. during loading redis is not highly responsive, it only processes events for a short period once in some 2mb of rdb data. so the clients working with the replica may get degraded performance, even beyond the fact that the cpu is heavily invested in loading. 2. i think we wanna have that mode enabled only when a replica was previously in sync with a master (not depending on whatever the database was empty or not though), when a new replica comes up, we'll want to avoid using swapdb, so that we **will** respond with -loading.",1,0.9139931201934814
737636496,9323,oranagra,2021-08-24T20:11:47Z,COMMENTED,lgtm with minor fix. what's left is to handle the modules issue.,0,0.9865119457244873
741115188,9323,oranagra,2021-08-29T13:50:40Z,COMMENTED,"thank you.. your changes seem great! i gave a few minor comments mostly about renaming ""repl async"" to ""repl async load"". and raised a few questions about ordering. i think you can proceed with adjusting the tests.",1,0.9917422533035278
752743515,9323,oranagra,2021-09-13T19:15:32Z,COMMENTED,"i re-reviewed the whole thing from scratch, here are my new comments:",0,0.9683216214179993
770028373,9323,oranagra,2021-10-04T08:57:24Z,COMMENTED,"reviewed your last commit. lgtm. i also updated the top comment about the new module api flag, and an explanation as to why we replaced checks of the loading flag with aof client id. please see if there are any other things that need to be noted for future reviewers or release notes.",0,0.9785036444664001
775687107,9323,zuiderkwast,2021-10-10T16:28:35Z,COMMENTED,i like the last commit. it's just what i was thinking. i have only a few comments.,1,0.788908839225769
781462611,9323,oranagra,2021-10-17T15:41:39Z,COMMENTED,"thank you. tests look fine, but i'd like to see if we can find a way to make them run shorter (not wait for slow replication completion), and share code. p.s. this is that last thing to handle right? all other comments are addressed? please go over the ones not yet resolved, make sure they're handles and resolve them. also make sure the top comment is updated with what was done, why and any other implications of the changes. then i'll ask the core-team to approve and we can merge.",1,0.9042172431945801
781474264,9323,oranagra,2021-10-17T18:36:29Z,COMMENTED,"i went over some of the unresolved comments and marked them as resolved. and also edited the top comment and filled in additional info (mainly the decision of async loading based on repl-id). please take a look and fill additional info. regarding the slotstokey map, did we decide to leave it in server.c or make it opaque in cluster.c? (if we do that, the top comment needs another update, or just deletion of a line) let's finish all the c code and documentation before we proceed with test cleanup, which we can do while others review the code.",0,0.9772440195083618
787516451,9323,yossigo,2021-10-24T14:03:52Z,COMMENTED,"not a full detailed code review, but lgtm. one comment: i think we're missing explicit handling for invalidating tracked keys (client side caching) somewhere in `swapmaindbwithtempdb`.",0,0.9818648099899292
791386932,9323,oranagra,2021-10-28T05:53:11Z,COMMENTED,"i did a quick (and maybe sloppy) review. i feel the tests need more work, and i pointed out some things i think are wrong. please let me know if you feel i'm missing something.",-1,0.9223629832267761
795050026,9323,oranagra,2021-11-02T09:16:24Z,COMMENTED,"lgtm, one last change requested.",0,0.9855738282203674
723668378,9323,madolson,2021-11-04T04:13:34Z,APPROVED,"approving based on documentation, didn't read the implementation details.",0,0.925612211227417
754361422,9166,oranagra,2021-09-18T08:06:16Z,COMMENTED,"wow.. impressive work. i must say that i like the result despite the complexity it adds, i think it brings a lot of value. i gave quite a lot of comment, possibly some were due to my misunderstanding of the roles of some fields (i began by reviewing server.h), which became clear later when i read the code that uses them, but still i think the documentation in the header and possibly some field names should be improved. i also think i found one or two bugs, which indicates that we may need to improve the testing to cover these cases, and maybe also add some fuzzer to smoke out other edge cases not currently covered. please go over the pr top comment and see if it needs any update. i think it doesn't mention the rax used for quick psync offset finding (and the fact not all nodes are included). and i think it doesn't mention the fact that now the actual backlog can be larger than the config setting if some replica is using large buffer (so psync will sometimes succeed with bigger gap).",1,0.9857492446899414
761692572,9166,yoav-steinberg,2021-09-23T10:10:07Z,COMMENTED,"i think there's an issue with the replication backlog being larger than the (slave) client output buffer limit. in such a case: - if we disconnect a slave because of reaching obuf limit we don't gain anything, since we still keep all the memory for the backlog. - once that slave psyncs we'll set its obuf to a value which is larger than its max allowed obuf (instead of refusing the psync), and then disconnect it for reaching its obuf limit. this might continue until the backlog buf is out of the psync range. if this is the case, we need to fix `checkclientoutputbufferlimits()` somehow so if we're checking for a slave then the limit will be `max(slave-limit, repl-backlog-limit)`. another related issue is that if trimming of the replication buffer is done in the background and not immediately then there might be a case where a slave is disconnected because of obuf limit and then tries a psync and instead of failing (because we freed the repl buf) we still have it and we succeed the psync only to fail again on an obuf limit. makes sense? is this relevant?",0,0.9715163111686707
769547441,9166,madolson,2021-10-03T05:41:00Z,COMMENTED,"just posting that i conceptually agree with the approach, i won't get a chance to review it but don't want that to block merging this.",0,0.8745026588439941
787507256,9166,yossigo,2021-10-24T12:47:27Z,COMMENTED,"not a full detailed code review, but lgtm (but i did mark a few typos).",0,0.9875087141990662
1290562929,10517,oranagra,2023-02-09T07:58:07Z,COMMENTED,i skimmed though the changes in the general infra (skipping cluster.c and the tests). it'll need to be reevaluated after rebase (hoping some of the changes will now be unnecessary),0,0.9863800406455994
993988354,10517,madolson,2023-02-09T23:20:31Z,COMMENTED,"partial review for today. left some high level comments, and some minor things. i'm still inclined to try to harden the slot migration reliability.",0,0.6655243635177612
1296509871,10517,madolson,2023-02-13T22:42:13Z,COMMENTED,"had a chance to basically read through everything now. generally in favor of a lot of the cleanup that was done. we need to validate the behavior after failures when running redis-cli, since i think that is most of the users will be doing when they hit these failures. my biggest concern is that there are now two competing sources of truth of slot ownership, one driven out of the primaries through the clusterbus and one through the replication stream. i'm thinking that maybe we should trend towards a design where nodes within a shard learn their slot state from replication, and learn about other shards through gossip. i think you sort of implement a lot of this, but maybe it's just a mental model i need to wrap my head around.",0,0.5532822608947754
1296894296,10517,PingXie,2023-02-14T08:27:10Z,COMMENTED,"thanks again for the review, . i haven't fully addressed all the feedback but sending out a partial response for now. will continue tomorrow.",1,0.9452769756317139
1301017680,10517,oranagra,2023-02-16T09:16:47Z,COMMENTED,gave it another quick look after rebase. again only looked at general redis infra and skipped clueter.c and the tests.,0,0.9799066185951233
1386954738,10517,oranagra,2023-04-16T13:58:33Z,COMMENTED,doesn't the new approach require some changes in redis-cli?,0,0.9851118922233582
1397619682,10517,zuiderkwast,2023-04-24T11:41:06Z,COMMENTED,logic seems fine to me. mainly some comments on code comments. seems we're almost there. i'd still very much like to see this in 7.2 if possible.,0,0.6589188575744629
1399381451,10517,zuiderkwast,2023-04-25T14:46:55Z,COMMENTED,i'm happy now. just a few nits and some question.,1,0.9695790410041809
1496196081,10517,madolson,2023-06-24T00:40:22Z,COMMENTED,this all looks mostly correct. big open question for me is still the thinking around replicating open slots as a burst of commands after the full sync.,0,0.9456580281257629
1502077508,10517,madolson,2023-06-28T01:13:16Z,APPROVED,everything looks ok to me.,0,0.9086155891418457
1951329514,13157,mochaaP,2024-03-21T09:07:24Z,COMMENTED,the bsd license header should be reserved if not all contributors signed on the license change.,0,0.9874601364135742
741513212,9320,yossigo,2021-08-30T11:11:49Z,COMMENTED,"i've started reviewing the code and made a few comments. my main input is we need to break down this pr into several phases to make it easier to handle. i believe the first phase should be about connection api change/cleanup only - fully encapsulate `connectiontype`, only use generic `conncreate`, `connaccept`, etc. leave everything in `connection.c` to avoid big diffs due to code reorganization at this point. at this point i'd also want to be sure we don't introduce any unexpected performance regressions. the next stages would be -- * add `tls-module-path` and the ability to *optionally* build tls support separately (i.e. `build_tls=yes|no|ext`). maybe at this point already consider a more generic `load-extension` mechanism (the term ""module"" is used for redis modules, we don't want to confuse the two). * consider if/how additional arbitrary connection types can be supported. * finalize code reorganization. do you have any other/additional thoughts?",0,0.8665514588356018
1003594233,9320,oranagra,2022-06-13T12:25:05Z,COMMENTED,"thank you for your patience, sorry it takes so long. i wasn't part of the loop earlier and my review now is just through the peephole of the github diff, so i might be off or missing things. i did review the commits in the pr one by one, and the refactoring work you did seem pretty solid (gave a few minor comments). i also looked at a few commits at the top of [a link] to see how you took it further and how rdma and possibly other mediums can be integrated with minimal or no changes to redis, hoping for redis to be flexible enough to support various nuances and oddities each one brings. i do remember you mentioned something about rdma not being able to deliver a writable event, and i assume we might need to pull portions of ae.c into this extensions mechanism. a few random notes about changes i see in the commits of that other branch: refactory related: * i don't think it's appropriate clientaccepthandler (protected mode, error replies, module hooks, freeing clients, server stats) is in connection.c (should somehow move back to networking imho) * same for acceptcommonhandler and clusteraccepthandler * i'm unsure about connsocketlistentoport. it seems a good fit for connection.c, but maybe we don't have to move it (unnecessary blamelog and review overhead). general: * maybe instead of ""burning"" the medium specific configs into redis, we should either use the new module api config system (#10285) to configure these. there are two ways we can do that: one is that these extensions can be both an extension, but also a module, and use the module api to register configs. the other is that maybe we'll extract the mechanism that allows modules to register configs (which are applied after config file parsing instead of during), in a way that the extensions will be able to use them too. * maybe instead of the several hard coded `if`s in redis that init and setup (listen) the extensions, we can have a loop that handles all the loaded extensions, in which case instead of hard coded indexes to the connection type array, they'll be dynamic. i.e. each entry in the array has a pointer to the callback struct, but we don't know which index has which type (socket and tls may be an exception since we due to compatibility of previous state, we may have to refer to them by index).",-1,0.7946112751960754
1023282021,9320,oranagra,2022-06-29T14:14:10Z,COMMENTED,"most changes lgtm. thanks. i see we can now pass arguments to the extension at load time, which is nice (p.s. i think you better re-add the section in redis.conf), so the need for an api to register config set/get interaction and runtime configs is arguably reduced (we should still do that some day later though imho).",1,0.9562369585037231
1028100153,9320,oranagra,2022-07-05T07:08:55Z,COMMENTED,"looking at the last commit, i have mixed feelings. trying to conclude if all of these (config, cert, ctx, client ctx) are always gonna be tls specific. i guess it's almost certainly right about all except config. regarding the config, what sets tls different than unix and socket is that it has extra configs in addition to `bind` and `port`, which may also be true for other future extensions. however, tls has native redis configs, and other extensions are likely to use the module configuration infrastructure with it's apply callback.",-1,0.9717831611633301
1033600322,9320,oranagra,2022-07-10T15:27:31Z,COMMENTED,"sorry for not replying sooner. we're trying to decide on the next steps (both the last commit, but also about adding a way to register configs). i opened an issue to discuss that, #10959. let's proceed here once it's decided there.",-1,0.9895479679107666
1055594595,9320,oranagra,2022-08-02T17:29:29Z,COMMENTED,"it's not that the sentinel timer is called before the listeners are initialized, it's that `tlsinit` used to be outside the `if (!server.sentinel_mode)`..`else` block, and now `initlisteners` is inside (only executed for redis server case, and never for the sentinel case. in fact, in order to support tls as a loadable extension for sentinel, we now have to support modules in sentinel too, so we need to move the whole next block to before that `if`: [code block] the only other alternative is to decide we don't support loadable extensions for sentinel, just built in ones. your opinion?",0,0.9801095724105835
1068579421,9320,madolson,2022-08-10T18:24:52Z,COMMENTED,it's a lot more straightforward than i was expecting. just some minor comments. directionally it all seems good!,1,0.9826323986053467
1072658969,9320,yossigo,2022-08-15T13:38:50Z,COMMENTED,"this looks very good! i've added a few small comments/nit picks. other than that, i think this work is ready to be merged to unstable.",1,0.9910140633583069
830663847,9934,moticless,2021-12-13T20:13:01Z,COMMENTED,great initiative :),1,0.9894124865531921
870595504,9934,oranagra,2022-02-02T16:12:36Z,COMMENTED,"sorry it took me so much time the conversation was too long for me to read, and the top comment is well.... missing!. so i went in to read the code hiding / ignoring the current comments (made the code hard to read). aside from responding to my comments, please also update the top comment, mark any resolved threads as resolved, and please `@` mention me again in the pending threads, trying to sum up the pending decision in case the thread is really long. thank you.",-1,0.981806755065918
871787586,9934,oranagra,2022-02-03T12:43:44Z,APPROVED,"the code lgtm, we need to conclude the open discussion and re-run some benchmarks.",0,0.9853460788726807
884404722,9934,moticless,2022-02-16T11:37:31Z,APPROVED,thank you,1,0.7400884628295898
699918485,9202,zuiderkwast,2021-07-06T12:56:50Z,COMMENTED,"interesting. i didn't look very carefully but i have two comments: * documentation in redis is in the `.c` files, not in the `.h` files. * hiredis already contains a reply parser. it's a simple protocol, so maybe there is not problem to have one more parser, but it can be considered if we want to improve/refactor/export the one in hiredis instead.",0,0.535196840763092
705039684,9202,oranagra,2021-07-13T10:57:13Z,COMMENTED,"btw, did you add some loop in the test that runs the resp3 module tests in resp2 mode?",0,0.9899545907974243
707272942,9202,zuiderkwast,2021-07-15T12:11:24Z,COMMENTED,"i'm on vacation, so i don't have time to review. i trust you guys. :-)",1,0.990994393825531
707300678,9202,itamarhaber,2021-07-15T19:17:46Z,COMMENTED,"not a real cr, but rather a cr (comments style/syntax/typo review) :)",1,0.5692901015281677
705673457,9202,madolson,2021-07-15T21:53:52Z,COMMENTED,"i doubt i'm going to get much time to dive into this, but the high level apis look good to me. the only thing that crossed my mind is that the reply_parser seems like it could be re-used much more broadly.",1,0.633029580116272
720659419,9202,madolson,2021-08-02T23:19:36Z,DISMISSED,api looks good to me.,1,0.8686166405677795
841864892,9974,yossigo,2021-12-30T17:35:18Z,COMMENTED,looks good to me. did not do a very deep code review but i did play with that bit and it's cool. do you want to update the top comment with everything you have in mind that's still pending? i imagine there's a long tail and maybe we can parallelize this work somehow.,1,0.9888144135475159
851734298,9974,oranagra,2022-01-13T17:20:56Z,COMMENTED,"only looked at the narrow diff of the last two commits, so might have comments that are out of context or may be missing something. didn't review the tests.",0,0.8166549801826477
853649509,9974,oranagra,2022-01-16T09:33:38Z,COMMENTED,minor comments on last commit,0,0.9683102369308472
858672244,9974,yossigo,2022-01-20T18:48:14Z,APPROVED,"no cr, but played a bit with the latest version - lgtm!",0,0.6970400214195251
934120409,10273,oranagra,2022-04-06T20:47:37Z,COMMENTED,"lgtm. please add a better top comment before we call others to take a look. it should include some description of the purpose and design / decisions we already took. you can maybe copy some from this [a link]. also, in order to better judge this, it would be nice to look at what the user facing documentation is gonna look like, but maybe a detailed top comment can fill that place for now. please also add some todo list which states the status of the task and the remaining issues (like completing the data for all commands, providing module api, and writing docs.)",0,0.8978287577629089
1236083950,10273,oranagra,2023-01-04T17:18:30Z,COMMENTED,i expected this review to take longer :stuck_out_tongue:,-1,0.9866293668746948
735736405,9406,oranagra,2021-08-23T06:22:04Z,COMMENTED,"only after reviewing, i realized that this completely misses the request of being able to access the value from that notification callback. for that to work, the callback needs to be made in dbsyncdelete and dbasyncdelete before the call for dictunlink. but on the other hand, we can't afford to do that if the key doesn't exist, so it seems we'll have to add an additional `dictfind` that's only used if there's some module subscribed to that event. also, it's probably a good idea to add a test that shows that's working (rm_openkey getting the value)",0,0.7863687872886658
1128489534,9406,oranagra,2022-10-03T14:23:46Z,COMMENTED,i'll try to clone and branch and take a look at that robj* issue soon,0,0.9453890323638916
1158147618,9406,oranagra,2022-10-27T12:26:59Z,APPROVED,"lgtm, thanks!! minor suggestions.",1,0.9755852818489075
746912174,9462,oranagra,2021-09-06T07:34:52Z,COMMENTED,"code lgtm (with minor code style issues). i've briefly read the discussion in the issue, and the compromises you made seem ok. the one part that's not solved is the fact the request and some of the discussion was around tracking the full command processing + waiting time, and that's too complicated to handle. considering the low impact of this pr on both complexity and performance, i suppose we can take it even if the value is not as high as we wished. regarding the format, the only concern i have is what if we'll want to add more metrics in the future, like one that's including the blocked time for blocking commands. i.e. for normal command stats (total time) we can simply add more fields, but here if we wanna do that we need to add more sections.",0,0.838600218296051
747446951,9462,madolson,2021-09-07T00:02:08Z,COMMENTED,also looks like you're missing module init?,0,0.985571026802063
840967408,9462,ranshid,2021-12-28T15:56:57Z,COMMENTED,lgtm. i think touched most of the remaining issues. placed some small comments. but looks good. thank you for this!,1,0.9902517795562744
754959323,9504,oranagra,2021-09-15T12:36:55Z,COMMENTED,part one of the review. reviewed everything except the command table itself.,0,0.977616548538208
756942734,9504,madolson,2021-09-17T00:35:48Z,COMMENTED,some comments,0,0.9812830686569214
760183689,9504,madolson,2021-09-21T20:18:38Z,COMMENTED,"i think the acl code is correct, but adding tests for various cases like `- +config -config|get` work would probably be good.",0,0.9043101668357849
778931745,9504,oranagra,2021-10-13T18:50:55Z,COMMENTED,few more general notes: top comment is missing: - the new command list - mention renaming of the old allowed_subcommands and maybe some refactoring in acl.c extracting code to common functions - maybe make a specific section about breaking changes (specifically commandstats iirc) - mention it's now possible to do things like +config|get|appendonly in acl other todo: - need to update the acl topic in redis.io (both the categories and the sub-commands) - with some note about redis 7 and up maybe add a todo section in the top comment for that so we can track it's status later.,0,0.9478459358215332
781628874,9504,madolson,2021-10-18T06:32:06Z,COMMENTED,no other major comments from me,0,0.97735995054245
783116618,9504,yossigo,2021-10-19T18:08:30Z,APPROVED,"lgtm, only skimmed through the code - but concept and api make sense and look great.",1,0.9788036942481995
653606574,8887,oranagra,2021-05-06T16:52:01Z,COMMENTED,"thank you for that effort. i've added a few comments inside the code, but here are some general ones: 1. i don't like the term ""list container"". in ""ziplist"" and ""listpack"", we mention it is zipped, or packed, i.e. encoded. this container can be more easily mistaken to be something related to list data type rather than an encoding type. maybe a term like ""encoded list"" or ""packed list"" (i.e. something that is generic, and both ziplist and listpack comply to, i.e. both ziplist and listpack are encoded and packed). 2. currently we only create new hashes with listpack, and when modifying an existing hashes we'll always keep them as ziplists. we need to see if we can come up with a plan to gradually convert them. i.e. i don't want an o(n) operation at load time or any other time, but eventually i want them all gone. 3. we have a problem with testing. the majority of the tests work by creating a new db from scratch, so the ziplist code is now mostly unreachable. maybe we need some debug sub-command that will tell redis to default to creating ziplists, and then run the entire testsuite in that mode (in the daily ci) i'm specifically worried about the corrupt-dump-fuzzer test. we either need to save an old rdb file in the assets folder, or let it run twice with that debug tweak i suggested.",1,0.9141020774841309
664176349,8887,oranagra,2021-05-20T10:09:49Z,COMMENTED,recent changes lgtm,0,0.9790297746658325
703552067,8887,oranagra,2021-07-11T08:15:27Z,COMMENTED,"i did a quick review of the recent changes to this pr (diff between old and new commits, i didn't yet re-review the diff with unstable). i assume they're mostly about deleting the common interface, reverting unnecessary changes (like all changes to ziplist.c/h and other complications we created when we considered a case were both can be present side by side at runtime). regarding the new corrupt payload test you added, is it related to the new assertions in lpentrysizeunsafe? did the fuzzer found it?",0,0.979882001876831
711454186,8887,oranagra,2021-07-22T06:38:28Z,COMMENTED,one last round of top to bottom review...,0,0.825427770614624
1116755662,11303,zuiderkwast,2022-09-22T12:54:09Z,COMMENTED,"looks good! this is a quick review, i.e. i didn't check the correctness of everything. i assume you made sure everything is covered by tests.",1,0.9803805947303772
1137106741,11303,oranagra,2022-10-11T12:52:05Z,COMMENTED,initial round of review (excluding the tests code) p.s. maybe add an example about the memory saving to the top comment (e.g. plain case of a list of 10 small numeric items),0,0.9842162728309631
1167214761,11303,oranagra,2022-11-03T15:52:21Z,APPROVED,lgtm. observation: * all the callers of listtypetryconversionwithargv are using list_conv_growing. * all callers that use list_conv_growing are using listtypetryconversionwithargv maybe we can rename listtypetryconversionwithargv to listtypetryconversionraw and add a wrapper called listtypetryconversionappend that doesn't take that `lct` argument.,0,0.9775570631027222
1167223424,11303,oranagra,2022-11-03T17:25:44Z,COMMENTED,"first time reviewing the tests. i see we're re-using leftover infrastructure from redis 3.0, it doesn't make a perfect match for us, but i guess it works ok and just missing some comments. please add some showcase example about memory savings in the top comment. i.e. some example case of a db with a ton of keys of 10 elements, and the % memory saving.",0,0.9473752379417419
1171303966,11303,madolson,2022-11-08T01:16:52Z,APPROVED,conceptually approve. assuming others did a deep review of the code.,0,0.9745373725891113
607686297,8621,madolson,2021-03-09T18:09:11Z,COMMENTED,"i didn't take a super deep look as this is still a draft, but looks consistent with what we talked about. /core-team might be useful to take a look now while this is in the early draft stage for how this solves the cluster pubsub scaling problem. the interesting bit is that it's introduce 2 new commands publishlocal and subscribelocal, which exist in their own namespaces. full suggestion is here: [a link]",0,0.9163609147071838
672627916,8621,madolson,2021-06-02T05:24:16Z,CHANGES_REQUESTED,"solid progress, i did look at everything except the tests.",0,0.5657117366790771
760308513,8621,madolson,2021-09-24T04:32:11Z,COMMENTED,"basically through everything, and it looks generally good, no major comments. i didn't fully grok all the tests, but they looked generally good. i will take one more look tomorrow to think through the test cases a bit more.",1,0.7773608565330505
795662583,8621,madolson,2021-11-04T03:43:19Z,COMMENTED,mostly lgtm,0,0.9801682233810425
804317214,8621,madolson,2021-11-12T00:53:37Z,COMMENTED,"lgtm, just a couple of minor things left. if you can update the top comment to outline all of the changes and discussions, i think we're good to ping the core group and get buy in now.",0,0.8163455128669739
826000518,8621,madolson,2021-12-08T04:35:32Z,APPROVED,"/core-team please take a look, especially if you think we should implement a pattern matching scheme for cluster mode.",0,0.9829545617103577
829612182,8621,oranagra,2021-12-12T11:07:56Z,COMMENTED,"lgtm (didn't review the code, just skimmed though some files). i suppose subscribing to patterns is useful, specifically if the pattern includes a tag. i.e. `subscribelocal {tag}-something*` i wouldn't say that it's a must-have (don't know enough of the use cases), but if we're gonna add it, i think we should add it now rather than later.",0,0.982943058013916
829636646,8621,yossigo,2021-12-12T14:55:29Z,APPROVED,"api lgtm, did not do a complete code review.",0,0.8725998997688293
839709693,8621,madolson,2021-12-24T03:03:54Z,COMMENTED,"minor wording comments, but other than that i think the new version lgtm.",0,0.9882776141166687
839959920,8621,madolson,2021-12-24T15:56:54Z,APPROVED,"lgtm. , missing your weigh in still.",0,0.7968756556510925
841719552,8621,soloestoy,2021-12-30T06:17:33Z,APPROVED,"approve the idea, didn't cr",0,0.9200184941291809
817946597,9656,oranagra,2021-11-29T15:55:52Z,COMMENTED,"didn't yet get to any of the c files, just skimmed over the json file.",0,0.9600437879562378
818860138,9656,oranagra,2021-11-30T11:56:07Z,COMMENTED,"i haven't really reviewed the python script, just skimmed though it.",0,0.8443882465362549
832928599,9656,yossigo,2021-12-15T14:54:18Z,APPROVED,"lgtm, only some issues with the module api which will move to a separate pr.",0,0.9880965948104858
1231864262,11659,madolson,2022-12-28T19:18:00Z,COMMENTED,"reposting some comments from the internal review, and a couple of other minor things i didn't see during my first high level review.",-1,0.763291597366333
1285984013,11659,madolson,2023-02-06T20:57:22Z,COMMENTED,didn't do a complete review since i don't think the previous comment about reprocessing was really addressed.,0,0.7550750970840454
1290474623,11659,ranshid,2023-02-09T09:16:34Z,COMMENTED,"i did a fast review. might not understand all cases and requirements, but it seems that making the effort to allow module command to keep reprocessing (via queueing and retry again) would be better way to tackle this. maybe stats handling and aggregated timeouts is the problematic part but maybe we can focus on that.",0,0.8978455066680908
1308337378,11659,madolson,2023-02-22T01:47:30Z,COMMENTED,test review,0,0.9786665439605713
1321340448,11659,oranagra,2023-03-02T10:59:50Z,COMMENTED,mostly lgtm. didn't review the tests code.,0,0.762998640537262
1335911032,11659,madolson,2023-03-11T17:43:13Z,COMMENTED,"really close, i noticed something else i would like to get your input on, other than that it lgtm.",0,0.7258535623550415
1340772714,11659,oranagra,2023-03-15T07:11:42Z,APPROVED,"i skimmed though the recent changes (not too deeply, and still skipping the tests), lgtm.",0,0.9783529043197632
1342469705,11659,madolson,2023-03-15T21:38:57Z,APPROVED,"did a review of the deltas, all lgtm as well.",0,0.9815473556518555
775670840,9572,oranagra,2021-10-10T13:46:05Z,COMMENTED,"i'd like to add quite a few tests. the obvious ones are the bugs mentioned in #6842, but probably quite a few other tests that verify the intended behavior so it won't be accidentally broken in the future.",0,0.9710493683815002
795620996,9572,itamarhaber,2021-11-02T16:04:44Z,APPROVED,"lgtm, didn't cr.",0,0.9408833384513855
812204531,9572,soloestoy,2021-11-22T08:29:23Z,APPROVED,"i don't agree with the changing about the expire on writable-replica part, but you can go ahead.",0,0.9692986607551575
814933520,9572,oranagra,2021-11-24T14:01:01Z,APPROVED,"let's merge this one. please rebase it (merge unstable into it). please respond to my last comment, and please briefly go over the code and top comment to see it's ready for merge. thank you!",1,0.9842972159385681
2561074712,13740,MeirShpilraien,2025-01-19T19:42:50Z,COMMENTED,:+1: -mon looks good. added some comments but please notice that i did not yet finished the review all the changes.,1,0.9844126105308533
2574154235,13740,ShooterIT,2025-01-27T08:19:51Z,COMMENTED,"interesting feature, but feel it also is dangerous, could i know more context about this feature and its usage. after acl, i think we would better not leave the plaintext password on redis side, of course, `masterauth` must be plaintext, but this has also been complained about by users, so is it possible that we don't persist internal secret which has super permission? besides, i noticed that you are using `//` comments instead of `/**/` comments. in the redis core, we use `/**/`, the original commenting style of c language.",0,0.7108281254768372
2581978574,13740,oranagra,2025-01-29T19:36:14Z,COMMENTED,i haven't reviewed the tests yet,0,0.9083782434463501
2583501460,13740,oranagra,2025-01-30T10:26:44Z,APPROVED,can you get someone else to review the tests?,0,0.9857286810874939
2589414480,13740,MeirShpilraien,2025-02-03T09:52:13Z,COMMENTED,:+1: added a few comments on the tests.,0,0.9169227480888367
2592076648,13740,MeirShpilraien,2025-02-04T08:27:27Z,COMMENTED,"almost there, 2 small comments.",0,0.9825153350830078
2592142968,13740,MeirShpilraien,2025-02-04T08:56:40Z,APPROVED,:+1:,0,0.7570654153823853
821315135,9872,bjosv,2021-12-02T10:31:33Z,COMMENTED,nice!,1,0.9834675192832947
832370537,9872,oranagra,2021-12-15T07:09:06Z,APPROVED,"/core-team please approve, see top comment for details.",0,0.9805821776390076
835797305,9872,itamarhaber,2021-12-18T19:29:58Z,APPROVED,"lgtm, not a cr, minor edits.",0,0.9882315993309021
837089773,9872,soloestoy,2021-12-21T07:18:16Z,APPROVED,"approve the idea, didn't cr",0,0.9200184941291809
942023339,10536,zuiderkwast,2022-04-14T09:37:44Z,COMMENTED,"i like the idea in general. regarding the form `ip:port,shard,hostname` (which is already a pretty strange format without shard), i have two incompatible suggestions: 1. since every part so far uses a different separator (`:@,`), we could pick yet another separator for shard-id, for example `$` (looks like s for shard). then, we could be able to parse these strings from 7.0 release candidates too (with hostname, without shard), so the format would be `ip:port[$shard][,hostname]`. 2. now might also be a good time to make this format future-proof in some way, so that more fields can be added without breaking old nodes and clients. for example, add an uri query string in the end `?shard=s98s98dus98du&something=foo&bla=bla` where unknown future keys can be safely ignored. wdyt?",1,0.9472640752792358
995630726,10536,madolson,2022-06-04T00:44:56Z,COMMENTED,the high level all makes sense.,0,0.9647621512413025
1012805435,10536,madolson,2022-06-20T23:27:04Z,COMMENTED,some minor nitpicky comments.,0,0.9548233151435852
1027660555,10536,madolson,2022-07-04T14:52:34Z,COMMENTED,"change lgtm, i think the only remaining question is what we want to do about making the nodes.conf more extensible for the moment.",0,0.9823645949363708
1097077951,10536,zuiderkwast,2022-09-06T09:27:51Z,COMMENTED,looks good. only minor suggestions. (i didn't read everything carefully.),1,0.9749131202697754
1106603958,10536,madolson,2022-09-14T00:46:54Z,APPROVED,"lgtm /core-team please review top comment for adding the new user visible `shard id`. note that on its own this change isn't strictly useful, but will be used as a building block for additional features including cluster v2 shard id as well as making sure replicas follow primaries correctly during slot migrations. we'll also be able to support the ""empty"" primary with replicas use case.",0,0.9804822206497192
1117479060,10536,yossigo,2022-09-22T18:03:52Z,COMMENTED,"lgtm, but i have only one comment (i quickly discussed it with as well). i think `cluster shards` is a client-oriented command (as opposed to an administrative command), and i don't see clients' value in getting a shard-id. it may not do much harm, but i think it's an unnecessary long-term commitment to an implementation detail. this point doesn't apply to `cluster nodes`, which is more admin oriented.",0,0.8382291197776794
1172713165,10536,yossigo,2022-11-08T19:22:38Z,APPROVED,lgtm.,0,0.9832575917243958
693902468,9127,oranagra,2021-06-29T06:39:32Z,COMMENTED,i'm not certain i understand what happens on upgrade. does the new feature work well after loading an rdb from an old version? p.s. didn't review the tests.,0,0.8429412245750427
779460632,9127,oranagra,2021-10-14T09:46:52Z,APPROVED,"mostly lgtm few minor suggestions and requests for clarification. i'm not an expert for streams, i'd like to take a look too.",0,0.9335169792175293
829659047,9127,yossigo,2021-12-12T19:04:27Z,APPROVED,"lgtm, approving feature and interface - did not do a code review.",0,0.9711648225784302
886226768,9127,oranagra,2022-02-17T16:27:29Z,APPROVED,"no other comments. (reviewed the diff from my previous review, only contained renaming and extra comments)",0,0.9857599139213562
891629381,9127,oranagra,2022-02-23T20:17:44Z,APPROVED,"looks like the top comment is outdated. at last about the new command arguments, but please verify other aspects.",0,0.9767085909843445
860208635,10108,oranagra,2022-01-22T16:50:00Z,COMMENTED,"seems nearly ready to me. iirc other than documentation, most comments are around keyspecs",1,0.5469594597816467
872325448,10108,itamarhaber,2022-02-03T19:37:44Z,APPROVED,lgtm && !cr,0,0.8647946119308472
1201572978,11568,oranagra,2022-12-01T19:51:08Z,COMMENTED,generally looks good. haven't reviewed the tests yet.,1,0.9088544249534607
1305377800,11568,ranshid,2023-02-20T10:43:51Z,COMMENTED,what will happen in case of pipelined module command which will attempt to trigger rm_call with blocking command? basically we could have more commands pending in the input buffer but i am not sure we have a way to turn back and process the input buffer (did i miss something?),0,0.9221752882003784
1305831370,11568,ranshid,2023-02-20T13:49:16Z,COMMENTED,maybe do a more explicit pipelining,0,0.9829466342926025
1340569133,11568,madolson,2023-03-15T03:17:13Z,COMMENTED,"looked over the server code and it was much simpler than expected, which is great! i'll try to take a deeper look over the code, but conceptually approving the pr for later.",1,0.9840891361236572
1357025836,11963,madolson,2023-03-24T16:19:16Z,COMMENTED,still strongly against this change. it feels like we're exposing metrics that are easily collectible instead of exposing information that is useful.,-1,0.663651168346405
1358045548,11963,oranagra,2023-03-26T15:28:59Z,COMMENTED,"i see few things i listed in the issue are missing, let's add them in the pr later on, after we're happy with the ones you already added.",0,0.9752741456031799
1378360130,11963,madolson,2023-04-11T02:36:06Z,COMMENTED,"i want to drop el_duration_type_io_read, el_duration_type_io_write, el_duration_type_cron, and el_duration_type_aof. i don't want to release complicated and half-baked information because we can.",0,0.9662873148918152
1396840550,11963,oranagra,2023-04-23T05:57:52Z,COMMENTED,"i went over all the unresolved comments in this doc, resolved that ones that are handled and left the few (minor) unresolved ones.",0,0.9785587787628174
874554368,9822,oranagra,2022-02-07T11:57:33Z,COMMENTED,"did an additional top to bottom review. please make sure the pr's top comment reflects was was done, and has an updated statement about the benchmarks you did.",0,0.977015495300293
888294198,9822,oranagra,2022-02-21T07:46:38Z,APPROVED,"some random comments (can be ignored), and small indentation fix. i think this one is ready to be merged.",0,0.9782553315162659
888812761,9822,yossigo,2022-02-21T15:16:09Z,APPROVED,"lgtm, some typos.",0,0.9886140823364258
1767568853,12822,oranagra,2023-12-06T13:46:37Z,COMMENTED,"i only lightly skimmed though it. mainly at the code that uses the array (code that remained in db.c, and other c files). i think the idea to move this to a generic data structure is good. i'd like to hear and opinions before going into deep review.",1,0.8411011695861816
1829957151,12822,oranagra,2024-01-18T20:52:17Z,COMMENTED,"i must say i really like this pr, it cleans a lot of things that looked really ugly in the previous approach, and become elegant and clean now.",1,0.7622435688972473
1840137840,12822,madolson,2024-01-24T00:17:28Z,COMMENTED,"i feel like the refactoring has grown on me, i didn't like it originally but i kind of like it now.",-1,0.7854651212692261
772228425,9564,madolson,2021-10-14T06:23:29Z,COMMENTED,"my original thought was that the node name could be assigned by an admin, say use the ec2 instance id or some type of container identifier. this isn't all that simpler, as we need to propagate it through the cluster. having an identifier that is composed of the ip + port could work as a simpler version of a user defined hostname. we don't need to persist the ip + port based nodename to the nodes.conf file, since we can derive it dynamically. i still think the admin defined codename is more useful, but i think we could go either way. i also thought it would be useful to print the ""codename"" in the logs wherever we print the 40 character hex identifier, since that can be hard to retroactively identify. this can be implemented regardless of how the codename is implemented.",0,0.9136292934417725
817239597,9564,madolson,2021-11-28T17:22:54Z,COMMENTED,i'll try to stay more ontop of this to see if we can merge this into 7.,0,0.9817925095558167
871305619,9564,madolson,2022-02-03T02:18:49Z,COMMENTED,looks mostly good. main comment i have is just making sure we're clear about the intention. i was thinking of it mostly as a debugging/human readable name that would be exposed in places like info and logging.,1,0.9450235366821289
938658628,9564,madolson,2022-04-11T22:29:06Z,COMMENTED,"lgtm now, only thing missing now is tests.",0,0.9857154488563538
1335907629,9564,madolson,2023-03-11T17:17:49Z,COMMENTED,"i think this got reverted to the original design you had proposed, which was more focused on an alternative version of nodename as an alternative to hostnames. was that intended?",0,0.9870738983154297
1375176252,9564,madolson,2023-04-06T17:01:36Z,COMMENTED,"looks pretty good, some minor comments.",1,0.8650336265563965
1386146698,9564,madolson,2023-04-14T20:36:44Z,COMMENTED,can you check the comment about the human nodename enum?,0,0.9893906712532043
1386726155,9564,oranagra,2023-04-16T08:02:41Z,COMMENTED,"comments just to be sure i understand it correctly. i.e. it's just a label of free text, right? and is only displayed in errors and the (admin oriented) cluster nodes command..",0,0.9836320877075195
959189076,10515,oranagra,2022-05-02T15:06:50Z,COMMENTED,"i think this approach of first tagging the arguments that are matched and then generating the hint for the reminder of the line based on these booleans is too limited. for instance, if the last match is a token which should be followed by a mandatory argument, we're unable (and won't be able) to handle it properly. for instance typing `set key value ex` should have hinted either only ` `. or adding `[nx | xx] [get]`, but currently it hints the `seconds` last and suggests you add nx after ex. i'd argue that this is worse than the previous one which was easy to see that got broken and stopped responding) here are a few examples i didn't like: ![a link] ![a link] ![a link] other lower priority thoughts that can be considered later: * what exactly do we do now for older servers (i didn't bother to check yet). * do we wanna re-generate help.h so that we can do fancy things even with older servers?",0,0.9152255654335022
983175688,10515,oranagra,2022-05-29T15:09:33Z,COMMENTED,few random comments (didn't review everything),0,0.6901485323905945
1003567320,10515,oranagra,2022-06-12T07:54:01Z,COMMENTED,"thank you. didn't review the code yet, but the testing it shows that everything is handled nicely. the one thing i noticed and not sure about is that when redis-cli works with an old server, we still have the old matching logic. i suppose that in order to improve that, we'll have to bundle something other than the plain old help.h. not sure we wanna proceed in that direction.",1,0.6632199883460999
1332888149,10515,zuiderkwast,2023-03-09T14:42:43Z,CHANGES_REQUESTED,"i did a superficial review of the redis-cli part. it's a lot of code, but in general the hints helper code is relatively isolated so it doesn't really hurt complexity of the rest of the cli code. since it's relatively isolated, i don't think we need to be too picky with the review of this code, as long as it works and the is well-tested. but maybe it can be moved to its own .c file? i'm concerned about including commands.c in redis-cli.c and the macros for modifying the internals of commands.c here, it's not nicely structured. i have an idea, see comment.",-1,0.8721576929092407
1074248900,10966,oranagra,2022-08-16T14:54:18Z,COMMENTED,not a full review.. just a quick look and questions / suggestion for alternatives.,0,0.8567880392074585
1088168842,10966,oranagra,2022-08-29T07:11:50Z,COMMENTED,p.s. haven't reviewed the tcl test code in detail.,0,0.9553821682929993
446847542,6929,oranagra,2020-07-12T06:26:06Z,COMMENTED,"thank you for this pr. i've added a few minor comments about the code. some suggestions about improving some tests, and trimming others.",1,0.9543138742446899
452901904,6929,madolson,2020-07-21T23:42:21Z,DISMISSED,there is also two comments in blocked.c that explicitly refers to brpoplpush that maybe should be renamed bxpopxpush,0,0.9863095283508301
501594406,6929,oranagra,2020-10-04T09:40:40Z,COMMENTED,"hi. thanks for coding it. i added some comments, but for the main one (how to propagate existing [b]rpoplpush i'm not sure yet. regarding your questions: - i see no problem adding fields to blockingstate struct - the reason to add command function to the server struct is if we want to refer to them somewhere, by comparing a function pointer, rather than doing string compare on argv[0]. so that's not needed in this case. - what you did with ""left"" and ""right"" string creation is ok (no leaks), the reason to create static objects is for efficiency. for instance instead of creating and destroying an ""ok"" string many times, we're re-using a static one. i think it makes sense to do that for ""left"" and ""right"" too. - what you did with `rewriteclientcommandvector` obviously works, but personally i rather avoid it (may break some day). the other usages of `rewriteclientcommandvector` are currently all for propagation, and not for the initial command execution. - i think we should keep the rpoplpush tests (most are quick and will be able to cover some compatibility issue). i suppose the new tests you added a covering the code well enough too (with the exception of using the old command ""alias""). bottom line, i think what you did with the tests is enough.",1,0.9224836826324463
502687028,6929,oranagra,2020-10-06T08:11:54Z,COMMENTED,all looks good. the only thing that may be missing is maybe add a test to cover the propagation of brpoplpush and blmove to aof or replicas. i see replication.tcl has these two tests: [code block] i guess these can be improved to look at the command stats to check which command was executed on the replica. and add similar tests for blmove. maybe move `proc cmdstat` from integration/introspection-2.tcl to support/util.tcl and use it in replication.tcl,1,0.9147109389305115
503565218,6929,oranagra,2020-10-07T06:48:53Z,COMMENTED,hope my changes actually work (not a tcl expert either),1,0.5149796009063721
646666714,8687,oranagra,2021-04-28T07:13:07Z,DISMISSED,conceptual approval (just asked for some minor cleanup),0,0.9874978065490723
734089996,8687,oranagra,2021-08-19T19:20:25Z,COMMENTED,"the top comment needs an update. the current discussion in it can remain below some separator, but i'd like to add a better description at the top that explain what the pr eventually does. i.e. purpose, design, and most importantly interface changes and any unrelated changes. the ones i listed during my review are these: - new config - explain the refactor of client_pending_read and io_threads_op (why and how) - c->pending_read_list_node - evicted_clients stat in info - new multi-mem in client list and client info, and also other existing client memory fields (previously untracked) - pubsub_patterns and pubsub_channels and parts of client_tracking_prefixes memory tracked in the above - client no-evict sub-command - client_close_asap handled in beforenextclient rather than beforesleep - anything else i missed?",0,0.9322154521942139
752100063,8687,oranagra,2021-09-12T07:16:34Z,APPROVED,"/core-team please approve, see detailed description at the top. new client sub-command fyi.",0,0.9838036894798279
758157039,8687,itamarhaber,2021-09-19T14:43:43Z,APPROVED,lgtm,0,0.9795994758605957
761060268,8687,yossigo,2021-09-22T15:14:17Z,APPROVED,"lgtm api and behavior wise, i looked quickly at the code but didn't trace every line.",0,0.978438138961792
359346307,6891,itamarhaber,2020-02-15T13:50:08Z,COMMENTED,"i like the enhancement, but i'm not sure about the implementation style. also, there are some edge cases, for example, `info default all` will return ""all"".",0,0.5729116797447205
779324193,6891,oranagra,2021-10-14T05:42:35Z,COMMENTED,"i always wanted to do that, so i do support the cause, but i don't like the implementation. it's nice that the implementation attempts to make a small diff by repeatedly calling genredisinfostring rather than modifying all the section checks in that function, but i think we have to go that way anyway since the current approach is limited. another thing to consider is backwards compatibility, in the sense of what would happen if someone tries to call `info memory replication` on an older version of redis. calling it with multiple arguments (or a single argument with spaces in it) will fail, so for many tools that manage redis servers and can't be sure which version they're talking to, using this feature is not an option.",-1,0.8140692114830017
806005453,6891,oranagra,2021-11-15T12:26:18Z,COMMENTED,"sorry about the delay. i must say i don't like this approach. the default sections are now defined in two places (both inside genredisinfostring and in the list in infocommand). normally, it has two loops on all the arguments (in infocommand), and then another loop on the dict it generates. and it calls genredisinfostring multiple times, each call ends up doing many string compares. what's nice about your approach is that you managed to do it without a single change to genredisinfostring, but i don't think that's a real concern. what i imagine should be done instead, is pass the dict to genredisinfostring (calling it only once), and change all the section checks in genredisinfostring to use dictfind. similar logic needs to be implemented in rm_infoaddsection (i already designed the api with that feature of multiple sections in mind). i think the two loops on `argc` can be unified into one, which will result in a dict and two boolean flags (`all` and `everything`, which will be passed to genredisinfostring as argument along side the dict). the list of `default` sections will be present only once in the source code (in infocommand), and will be added to the dict in case no arguments are provided, or the term ""default"" was specified. let me know what you think. p.s. your current approach won't play nice with modules, since rm_infoaddsection can include a certain section both by module name filter and section name filter (so there's a change the same section will appear twice if it is present in the dict twice)",-1,0.9892482161521912
829869899,6891,oranagra,2021-12-13T08:21:00Z,COMMENTED,"are you still working on this pr? it seems you where either unable to follow my advises or run into some problems that i didn't expect and can't figure out. do you wanna proceed or want me to try pick it up on my own? after investing the effort so far, i think we should carry it though.",0,0.9339718222618103
840094004,6891,oranagra,2021-12-26T16:03:16Z,COMMENTED,"i took a quick look. i didn't review the diff from last time (too much back and forth) but rather re-read the diff of the current version vs unstable. it's a little bit closer to what i suggested, but there are a few bugs, styling issues, and most importantly the handling of sentinel default sections and requested sections sanitization isn't what we agreed. i assume all the old comments can be dismissed now (please go over them and dismiss them unless you notice some observation that was forgotten) p.s. i suppose some tests are needed for both the happy path, and some edge cases.",0,0.8584475517272949
847260792,6891,oranagra,2022-01-09T15:23:50Z,COMMENTED,p.s. you're obviously missing some tests 8-),1,0.7606965899467468
849749888,6891,oranagra,2022-01-11T21:37:06Z,COMMENTED,looks better to me.. the sentinel separation comments are not applied yet.,1,0.639240562915802
873946699,6891,yossigo,2022-02-05T16:26:14Z,APPROVED,"lgtm, one potential optimization to consider.",0,0.9818528294563293
874037484,6891,itamarhaber,2022-02-06T13:16:53Z,APPROVED,lgtm,0,0.9795994758605957
875265481,6891,madolson,2022-02-07T22:06:59Z,APPROVED,"approve of the api, just some minor comments.",0,0.9833353757858276
570049479,8242,oranagra,2021-01-17T12:30:06Z,COMMENTED,thank you few small comments and then we can merge this.,1,0.6524515151977539
571474886,8242,hwware,2021-01-19T17:22:40Z,DISMISSED,looks good to me,1,0.9669890999794006
771411927,9601,bjosv,2021-10-05T13:02:34Z,COMMENTED,nice!,1,0.9834675192832947
772584515,9601,oranagra,2021-10-06T15:34:50Z,COMMENTED,"thank you for that pr. this is very useful. please don't take my comments personally, i guess i'm emotional about the subject. the 3 main topics we need to discuss to continue are: 1. if there were actual bugs this uncovered. 2. if the changes could impact performance (even on non-modern, realistic system) 3. just discuss compilers and interesting edge cases for the fun of it.",1,0.9773754477500916
787524026,9601,oranagra,2021-10-24T15:41:27Z,COMMENTED,"i've reviewed the new (smaller) diff from unstable, and also the changes in the last commit, they're mostly lgtm. one last concern is if we conclude any of the fixes here really fixes a bug, we may want to backport it to older releases, there was a small insignificant leak in the cli that i don't think we care for. and some issue in sentinel for which i'm waiting for an analysis. other than that i think all the changes will not have any actual impact on redis. i would be happy if you can go over them and add notes to the top comment dividing them to groups according to type and impact.",1,0.6697450280189514
2034805724,13209,moticless,2024-05-04T13:07:40Z,COMMENTED,impressive job.,1,0.8927671313285828
1473723398,12209,oranagra,2023-06-11T14:58:03Z,COMMENTED,thanks. mostly lgtm>,1,0.8449721336364746
1485184025,12209,oranagra,2023-06-18T20:41:53Z,COMMENTED,"mostly lgtm, few requests for clarifications.",0,0.971861720085144
829637826,9890,oranagra,2021-12-12T15:34:07Z,COMMENTED,"with all these changes, i'm not sure the new mess is better than the old one. maybe it's just because the old code left many edge cases unhanded, and now we have explicit code to handle them. maybe it's because the old code was over simplistic, so it looked simple but it was an illusion... not saying we shouldn't proceed, just stating an observation.",-1,0.8384330868721008
837068882,9890,madolson,2021-12-21T06:44:06Z,APPROVED,agree it's not technically a breaking change.,0,0.9457651972770691
885040050,10293,yossigo,2022-02-16T19:25:55Z,COMMENTED,"i haven't looked at the details yet, will do shortly, but i want to point out a potential ambiguity using the term ""shard"". it has not been used by redis cluster until now, and in other contexts it has been used as either a synonym to ""cluster node"", or (as used in this pr), to describe a master and set of replicas sharing the same slots. to avoid confusion, i think we should avoid that using it here.",0,0.9699862599372864
894793976,10293,oranagra,2022-02-28T08:48:25Z,COMMENTED,top comment lgtm. didn't review the code.,0,0.8245441317558289
894823393,10293,zuiderkwast,2022-02-28T09:15:17Z,APPROVED,lgtm. minor unimportant suggestions only.,0,0.9442082047462463
894838953,10293,hpatro,2022-02-28T09:29:42Z,COMMENTED,"lgtm, thanks for the help.",1,0.8919949531555176
909808790,10293,oranagra,2022-03-15T08:22:55Z,APPROVED,approved in a core-team meeting. please merge away (and make sure the docs are updated too),0,0.9756656289100647
2062142154,13243,sundb,2024-05-17T00:49:30Z,APPROVED,we can ignore the failure in the fully ci. it's a known optinization.,0,0.9869356751441956
766488201,9530,yossigo,2021-09-29T11:21:42Z,COMMENTED,"i had a quick look at the code (don't consider it a full review yet) and have a couple of small comments. some other thoughts/questions: * you mention this is semi-breaking change, but iiuc if one enables hostnames and delivers extensions to old nodes they'll just be ignored resulting with inconsistent behavior but no other breakage - right? * i think there's something a bit confusing about the way extensions are implemented. on one hand it's a generic mechanism with a packet-level flag and extensions count. on the other hand, extensions specifically extend the gossip section. maybe we should consider going all the way to a more generic extensions mechanism? * the argument for extensions vs. new commands is atomicity of updates, but iiuc that's not the case when a node joins - it will initially receive information about other nodes without hostnames, and only later have hostnames propagated to it directly from other nodes.",0,0.6970703601837158
773430283,9530,madolson,2021-10-07T04:22:25Z,COMMENTED,"some thoughts that came to me, i'll fix them when i'm back and have access to my laptop.",0,0.9560298919677734
1567279745,12453,oranagra,2023-08-08T13:39:02Z,COMMENTED,"i loosely skimmed over it, gave a few comments.",0,0.9596582651138306
1604099419,12453,oranagra,2023-08-31T08:03:18Z,COMMENTED,"is the pr still a ""draft"" or can be marked as ready? did you run it against a full daily ci (all platforms)? please make sure the top comment is up to date (justification, design). please make sure to mention other changes we did (like sigalrm, etc). please add an example of how a crash log looks.",0,0.9847220778465271
1610340196,12453,oranagra,2023-09-05T07:37:29Z,APPROVED,"final set of some minor suggestions, and we're ready for merge.",0,0.9812678694725037
1613257691,12453,oranagra,2023-09-06T12:50:20Z,APPROVED,thanks. please also update the example in the top comment.,1,0.8163126111030579
1641034675,12453,yossigo,2023-09-24T10:57:21Z,COMMENTED,"following 's request to review this post merging, i added a few comments highlighting potential calls that are unsafe in a signal handler context. i think we need to be extra careful here because we can easily end up with problems that will only show up rarely and in the worst possible timing.",0,0.901280403137207
1139309462,11290,oranagra,2022-10-13T06:11:38Z,COMMENTED,"thank you for taking the time. here's my initial review (didn't look at the tests yet). there are a bunch of minor comments here, but also some critical ones about the efficiency (specifically of random picks in listpack, and about popping them out). p.s. eventually, this pr top comment should include some benchmark that mentions both memory savings and also throughput / latency costs.",1,0.9338497519493103
1168474873,11290,oranagra,2022-11-04T12:52:32Z,COMMENTED,lgtm,0,0.9795994758605957
1169381053,11290,oranagra,2022-11-05T08:42:11Z,COMMENTED,"lgtm, two questions: 1. are all the new code paths covered by the test suite? 2. maybe run some simple benchmarks to see that this is actually beneficial, and we're not missing something that causes this commit to become a degradation?",0,0.9713413715362549
1170575517,11290,oranagra,2022-11-07T15:10:27Z,APPROVED,reviewed the tests as well. lgtm.,0,0.9834643602371216
837305411,9938,itamarhaber,2021-12-21T11:04:49Z,APPROVED,api is ok imo,0,0.9831709265708923
838495771,9938,oranagra,2021-12-22T14:14:33Z,APPROVED,lgtm.. ptal,0,0.9842205047607422
839003949,9938,madolson,2021-12-23T05:03:00Z,APPROVED,"the new cluster test lgtm, also approving the two new api designs. left some other minor comments.",0,0.9867860674858093
839800012,9938,soloestoy,2021-12-24T08:10:14Z,APPROVED,"just one question, does it satisfy atomicity? the abort means rollback or just abort?",0,0.9827874898910522
561722918,8288,bjosv,2021-01-05T12:03:14Z,COMMENTED,nice!,1,0.9834675192832947
561922459,8288,oranagra,2021-01-05T16:22:22Z,COMMENTED,i did a quick review of the code (haven't reviewed the test yet). i added some minor comments. let's discuss the rest of the api and plans for the near future before we dive into the implementation details.,0,0.9755644798278809
570067737,8288,oranagra,2021-01-17T15:53:25Z,COMMENTED,"other than add, trim and iterator, do we need to expose any other apis for streams? i suppose the iterator can also be useful for single ""get"", but maybe we wanna expose a specific easy to use api for that? what about deletion? if we put aside consumer groups, i suppose with the addition of an explicit ""read"" (if we chose to add it), and a ""del"" we got streams covered, right?",0,0.9844452738761902
573698471,8288,oranagra,2021-01-21T20:17:57Z,COMMENTED,i really don't like all the change to zset.. but i guess there's no other way. 8-(,-1,0.9907087087631226
1717537097,12658,oranagra,2023-11-07T13:23:04Z,COMMENTED,thank you. i skimmed though it. hope my comments are not way off,1,0.9718404412269592
1740491990,12658,oranagra,2023-11-20T19:12:12Z,COMMENTED,please update the top comment,0,0.9860928654670715
823355179,9812,oranagra,2021-12-05T07:12:05Z,COMMENTED,mostly lgtm. -steinberg please take a look,0,0.8855264782905579
823356662,9812,oranagra,2021-12-05T07:14:47Z,COMMENTED,"ohh, i now realized that for some reason i only looked at the second commit. edited my comment.",0,0.8441908359527588
826494927,9812,oranagra,2021-12-08T14:19:44Z,COMMENTED,"reviewed the recent changes, mostly lgtm. i've asked yoav to help going over the list of tests you provided.",0,0.973053514957428
829624925,9812,oranagra,2021-12-12T13:14:30Z,COMMENTED,"i see the todo section still missing the work on rdb.c. -steinberg can you please take a look at the tests mentioned in [a link] i don't mind keeping a few extra ones, but let's make sure to at least delete the ones that are obviously useless now.",0,0.9710963368415833
831393857,9812,oranagra,2021-12-14T12:14:22Z,COMMENTED,"and ""multi propagation of script load"" i made some tiny changes on this case, instead of removing it. yes, i think that was the intention of that test. i.e. these few commands are handled a bit differently when replicated, so we wanna try running them inside an eval, and then watch the replication stream (e.g. with `attach_to_replication_stream` and `assert_replication_stream`) to make sure they were propagated correctly.",0,0.98637855052948
835800153,9812,itamarhaber,2021-12-18T20:17:40Z,APPROVED,removal of script replication gladly approved (not a cr),0,0.9815549254417419
836536567,9812,yossigo,2021-12-20T15:41:49Z,APPROVED,"list of changes in top comment lgtm, did not do a complete code review.",0,0.9540978074073792
1892026839,12826,enjoy-binbin,2024-02-21T03:47:35Z,COMMENTED,"i did some cleanup on last commit (hope you don't mind), mainly bool (we don't use bool in the codebase) and format. then i also tried playing it, the feature look good, just a brief review",1,0.6929382085800171
1927281638,12826,zuiderkwast,2024-03-11T09:16:28Z,APPROVED,"i think this is fine now. it's a lot of lines added and i didn't read all of them very carefully, but the code is isolated and doesn't affect the basic operation of redis-cli, so i think it's safe to merge. -binbin any comments? have you tested it?",0,0.8767969012260437
1930077561,12826,enjoy-binbin,2024-03-12T04:32:50Z,APPROVED,"i don’t have a very in-depth review, but looking at the output and the modified diff, the code is lgtm. yes, i think we can drop the check, it adds some code (which is good in generally) but is a bit overkill i think.",0,0.9159992933273315
1995746803,12826,sundb,2024-04-12T03:15:05Z,COMMENTED,overall looks good.,1,0.7877699732780457
2078816777,12826,sundb,2024-05-25T07:41:22Z,APPROVED,lgtm,0,0.9795994758605957
719214476,8974,itamarhaber,2021-07-30T15:45:41Z,DISMISSED,interface change approved - haven't cred.,0,0.965368926525116
719819084,8974,yossigo,2021-08-02T06:52:14Z,COMMENTED,"lgtm, added a few minor issues and some typo fixes. do we want an option to disable this? with the latest optimization it's harder to see where it may introduce a regression but that's still possible (e.g. systems where madvise is particularly slow, etc.).",0,0.9828287959098816
720662781,8974,madolson,2021-08-02T23:41:32Z,DISMISSED,"i don't see the harm in it, although i doubt it will be very impactful by the vast majority of workloads except for large strings.",0,0.9000518321990967
808233819,9780,yossigo,2021-11-17T08:02:00Z,APPROVED,"lgtm, but did not do a full code review of the latest version.",0,0.9859448671340942
812329251,9780,itamarhaber,2021-11-22T10:23:25Z,APPROVED,"approving the feature and api, did not do a code review.",0,0.9482979774475098
813253051,9780,madolson,2021-11-23T06:59:28Z,COMMENTED,"(sorry for random comments scattered, i was just making notes on stuff i saw. i mostly was trying to understand the interface. it looked good, so i trust the functionality is implemented as expected) i want to better understand why we think the right approach here is storing functions in the rdb as opposed to storing them in the conf file or a separate file. i view functions more analogous to acls than keyspace data, that they are properties of the cluster and not necessarily specific to the rdb data. this is basically completely broken for workloads without persistence, like caching, which seems relevant. i would expect having a well defined mechanism outside of the rdb to exist. also are we fixing this? [a link] for functions?",-1,0.9704697132110596
819049524,9780,oranagra,2021-11-30T13:47:14Z,APPROVED,recent changes lgtm. (other than pending discussion about function info vs function list),0,0.9860333800315857
821910982,9780,madolson,2021-12-02T19:04:25Z,APPROVED,"talked with over slack, and it seems like we're definitely going to make sure there is another strategy for making functions loadable at startup/cluster mode. so we can follow up on that issue.",0,0.9292207360267639
746635329,9309,oranagra,2021-09-05T10:19:08Z,APPROVED,"please take a look at the module api. let me know if you think the acl log should contain the module name or other context rather than just the word ""module"" same as we have ""toplevel"", ""multi"", and ""lua""",0,0.9838433861732483
752153457,9309,yossigo,2021-09-12T12:24:46Z,COMMENTED,"lgtm (after handling all open comments above). there is an issue with `redismodule_aclcheckkeypermissions`, which is going to be incompatible with the other acl enhancements we plan. in the future, acl selectors will specify ""commands on keys "" so checking key permissions without specifying a command is undefined. i think we can either add a command name argument or defer the decision and just avoid this function for now. including an api function that is going to become obsolete (hopefully) before redis 7 doesn't seem reasonable.",0,0.9737154245376587
758149231,9309,oranagra,2021-09-19T13:47:38Z,COMMENTED,changes lgtm,0,0.985706627368927
761106448,9309,madolson,2021-09-22T15:50:54Z,APPROVED,"looked through the rest of the changes, lgtm",0,0.9844036102294922
831452485,9940,oranagra,2021-12-14T12:54:19Z,COMMENTED,lgtm. ptal,0,0.9834824800491333
832690652,9940,yossigo,2021-12-15T11:27:43Z,COMMENTED,"lgtm, i agree with we should probably use a common function to make sure we properly reset client state (even if it's not a problem now, it can become a problem in the future).",0,0.9827557802200317
839062507,9940,yossigo,2021-12-23T07:00:47Z,APPROVED,"lgtm, i think this is a good optimization but one that could have potential hidden impact - any thoughts about it?",1,0.5596342086791992
840102097,9940,MeirShpilraien,2021-12-26T17:30:20Z,COMMENTED,"lgtm :+1: , small comments.",0,0.957241415977478
845452646,9940,oranagra,2022-01-06T09:58:39Z,APPROVED,"lgtm (didn't re-review the code in with much care though). posted some minor suggestions for cleanups / comments. i haven't been following this pr and the recent progress. so i see now we have no cap of the maximum number of items in the cache (was some 1k or so). instead, we have a cap for the minimum (32). i suppose that not having a max limit is fine, since it doesn't really matter if we release them immediately, or shortly after. but maybe the cron mechanism should be slightly smarter. i.e. in case there's a burst of 1000 clients, and no use later. it'll take it 10 seconds to delete them, right? and in case there's no more use of these at all, we're still left with the 32 forever. maybe there could be some much smarter but yet simple algorithm instead? one that watches the max re-used since the last cron (lowest value of `moduletempclientcount`, and does some logarithmic release? if we do that, we might not mind removing the lower cap of 32 too? i.e. if we release just one per second, we don't care that after 32 seconds we're left with 0 (when we know they're completely unused). i didn't try to think of such algorithm, but i imagine it could be a very simple formula.",0,0.9439497590065002
1217569014,11248,oranagra,2022-12-14T15:08:38Z,COMMENTED,"sorry for the delay, meant to review that long ago, but been too busy. i'm not certain i understand your last post. did you mean that this has no value in newer kernels? or just that it doesn't fully solve the problem on old ones?",-1,0.9880425930023193
1264762227,11248,oranagra,2023-01-22T12:39:25Z,APPROVED,"please approve the use of an additional system call, the detection change in the makefile, and the logging on errors.",0,0.9860705733299255
1266812489,11248,yossigo,2023-01-24T06:11:27Z,COMMENTED,"lgtm, only a minor comment about detecting `posix_fadvise()`. we should also consider adding at least some basic smoke tests to validate this mechanism.",0,0.9884963035583496
586031483,8474,madolson,2021-02-09T00:25:09Z,COMMENTED,thanks!,1,0.9308210611343384
596937614,8474,madolson,2021-02-24T00:47:33Z,DISMISSED,"update lgtm, still waiting on the major change decision.",0,0.9849470853805542
616992007,8474,oranagra,2021-03-21T07:52:58Z,DISMISSED,"/core-team please approve. this pr changes the propagation of expire times to replicas to always contains absolute times. additionally, it adds two new commands expiretime and pexpiretime (to get absolute expire time of a key). besides that, i suppose this is all belongs to redis 7.0 (both the new commands and the refactory), i think we should merge it to unstable only once unstable moves away from 6.2. otherwise, cherry picks to 6.2 will be harder and more dangerous.",0,0.9438658952713013
618164727,8474,madolson,2021-03-23T02:56:06Z,DISMISSED,lgtm agree about waiting to merge.,0,0.984092116355896
556171522,8217,oranagra,2020-12-21T08:56:09Z,COMMENTED,"thanks for this pr. i added a few comments about the implementation, but maybe we should first discuss the key features here. as we've established, there are generally two groups of errors, ones that are handled in processcommand and ones that happen inside the command code itself. do we intend to cover only the first group? or also the second? if we intend to extend this feature to match other types of errors, it's probably wrong to do an if-else chain of calls to `strncmp`, and then a lookup in a dict (or an enum lookup into an array). maybe we should have a rax in which we can search by prefix, and implicitly support all type of errors. i think it would be nice to examine this feature after adding a few more errors as an example (like oom, wrongtype, noscript, loading, busy, busykey. one thing we'll soon discover is that many of these are being used with a simple addreply (so we don't even have them on our radar).",1,0.9037567973136902
559356184,8217,madolson,2020-12-29T02:36:55Z,DISMISSED,"my approval is for the new api syntax, i would still like to fix some of the minor comments.",0,0.9595597982406616
560099117,8217,yossigo,2020-12-30T15:43:47Z,DISMISSED,"i'm not a great fan of the current approach of using arbitrary textual errors everywhere, and would be much happier if we had all possible error codes enumerated and mapped to error codes in one place (perhaps with the exception of modules). in that case we could also avoid the text manipulation and rax which could end up be a bit more efficient. that said, i doubt that performance is really an issue here ( you can probably verify that in a breeze). everything else is a matter of personal taste and i don't feel that strongly about it - so +1.",-1,0.7600913643836975
858732031,10061,oranagra,2022-01-20T20:19:59Z,COMMENTED,"there's quite a lot of refactoring here, which is good since the old code was out of shape. maybe though some of this refactoring could have been left aside for another chance (like the `process` function which i'm not sure why you had to refactor). additionally, if we already do so much work here, let's try to further improve. specifically i feel some doc comments are still missing.",0,0.8513920903205872
884815178,10061,oranagra,2022-02-16T16:52:28Z,APPROVED,lgtm.,0,0.9832575917243958
860286577,10127,yossigo,2022-01-23T07:40:18Z,APPROVED,"lgtm (based on top comment, did not cr).",0,0.9860273599624634
727659338,9356,madolson,2021-08-11T16:13:41Z,COMMENTED,implementation looks solid!,1,0.9276298880577087
729249109,9356,madolson,2021-08-13T04:27:19Z,APPROVED,does this help make it more concrete what the value of the metadata is?,0,0.9826275706291199
729502432,9356,oranagra,2021-08-13T11:17:20Z,APPROVED,"lgtm, few minor suggestions for improvement.",0,0.9761021137237549
737417332,9356,yossigo,2021-08-24T16:03:19Z,APPROVED,"have only quickly looked at the code, but lgtm.",0,0.9844614863395691
1091527885,11193,oranagra,2022-08-31T09:24:17Z,COMMENTED,"regardless of the implementation details, i think we need to address these topics: 1. is a configuration at all needed, i don't think so. 2. maybe flushall / flushdb commands can implicitly use lazy free now (blocking the caller till done), even if async wasn't provided. 3. what happens with lazy-free-eviction? i think the hole concept of lazy-free in eviction is a huge bug, i'm not sure if we want to fix it, but we should access the impact of this change on it, and if it's negative, maybe we can prevent it from being active in that case.",-1,0.7196739315986633
1172221232,11193,oranagra,2022-11-08T14:25:14Z,APPROVED,/core-team please have a look at the top comment and tell me if you have any thoughts or concerns.,0,0.958396315574646
1189748180,11193,oranagra,2022-11-22T10:14:01Z,COMMENTED,"i'm not sure i'm a fan of the last commit. i was aiming for just separating the `if` that decides which action to take, from the `if` that does the time tracking start/stop (like we do elsewhere). what you did was to improve the blocking infra to support time tracking for all blocking, but the cost is that: 1. currently it's inaccurate 2. it's a bit odd to see other similar metrics (for defrag and oom) work completely different.",-1,0.9668486714363098
848632292,9963,madolson,2022-01-11T06:14:54Z,COMMENTED,love the api idea.,1,0.9641735553741455
856023166,9963,itamarhaber,2022-01-18T22:01:31Z,APPROVED,!cr,1,0.49812373518943787
856176639,9963,madolson,2022-01-19T02:41:22Z,COMMENTED,"i don't think we need a new blocked_yield, this should work as expected.",0,0.9835878610610962
1795881301,12817,oranagra,2023-12-26T10:51:25Z,COMMENTED,do we wanna run the threads sanitizer in ci (to prevent regressions in this area)?,0,0.9885520935058594
812407717,9748,itamarhaber,2021-11-22T11:39:30Z,APPROVED,"changed approved, code unreviewed.",0,0.9734982252120972
840110287,10004,oranagra,2021-12-26T21:53:42Z,COMMENTED,"one concern i have about naming, is the use of the term ""library"" without a context. in the past i argued the same about ""engine"". the term ""function"" is a lost cause (in the context of redis, a ""function"" is a ""script function"". but maybe ""library"" should be called ""functions library"" (or ""functionslib"")? same as we called ""engine"" a ""script engine""",0,0.9524192810058594
841839268,10004,yossigo,2021-12-30T10:59:10Z,COMMENTED,"lgtm, with one issue. perhaps we should completely eliminate `redis` from the namespace when handling the load run? i think it might help prevent some confusion if we just expose a single function creation function.",0,0.9857381582260132
842405843,10004,itamarhaber,2022-01-02T11:53:40Z,APPROVED,"haven't cred, concept approved",0,0.9783851504325867
843112239,10004,madolson,2022-01-03T23:48:52Z,APPROVED,i reviewed the top level comment and read some of the code. i agree with all the decisions made.,0,0.9000965356826782
1091701588,11199,oranagra,2022-08-31T12:03:01Z,COMMENTED,"commenting on the todo comment on the top i'm in favor of this approach i'd like that, but it'll be a breaking change, so i think we should skip it. i don't think we should bother. i personally think that we should allow string dmc reads (useful for huge string), but we should error (rather than corrupt memory), in case the string is not sds encoded, and document that in this case the module should resort to a non dma read. i think it's right, until the day we want to allow propagating from a non-write keyspace notification (aka, key-miss), but i think that's probably an invalid use.",0,0.7383449077606201
1103454037,11199,yossigo,2022-09-12T04:02:39Z,COMMENTED,"i think this is a good direction to address the problem. i have a feeling there could be more edge cases we did not consider yet though. i don't think we can/should prevent modules from writing inside a notification hook, clearly documenting it is enough imho.",1,0.529865562915802
570085856,8315,oranagra,2021-01-18T12:53:57Z,COMMENTED,"i added some comments about this extra timeout in two places. i think in one we can either double the user's timeout, or we don't need it at all, and in the other (the case you mentioned), i don't think we need the extra at all. (maybe i'm missing something) first, let's add a test that covers this case. secondly, maybe that's an indication that the old master must never give up, it must wait for a reply from the replica (either success, error, or disconnection, and until it gets it, it'll wait forever). can you come up with another suggestion? yes, this should not cause harm, i added a comment with a suggestion on how to test it. i don't think we need it, i was mainly worried about the fact no one can communicate with that server at all. but maybe any call to replicaof (no one, or otherwise) will should abort it? why not do the unpause earlier? if it's just paranoia, maybe we should get over it. in practice, if we don't consider writable-replicas, then when the master is demoted, it is effectively in writes pause anyway, right?",0,0.9510575532913208
574905844,8315,oranagra,2021-01-24T08:15:48Z,DISMISSED,"/core-team please approve or comment. afaik the only thing that we're still on the fence with is whether the `to` and `abort` should be a sub-commands (and `to` accepts `any one` notation), or should it be possible to just do `failover` with no arguments, or `failover start`, etc.",0,0.9880667924880981
574911986,8315,yossigo,2021-01-24T09:38:27Z,DISMISSED,"i think i'm happier with an optional `to`, mainly because i think in most cases users will have a single replica anyway.",1,0.6208721995353699
576044333,8315,oranagra,2021-01-26T05:57:00Z,COMMENTED,minor comments. everything else lgtm. i suppose a redis-doc pr is needed next.,0,0.9841490387916565
552524742,8170,oranagra,2020-12-15T15:24:43Z,COMMENTED,"active expire, eviction and replication ping are already covered by clientsarepaused. but we now have a complicated problem with lazy expire. i suppose we can just keep the key (avoid deleting it) and report that it's missing. lazy expire will find it again after the pause is released. some points from the cr that may get lost in the comments so i'll repeat them shortly: 1. we need to allow non-write commands like ping, config, but block eval 2. we need to prevent pfcount from doing conversion and propagation. 3. we need to reflect the ro flag to rm_avoidreplicatraffic",0,0.9473247528076172
561747871,8170,oranagra,2021-01-05T13:06:21Z,COMMENTED,"i've reviewed the recent changes, and then also re-reviewed the whole thing. i added a few minor comments (suggestions for cleanup, or fixing typo bugs). after fixing these, i guess we're good to merge. or at least summon the core team's review (do note that they're somewhat non-responsive ;) to prepare for that, please update the top comment to reflect all the changes, so it can be used as a commit comment. the things i see that should be listed are: - new can-replicate flag in the command table - new client pause write command argument - new client unpause command - new flag to command command: ""can_replicate"" - in addition to all the existing effects of pause we now skip: - replconf getack to replicas - lazy expire please also prepare a redis-doc pr.",0,0.8417297601699829
562031148,8170,JimB123,2021-01-05T20:02:02Z,COMMENTED,much better than spinning the event loop while clients are paused.,0,0.9565593004226685
562375699,8170,oranagra,2021-01-06T07:30:25Z,DISMISSED,lgtm repeating what i said here: [a link],0,0.9824156165122986
563463257,8170,yossigo,2021-01-07T12:56:45Z,DISMISSED,"interface and concept lgtm, but only went through the code briefly.",0,0.9890522360801697
563617156,8170,itamarhaber,2021-01-07T16:11:37Z,DISMISSED,"the api looks good, but didn't dive too deep into the code.",1,0.5713955163955688
842665578,10043,oranagra,2022-01-03T15:50:07Z,COMMENTED,"i did a sloppy initial review (only looking at the diff, without being familiar of the code that uses it). can't afford to spend much more time on that right now, so i figured raw feedback is better than nothing.",-1,0.8601809144020081
872909625,10043,oranagra,2022-02-04T10:28:17Z,COMMENTED,just a quick skim though the recent changes.,0,0.9733440279960632
873930327,10043,oranagra,2022-02-05T14:05:26Z,COMMENTED,"for the record, some tests i did (with valgrind). * run it against latest server and against old server. * added to both servers some commands that don't exist in help.h, and verified they show in `help` and in completion hints. * run it with and without `-3` * verified the help `@ ` is working the only problem i could spot (which may not be an issue), is that when using help.h (on old server) we show the `since` field, but when using command docs (new server) we don't. it's logical since when we use command docs we show only the ones actually supported. but since the users can't distinguish between these modes, i now think it'll be nicer to show it in both modes.",0,0.9691994190216064
570005166,8324,oranagra,2021-01-17T08:56:35Z,COMMENTED,i assume you compared the first 7 fields of command output to the previous version and saw that their identical for all command (except for the few which were buggy). right? p.s. did you run valgrind?,0,0.9872150421142578
572077452,8324,itamarhaber,2021-01-20T10:26:48Z,DISMISSED,i approve of the approach - haven't done a cr though,0,0.96723872423172
576913212,8324,madolson,2021-01-27T03:07:57Z,COMMENTED,"i have a high level of question of why do we have flags related to the keyspecs? i was meandering through some clients and i couldn't figure out where you would differentiate the read/write path. i thought about client side caching, but this doesn't give us enough introspection to use it for that case. it doesn't add a lot of overhead, but unclear why we want to maintain it. i'm good with the change as long as we've thought through why we're sending extra information to clients.",0,0.8199377059936523
738743419,8324,oranagra,2021-08-26T06:12:04Z,COMMENTED,"can you remind me what tests did we perform to see that the specs we filled are correct? we can match the old output of command to the new one and see that the legacy spec is ok. but maybe there's something else we can do? by matching the output of getkeys to what this extracts? i.e. write some test that implements what we expect a client to implement based on the specs, then somehow compare the result of that with getkeys on either a hard coded list of commands, or some fuzzer?",0,0.9835559725761414
752160501,8324,yossigo,2021-09-12T13:38:46Z,APPROVED,"lgtm. re-reading this after several months, i realize we may need to include pseudo code for the key spec handling, or better yet - provide a reference implementation.",0,0.9838554263114929
1827646066,12913,oranagra,2024-01-17T16:02:48Z,COMMENTED,"good idea. but i think i'd like a few changes: 1. i don't think we need to have separate metric for the expires dict and the main one, we can count them together in the same metric. 2. i'd like another metric to count the overhead of the rehashing (i.e. the total memory used by `ht[0]` in dicts that also have `ht[1]`) wdyt?",1,0.9033611416816711
1843538063,12913,oranagra,2024-01-25T11:54:52Z,COMMENTED,/core-team please approve the new metrics for info memory and memory stats,0,0.9617956876754761
1895222982,12913,oranagra,2024-02-22T08:31:11Z,APPROVED,"just realized that in test ""redis can resize empty dict"" in other.tcl, it is assumed that memory stats shows only the overhead of non-empty dbs. but now all dbs' overhead is displayed and so we need to change the test. i see the test passes, what do you mean? the deletion of this? [code block] or do you mean we need another way to distinguish between empty and non empty dicts?",0,0.9842140674591064
1900672185,12913,soloestoy,2024-02-26T11:45:11Z,APPROVED,please approve the new naming `database.dict.rehashing.count` and the change about `kvstorememusage`,0,0.9851611852645874
1899653951,12913,oranagra,2024-02-26T12:24:04Z,COMMENTED,"i'm ok with the new name. please update the top comment, and prepare a redis-doc pr",0,0.9729228615760803
1908629187,12913,oranagra,2024-02-29T11:29:20Z,APPROVED,lgtm,0,0.9795994758605957
1248266538,11708,madolson,2023-01-13T18:38:45Z,APPROVED,nitpicks,0,0.9837733507156372
1261656845,11708,oranagra,2023-01-19T13:49:01Z,COMMENTED,i'd like to take a quick look,0,0.8908290266990662
1349442402,11708,madolson,2023-03-20T21:45:12Z,COMMENTED,"some minor documentation updates, will just commit them.",0,0.9875499606132507
1349574425,11708,madolson,2023-03-21T00:51:55Z,APPROVED,"tweaked top level comment, and some other minor wording suggestions which i will apply.",0,0.9866645336151123
1434198222,12192,zuiderkwast,2023-05-19T10:38:51Z,COMMENTED,lgtm. i like moved with slot = -1. i think it is intuitive.,1,0.8773945569992065
570731013,8327,oranagra,2021-01-18T20:05:43Z,COMMENTED,thanks for this pr. added a few comments that should be trivial to solve. the only one that would probably require some work is about not propagating absolute expire times to replicas.,1,0.9118247628211975
571188265,8327,oranagra,2021-01-19T13:20:58Z,COMMENTED,i think we must add specific tests for the replication and aof propagation of all the getex variants. including: 1. making sure getex with no arguments isn't propagated 2. use of persist 3. ex/px/exat/pxat 4. del,0,0.9871885180473328
572163356,8327,oranagra,2021-01-20T12:50:06Z,COMMENTED,minor suggestions for improvements and then i think this is ready to be merged.,0,0.9789298176765442
572460697,8327,madolson,2021-01-20T17:37:59Z,DISMISSED,still good with the api,0,0.7542468309402466
1245601161,11595,oranagra,2023-01-12T15:09:36Z,COMMENTED,"i'm not sure what that benchmark does and if it's sufficient. maybe we have to do some benchmarks manually. * impact on string keys * impact on hashs (large ones that are dict encoded) * impact on sets (large ones that are dict encoded) * would be nice to see both a case of a relatively constant set, vs one that keeps growing and growing.",0,0.8595809936523438
1532631571,12416,oranagra,2023-07-17T12:26:23Z,COMMENTED,thank you for the pr. added a few notes to consider. not sure what's the best approach yet.,1,0.5438469648361206
1683779135,12416,zuiderkwast,2023-10-18T02:19:11Z,COMMENTED,i like this api. it's very simple. i just hope nobody needs to use strings which are not redismodulestring. should we set `errno` in the error cases? we do that in some newly added apis but not in the older ones.,1,0.9782658219337463
757050620,9511,zuiderkwast,2021-09-17T04:45:05Z,COMMENTED,less syscalls seems like a good idea. i have some suggestions.,0,0.7531161308288574
758191641,9511,zuiderkwast,2021-09-19T22:27:16Z,APPROVED,nice! it's more clear now. all the calls to anetpipe look right.,1,0.9824924468994141
772381206,9511,oranagra,2021-10-06T09:23:30Z,APPROVED,lgtm. added a few comments to slightly improve readability. noted about a minor concern that can probably be dismissed.,0,0.9772499203681946
772653221,9511,oranagra,2021-10-06T12:49:30Z,APPROVED,lgtm.. if there are no other comments in the next few mins i'll merge it thank you both!,1,0.9859728813171387
1643545997,12611,enjoy-binbin,2023-09-26T07:29:36Z,COMMENTED,please update the top comment to mention the failure (or warning),0,0.9838749170303345
1644101890,12611,sundb,2023-09-26T12:06:47Z,APPROVED,"ltgm, thanks.",1,0.8702400922775269
1653087498,12611,shahsb,2023-10-02T16:36:31Z,COMMENTED,"done with my review. gave my review comments. i would like to see them as addressed, before i approve.",0,0.9458793997764587
1658157506,12611,shahsb,2023-10-04T17:32:03Z,APPROVED,approving.,0,0.9731205701828003
1663142209,12611,enjoy-binbin,2023-10-08T01:38:17Z,APPROVED,"looks good, oran will take a final review and merge it in a few days.",1,0.9395504593849182
805420850,9774,madolson,2021-11-14T03:17:28Z,COMMENTED,"still some thoughts on the other pr, but this one seems ok to me. we also need a change in redis.conf to describe the parameter.",0,0.9780890345573425
817043476,9774,madolson,2021-11-26T20:32:18Z,COMMENTED,lgtm otherwise.,0,0.9859126210212708
817207500,9774,oranagra,2021-11-28T12:56:51Z,COMMENTED,"i didn't review the majority of the code. just the parts related to the new interfaces. i suppose the feature is valid, but i'd like to argue about the default value for the config.",0,0.9798111319541931
831062050,9774,madolson,2021-12-14T06:30:04Z,APPROVED,"lgtm, /core-team back to ya'll for approval.",0,0.9706507325172424
831066496,9774,oranagra,2021-12-14T06:38:16Z,COMMENTED,one comment. otherwise lttm.,0,0.9800772666931152
831311787,9774,oranagra,2021-12-14T10:37:33Z,APPROVED,lgtm,0,0.9795994758605957
834432910,9774,yossigo,2021-12-16T18:00:55Z,APPROVED,"lgtm, no complete code review but i agree with the interface change and concept.",0,0.9269446134567261
834608151,9774,oranagra,2021-12-16T21:11:03Z,APPROVED,lgtm,0,0.9795994758605957
2377348324,13592,ShooterIT,2024-10-18T12:16:54Z,COMMENTED,"cool, this feature exactly is useful to help admin for find bigkey problems. i remember you implemented `sflush` command, do you update db keysizes info after flushing specific slot dict?",1,0.9489815831184387
671809268,9003,oranagra,2021-05-30T10:03:59Z,COMMENTED,sorry i wasn't paying close attention so far while you were investigating failures in this test. only now i bothered to read my test and remember what it was attempting to achieve.,-1,0.9850576519966125
678499680,9003,yoav-steinberg,2021-06-08T13:14:13Z,COMMENTED,optimization to read more from socket when desirable.,0,0.9832651615142822
683615327,9003,yoav-steinberg,2021-06-15T06:47:39Z,COMMENTED,comment on using `sdsavail` for updating `readlen`.,0,0.9869304895401001
683748698,9003,oranagra,2021-06-15T09:06:33Z,COMMENTED,"much of these recent changes aren't really doing anything (e.g. the one in scripting.c). we can consider them a cleanup, but maybe since this pr is already quite big and confusing, we wanna leave that cleanup for a separate pr? the one in tls.c seems to reveal another bug (again i think subject for another pr). wdyt?",0,0.883723258972168
683837073,9003,oranagra,2021-06-15T10:33:55Z,APPROVED,so are we all good to merge this now?,0,0.9429641366004944
1375409185,11907,madolson,2023-04-07T22:01:06Z,COMMENTED,"overall seems good, some minor suggestions.",1,0.4977124035358429
1422891285,11907,madolson,2023-05-11T16:16:53Z,COMMENTED,seems pretty complete. tests look high level ok. some stylistic and organizational comments mostly.,0,0.6553856134414673
1423594172,11907,madolson,2023-05-12T00:08:18Z,COMMENTED,"minor nitpicks left, going to just apply some of these.",0,0.9831910729408264
1424875181,11907,madolson,2023-05-12T17:04:51Z,APPROVED,code looks good to me now. /core-team here is a relatively small extension to pubsub that makes it easier to figure out what clients are registered. this came out of an issue we saw in aws were a user wasn't sure why pubsub was taking so long and they only had the raw counts and weren't sure which clients were listening. please review.,1,0.8822149634361267
1461233377,11907,yossigo,2023-06-04T15:04:46Z,COMMENTED,"hi , overall, it looks good to me. i'm not sure about the command interface, though. did you consider viewing it as an extension to `client list` instead of `pubsub`? 1. as an administrative/debugging command, it is more aligned with what `client` does overall. if we consider it a more user-facing command, in many cases, exposing client names and ips will be undesirable. 2. anyone looking for more than just the ip/id/name will have to do `client list` anyway, so it might be a better overall experience to have it all in one invocation.",1,0.9648521542549133
1728455259,12742,madolson,2023-11-14T01:12:15Z,COMMENTED,"see comment about naming, it would make this a lot easier to read the delta.",0,0.9414950609207153
1729176021,12742,oranagra,2023-11-14T08:48:04Z,COMMENTED,"i skimmed over the changes (skipping cluster.c/h and alike). i may be out of context here, i thought this pr was only about moving code around to different files, and that all the concepts were already previously agreed on, and it was just about re-doing it quickly and merging it. i didn't go over the list of commit comments, but if there are important details there (like new interfaces or new mechanisms, not just code shifts), please mention them in the top comment as well.",0,0.9757630825042725
1730245506,12742,madolson,2023-11-14T17:57:09Z,COMMENTED,actually done going through it all now.,0,0.9767356514930725
1740117282,12742,oranagra,2023-11-20T16:05:12Z,COMMENTED,please make sure the top comment is up to date (some things that are fact there are future plans),0,0.9797242879867554
1742501672,12742,madolson,2023-11-21T16:42:33Z,APPROVED,codewise lgtm,0,0.9886632561683655
953002403,10636,oranagra,2022-04-26T08:56:40Z,COMMENTED,"reviewed the part in zmalloc.c and the linuxtimewarnings function. missing warning suppression, and extraction of the log highlighting thing to a different pr.",0,0.984473466873169
973124063,10636,madolson,2022-05-15T04:37:08Z,APPROVED,seems reasonable.,0,0.9596874713897705
1049964036,10969,oranagra,2022-07-27T14:15:00Z,COMMENTED,"mostly lgtm, with a few requests for clarifications in the code. still i'm a bit scared to back port it.. but maybe with another set of eyes, and a few weeks in unstable...",-1,0.9839779734611511
1072084637,10969,yossigo,2022-08-14T13:35:18Z,APPROVED,"i agree this isn't a major decision, but it is bug fix that includes a breaking change and potential for undesired side effects so i vote for holding back on a backport at the moment.",0,0.9153354167938232
1135320237,10747,oranagra,2022-10-09T09:14:27Z,COMMENTED,"sorry for the delay.. let's revive it for merge in time for 7.2. i did one round of review (excluding tests), a closer look will be needed after these are addressed.",-1,0.9896643757820129
1152306493,10747,oranagra,2022-10-23T13:30:47Z,COMMENTED,"it's really hard for me to read the code and focus on the important things when there are so many white space issues, please fix them first. other than that, i have some actual comments about the command syntax and side effects of failed calls, so please address that across the board, and i'll take another look later.",-1,0.8676229119300842
678634201,8999,oranagra,2021-06-08T18:38:14Z,COMMENTED,"thank you. here's a last round of minor cleanups in the code and i think this can be merged. i must say that i was a bit overwhelmed by the test code and didn't fully review it. i added a suggestion to slightly improve the explanation at the top, hope it makes sense.",1,0.9446360468864441
679323934,8999,oranagra,2021-06-09T07:54:22Z,DISMISSED,thank you. added a few minor improvements to the text. /core-team i think this pr is ready to be merged. please approve the new interfaces.,1,0.9351736903190613
2319684734,13359,Nugine,2024-09-21T07:59:27Z,APPROVED,lgtm. see also [a link] the repo has [a link]. there is [a link] in it.,0,0.9885518550872803
2320124196,13359,oranagra,2024-09-22T07:12:28Z,COMMENTED,"so i think we can leave it there, wait for others' opinions. not sure i understand the question. are you considering if we need any compile time check or runtime check? i don't think we should assume anything, i prefer to keep supporting old compilers and hardware.",0,0.6914976835250854
540813805,8094,itamarhaber,2020-12-01T09:04:58Z,COMMENTED,"haven't completed my review yet, but here're a couple of trivialities. also, looks like some of the additions go well beyond 80-characters-per-line unwritten style guide.",0,0.893897533416748
545703310,8094,oranagra,2020-12-06T14:49:36Z,COMMENTED,"thank you for this pr. i think i've reviewed most of the code (excluding the tests). i have many comments, but i guess the most important one to address to consider if both geohashgetdistanceifinrectangle is considering the box inside the radius or the one bound is. hope i'm not talking nonsense.. i didn't study the topic enough and i have to move on. hope you can dismiss my concerns one way or another.",1,0.9769574403762817
547007019,8094,oranagra,2020-12-08T10:16:07Z,DISMISSED,"thank you. can you tell me something about the tests coverage and what was your approach when creating them? i.e. did you duplicate some of the georadius tests and changed them to use geosearch? i see you attempted to cover some of the syntax errors, but did you also try to test some box specific points? (i.e. search for points that are outside a circle but inside a big that has similar ""radius"")? or trying to create odd box shapes (non square ones)?",1,0.8911730051040649
1956841318,13169,siddarthkay,2024-03-25T04:13:20Z,APPROVED,"took a while, but looks good to me. thanks",1,0.9851446151733398
1956921324,13169,gingters,2024-03-25T05:55:03Z,APPROVED,lgtm,0,0.9795994758605957
1957022382,13169,tygoegmond,2024-03-25T07:31:36Z,APPROVED,:flexed_biceps:,0,0.8180949091911316
1957265929,13169,maiieul,2024-03-25T09:42:05Z,APPROVED,"i would have used mit, but lgtm :ok_hand:",0,0.9657813906669617
1957356558,13169,OutOfThisPlanet,2024-03-25T10:26:59Z,APPROVED,this change seems logical.,0,0.9639331698417664
1957881245,13169,XtremeOwnageDotCom,2024-03-25T14:19:06Z,APPROVED,lgtm,0,0.9795994758605957
1958449172,13169,ttshivhula,2024-03-25T18:03:33Z,APPROVED,lgtm solid stuff,0,0.808292806148529
1958466441,13169,nulldg,2024-03-25T18:13:20Z,APPROVED,lgtm :thumbs_up:,0,0.9097400903701782
1958479592,13169,jeroenhabets,2024-03-25T18:21:10Z,APPROVED,lgtm :thumbs_up:,0,0.9097400903701782
1958507699,13169,alujs,2024-03-25T18:37:22Z,APPROVED,lgtm,0,0.9795994758605957
1959064582,13169,chenyang8094,2024-03-26T00:36:28Z,APPROVED,lgtm,0,0.9795994758605957
1959144096,13169,zackarychapple,2024-03-26T01:52:26Z,APPROVED,a positive change,0,0.7408692836761475
1959146520,13169,zmzlois,2024-03-26T01:55:50Z,APPROVED,"looks good, please go ahead",1,0.8985600471496582
1959151469,13169,MVAodhan,2024-03-26T01:59:56Z,APPROVED,lgtm,0,0.9795994758605957
1959170804,13169,toan-kunaico,2024-03-26T02:20:19Z,APPROVED,lgtm,0,0.9795994758605957
1959239254,13169,JFiggz,2024-03-26T03:42:37Z,APPROVED,lgtm,0,0.9795994758605957
1959245788,13169,JDvorak,2024-03-26T03:52:24Z,APPROVED,lgtm,0,0.9795994758605957
1959324907,13169,gronxb,2024-03-26T05:07:03Z,APPROVED,lgtm,0,0.9795994758605957
1959366015,13169,Javlopez,2024-03-26T05:31:33Z,APPROVED,lgtm,0,0.9795994758605957
1959421157,13169,metecan,2024-03-26T06:19:20Z,APPROVED,lgtm!,1,0.7413927316665649
1959433029,13169,siddarthkay,2024-03-26T06:30:29Z,APPROVED,double approve for more justice,0,0.9698188304901123
1959672279,13169,spacey-sooty,2024-03-26T08:41:13Z,APPROVED,"great change, hope the redis team takes it on board!",1,0.991899847984314
1959842417,13169,dhruvdabhi101,2024-03-26T09:43:31Z,APPROVED,lgtm,0,0.9795994758605957
1960013634,13169,juanlouisr,2024-03-26T10:54:34Z,APPROVED,lgtm,0,0.9795994758605957
1960043561,13169,tiagorangel1,2024-03-26T11:08:01Z,COMMENTED,seems good!,1,0.9848282933235168
1960089617,13169,OfekShochat,2024-03-26T11:31:53Z,APPROVED,lfgtm,0,0.9804199934005737
1960151570,13169,ProdPreva1l,2024-03-26T12:01:09Z,APPROVED,"looks good, will merge soon! if only",1,0.9863195419311523
1960157617,13169,mavolty,2024-03-26T12:03:59Z,APPROVED,lgtm,0,0.9795994758605957
1960210872,13169,Elyytscha,2024-03-26T12:24:06Z,APPROVED,lgtm,0,0.9795994758605957
1960414717,13169,Nsttt,2024-03-26T13:37:48Z,APPROVED,lgtm,0,0.9795994758605957
1960679052,13169,bjosv,2024-03-26T14:53:17Z,APPROVED,lgtm!,1,0.7413927316665649
1960699820,13169,angelofallars,2024-03-26T14:57:23Z,APPROVED,looks good to me!,1,0.988797128200531
1960715716,13169,uncomfyhalomacro,2024-03-26T15:02:24Z,APPROVED,looks good to me :clapping_hands::clapping_hands::clapping_hands::clapping_hands::clapping_hands::partying_face:,1,0.9742957949638367
1960731624,13169,hopeseekr,2024-03-26T15:06:35Z,APPROVED,this pr is on the right side of history.,0,0.9831985831260681
1960801290,13169,hauptkern,2024-03-26T15:26:45Z,APPROVED,lgtm,0,0.9795994758605957
1960856404,13169,DaInfLoop,2024-03-26T15:43:10Z,APPROVED,lgtm,0,0.9795994758605957
1961018710,13169,sumants-dev,2024-03-26T16:24:03Z,APPROVED,lgtm :rocket:,0,0.91496741771698
711257168,2795,oranagra,2021-07-21T06:54:49Z,COMMENTED,"thank you for the efforts. i added a few comments. some are suggestion for improvements, others are open for discussion, let me know what you think.",1,0.9467416405677795
714294737,2795,oranagra,2021-07-25T09:29:47Z,COMMENTED,lgtm.. few minor suggestions for improvement.,0,0.9665974378585815
714794803,2795,yossigo,2021-07-26T12:49:25Z,DISMISSED,"lgtm, added a few minor typo/formatting comments.",0,0.9887425899505615
719699526,2795,madolson,2021-08-01T21:34:43Z,APPROVED,api and code lgtm.,0,0.988736093044281
517136014,7953,madolson,2020-10-27T04:37:21Z,COMMENTED,i'll take a deeper look through all the copying tomorrow but i added some high level comments. i think i fixed the test with this pr: [a link] redis acls are being simplified in weird ways.,-1,0.9762454628944397
518238530,7953,madolson,2020-10-28T00:51:20Z,CHANGES_REQUESTED,most of it reviewed now! generally looks good.,1,0.9764245748519897
525654640,7953,oranagra,2020-11-07T14:11:40Z,COMMENTED,haven't yet reviewed the streams code. i think the fix for debug digest and steams can be a separate pr. unless this one really needs it in order to validate correct result. maybe you can use xinfo full instead for now.,0,0.9817827343940735
525734652,7953,oranagra,2020-11-08T06:51:42Z,COMMENTED,"few more comments.. btw, it may be a good idea to move all the 'dupxxxxobject` functions to their respective type c files eventually. all this type specific logic sounds like it shouldn't be in object.c. but let's do that after we're done with the other comments, for an easier review of everyone involved.",0,0.8029360771179199
526715511,7953,madolson,2020-11-09T22:48:03Z,COMMENTED,"two minor things, but besides that lgtm.",0,0.9822386503219604
528481475,7953,oranagra,2020-11-11T19:53:58Z,COMMENTED,"i went over all the comments to check that we didn't forget anything, found another minor issue. other than that: 1. revert the additional ""del"" keyspace notification 2. and move all the ""dupxxxx"" functions to their respective c files. try to find the correct place in each c file for this kind of api (not part of the commands section), and make sure to give them the right prefix. please do this refactory in a separate commit, so it'll be easy to review actual changes. after that, i guess we're ready to merge this.",0,0.9615849256515503
511139531,7912,yossigo,2020-10-18T12:49:58Z,CHANGES_REQUESTED,thank you for this pr!,1,0.9760051369667053
521204084,7912,oranagra,2020-11-01T09:48:49Z,COMMENTED,i'm ok with the current api. let's wait a day to see if others raise some objections.,0,0.9693050384521484
522462624,7912,oranagra,2020-11-03T12:50:05Z,DISMISSED,commit title can be made a bit shorter. i'll handle that when squash-merging. thank you.,1,0.9269388318061829
527574682,7912,yossigo,2020-11-10T20:18:35Z,DISMISSED,"thank you not just for this pr, but also for your patience with this process! getting to an agreement on names and api interfaces is always a challenge (and don't get me wrong on this, it is for all the right reasons). i didn't get a chance to voice my opinion before. i totally agree with passing the key to `unlink`, but i don't think it's really necessary for `free_effort` (although not feeling strongly against it). i think you have a valid argument here, but i think that however we turn it the api will still end up with extra coupling. even if we expose `lazyfree_threshold` we still have this rigid contract that will be hard to break, and if we just let modules decide we lose all control. so, as none of the options is ideal i'd stick with this one which is simple. we do have to document it properly though.",1,0.9801267385482788
527781656,7912,madolson,2020-11-11T01:36:04Z,DISMISSED,"api lgtm, i did not look at the code much.",0,0.781680703163147
530796771,7912,itamarhaber,2020-11-15T13:03:02Z,APPROVED,haven't reviewed but...,0,0.5091241002082825
