id,pr_number,user,created_at,body,deberta_sentiment_label,deberta_confidence
627440957,835,Paul-Licameli,2021-05-06T13:52:48Z,"is the effect of this line to let any one of these libraries access the header files of any other one of the libraries? i see inclusions like: #include ""lib-string-utils/urlencode.h"" therefore lib-telemetry depends on lib-string-utils. you can also see that from its cmakelists.txt where it uses target_link_libraries. but what i'm hoping to do with the libraries i'm developing is avoid #include directives with more than one path component. and i think target_link_libraries will let you do just that -- shorten the #include path, so long as the library dependent on (here lib-string-utils) does not use private in target_sources. see my commit 45ff9419864c079cbd6f51cdd5e11f58ec882c30.",0,0.9851447343826294
627445357,835,crsib,2021-05-06T13:57:50Z,"this could be done in a different way, as well as the `*libname*api.h` i can change it if you want, no problem :hundred_points:",1,0.9822587966918945
627506072,835,Paul-Licameli,2021-05-06T15:05:50Z,you took the ctor out-of-line to avoid a nested header file. good!,1,0.9724074602127075
627506600,835,Paul-Licameli,2021-05-06T15:06:27Z,you figured out translatablestring::debug(). good!,1,0.9843758940696716
627510621,835,Paul-Licameli,2021-05-06T15:11:06Z,we aren't distinguishing a really failed import from the user cancelling it in the progress indicator. maybe that does not matter.,0,0.9643914699554443
627515066,835,Paul-Licameli,2021-05-06T15:16:26Z,q: how do you know this string is un-internationalized (to be consistent with other uses of reportbuiltinevent)? a: because of how we use type distinctions for strings!,0,0.9918448328971863
627535303,835,Paul-Licameli,2021-05-06T15:40:29Z,"what event to you think you are reporting? i think the effect is not necessarily ""selected"" interactively if we come to this line. it might be part of a macro invocation. i know people often master their tracks with macros. maybe that distinction does not matter, but comment at least what you really mean.",0,0.9860373139381409
627537546,835,Paul-Licameli,2021-05-06T15:43:22Z,"why is the opening of this one non-modal dialog important to report, but not the others (mixer board, karaoke, macro editor, contrast, history window)? just asking.",0,0.9672713875770569
627543880,835,Paul-Licameli,2021-05-06T15:50:24Z,i'd like this table and the enum definition to refer to each other in comments,0,0.9748952388763428
627626167,835,Paul-Licameli,2021-05-06T17:26:24Z,can i start another review? yes i can. this is just a test of github. and it seems you found a bug in a 3pl to fix with a null check. did it crash for you in testing?,0,0.9573037624359131
627756976,835,Be-ing,2021-05-06T20:52:38Z,this is too vague. tell users what is being collected and why.,0,0.5384990572929382
627762185,835,Be-ing,2021-05-06T21:01:37Z,"this url does not currently show a privacy policy. that should be online *before* merging this. moreover, a wall of legalese is not really sufficient for informed consent. there should be concise summaries of what information is being collected and why directly in the gui, not only on a webpage external to the application.",0,0.9745727777481079
627763498,835,Be-ing,2021-05-06T21:04:02Z,"be more specific [code block] what is ""etc""? be specific. list *all* the information that is collected.",0,0.9923011064529419
627764300,835,nemobis,2021-05-06T21:05:24Z,"""anonymous"" is unlikely to be correct. audacity cannot guarantee that google or yandex won't be able to link the user's ip address to their identity, so you'd better avoid making promises which might be seen as lies.",0,0.8748981952667236
627767257,835,nemobis,2021-05-06T21:11:00Z,"indeed. the privacy policy will probably need, among other things, to list yandex and google as sub-processors, state that the user's personal data will be sent outside the eu, and probably offer a dpo contact, in addition to the usual things. you can find instructions at [a link] [a link] spoiler: it's going to be practically impossible to respect gdpr and schrems ii if you use google.",0,0.944599449634552
627780325,835,tastytea,2021-05-06T21:35:31Z,"also, if the uuid is saved it is at best *pseudo*nymous.",0,0.919075071811676
627844475,835,xTibor,2021-05-07T00:20:11Z,"this seems to be a downscaled version of apple's ""chart with upwards trend (u+1f4c8)"" emoji according to emojipedia. i'm not a lawyer but i'm fairly sure you're not supposed to redistribute it under gpl.",0,0.9642848372459412
627870880,835,gohanko,2021-05-07T01:50:52Z,"however, if google or yandex says it's anonymous then the blame shifts to these corporations in case it turns out otherwise, which in this case saying that it's ""anonymous"" is correct.",0,0.9457266926765442
627903275,835,fangfufu,2021-05-07T03:41:50Z,"surely you need to include the privacy policy in the distributed software, rather than asking the user to view it? surely when i download a copy of audacity, i didn't agree to a copy of privacy policy that you can update at any time.",0,0.9699850082397461
627993755,835,fungiboletus,2021-05-07T07:36:22Z,i'm afraid you cannot claim anonymous tracking and do that in the same pull request.,-1,0.9150936603546143
627994491,835,PowerMan2206,2021-05-07T07:37:38Z,can someone translate what this does to english?,0,0.9927492141723633
627995654,835,Be-ing,2021-05-07T07:39:40Z,this is saving some sort of unique identifier of the user.,0,0.9932845830917358
627995927,835,ccoenen,2021-05-07T07:40:13Z,"even if this was removed, google could easily de-pseudonymize your ip. so anyone claiming ""it's anonymous"" just shows that they don't know what they are talking about or are intentionally deceiving you.",0,0.7446209788322449
627996939,835,y0tka,2021-05-07T07:41:57Z,google and yandex also track ip addresses on their side.,0,0.9923744797706604
628005925,835,dvzrv,2021-05-07T07:56:12Z,does this mean you will now create a release of audacity whenever [a link]? have you considered the security implications that you open the door for in this scenario?,0,0.9902252554893494
628006320,835,Be-ing,2021-05-07T07:56:50Z,vendoring curl?! of all dependencies? :scream:,-1,0.9189454317092896
628008821,835,dvzrv,2021-05-07T08:00:59Z,"this will not work on some linux distributions as it downloads sources during build (build systems do not allow internet connection during build). apart from that, this suffers from the [a link]: including custom sources where in reality you should build against a system provided version of the library",0,0.9564701914787292
628068662,835,IGBC,2021-05-07T09:34:07Z,"there is no mention here (as in the pr) to sqlite database corruption. as i mention in a comment these databases are peoples save files it. needs to be explicitly noted here that information about project files is collected. (or just scrap this whole pr, which is the better move)",0,0.9893876314163208
628076637,835,petterroea,2021-05-07T09:46:58Z,"this conveniently hides that the service provider, google analytics, can be assumed to collect ip addresses. this is personally identifiable information under gdpr. you should be clear about the third parties involved in this process.",0,0.9901942610740662
628156527,835,tastytea,2021-05-07T12:05:03Z,that's not how law usually works. and we already *know* that it's not anonymous. google is an advertising company.,0,0.9494178295135498
628295126,835,ri0t,2021-05-07T15:14:38Z,"oh, my. this story gets weirder the deeper one crawls. * some days ago, ""muse group buys audacity"" -> :confused: * a few days - nothing happens -> :cold_sweat: * fefe blogs about this pr -> :scream: * it's about ""embedding"" g**gle -> :angry: * you start digging and find friends already all over it -> :weary: * they dig out stuff like ***this*** -> :rage: :exploding_head: :boom: :meat_on_bone: :fried_shrimp: :bone: i am very, very disappointed, muse group. and sad. very sad, too. ------ in other recognition, thanks for pointing it out! it's pretty telling of the whole thing, i'd say....",-1,0.980618417263031
628398239,835,Be-ing,2021-05-07T17:43:11Z,"to be fair, audacity had a problematic practice of vendoring dependencies long before muse group got invovled.",0,0.7081741690635681
628413918,835,immibis,2021-05-07T18:11:18Z,liblib-foo?,0,0.9783995747566223
628415242,835,immibis,2021-05-07T18:13:45Z,web apis should not require cookies - they are unnecessarily complex. this reeks of bloat.,-1,0.9618383646011353
628419362,835,immibis,2021-05-07T18:21:19Z,i would guess they want to know how many people are using the spectrum feature specifically,0,0.972761869430542
628437539,835,xTibor,2021-05-07T18:55:16Z,this line seems to default the telemetry to be enabled when the config key doesn't exist. not having a config key is not a consent to be tracked.,0,0.9912546873092651
628470707,835,Qix-,2021-05-07T19:52:48Z,"fwiw i'm currently discussing this in the audacity discord with the op. ~~this appears to be a workaround for a ui bug, to be completely fair.~~ [a link] that is where the telemetry is being initialized - you can see it default to `false`. why it's `true` here is unclear and ~~i'm pushing for a proper comment explanation (or even better, a fix) to be added.~~ good catch here though. --- seems to be a copy-and-paste error that was made. it's set to be updated in a later commit, as i understand it.",1,0.9237600564956665
628500849,835,xTibor,2021-05-07T20:34:45Z,"the `wxos_unknown` return value of `getoperatingsystemid()` is not handled. in that case you'll end up here as `unix`, which is not correct.",0,0.9919420480728149
628504922,835,IGBC,2021-05-07T20:40:23Z,yea controversy aside this isn't even a well coded pr,0,0.546347439289093
628774985,835,xTibor,2021-05-08T17:24:00Z,"tabs -> spaces, as per the audacity coding standards docs. also at other places in this file. (please don't start a holy war about which one is better.)",0,0.8053455948829651
628775096,835,polyjitter,2021-05-08T17:25:17Z,"yeah, sure, a holy war about tabs and spaces. let's go with that",-1,0.8843948245048523
628776876,835,collinalexbell,2021-05-08T17:43:02Z,you are giving a review to code that will never reach production.,-1,0.6062036156654358
628777286,835,xTibor,2021-05-08T17:47:24Z,i'm just trying to show how bad quality it is.,-1,0.9568559527397156
628792423,835,xTibor,2021-05-08T20:22:26Z,"this doesn't seem correct. `getarchitecture()` gives you the bit-width of your architecture, not an exact intel instruction set. this will report for example audacity on arm as x86 or x64, giving you bogus telemetry info.",0,0.6570799350738525
628806502,835,BenBE,2021-05-08T23:01:29Z,"if the original curl release is used, why not simply take the one installed on the system?",0,0.9915522336959839
628806749,835,BenBE,2021-05-08T23:03:57Z,"if this is auto-generated, then why not generate it at build-time?",0,0.9888050556182861
628806847,835,BenBE,2021-05-08T23:06:00Z,"why is library example code replicated here, when only the library itself is needed?",0,0.985828161239624
628807072,835,BenBE,2021-05-08T23:08:56Z,those braces should indicate what opening element (namespace) they belong to.,0,0.9920646548271179
628807184,835,BenBE,2021-05-08T23:09:50Z,include lf @ eol. also indicate what those braces refer to syntactically.,0,0.9946693778038025
628807205,835,BenBE,2021-05-08T23:10:16Z,excessive semicolon.,-1,0.5721269249916077
628807269,835,BenBE,2021-05-08T23:10:50Z,lf @ eol.,0,0.9842858910560608
628807296,835,BenBE,2021-05-08T23:11:06Z,lf @ eol.,0,0.9842858910560608
628807304,835,BenBE,2021-05-08T23:11:25Z,lf @ eol.,0,0.9842858910560608
628807398,835,BenBE,2021-05-08T23:12:08Z,lf @ eol.,0,0.9842858910560608
628807428,835,BenBE,2021-05-08T23:12:42Z,lf @ eol.,0,0.9842858910560608
628807450,835,BenBE,2021-05-08T23:13:10Z,lf @ eol.,0,0.9842858910560608
628807489,835,BenBE,2021-05-08T23:13:50Z,lf @ eol. also should include a blank line before the closing braces for the namespaces.,0,0.9902907013893127
628807633,835,BenBE,2021-05-08T23:15:31Z,potential for integer overflow issues.,0,0.9542214870452881
628807643,835,BenBE,2021-05-08T23:15:46Z,lf @ eol.,0,0.9842858910560608
628807769,835,BenBE,2021-05-08T23:16:45Z,why traverse directory paths upwards instead of properly setting up the include path in the cmake configuration?,0,0.9723214507102966
628807781,835,BenBE,2021-05-08T23:17:00Z,indentation,0,0.9911677837371826
628807790,835,BenBE,2021-05-08T23:17:08Z,indentation,0,0.9911677837371826
628807809,835,BenBE,2021-05-08T23:17:25Z,indentation.,0,0.9784886837005615
628807816,835,BenBE,2021-05-08T23:17:34Z,lf @ eol.,0,0.9842858910560608
628807889,835,BenBE,2021-05-08T23:18:26Z,lf @ eol.,0,0.9842858910560608
628807929,835,BenBE,2021-05-08T23:19:09Z,lf @ eol. inconsistent with other files of this library regarding blank line between closing braces of namespaces.,0,0.9810513257980347
628807951,835,BenBE,2021-05-08T23:19:31Z,"lf @ eol. also should include a blank before the closing braces for the namespaces (and when opening them, before defining classes insdie the namespace).",0,0.9880886673927307
628808061,835,BenBE,2021-05-08T23:20:47Z,lf @ eol.,0,0.9842858910560608
628808075,835,BenBE,2021-05-08T23:21:09Z,lf @ eol.,0,0.9842858910560608
628808231,835,BenBE,2021-05-08T23:22:39Z,reinventing the wheel / nih syndrome: [a link],0,0.9899975657463074
628808256,835,BenBE,2021-05-08T23:23:01Z,lf @ eol.,0,0.9842858910560608
628808338,835,BenBE,2021-05-08T23:24:08Z,lf @ eol. also prefer blank lines after opening and before closing brace of namespace ...,0,0.9870960712432861
628808417,835,BenBE,2021-05-08T23:25:21Z,why not use function from curl for this task? smells like nih.,0,0.9896690249443054
628808659,835,BenBE,2021-05-08T23:28:48Z,"shouldn't you lock your internal state before modifying it for actual persistence? looks wrong. also this client id makes telemetry no longer anonymous, but at best pseudonymous. clear objection to this kind of telemetry from my side.",-1,0.9613972306251526
628808801,835,BenBE,2021-05-08T23:30:32Z,unchecked return value ...,0,0.9899564981460571
628809087,835,BenBE,2021-05-08T23:34:00Z,"claiming anonymity and also having some clear interface for user tracking purposes, doesn't go well together. especially when service providers are known to heavily mine data ""entrusted"" to them.",0,0.5743290185928345
628809293,835,BenBE,2021-05-08T23:36:34Z,lf @ eol.,0,0.9842858910560608
628809311,835,BenBE,2021-05-08T23:36:49Z,lf @ eol.,0,0.9842858910560608
628809317,835,BenBE,2021-05-08T23:37:01Z,lf @ eol.,0,0.9842858910560608
628809322,835,BenBE,2021-05-08T23:37:14Z,lf @ eol.,0,0.9842858910560608
628809406,835,BenBE,2021-05-08T23:38:31Z,reaching this comment while reviewing i already need my second hand to count review comments ... in binary ...,0,0.9878306984901428
628809435,835,BenBE,2021-05-08T23:38:51Z,lf @ eol.,0,0.9842858910560608
628809438,835,BenBE,2021-05-08T23:39:02Z,lf @ eol.,0,0.9842858910560608
628809462,835,BenBE,2021-05-08T23:39:18Z,lf @ eol.,0,0.9842858910560608
628809469,835,BenBE,2021-05-08T23:39:31Z,lf @ eol.,0,0.9842858910560608
628809473,835,BenBE,2021-05-08T23:39:40Z,lf @ eol.,0,0.9842858910560608
628809616,835,BenBE,2021-05-08T23:41:35Z,shouldn't this normally be `const std::function & callback`?,0,0.9937852621078491
628809655,835,BenBE,2021-05-08T23:41:49Z,lf @ eol.,0,0.9842858910560608
628809677,835,BenBE,2021-05-08T23:41:59Z,lf @ eol.,0,0.9842858910560608
628809715,835,BenBE,2021-05-08T23:42:25Z,lf @ eol.,0,0.9842858910560608
628809732,835,BenBE,2021-05-08T23:42:33Z,lf @ eol.,0,0.9842858910560608
628809954,835,BenBE,2021-05-08T23:46:04Z,even trying to compile those files in should be subject to conditional compilation. having this code included is an unreasonable liability and a potential attack vector due to its network surface.,0,0.5741066932678223
628809985,835,BenBE,2021-05-08T23:46:40Z,should be optionally included based on actual use of telemetry by this build.,0,0.9946861267089844
628810022,835,BenBE,2021-05-08T23:47:17Z,why is this change needed? what breaks without it and why can't that not be repaired otherwise? is telemetry the only reason to break bc with old macos versions?,0,0.986480176448822
628810319,835,BenBE,2021-05-08T23:50:53Z,is this change actually related to this pr?,0,0.9927563071250916
628810470,835,BenBE,2021-05-08T23:52:45Z,excess ws @ eof.,-1,0.7911842465400696
628810586,835,BenBE,2021-05-08T23:54:36Z,indentation seems off ...,0,0.539924681186676
628810828,835,BenBE,2021-05-08T23:57:59Z,"this should also include information on the exact data collected, reasons for collection. those information should be current with the implementation of the telemetry.",0,0.9946420192718506
628810910,835,BenBE,2021-05-08T23:59:30Z,information about collected data should be specific to the current build. thus it should be available from inside audacity without need for an internet connection.,0,0.9937846660614014
628811007,835,BenBE,2021-05-09T00:00:43Z,"should better read ""user & usage surveillance settings"" ...",0,0.9935559630393982
628811420,835,BenBE,2021-05-09T00:06:39Z,"avoid marketing speak in the wording of that paragraph and be honest. well, maybe could be even more specific, but yeah: you get the gist of it.",0,0.8929206132888794
628811519,835,BenBE,2021-05-09T00:07:55Z,it's not anonymous!,0,0.9853194952011108
628811627,835,BenBE,2021-05-09T00:09:17Z,lf @ eol.,0,0.9842858910560608
628811720,835,BenBE,2021-05-09T00:10:14Z,lf @ eol.,0,0.9842858910560608
628813650,835,SndChaser,2021-05-09T00:36:12Z,this would definitely invalidate the claim that a cmake flag would prevent the telemetry code from being compiled.,0,0.9849374890327454
628816050,835,xTibor,2021-05-09T01:03:56Z,` ` -> ` `. using semicolons after html character entity references are strongly recommended.,0,0.9514625072479248
628818054,835,xTibor,2021-05-09T01:30:15Z,goggle,0,0.9288151264190674
628821083,835,xTibor,2021-05-09T02:10:20Z,"this is not a very thorough uuid verification. the minimum would be to check if the uuid version field is within the currently defined values. (1, 2, 3, 4, 5)",0,0.9660924673080444
628821257,835,aaaaaa123456789,2021-05-09T02:12:10Z,"it's also not correct, as zero bytes are very much allowed in uuids.",0,0.9582745432853699
628821424,835,Pokechu22,2021-05-09T02:14:32Z,"it's using `std::any_of`, not `std::all_of`. since it's using `any_of`, it's just making sure that one of the bytes is not zero, i.e. it's not all zeros.",0,0.9927489161491394
628823333,835,SndChaser,2021-05-09T02:39:53Z,maybe they meant [a link]. ;),1,0.9208743572235107
628877519,835,schmittlauch,2021-05-09T11:37:02Z,"a nixos package maintainer here: side effects like downloading sources during build are problematic indeed for many build systems. i'd kindly ask you to reconsider this, otherwise several distributions need to patch this downstream.",0,0.9384834170341492
628891908,835,Megaf,2021-05-09T13:38:14Z,over 9000!,0,0.8543306589126587
628921058,835,xTibor,2021-05-09T17:40:31Z,leftover commented code that needs to be removed.,0,0.9681652784347534
628923883,835,xTibor,2021-05-09T18:07:53Z,are there any safeguards that `use_uuid_create` and `use_libuuid` are not defined at the same time? both of them seems to work on windows. does this function silently fail if none of these three libs are present?,0,0.9938110709190369
682794994,1384,crsib,2021-08-04T16:55:23Z,i think that this line can safely be removed now!,0,0.8608993887901306
682796436,1384,crsib,2021-08-04T16:57:23Z,"let's add the `cmd_option` for `${_opt}use_libtorch`. there are some examples in the root cmakelists.txt :) i think we should switch it off by default because of how big is libtorch, so it doesn't affect every developer.",1,0.9848677515983582
682797245,1384,crsib,2021-08-04T16:58:31Z,"probably `cmake_dependent_option` is an even better idea, because the feature depends on ${_opt}has_networking",0,0.9893503785133362
682798001,1384,crsib,2021-08-04T16:59:31Z,cmake_dependent_option will simplify this code to just `$ `,0,0.9940820336341858
682801268,1384,crsib,2021-08-04T17:04:05Z,"probably messageboxexception is a better choice for the base here. looks like resample, for example, is called outside try{}catch{} (or i missed something)",0,0.9871446490287781
682801576,1384,crsib,2021-08-04T17:04:36Z,generally it's better to keep implementation in source files :),0,0.9904530048370361
682802318,1384,crsib,2021-08-04T17:05:42Z,the same about the base,0,0.9920263886451721
682804250,1384,crsib,2021-08-04T17:08:06Z,"please use wxfile api, they will handle encoding correctly. this is a major pain point on windows",-1,0.9858747124671936
682805146,1384,crsib,2021-08-04T17:09:22Z,similar as above. you can implement your own writer or even simply serialize to string first,0,0.9939602613449097
682805764,1384,crsib,2021-08-04T17:10:18Z,the same about the base :),0,0.9924523234367371
683677723,1384,hugofloresgarcia,2021-08-05T18:05:27Z,resolved [a link],0,0.9945695996284485
683677771,1384,hugofloresgarcia,2021-08-05T18:05:31Z,resolved [a link],0,0.9945695996284485
683717884,1384,hugofloresgarcia,2021-08-05T19:07:35Z,resolved [a link],0,0.9945695996284485
683717955,1384,hugofloresgarcia,2021-08-05T19:07:41Z,resolved [a link],0,0.9945695996284485
686659439,1384,crsib,2021-08-11T09:27:22Z,"this is fine for now but should be defaulted to off i think. we should figure out the best way to deliver the effect first, as it is huuuuge :)",1,0.9942413568496704
686672894,1384,crsib,2021-08-11T09:45:45Z,"let's add another atomic, that controls thread termination. `detach` should really never be used :-) so it will be like `cancel.store(true); threa.join();`",1,0.9420228600502014
686677310,1384,crsib,2021-08-11T09:51:42Z,this still blocks the ui thread! at least `wxsafeyield` should be used instead.,-1,0.5213087201118469
686685650,1384,crsib,2021-08-11T10:03:19Z,no c-casts please!,-1,0.8280770182609558
686686121,1384,crsib,2021-08-11T10:04:02Z,std::make_unique?,0,0.9940420985221863
686686241,1384,crsib,2021-08-11T10:04:11Z,std::make_unique?,0,0.9940420985221863
686688810,1384,crsib,2021-08-11T10:07:52Z,why do we need shared_ptr?,0,0.991605281829834
686689696,1384,crsib,2021-08-11T10:09:04Z,i would prefer explicit encoding here. lib-strings can help with it :-),0,0.5538215041160583
686690339,1384,crsib,2021-08-11T10:09:59Z,why .c_str?,0,0.9887269735336304
686690540,1384,crsib,2021-08-11T10:10:16Z,why .c_str?,0,0.9887269735336304
686693372,1384,crsib,2021-08-11T10:14:09Z,"in this case, i prefer having a no-throw overload, that provides a default value. like: [code block] also, passing the document as a first argument would allow defaulting the default value!",0,0.962181031703949
686696554,1384,crsib,2021-08-11T10:18:42Z,you can write the lambda inline! [code block],0,0.9597002267837524
686701937,1384,crsib,2021-08-11T10:26:53Z,i would prefer sticking to camelcase,0,0.9738970994949341
686874055,1384,hugofloresgarcia,2021-08-11T14:14:56Z,fixed [a link],0,0.993672251701355
686874142,1384,hugofloresgarcia,2021-08-11T14:15:02Z,fixed [a link],0,0.993672251701355
686874216,1384,hugofloresgarcia,2021-08-11T14:15:06Z,fixed [a link],0,0.993672251701355
686896814,1384,hugofloresgarcia,2021-08-11T14:38:56Z,resolved [a link],0,0.9945695996284485
686958202,1384,hugofloresgarcia,2021-08-11T15:47:45Z,fixed [a link],0,0.993672251701355
686971224,1384,hugofloresgarcia,2021-08-11T16:03:01Z,resolved [a link],0,0.9945695996284485
686980913,1384,hugofloresgarcia,2021-08-11T16:15:23Z,"hmm, i'm not entirely sure what you mean. would you mind clarifying? thanks!",1,0.9726662039756775
686984438,1384,crsib,2021-08-11T16:19:47Z,`audacity::toutf8` from `codeconversions.h`,0,0.9923081398010254
691138871,1384,crsib,2021-08-18T11:14:15Z,static_cast please :),0,0.9904959201812744
691139543,1384,crsib,2021-08-18T11:15:23Z,this can be `retrun mresampler->forward(inputs).totensor();`,0,0.9947178959846497
691140495,1384,crsib,2021-08-18T11:16:55Z,"i think it is worth commenting what is `nogradguard` and why it is needed. also, *camecase* for the variable name please.",0,0.9791389107704163
691140827,1384,crsib,2021-08-18T11:17:21Z,new line before `throw` and `xo`,0,0.9931968450546265
691140929,1384,crsib,2021-08-18T11:17:28Z,new line before `throw`,0,0.993219792842865
691141255,1384,crsib,2021-08-18T11:17:57Z,and let's wrap it in `xo` as it is possibly user visible.,0,0.9954315423965454
691148602,1384,crsib,2021-08-18T11:29:38Z,as with the previous case - let's move everything under the `try`,0,0.9939870834350586
691148869,1384,crsib,2021-08-18T11:30:02Z,let move them to the `private` section below,0,0.9954621195793152
691149156,1384,crsib,2021-08-18T11:30:30Z,if there are no sub-classes planned - let's mark it `final`,0,0.9934050440788269
691149496,1384,crsib,2021-08-18T11:31:04Z,"does it modify internal state? it not, it should be `const`",0,0.9940411448478699
691149679,1384,crsib,2021-08-18T11:31:21Z,make it `const` please,0,0.9953712821006775
691149874,1384,crsib,2021-08-18T11:31:37Z,make it `const` please,0,0.9953712821006775
691149990,1384,crsib,2021-08-18T11:31:46Z,"does it modify internal state? it not, it should be `const`",0,0.9940411448478699
691150568,1384,crsib,2021-08-18T11:32:42Z,initialize it please. like [code block],0,0.9952293634414673
691150703,1384,crsib,2021-08-18T11:32:59Z,initialization could and should be movede here,0,0.9951732754707336
691155282,1384,crsib,2021-08-18T11:40:28Z,`final`?,0,0.9919310212135315
691157054,1384,crsib,2021-08-18T11:43:09Z,"do we really need to explicitely initialize the mcards? also, please put the initializer list to a new line",0,0.9953899383544922
691158831,1384,crsib,2021-08-18T11:46:00Z,`const std::string` and `audacity::toutf8` please. or even it can be left as `wxstring` or `wxfilename`? on windows there should be lots of care about string encodings when working with files.,0,0.989700198173523
691159472,1384,crsib,2021-08-18T11:46:57Z,"`= default` probably will be sufficient here. althoug there is a bug in older gcc versions, so probably this change will be reverted :)",1,0.9565829634666443
691162211,1384,crsib,2021-08-18T11:51:03Z,`httpcode != 200 && httpcode != 302`?,0,0.995033860206604
691163084,1384,crsib,2021-08-18T11:52:22Z,"something like should work: `wxlogdebug(""saving modelcard for %s \n"", card->getrepoid())`;",0,0.9943408966064453
691163414,1384,crsib,2021-08-18T11:52:52Z,possible encoding issues again,0,0.9680507779121399
691163480,1384,crsib,2021-08-18T11:53:00Z,ditto,0,0.9754701256752014
691164716,1384,crsib,2021-08-18T11:54:45Z,do you really need to store the response? it seems you capture it in `downloadmodel` inside the finished callback,0,0.9950686693191528
691190892,1384,crsib,2021-08-18T12:31:33Z,"actually, it seems to be a bug in networkmanager :) let's fix it! `if (mhttpcode == 0)` should be removed from the curlresponse.cpp:307 after this, check for `httpscode != 200` will be sufficient!",1,0.9930490255355835
691192032,1384,crsib,2021-08-18T12:33:13Z,i think checking for errors is good idea here,1,0.9806146025657654
691192345,1384,crsib,2021-08-18T12:33:37Z,you can throw if remove fails,0,0.9896208047866821
691192509,1384,crsib,2021-08-18T12:33:52Z,`!=`,0,0.791607677936554
691192822,1384,crsib,2021-08-18T12:34:14Z,`const std::string`,0,0.992984414100647
691193282,1384,crsib,2021-08-18T12:34:54Z,"oh, i see you need it! ignore my previous comment on it :)",1,0.8664487600326538
691197326,1384,crsib,2021-08-18T12:40:24Z,"`const std::string&` there are cases, when plain `std::string` is preferred. for example: * you always change the string inside * you can move the string (for example, as initializer in constructor) in this case, unnessesary copy will be created.",0,0.991584300994873
691197805,1384,crsib,2021-08-18T12:41:00Z,explicit capture list please!,0,0.9746208190917969
691197974,1384,crsib,2021-08-18T12:41:12Z,ditto,0,0.9754701256752014
691198373,1384,crsib,2021-08-18T12:41:43Z,"`return ""[a link] will work too",0,0.9953098893165588
691201529,1384,crsib,2021-08-18T12:45:51Z,std::make_shared please.,0,0.9914643168449402
691202932,1384,crsib,2021-08-18T12:47:36Z,"well, at least `const std::string` but i think this should be extracted into a method as well. something like `geturl(""models.json"")`",0,0.9918221831321716
691203624,1384,crsib,2021-08-18T12:48:32Z,!=,0,0.7911180853843689
691203722,1384,crsib,2021-08-18T12:48:39Z,ditto,0,0.9754701256752014
691205228,1384,crsib,2021-08-18T12:50:29Z,const std::string,0,0.9892377853393555
691205807,1384,crsib,2021-08-18T12:51:14Z,!=,0,0.7911180853843689
691205886,1384,crsib,2021-08-18T12:51:20Z,ditto,0,0.9754701256752014
691206019,1384,crsib,2021-08-18T12:51:30Z,std::make_shared,0,0.9917932152748108
691206574,1384,crsib,2021-08-18T12:52:03Z,look like this variable is not used. let's remove it.,0,0.9908487796783447
691207327,1384,crsib,2021-08-18T12:52:57Z,"static_cast! please, don't use c-casts, unless you are writing c code.",-1,0.9162887334823608
691208000,1384,crsib,2021-08-18T12:53:47Z,ditto,0,0.9754701256752014
691208312,1384,crsib,2021-08-18T12:54:08Z,the fix to curlresponse and !=,0,0.9945945143699646
691208526,1384,crsib,2021-08-18T12:54:23Z,no cerr please!,-1,0.8105154037475586
691208794,1384,crsib,2021-08-18T12:54:43Z,std::make_shared,0,0.9917932152748108
691209415,1384,crsib,2021-08-18T12:55:22Z,const std::string,0,0.9892377853393555
691209909,1384,crsib,2021-08-18T12:55:58Z,no explicit wxstring,0,0.9943676590919495
691211041,1384,crsib,2021-08-18T12:57:22Z,"also, we don't really use hungarian notation. i would prefer something like `cardauthor` and `cardname`",0,0.993500292301178
691211429,1384,crsib,2021-08-18T12:57:54Z,you can `return true` from try block...,0,0.9945951104164124
691211715,1384,crsib,2021-08-18T12:58:14Z,... and just return false here,0,0.9729233980178833
691213058,1384,crsib,2021-08-18T12:59:50Z,but do we really need try ... catch ... ? is this block run on a different thread? maybve just throwing will be sufficient?,0,0.9852783679962158
691213306,1384,crsib,2021-08-18T13:00:06Z,see above :),0,0.992622971534729
691213606,1384,crsib,2021-08-18T13:00:27Z,ditto,0,0.9754701256752014
691213727,1384,crsib,2021-08-18T13:00:34Z,ditto,0,0.9754701256752014
691213866,1384,crsib,2021-08-18T13:00:46Z,const!),1,0.9259393811225891
691214806,1384,crsib,2021-08-18T13:01:55Z,see above about the curlresponse!,0,0.9944366216659546
691217303,1384,crsib,2021-08-18T13:05:03Z,"wxfile doesn't throw, so you should check the errors differently.",0,0.9661006927490234
691217428,1384,crsib,2021-08-18T13:05:12Z,why is it needed?,0,0.9891014695167542
691218747,1384,crsib,2021-08-18T13:06:47Z,"i don't quite undestand, how this error will be presented to the user.",0,0.8090143203735352
691219611,1384,crsib,2021-08-18T13:07:49Z,final?,0,0.9858836531639099
691220571,1384,crsib,2021-08-18T13:08:59Z,this is the case where you should have plain `std::string`. then - `m_msg(std::move(msg))`,0,0.9944279193878174
691221156,1384,crsib,2021-08-18T13:09:39Z,do we really need the sub-project?,0,0.9891136884689331
691222395,1384,crsib,2021-08-18T13:11:02Z,this is the case where `std::string` should be used. than `m_msg(std::move(msg))`,0,0.9951808452606201
691222975,1384,crsib,2021-08-18T13:11:45Z,"also, i think msg should be a `translatablestring`",0,0.9944397211074829
691223688,1384,crsib,2021-08-18T13:12:32Z,final?,0,0.9858836531639099
691223854,1384,crsib,2021-08-18T13:12:43Z,const?,0,0.9789122939109802
691223913,1384,crsib,2021-08-18T13:12:47Z,const?,0,0.9789122939109802
691224173,1384,crsib,2021-08-18T13:13:05Z,const?,0,0.9789122939109802
691224267,1384,crsib,2021-08-18T13:13:11Z,const?,0,0.9789122939109802
691224309,1384,crsib,2021-08-18T13:13:15Z,const?,0,0.9789122939109802
691224452,1384,crsib,2021-08-18T13:13:25Z,"well, you know... const?",0,0.9579920768737793
691224821,1384,crsib,2021-08-18T13:13:50Z,const?,0,0.9789122939109802
691224882,1384,crsib,2021-08-18T13:13:55Z,const?,0,0.9789122939109802
691225018,1384,crsib,2021-08-18T13:14:05Z,"const? also, see the cpp file",0,0.9940316081047058
691225253,1384,crsib,2021-08-18T13:14:23Z,some formattring issues here,0,0.9802159667015076
691230612,1384,crsib,2021-08-18T13:20:21Z,do you really need to copy to a different array?,0,0.9898415207862854
691230815,1384,crsib,2021-08-18T13:20:32Z,`: moutputtracks->selectedleaders ()`,0,0.992089033126831
691234742,1384,crsib,2021-08-18T13:24:57Z,"well, sleep is still here :)",1,0.9277348518371582
691237056,1384,crsib,2021-08-18T13:27:36Z,"but this won't block forward pass, will it? i think an exception should be thrown here. also, the e.what() should be included in the message. otherwise it is hard to understand what has happened. given that modelexception is messageboxexception i think that it makes sense just to remove try-catch here.",0,0.9891911745071411
691238692,1384,crsib,2021-08-18T13:29:19Z,this method is called from a different thread. you should not interract with the ui from threads other than the main thread.,0,0.9932218790054321
691239045,1384,crsib,2021-08-18T13:29:43Z,the context is lost here again. e.what should be included in the error message.,0,0.949539065361023
691239733,1384,crsib,2021-08-18T13:30:29Z,!=,0,0.7911180853843689
691240926,1384,crsib,2021-08-18T13:31:41Z,"i'm not sure, but maybe something derived from audacity exceptions hierarchy shoul be used?",0,0.8692256212234497
691241014,1384,crsib,2021-08-18T13:31:47Z,const void* here ...,0,0.98539137840271
691242420,1384,crsib,2021-08-18T13:33:23Z,... static_cast here,0,0.9937081336975098
691242512,1384,crsib,2021-08-18T13:33:29Z,const!,1,0.9072546362876892
691242934,1384,crsib,2021-08-18T13:33:57Z,do we need try catch here?,0,0.9942454695701599
691244124,1384,crsib,2021-08-18T13:35:16Z,look for `/* i18n-hint: ` examples in the code. it is important to clarify how placeholder will be replaced to translators,0,0.9941238760948181
691244643,1384,crsib,2021-08-18T13:35:48Z,probably xc should be used here (and above),0,0.9880084991455078
691244890,1384,crsib,2021-08-18T13:36:04Z,see above,0,0.985628604888916
691246118,1384,crsib,2021-08-18T13:37:22Z,"oooph, lets probably create issame method in modelcard?",0,0.9933104515075684
691246702,1384,crsib,2021-08-18T13:38:01Z,ditto may this should be moved to a separate method?,0,0.9927929639816284
691247250,1384,crsib,2021-08-18T13:38:39Z,"please, move the initialization here from the constructor",0,0.9931047558784485
691247300,1384,crsib,2021-08-18T13:38:43Z,ditto,0,0.9754701256752014
691248186,1384,crsib,2021-08-18T13:39:44Z,translatablestring?,0,0.9943603873252869
691248249,1384,crsib,2021-08-18T13:39:48Z,translatablestring?,0,0.9943603873252869
691250093,1384,crsib,2021-08-18T13:41:53Z,"generally, if you pass a pointer to the function - it should check if it is not nullptr. or you can pass `const document&` here and to the functions below, which will simplify them as well. (this applies to every function in the namespace)",0,0.9925191402435303
691251372,1384,crsib,2021-08-18T13:43:11Z,translatablestring with format?,0,0.994147777557373
691251809,1384,crsib,2021-08-18T13:43:39Z,explicit toutf8 please,0,0.994062602519989
691252299,1384,crsib,2021-08-18T13:44:11Z,can this guy be defaulted?,0,0.9837034344673157
691252488,1384,crsib,2021-08-18T13:44:25Z,= default please,0,0.9842448830604553
691252756,1384,crsib,2021-08-18T13:44:43Z,see comment about checking the pointers!,0,0.9932060241699219
691253685,1384,crsib,2021-08-18T13:45:43Z,"well, you know. translatablestring and format?",0,0.9915134310722351
691255159,1384,crsib,2021-08-18T13:47:22Z,is it intentional?,0,0.9733911752700806
691255435,1384,crsib,2021-08-18T13:47:43Z,how do we report the error to the user?),0,0.9913942217826843
691255998,1384,crsib,2021-08-18T13:48:20Z,"if we are ok with default values, let's use overloads with them",0,0.9901463389396667
691256598,1384,crsib,2021-08-18T13:49:02Z,`getrepoid() == that.getrepoid()`?,0,0.994952917098999
691256872,1384,crsib,2021-08-18T13:49:17Z,= default,0,0.9805260300636292
691257456,1384,crsib,2021-08-18T13:50:00Z,`if( it == this->end() )`,0,0.9931314587593079
691259716,1384,crsib,2021-08-18T13:52:21Z,you should use `std::back_inseter` in `copy_if`!,0,0.9954988360404968
691261127,1384,crsib,2021-08-18T13:53:49Z,with back_inserter - you wont need this method.,0,0.9955394864082336
691261285,1384,crsib,2021-08-18T13:54:00Z,final?,0,0.9858836531639099
691261398,1384,crsib,2021-08-18T13:54:06Z,ditto,0,0.9754701256752014
691262196,1384,crsib,2021-08-18T13:55:00Z,do you use this functions outside the modelcard? if not - they should not be in the header!,0,0.9940493106842041
691262826,1384,crsib,2021-08-18T13:55:40Z,final!,0,0.9480268359184265
691263487,1384,crsib,2021-08-18T13:56:21Z,probably let's still use camelcase?,0,0.9822955131530762
691263645,1384,crsib,2021-08-18T13:56:32Z,msvc failed to compile,0,0.9287031888961792
691266431,1384,crsib,2021-08-18T13:59:28Z,final?,0,0.9858836531639099
691266884,1384,crsib,2021-08-18T13:59:57Z,i prefer inline intialization whnever possible,0,0.9834185242652893
691267438,1384,crsib,2021-08-18T14:00:30Z,the only reason for this class is filter?,0,0.9919844269752502
691267765,1384,crsib,2021-08-18T14:00:51Z,static const int!,0,0.8917027711868286
691269917,1384,crsib,2021-08-18T14:03:14Z,std::move?,0,0.9928488731384277
691285109,1384,crsib,2021-08-18T14:19:22Z,more explicit name for the class. and let's move it to a different set of h/cpp,0,0.9920111298561096
691286239,1384,crsib,2021-08-18T14:20:35Z,why?,0,0.9622438549995422
691287316,1384,crsib,2021-08-18T14:21:42Z,`verbatim` should be used here. xo/xc are for strings that should be translated.,0,0.9946107864379883
691289565,1384,crsib,2021-08-18T14:24:02Z,why do we need show?,0,0.9899446964263916
691290030,1384,crsib,2021-08-18T14:24:32Z,xc here for sure,0,0.9607782959938049
691290199,1384,crsib,2021-08-18T14:24:42Z,xc,0,0.8466074466705322
691290466,1384,crsib,2021-08-18T14:24:59Z,static_cast!,0,0.9191780090332031
691290811,1384,crsib,2021-08-18T14:25:24Z,translation?,0,0.9919523596763611
691292518,1384,crsib,2021-08-18T14:27:14Z,different set of h/cpp?,0,0.9891286492347717
691294833,1384,crsib,2021-08-18T14:29:36Z,capitalize constatants please!,0,0.9791995882987976
692202978,1384,hugofloresgarcia,2021-08-19T15:08:56Z,"yes! the reason i do this is because `moutputtracks->selectedleaders ()` is an iterator, and source separation appends to `moutputtracks` while it's iterating, meaning that we will then feed the output tracks back into the loop (in a possibly infinite loop)",0,0.7916595935821533
692212170,1384,hugofloresgarcia,2021-08-19T15:15:30Z,the `static_cast` doesn't like the const qualifier: **code**: [code block] **error stack**: [code block],0,0.9855018854141235
692213097,1384,hugofloresgarcia,2021-08-19T15:16:11Z,(casting to `const sampleptr` (aka `char *const`) doesn't work either,0,0.9883527159690857
692226377,1384,hugofloresgarcia,2021-08-19T15:26:03Z,resolved in [a link],0,0.9955808520317078
692342728,1384,hugofloresgarcia,2021-08-19T17:29:17Z,"this shouldn't need to face the user, just the model contributor who is debugging a model.",0,0.9880123138427734
693056631,1384,hugofloresgarcia,2021-08-20T16:01:25Z,"this block is run from a networkmanager thread, when each card is retrieved from huggingface, so we need to catch any exceptions to avoid not throwing them in the main thread",0,0.9885997772216797
693077758,1384,hugofloresgarcia,2021-08-20T16:35:42Z,why use std::move if `card` is a shared_ptr?,0,0.9837719798088074
693140031,1384,hugofloresgarcia,2021-08-20T18:25:35Z,"yes, and insert. i had other plans for it, but i don't think i'll have time for that",0,0.9418633580207825
693140737,1384,hugofloresgarcia,2021-08-20T18:26:55Z,ah! i wanted to keep a difference between methods for the dto and just data fields. i'd be happy to switch everything over to camelcase though,1,0.9641023278236389
693406264,1384,hugofloresgarcia,2021-08-21T22:01:18Z,"once the download is completed, the ui thread checks to see if the files were installed with isinstalled(). if isinstalled() returns false, then an error is presented to the user.",0,0.9934275150299072
694082485,1384,hugofloresgarcia,2021-08-23T15:34:06Z,fixed in rebase!,0,0.957221508026123
694291557,1384,hugofloresgarcia,2021-08-23T20:37:41Z,[x],0,0.9916139841079712
778742227,1384,Paul-Licameli,2022-01-05T11:20:54Z,macos,0,0.9876652956008911
778743288,1384,Paul-Licameli,2022-01-05T11:22:43Z,remove these changes from the branch please,0,0.9945195317268372
778746112,1384,Paul-Licameli,2022-01-05T11:27:22Z,"better to write `set( sources`, in case the variable sources inherits some value from parent scope that woud influence the cmake evaluation incorrectly.",0,0.9898035526275635
778747373,1384,Paul-Licameli,2022-01-05T11:29:39Z,"similarly, precede the loop with the command `set( outputs )` to be sure that variable is empty before you append to it.",0,0.993645191192627
778748755,1384,Paul-Licameli,2022-01-05T11:31:52Z,"""tags"" not required. is that correct?",0,0.9951069355010986
778750215,1384,Paul-Licameli,2022-01-05T11:34:28Z,why was this change necessary to your build?,0,0.9925169348716736
778754080,1384,Paul-Licameli,2022-01-05T11:41:24Z,this is ok?,0,0.9273771047592163
778757977,1384,Paul-Licameli,2022-01-05T11:48:17Z,i would like every new cmakelists.txt file for a library or a module to begin with long-form comments at the top giving some overview of the purpose: [code block] you might explain what some of the individual source files do but it is not necessary for all of them.,0,0.9888124465942383
778760176,1384,Paul-Licameli,2022-01-05T11:52:21Z,now i see an explanation in audacityheaders.h. please repeat it here.,0,0.9932723641395569
778775338,1384,Paul-Licameli,2022-01-05T12:18:53Z,"before diving deeply in these new source code files to understand them, the first thing i did was look through the #include directives to understand their dependencies, so that i could understand how to approach understanding bottom-up or top-down. i made this graph with graphviz of dependencies among the .cpp/.h file pairs: ![a link] ideally dependencies among source code files should have no cycles, but i find two non-trivial strongly connected components here, as boxes. can these dependencies be broken? maybe my further exploration will tell me.",0,0.8894928693771362
778778433,1384,Paul-Licameli,2022-01-05T12:24:27Z,"a good rule to follow is that each .cpp file will # include its corresponding h file before any other, so that we are sure each .h file is compiled at least once in the system as the first header, and therefore contains all other nested inclusions that it depends on. this forces the # include directives to tell the complete story of compilation dependencies, and you know i care about getting a correct picture of those dependencies. you followed that rule but with two exceptions. this is one, and modelmanager.cpp is the other. i rearranged the # include lines in my own build, to be sure things still compile. they do. please make those changes too.",0,0.7296109199523926
778916640,1384,crsib,2022-01-05T15:34:27Z,yes,0,0.9686408638954163
779167788,1384,Paul-Licameli,2022-01-05T22:05:00Z,you can `std::move` from `msg` too for a small efficiency,0,0.994025468826294
779169807,1384,Paul-Licameli,2022-01-05T22:08:56Z,`noexcept` is more modern c++ style than `throw()`,0,0.9928324222564697
779177722,1384,Paul-Licameli,2022-01-05T22:25:07Z,"thank you for documenting the exception safety contract! but here and elsewhere, write it correctly, `` not ``. it is supposed to be a promise that the object does not change its state at all in case of exceptions. it is often implemented by building a copy, and swapping it with the original only when the copy is completed. but is this comment event right? i read the implementation and i see no checking of the schema, no throwing of an exception. that is a doxygen alias defined in audacity.dox.in.",1,0.9718244671821594
779178516,1384,Paul-Licameli,2022-01-05T22:26:52Z,could be `const`,0,0.9931831955909729
779182550,1384,Paul-Licameli,2022-01-05T22:35:20Z,const,0,0.8837863802909851
779183227,1384,Paul-Licameli,2022-01-05T22:36:43Z,"iteration over a const container (so you can't insert into it) but exposing shared pointers to non-const cards. do you want that, or do you want ""deep const?""",0,0.9784734845161438
779184717,1384,Paul-Licameli,2022-01-05T22:39:53Z,unnecessary `;`,0,0.8597733974456787
779186943,1384,Paul-Licameli,2022-01-05T22:44:59Z,"the files in this namespace are used only in modelcard.cpp. so should you move them there, and simplify this interface file?",0,0.9953190684318542
779188438,1384,Paul-Licameli,2022-01-05T22:48:20Z,"""long-distance"" friendship, with a class defined in a different header file, is something to avoid. it implies i can't really understand modelcard without understanding deepmodelmanager. why not just publicize more methods of modelcard? what are invariant conditions of the modelcard object that must be maintained by functions in its public interface? if you can state them, and if use of the mutating methods that are made public when you remove the friend declaration don't lead to violations of them -- then deepmodelmanager doesn't really need to be a friend.",0,0.9188746809959412
779190027,1384,Paul-Licameli,2022-01-05T22:52:05Z,const,0,0.8837863802909851
779191720,1384,Paul-Licameli,2022-01-05T22:56:09Z,"you are inconsistent in the convention for naming of ""setter"" functions, some with ""set"" in the name, some without. actually i suggest you use the without convention, and further allow the ""chain-call"" idiom: [code block] and similar, then elsewhere: [code block] could instead be nicely: [code block]",0,0.980916440486908
779193627,1384,Paul-Licameli,2022-01-05T23:00:16Z,"i have a mild preference for the new uniform-initialization, curly-brace syntax in constructor expressions.",0,0.9529014825820923
779195789,1384,Paul-Licameli,2022-01-05T23:05:55Z,"i see from uses elsewhere that these predicates assume a non-null pointer, and the fact that the pointer is a smart one is irrelevant. also the card isn't mutated. say all of this with types. use a reference to const, not a pointer to modifiable. make the type `std::function ` this complicates the implementation of filter() below, but makes the interface in this header file simpler to understand. i know more about what the predicate is and isn't allowed to do.",0,0.988958477973938
779198488,1384,Paul-Licameli,2022-01-05T23:12:38Z,"the implementation of the non-throwing function might be a little bit cheaper, if it and the throwing function are both implemented in terms of a third, non-throwing function, visible only in this .cpp file, that returns a `std::optional `; rather than having to catch an exception whenever defaulting of the value applies. similar for other pairs of functions below.",0,0.9918507933616638
779200973,1384,Paul-Licameli,2022-01-05T23:19:29Z,`d.parse` is called twice. is that a mistake? is it a harmless mistake that makes no difference to the final state of `d`? i don't know rapidjson enough to answer the questions for myself.,0,0.8660043478012085
779201564,1384,Paul-Licameli,2022-01-05T23:21:06Z,"i looked at all uses of this type, and i don't see a non-empty second argument given anywhere to the constructor.",0,0.990471601486206
779204628,1384,Paul-Licameli,2022-01-05T23:29:29Z,perhaps the error message should quote the path to be more helpful to the user. perhaps call the static member function `translatablestring fileexception::writefailuremessage(const wxfilename &filename);` to format the message consistently with other messages in audacity.,0,0.9902837872505188
779205799,1384,Paul-Licameli,2022-01-05T23:32:50Z,"should comment that only getrepoid is meant to be significant in comparison, not the other fields: i was surprised to learn this when i got to reviewing the implementation. now i wonder why you need operator ==. it raises the question, could this type also usefully be hashable or comparable with `<` ?",0,0.5974442362785339
779206462,1384,Paul-Licameli,2022-01-05T23:34:38Z,no insertion happens that would make non-unique ids. perhaps the return should be boolean.,0,0.9889205098152161
779207018,1384,Paul-Licameli,2022-01-05T23:36:19Z,"might take the lambda argument by const reference for tiny efficiency, avoiding reference count changes",0,0.9896201491355896
779207529,1384,Paul-Licameli,2022-01-05T23:37:57Z,"might `move(card)` for another tiny efficiency, or make the argument of `insert()` a const reference, avoiding one shared pointer copy",0,0.9883723855018616
779208610,1384,Paul-Licameli,2022-01-05T23:40:50Z,i see `m_is_local` and `m_local_path` are omitted. should i think it's a possible bug or should a comment tell me that is intended?,0,0.9944673776626587
779208939,1384,Paul-Licameli,2022-01-05T23:41:43Z,"""metadata""",0,0.9886131286621094
779209049,1384,Paul-Licameli,2022-01-05T23:42:04Z,"""hf"" means huggingface, right?",0,0.9732663631439209
779209784,1384,Paul-Licameli,2022-01-05T23:44:18Z,permuting these lines so the order agrees with the serialization function would help a reviewer verify it's complete.,0,0.9916450381278992
779212086,1384,Paul-Licameli,2022-01-05T23:51:26Z,"better to use the `` (or `\file`, no difference) command to name and briefly describe a file's purpose. i prefer not to use the `\class` command at all, but instead just prefix the doxygen comments to the class definition itself.",0,0.9904099702835083
779212439,1384,Paul-Licameli,2022-01-05T23:52:30Z,no such class (any more?). remove this comment,0,0.9863165020942688
779213129,1384,Paul-Licameli,2022-01-05T23:54:24Z,"might precede this line with `//i18n-hint ` i believe dmitry has already emphasized to you the importance of the special i18n-hint comments, which get extracted from the source into the translation catalog, which human translation experts must fill in. unusual words out of context might need some more helpful explanation.",0,0.9909137487411499
779215264,1384,Paul-Licameli,2022-01-06T00:01:04Z,might `move`,0,0.9874691963195801
779215895,1384,Paul-Licameli,2022-01-06T00:03:02Z,"""its""",0,0.9842362403869629
779217550,1384,Paul-Licameli,2022-01-06T00:08:19Z,"again, """"",0,0.9613997340202332
779218839,1384,Paul-Licameli,2022-01-06T00:12:16Z,"i only now noticed a systematic mistake of yours in doxygen comments. please read this: [a link] your comment blocks are not correct, and none of your intended documentation comments for methods are going into the generated html pages. (you can generate those for yourself if you install doxygen and run at the project root: `doxygen nographs.dox`) to make the extraction work, you need to start line comments with `//!` or you can make long comments with [code block]",0,0.877427875995636
779220630,1384,Paul-Licameli,2022-01-06T00:17:36Z,might preced with `//! load(std::string&)`,0,0.9887194037437439
779220908,1384,Paul-Licameli,2022-01-06T00:18:32Z,"""attributes""",0,0.9613575339317322
779220962,1384,Paul-Licameli,2022-01-06T00:18:41Z,"""model's""",0,0.989318311214447
779223379,1384,Paul-Licameli,2022-01-06T00:26:23Z,"this is not implemented with a strong exception safety guarantee, as the header comment claims, if `eval()` might throw. any previous data in `mmodel` is lost. you should insead put the model in a temporary unique_ptr, then move that into mmodel only after any possibly throwing operations are done. unless -- you mean it to be a precondition that `load()` may only be called for a `deepmodel` that has not yet been loaded. in that case, header comments should say that, and the top of this function might assert the precondition.",0,0.9885037541389465
779223945,1384,Paul-Licameli,2022-01-06T00:28:08Z,"if you follow my first suggestion, `cleanup()` would be eliminated (here and in all other places), and mutation of members of `*this` would happen only on the success paths and only after all possibly throwing steps are done.",0,0.9914474487304688
779224852,1384,Paul-Licameli,2022-01-06T00:30:52Z,might `move`,0,0.9874691963195801
779224970,1384,Paul-Licameli,2022-01-06T00:31:16Z,"and if `mcard` is moved, don't resuse it here",0,0.9943885207176208
779225077,1384,Paul-Licameli,2022-01-06T00:31:37Z,unnecessary use of type name,0,0.630567729473114
779225711,1384,Paul-Licameli,2022-01-06T00:33:31Z,"""prevents""",0,0.9880067110061646
779226374,1384,Paul-Licameli,2022-01-06T00:35:58Z,"is this truly strongly exception-safe, meaning that if `forward` throws, `*mmodel` is in an unchanged state? to answer that would require knowing what promises torch makes.",0,0.9847458600997925
779228061,1384,Paul-Licameli,2022-01-06T00:41:31Z,"""series""",0,0.9806151986122131
779229662,1384,Paul-Licameli,2022-01-06T00:46:41Z,"""bar""",0,0.9867562055587769
779229759,1384,Paul-Licameli,2022-01-06T00:47:05Z,an in-class initializer might help the reviewer,0,0.9902612566947937
779230903,1384,Paul-Licameli,2022-01-06T00:50:41Z,"this is the third time i'm reading a similar new exception class, defining `what()`. perhaps the common pattern needs to be a new utility i should add to lib-exceptions.",0,0.9865463972091675
779234202,1384,Paul-Licameli,2022-01-06T01:01:10Z,would be nice to add `{}` initializers,0,0.9827761650085449
779234645,1384,Paul-Licameli,2022-01-06T01:02:25Z,"more ""stupid"" pointer members, which should be initialized",-1,0.8832806348800659
779235877,1384,Paul-Licameli,2022-01-06T01:06:54Z,"i prefer to see member initialization before the constructor body where possible, not as assignments. (in fact you have no choice when a member is const or is a reference.) or, as mentioned, initializing in-line in the class. again all this helps a reviewer check correctness of things.",0,0.9894802570343018
779236747,1384,Paul-Licameli,2022-01-06T01:09:26Z,might comment that this is an abstract class,0,0.9858104586601257
779238324,1384,Paul-Licameli,2022-01-06T01:14:48Z,"you omitted `mapplybutton` ! again, in-class initializers for the pointers would make it easier to check that there is no omission.",0,0.993661642074585
779240720,1384,Paul-Licameli,2022-01-06T01:22:20Z,"this, and the following two vector-valued accessors, might return const reference, and the places that use them might bind variables with `const auto &tags = ...`, for avoidance of vector copies.",0,0.9906095862388611
779241073,1384,Paul-Licameli,2022-01-06T01:23:31Z,uses of `std::cout` for debugging purposes should be removed from production code.,0,0.9885918498039246
779242441,1384,Paul-Licameli,2022-01-06T01:27:45Z,"should be like `xo(""%s labels"").format(leader->getname()).translation()` 1. ""labels"" needs to be internationalized 2. and ""substitute, don't concatenate"" is a rule for translations that include some variable part: other languages might want other word orders 3. and an i18n-hint comment should precede",0,0.9936227202415466
779243999,1384,Paul-Licameli,2022-01-06T01:32:53Z,"don't need the cast, widening size_t to samplecount",0,0.9937208890914917
779244885,1384,Paul-Licameli,2022-01-06T01:36:02Z,"i would pass labeltrack by reference, since the smart pointer ownership policy is not relevant to what the function does.",0,0.9903439283370972
779247857,1384,Paul-Licameli,2022-01-06T01:46:11Z,`stamp(...)` is unnecessary; `emplace_back` itself is a variadic function passing arguments to the element type constructor.,0,0.9932724237442017
779758600,1384,hugofloresgarcia,2022-01-06T18:16:10Z,resolved in bf7a9ac5f,0,0.9941867589950562
779773337,1384,hugofloresgarcia,2022-01-06T18:40:12Z,resolved with rebase,0,0.9918654561042786
779778482,1384,hugofloresgarcia,2022-01-06T18:48:30Z,resolved in 7e642c2d8da630073e45fe99d4e9687131e97a22,0,0.9945757389068604
779778841,1384,hugofloresgarcia,2022-01-06T18:49:08Z,resolved in 7e642c2d8da630073e45fe99d4e9687131e97a22,0,0.9945757389068604
779779313,1384,hugofloresgarcia,2022-01-06T18:49:50Z,"yes! we're not using them for now, but could be useful once search capabilities are possible",1,0.9674773216247559
779784214,1384,hugofloresgarcia,2022-01-06T18:58:09Z,resolved in 3b4f57d5c,0,0.994080126285553
779786672,1384,hugofloresgarcia,2022-01-06T19:02:15Z,resolved in 548b8a32d77953433c6d4025cc08a10c7af4d98e,0,0.9944717884063721
780292383,1384,Paul-Licameli,2022-01-07T14:20:11Z,"you say it is intentional that ""tags"" is not required, so no mistake. good. can that be # commented for the next reader?",1,0.8460283279418945
780296391,1384,Paul-Licameli,2022-01-07T14:26:36Z,"this mention of asio duplicates what is elsewhere in the file, and i think it's not relevant to deep learning and was mistakenly included.",0,0.986739993095398
780336161,1384,Paul-Licameli,2022-01-07T15:26:36Z,this is correct,0,0.9877755641937256
780337823,1384,Paul-Licameli,2022-01-07T15:29:01Z,this is incorrect though. sorry i wasn't clear. it is correct to have `list (append` and incorrect to have `set` within this loop. but there should be `set( outputs )` before `foreach` to be sure `outputs` is empty before each appending.,-1,0.982280969619751
780340475,1384,Paul-Licameli,2022-01-07T15:32:55Z,the consequence of the mistake could be that resampler.pt is changed but deeplearning-models target would not be updated by the build step.,0,0.9800987243652344
780346186,1384,Paul-Licameli,2022-01-07T15:41:12Z,"i think there are assumptions elsewhere that the first member of stamp is always less than or equal to the second. is there any guarantee that the data delivered by torch will satisfy that condition? if not, should you check it and enforce it here? either by discarding bad stamps, or swapping the bounds?",0,0.9896550178527832
780355458,1384,Paul-Licameli,2022-01-07T15:55:09Z,cmakelists.txt suggests that this effect has other uses besides source separation.,0,0.9902509450912476
780360334,1384,Paul-Licameli,2022-01-07T16:01:59Z,[a link] does not (yet) exist. will it? likewise for the other manualpage for the analyzer. remember to discuss with how this should be documented on-line. our system for documentation may change.,0,0.9923328161239624
780367373,1384,Paul-Licameli,2022-01-07T16:12:49Z,see corresponding place in deeplearninganalyzer. maybe we need to be careful about internationalization of names of track. maybe it would be nice to translate the labels. but labels depend on some imported model and are not known from the source code tree. (they come ultimately from the .json data?) an open question how this might be fixed.,0,0.9886062741279602
780369072,1384,Paul-Licameli,2022-01-07T16:15:32Z,is this short description the source of the strings appended to track names? do we have any control over this schema? can we somehow provide optional translations of user-visible short and long descriptions into other locales?,0,0.9922371506690979
780374218,1384,Paul-Licameli,2022-01-07T16:23:45Z,"i checked again to see which of the ""setter"" member functions of modelcard are used. long_description, short_description, and labels are never used (where i think we might want to solve the i18n problem). also sample_rate, multichannel, effect_type, domain_tags and tags are not used. do you need to repair these omissions?",0,0.9927670955657959
780377514,1384,Paul-Licameli,2022-01-07T16:28:37Z,"fix ""to to""",0,0.9929433465003967
780381957,1384,Paul-Licameli,2022-01-07T16:35:18Z,"this function is used in two places, the analyzer and the effect. should it have a simple early exit path in case the sample rates are equal?",0,0.9932249188423157
780384377,1384,Paul-Licameli,2022-01-07T16:38:56Z,"i observe downmixing after resampling in the analyzer, but the opposite in the effect. is the difference a mistake? or is it significant, and should be commented? or is it unimportant?",0,0.9864723682403564
780391006,1384,Paul-Licameli,2022-01-07T16:48:57Z,is this resampling needed or is it redundant with the second resampling in `processone`?,0,0.9927676916122437
780406580,1384,Paul-Licameli,2022-01-07T17:13:36Z,"as many tracks are made, as there are labels. but not, number of labels times number of channels in the leader. is this right? should there be more commentary about how stereo tracks are handled? does a stereo-capable model ""label"" left and right outputs separately? if so, then how do you inform the model that the input is not stereo? (by a tensor dimension?) are you making any hidden assumptions that the input is at most stereo? that is correct for now, but who knows how audacity might generalize in the future. if the assumption is important, put in a comment like other comments elsewhere in the source tree: `// todo: more-than-two-channels`",0,0.9847597479820251
780417412,1384,Paul-Licameli,2022-01-07T17:31:34Z,"why was this postprocessing step important? i don't like it that the several effect subclasses have, some of them, special clip-handling logic, rather than having a generalized logic defined in just one place. but i'm not sure what that should be, given possible time-stretching. i'm not telling you to change anything, just noting something that bothers me.",-1,0.9065828919410706
780418881,1384,Paul-Licameli,2022-01-07T17:34:06Z,"i notice that only the clip boundaries of the leader track influence the result. but the clip boundaries of a right channel of a stereo track are not always in correspondence. again i ask how i should understand the results applied to stereo input tracks. i only know that output tracks correspond to labels, an i also see that they are always unlinked, above. so, surprisingly, results of this effect are never stereo. is stereo track handling in fact all unfinished business of this project?",0,0.9509470462799072
780429074,1384,Paul-Licameli,2022-01-07T17:52:05Z,"so, i understand that this effect is doing an outer loop over intervals of time, while any loops over channels are inner loops. getblockindices() looks like it was a lot of work in pursuit of efficiencies, but was there measurement of the benefit? i think you are assuming too that the block boundaries for efficient access occur at the same times in the two channels, but that might be untrue in unusual cases. the division into blocks should have no effect on the outputs of the model. can i be sure that is so? does the model know how to carry state from one pass of the loop to the next? is that exactly one of the points of the tensorflow library, to process large amounts of data piecewise?",0,0.9801332950592041
780430131,1384,Paul-Licameli,2022-01-07T17:53:52Z,"if this pattern of efficient iteration over the blocks of a track is really important, i should think about how to extract it into a reusable utility, and also treat the multiple channel case, for reuse in other effects and analyzers.",0,0.9886171221733093
780432673,1384,Paul-Licameli,2022-01-07T17:58:04Z,"now here is another indexing into `sourcetracks`. whatever the first dimension of the output tensor is, update that many channels in sourcetracks. so what guarantees that this output dimension is equal to (or, just not more than) the number of ""labels""?",0,0.9884297847747803
780437451,1384,Paul-Licameli,2022-01-07T18:06:55Z,"mclasses might remain not-clear when the analyzer exits, occupying a bit of memory needlessly. but i think it is easily changed to a local variable instead of a class member variable, and passed as an argument to tensortolabeltrack.",0,0.988608717918396
780443105,1384,Paul-Licameli,2022-01-07T18:17:34Z,"this function executes inside a destructor (a ""finally"" block in effect.cpp) and should be guaranteed not to let exceptions escape. can i be sure of that, for the following steps? you could wrap all in `guardedcall ([&]{ ... });` which just eats the exceptions, not handling them, but if exceptions are of subclasses of `messageboxexception`, then a delayed action is enqueued to the event loop, to show the user a message later.",0,0.9926614761352539
780447444,1384,Paul-Licameli,2022-01-07T18:25:17Z,let's use `std::max` and `std::min` instead,0,0.9935311675071716
780447880,1384,Paul-Licameli,2022-01-07T18:26:01Z,"you mean, overridden in sub-classes",0,0.9861479997634888
780450716,1384,Paul-Licameli,2022-01-07T18:31:02Z,"this calls a function, which displays a message box and returns int, then throws the int. that's wrong. either do the message box immediately and propagate an error code as the return value, or throw `simplemessageboxexception` to delay the display of a message box.",0,0.9253414273262024
780454901,1384,Paul-Licameli,2022-01-07T18:39:15Z,"instead, [code block]",0,0.9943575263023376
780462241,1384,hugofloresgarcia,2022-01-07T18:53:05Z,resolved in fafafa2af,0,0.9912919402122498
780462263,1384,hugofloresgarcia,2022-01-07T18:53:08Z,resolved in fafafa2af,0,0.9912919402122498
780463178,1384,Paul-Licameli,2022-01-07T18:54:45Z,"does the library provide no means to execute `forward` incrementally and interruptibly? that is unfortunate if so, and would explain some of what i am reading. or do i understand that there is such a means, and you did use it at the higher level, where the effect and the analyzer iterate over blocks of the track? so you are only adding precautions here against a model that still gets hung doing a small piece? should you explain that in comments?",-1,0.5649670958518982
780467740,1384,Paul-Licameli,2022-01-07T19:03:20Z,"precede this line with `if (thread.joinable())` else, a std:: exception will be thrown in the case that the thread was detached.",0,0.9924690127372742
780470520,1384,Paul-Licameli,2022-01-07T19:08:41Z,"in the case that the thread detaches, because the user clicks the cancel button in progress, are we sure it will exit before too much time and not keep consuming resources? there is no portable way to kill a std::thread that invokes bad code.",0,0.9223157167434692
780477619,1384,Paul-Licameli,2022-01-07T19:22:26Z,"there is a greater danger in the case of a detached thread. the lambda capture of the thread function will have dangling references to stack variables of this function after it exits! there is also still a data race updating `output` in this path. the thread might be in the middle of assignment to output before it sees the change of state of `success`. i think you should to this: make a shared_ptr to a structure containing variables that the thread needs. capture that shared_ptr by value in the thread function. if you take the path that joins the thread, copy the `torch::jit::ivalue` that the thread wrote into a result variable. (copies of that type are inexpensive?) but if you take the path that detaches the thread, then zero out the result instead; let the detached thread keep running, but never touching the result variable.",0,0.9516230821609497
780481801,1384,Paul-Licameli,2022-01-07T19:30:40Z,indentation,0,0.9911677837371826
780486199,1384,Paul-Licameli,2022-01-07T19:38:56Z,still unused,0,0.9641698002815247
780488371,1384,Paul-Licameli,2022-01-07T19:42:58Z,"do i understand right that this scroller may get populated with stuff, and grow before your eyes, as a result of asynchronous activity of the modelmanager? that is unusual, as our dialogs go, and is worth a comment!",0,0.9157654047012329
780488661,1384,Paul-Licameli,2022-01-07T19:43:30Z,and this changes contents according to the selected card.,0,0.9953472018241882
780494845,1384,Paul-Licameli,2022-01-07T19:55:06Z,or simply `auto name = verbatim(tag);`,0,0.9953199028968811
780500290,1384,Paul-Licameli,2022-01-07T20:06:07Z,"rather than all this retitling and rebinding of the buttons, you might find this solution more elegant: use `shuttlegui` members `startsimplebook` and `endsimplebook`. in those brackets, use `startnotebookpage` and `endnotebookpage` one for each status. and inside those brackets, add buttons and texts that don't need to change. then just use the `setselection` of the notebook control.",0,0.9827101230621338
780500814,1384,Paul-Licameli,2022-01-07T20:07:14Z,"maybe the pages could even have different layouts, not every one of them having one button and one text.",0,0.9589223861694336
780501631,1384,Paul-Licameli,2022-01-07T20:08:56Z,"you would not need to show and hide the gauge, but just put it in one page. changing the notebook page is then enough to hide it.",0,0.9930237531661987
780502539,1384,Paul-Licameli,2022-01-07T20:10:44Z,unused,0,0.96555495262146
780503298,1384,Paul-Licameli,2022-01-07T20:12:10Z,unused,0,0.96555495262146
780507620,1384,Paul-Licameli,2022-01-07T20:21:04Z,better to internationalize the user-visible string with i18n-hint comment that it abbreviates an unknown number of megabytes.,0,0.9896093606948853
780507783,1384,Paul-Licameli,2022-01-07T20:21:21Z,internationalize this too.,0,0.9920239448547363
780508627,1384,Paul-Licameli,2022-01-07T20:23:05Z,"not the first `verbatim(""%s"")` i see, which could be simplified",0,0.9894372224807739
780509077,1384,Paul-Licameli,2022-01-07T20:24:05Z,"such a small ambiguous word without context needs its i18n-hint comment that it means ""programmed by"" someone",0,0.9384773373603821
780510591,1384,Paul-Licameli,2022-01-07T20:26:49Z,should i worry about a possibly unbouded list of tags laid out horizontally?,0,0.9537922739982605
780512003,1384,Paul-Licameli,2022-01-07T20:29:47Z,this is not properly balanced with `endhorizontallay` !,0,0.9049881100654602
780513187,1384,hugofloresgarcia,2022-01-07T20:32:21Z,resolved in 479a35ad4,0,0.9935989379882812
780513231,1384,hugofloresgarcia,2022-01-07T20:32:26Z,resolved in 479a35ad4,0,0.9935989379882812
780513324,1384,hugofloresgarcia,2022-01-07T20:32:40Z,resolved in 8fe2f0dab,0,0.9946516752243042
780513385,1384,hugofloresgarcia,2022-01-07T20:32:47Z,resolved in 479a35ad4,0,0.9935989379882812
780513429,1384,hugofloresgarcia,2022-01-07T20:32:53Z,resolved in 580b7f943,0,0.9939720034599304
780515090,1384,hugofloresgarcia,2022-01-07T20:36:39Z,resolved in 1a5105597,0,0.9940745234489441
780518680,1384,hugofloresgarcia,2022-01-07T20:44:02Z,resolved in 0d3f97f48,0,0.9944041967391968
780519580,1384,hugofloresgarcia,2022-01-07T20:45:56Z,resolved in fafafa2af,0,0.9912919402122498
780520154,1384,hugofloresgarcia,2022-01-07T20:47:12Z,resolved in 09844aa67,0,0.9951346516609192
780520191,1384,hugofloresgarcia,2022-01-07T20:47:18Z,resolved in 09844aa67,0,0.9951346516609192
780525319,1384,hugofloresgarcia,2022-01-07T20:58:15Z,resolved in 8cce7502a,0,0.9941199421882629
780525334,1384,hugofloresgarcia,2022-01-07T20:58:16Z,resolved in 8cce7502a,0,0.9941199421882629
780525349,1384,hugofloresgarcia,2022-01-07T20:58:18Z,resolved in 8cce7502a,0,0.9941199421882629
780525366,1384,hugofloresgarcia,2022-01-07T20:58:20Z,fixed in 8cce7502a,0,0.9944867491722107
780527031,1384,hugofloresgarcia,2022-01-07T21:01:47Z,4164841bf,0,0.9867047071456909
780596738,1384,Paul-Licameli,2022-01-08T00:19:12Z,"""tensor""",0,0.9929592609405518
780601452,1384,Paul-Licameli,2022-01-08T00:42:13Z,no longer todo ?,0,0.9784526228904724
780603332,1384,Paul-Licameli,2022-01-08T00:52:38Z,"i see this question, and i think a solution might be: [a link] and the related `std::future`, which establish a channel between threads that can perform a one-time communication of either a result value or an exception. you can read details, while i try to understand your code better to see whether this might really apply here.",0,0.9844173192977905
780718425,1384,Paul-Licameli,2022-01-08T23:50:02Z,there is an incomplete thought in that comment,0,0.9720459580421448
780718824,1384,Paul-Licameli,2022-01-08T23:57:05Z,"i made some trial runs, and the color choices should be adjusted. the yellow color for ""installing"" made a poor contrast between text and background which was hard to read. but this is one of the easiest things to change.",0,0.8363868594169617
780720000,1384,Paul-Licameli,2022-01-09T00:19:24Z,"now it's time to speak of the difficult topic of thread safety, where i see problems. 1. i understand now that this and other progress and completion callbacks ultimate are given to networkmanager, which will execute them on non-main threads. 2. i see many uses of `callafter` in modelcardpanel.cpp and modelmanagerpanel.cpp that had no explanation in the comments, but they make sense now that i understand this fact about threads. an inner lambda, given to `callafter` by the outer lambda, means the inner lambda is sure to be enqueued to execute in the main thread later at idle time of the event loop, and that serializes those inner lambdas so there are no data races between them. 3. you may not have known this, but: you don't need a window to invoke callafter. you can also invoke this method on the global object, `wxtheapp` defined in ` `. 4. in fact, i recommend you do exactly this, here at the low level of deepmodelmanager.cpp, in all places that some callback is passed to networkmanager. wrap all callbacks passed in from above in lambdas that pass them to `wxtheapp->callafter`; pass the wrapped callbacks, only, to networkmanager; and then in deepmodelmanager.h, where the callback `std::function` types are declared, comment that they are guaranteed to execute in the main thread. then, the callbacks upstairs in the dialog files can be simplified. 5. lambdas like this one should also be wrapped (downloadmodel in this case would wrap them, but they would remain unchanged here). because, as it is now, there is a dangerous data race. `isinstalling` uses `mresponsemap`, here in the thread pool, but the same map might be mutated concurrently in the main thread by `cancelinstall`. dangerous! you could guard accesses with a mutex, but you can also just use callafter to serialize all the work in the main thread.",0,0.9355959892272949
780720745,1384,Paul-Licameli,2022-01-09T00:34:00Z,"i have more to say, about a better way to handle the lifetime of window objects. 1. the code comment above suggest to me you discovered a crash, and worked around it. the workaround was not perfect, becase `this->isinstalling(card)` might have transitioned from true above to false below, because of a thread context switch at just the wrong time. serializing all on the main thread will solve that. still, the need for the workaround points to something not right elsewhere in the program. 2. the only lambda that is ever wrapped inside this one is `onprogress` defined in `modelcardpanel::oninstall`, and i think you discovered a dangling pointer crash in that lambda because the `this` that was captured, no longer existed when the callback happened. am i right? 3. a solution for dangling pointers is to use a weak pointer. i do not mean `std::weak_ptr` in this case, becuase it is not recommended to use standard smart pointers with certain wxwidgets objects, that have their own special memory management. instead, see this: [a link] 4. so, better that `modelcardpanel::oninstall` should capture a `wxweakref` to `this`, and not `this` itself, in the lambda. then that allows a null pointer check inside that lambda, that the window still exists. (no danger in that case that the non-null pointer will become stale because of the action of other threads. all deletion of windows is done in the main thread.) 5. really it is the responsibility of `onprogress`, defined there, to guard against capturing a dangling pointer. fix it there, then simplify here, removing this intermediate level of wrapping. 6. should you do the same in the five other places that now use callafter in the *dialog.cpp files? i haven't proved yet to myself that it's necessary in all cases, but it is easy to do to enhance safety. so, do that!",0,0.9747119545936584
780721852,1384,Paul-Licameli,2022-01-09T00:53:52Z,"when making a ""singleton"" class like this, these lines, to prohibit copying, are also useful: [code block] the are redundant to stop copying in this case, because of the private destructor and the `std::mutex` member, but still it makes the intent plain and the impossibility of copy more obvious to the reviewer. banning copy causes the compiler to flag this mistake: [code block] where `&` to declare a reference variable was omitted. i have been guilty of such mistakes.",0,0.9304516911506653
780722560,1384,Paul-Licameli,2022-01-09T01:06:03Z,"i see the string literals ""model.pt"" and ""metadata.json"" repeated in many places. better to write each literal only once and give it a variable name, then reuse the name. this matters less inside one .cpp file, but i don't like it when i see long-distance coincidence of number or string literals in different .cpp files. might this file have need to grow and split in future?",-1,0.9469451308250427
780722839,1384,Paul-Licameli,2022-01-09T01:10:39Z,which call above might throw `const char *`?,0,0.9933713674545288
780723110,1384,Paul-Licameli,2022-01-09T01:16:18Z,"i'm not very sure of this assumption, even after all is serialized in the main thread. it's harmless if the assumption is wrong. i wouldn't make an assertion.",0,0.8197832703590393
780723396,1384,Paul-Licameli,2022-01-09T01:21:48Z,"the mutex locked above could be eliminated as i have suggested elsewhere, and `insert` does not throw that exception type, so couldn't this simplify?",0,0.9943963289260864
780724814,1384,Paul-Licameli,2022-01-09T01:46:35Z,"""anywhere""",0,0.9931032657623291
780724842,1384,Paul-Licameli,2022-01-09T01:46:59Z,"""it's""",0,0.9618598818778992
780725347,1384,Paul-Licameli,2022-01-09T01:56:23Z,"`uninstall` throws if the card was already not installed. are you sure it won't throw here? maybe make uninstall non-throwing, and insert throws at other uses of it? is there a guarantee that `cancelinstall` aborts the response and that this callback is not invoked again? i'm not sure.",0,0.9826327562332153
781577694,1384,hugofloresgarcia,2022-01-10T21:44:14Z,e27545cbe5c2905cc9555f14c840eb8d3d870e5d,0,0.9546172022819519
781584234,1384,hugofloresgarcia,2022-01-10T21:50:08Z,539a3ead07f5a298c8bca75203e772f8f74321a9,0,0.9641168117523193
781593996,1384,hugofloresgarcia,2022-01-10T21:59:08Z,94de8a3bbcca7f5c348a4b98865eed91a3b0a8b3,0,0.9246606230735779
781599543,1384,hugofloresgarcia,2022-01-10T22:04:31Z,b447514d38b84c98c1d08508c2f6d12ca752d1c0,0,0.9691717624664307
781650490,1384,hugofloresgarcia,2022-01-10T23:27:10Z,3a45be1d37e3b81b72ce5da358dab578a0144474,0,0.9747406244277954
781650952,1384,hugofloresgarcia,2022-01-10T23:28:13Z,30f12ed7fc19470527419f8782fceb3ca7c15386,0,0.962503969669342
781653205,1384,hugofloresgarcia,2022-01-10T23:33:10Z,1c33a378e460e0e1b8d7cd9028b13f906646f4b3,0,0.9639748930931091
781655027,1384,hugofloresgarcia,2022-01-10T23:37:31Z,c2b6d73b7606a41209e160878eba7699e451cd45,0,0.9710468649864197
781663991,1384,hugofloresgarcia,2022-01-11T00:00:58Z,added a clarification [code block],0,0.9952693581581116
781664158,1384,hugofloresgarcia,2022-01-11T00:01:19Z,8d42c80dded1ba5dd6b0d02155d8f145c67549d2,0,0.9620411396026611
781665081,1384,hugofloresgarcia,2022-01-11T00:03:54Z,a51ac92a90a6efb6243d1cf208da660f7819823c,0,0.9395581483840942
781667603,1384,hugofloresgarcia,2022-01-11T00:10:30Z,525fb9b9e497bcd38a812067cf7ce69350e9bcec,0,0.8254263401031494
781667642,1384,hugofloresgarcia,2022-01-11T00:10:38Z,4619c09faa3e0b2f4f54f70adb7e3b8721b4e646,0,0.9238216280937195
781667666,1384,hugofloresgarcia,2022-01-11T00:10:42Z,4619c09faa3e0b2f4f54f70adb7e3b8721b4e646,0,0.9238216280937195
781668259,1384,hugofloresgarcia,2022-01-11T00:12:17Z,2161ece9c7f4b4533f82c7acaeaf375c1c9f3a48,0,0.9706509113311768
781668407,1384,hugofloresgarcia,2022-01-11T00:12:42Z,525fb9b9e497bcd38a812067cf7ce69350e9bcec,0,0.8254263401031494
782375025,1384,hugofloresgarcia,2022-01-11T17:28:18Z,d19180bd489b299b7e7a8caee2c5a9f13bd2e689,0,0.9508130550384521
782375135,1384,hugofloresgarcia,2022-01-11T17:28:26Z,d19180bd489b299b7e7a8caee2c5a9f13bd2e689,0,0.9508130550384521
782392255,1384,hugofloresgarcia,2022-01-11T17:46:47Z,7ae287f72127a0f04e62564fc227c7c958ee76c1,0,0.9530735015869141
782392311,1384,hugofloresgarcia,2022-01-11T17:46:52Z,7ae287f72127a0f04e62564fc227c7c958ee76c1,0,0.9530735015869141
782396413,1384,hugofloresgarcia,2022-01-11T17:52:29Z,358f92a21c5048518f61d8a9e5c83045659791ad,0,0.9157696962356567
782409290,1384,hugofloresgarcia,2022-01-11T18:10:31Z,3db261fb8644bbb764504db69d4fd10223f7dec0,0,0.9450629949569702
782409381,1384,hugofloresgarcia,2022-01-11T18:10:39Z,3db261fb8644bbb764504db69d4fd10223f7dec0,0,0.9450629949569702
782409424,1384,hugofloresgarcia,2022-01-11T18:10:43Z,3db261fb8644bbb764504db69d4fd10223f7dec0,0,0.9450629949569702
782409467,1384,hugofloresgarcia,2022-01-11T18:10:47Z,3db261fb8644bbb764504db69d4fd10223f7dec0,0,0.9450629949569702
782409550,1384,hugofloresgarcia,2022-01-11T18:10:56Z,3db261fb8644bbb764504db69d4fd10223f7dec0,0,0.9450629949569702
782410994,1384,hugofloresgarcia,2022-01-11T18:12:51Z,"yes, the labels do come from the .json data, meaning that they would have to be translated on the fly somehow.",0,0.9909750819206238
782431016,1384,hugofloresgarcia,2022-01-11T18:41:58Z,"this is the short, 50-something character description shown on the scrolled window on the left. it helps users browse through models and pick the one suited for their needs. because these models (along with their json metadata) are meant to be contributed by the community (and hosted in huggingface repositories), i can't think of a way to provide optional translations. maybe querying a translation api?",0,0.965579628944397
782432357,1384,hugofloresgarcia,2022-01-11T18:43:48Z,"mmmm, i think those setters are not used because those fields are filled out in `modelcard::deserialize` always (since they come from json data), but i wanted to leave them there for completeness. any thoughts?",0,0.9644584655761719
782435099,1384,hugofloresgarcia,2022-01-11T18:47:51Z,"it is unimportant, but i fixed it for consistency. 1756e7ca96f0dcdd5650aaebc950f8390d3dbc3d",0,0.980369508266449
782436380,1384,hugofloresgarcia,2022-01-11T18:49:46Z,the content in `sourcetracks` contains the result audio output by the deep model. deep models process audio at their own sample rates (typically 16k). this resampling step resamples each output track from the deep model's sample rate to the input track's original sample rate.,0,0.9937148690223694
782471486,1384,hugofloresgarcia,2022-01-11T19:41:10Z,5ffa9262fd2870e777e192f70b74b4d64b4e1638,0,0.9700505137443542
782477323,1384,hugofloresgarcia,2022-01-11T19:49:58Z,"yeah, the input to the deep model can currently have any number of channels (more-than-two-channels is supported), but each output track has to be mono. i don't think it would be too hard to support multichannel output tracks though.",0,0.982751190662384
782490022,1384,hugofloresgarcia,2022-01-11T20:09:24Z,355d1e08c421b7605144e20d965125c36b8b47b3,0,0.9682080745697021
784335483,1384,hugofloresgarcia,2022-01-13T21:25:50Z,f09c89099133a4bc51f6837a54627a504452fc7c,0,0.9582027196884155
784335513,1384,hugofloresgarcia,2022-01-13T21:25:53Z,fixed in f09c89099133a4bc51f6837a54627a504452fc7c,0,0.993794322013855
785067143,1384,hugofloresgarcia,2022-01-14T18:31:21Z,using wxtheapp->callafter works!,0,0.6242236495018005
785071005,1384,hugofloresgarcia,2022-01-14T18:37:56Z,"removed those unnecessary checks from uninstall. now, it will only throw if there was an error in wxfileremove when the file actually exists. cancelinstall should always abort the response",0,0.9903765320777893
785073768,1384,hugofloresgarcia,2022-01-14T18:42:41Z,"libtorch does not provide a way to execute `forward` incrementally and interruptibly. i'm processing the audio clip-by-clip. each clip is processed in blocks, where i use `track->getbestblocksize` to get the size of each block. i find that the blocks are in the order of a few seconds, but deep learning models can still take a while when processing a few seconds of audio. suggested to not do `forward` in the main thread, because of how slow some deep models are to process audio.",0,0.9864592552185059
785074545,1384,hugofloresgarcia,2022-01-14T18:44:02Z,done! added a struct that holds all necessary variables for as long as the detached thread runs,1,0.942696750164032
785084387,1384,hugofloresgarcia,2022-01-14T19:00:22Z,"is it possible to just process the track clip-by-clip? would it cause any memory problems if the clip is too large? using `track->getbestblocksize` was just the way a few other effects are implemented in audacity, so i figured i would try to follow the pattern.",0,0.9907873272895813
785086380,1384,hugofloresgarcia,2022-01-14T19:03:39Z,this should work better [code block],0,0.9850339293479919
787038773,1384,hugofloresgarcia,2022-01-18T18:27:45Z,"i don't think const is really needed here, so i removed it for now.",0,0.9858539700508118
805384996,1384,chrahunt,2022-02-13T16:42:17Z,should this be `audacity_has_deeplearning`?,0,0.9929805397987366
1137383630,4414,Paul-Licameli,2023-03-15T16:15:56Z,"i see you have got used to the boilerplate for making new attached objects. `clientdata::site` is a great idea if i may say so immodestly, but i find this kind of repetition a bit painful. i have some ideas for using a crtp template to automate the writing of all this `get` junk, requiring only that you supply the factory. please review my #4395 . that, or something close to it, may be part of the solution.",0,0.6059231758117676
1137394761,4414,Paul-Licameli,2023-03-15T16:22:52Z,"as we mentioned today, maybe we join this with lib-time-frequency-selection, just to avoid too many libraries. that did not previously have the two dependencies above, while it also depends on lib-screen-geometry and lib-project-history. all four of these are comparatively low level things -- screen geometry is even a leaf.",0,0.9893255233764648
1137403722,4414,Paul-Licameli,2023-03-15T16:28:36Z,"did i ever explain the prohibited macro and why i don't still use it and sometimes remove it? wow, seven years ago. 9e5d31d347873f7e54f5a4b7e8528fa61490b792 while purging all the old naked news and deletes, i wanted easy text scans to see where remaining ones were that needed work. `safenew` also dates from this time for certain news that are correctly unpaired and don't need smart pointers -- any construction of a wxwindow with a non-null parent, because the parent assumes deletion responsibility (and i think qt works the same?).",0,0.9305555820465088
1137417646,4414,Paul-Licameli,2023-03-15T16:37:37Z,did you also look at the examples of registry item subclasses in namespace `menutable`? that incidentally was a focus of the cycle-busting i was doing yesterday.,0,0.9927247166633606
1137427920,4414,Paul-Licameli,2023-03-15T16:44:12Z,"what you did here, to adapt one abstract visitor interface to another, might be more nicely done with a template convenience defined in registry.h itself.",0,0.9882042407989502
1137429473,4414,Paul-Licameli,2023-03-15T16:45:16Z,... because one can easily foresee much repetition of the pattern,0,0.9710302352905273
1137434318,4414,Paul-Licameli,2023-03-15T16:48:29Z,i would use `final` not `override` for these three functions,0,0.9926071166992188
1137435686,4414,Paul-Licameli,2023-03-15T16:49:22Z,"all of which are defined below. so, why a registry? do you anticipate more, and scattered add-on cases?",0,0.9936768412590027
1137441222,4414,Paul-Licameli,2023-03-15T16:53:04Z,that you for figuring out and reapplying the registry system. how would you rate your first experience? - [ ] :expressionless_face: - [ ] :face_with_rolling_eyes: - [ ] :yawning_face: - [ ] :exploding_head: - [ ] :star-struck: - [ ] :face_vomiting:,1,0.9787704348564148
1137447227,4414,Paul-Licameli,2023-03-15T16:56:54Z,the files-changed count looks less frightening to me now,0,0.9090635180473328
1137450851,4414,Paul-Licameli,2023-03-15T16:59:18Z,good riddance,1,0.9225127100944519
1137454464,4414,Paul-Licameli,2023-03-15T17:00:57Z,"as we mentioned today -- moving all of the persistency code into the green, if my other prs for track subclasses are merged too. good milestone.",1,0.9869819283485413
1137471312,4414,Paul-Licameli,2023-03-15T17:11:53Z,"i didn't see yet what happens to src/snap.* in a branch that i haven't shared yet, i made it the home of the new attached object, i moved the functions that draw yellow lines out into trackart.cpp, and i moved them to lib-time-frequency-selection i also found a way to break dependency of projectselectionmanager on wavetrack, and then i moved that too into lib-time-frequency-selection",0,0.9898455142974854
1137475798,4414,Paul-Licameli,2023-03-15T17:14:28Z,"good for you, i should do more like it",1,0.9902177453041077
1137480587,4414,Paul-Licameli,2023-03-15T17:17:40Z,"a cmake long comment, please, as with other libraries",0,0.9927828311920166
1137491592,4414,Paul-Licameli,2023-03-15T17:24:43Z,we should just nuke this file and the other listener too,0,0.9891576766967773
1138122564,4414,Paul-Licameli,2023-03-16T04:59:27Z,document the assertion with a comment here,0,0.9942206144332886
1138134394,4414,Paul-Licameli,2023-03-16T05:10:03Z,i think it is wrong to delete this. instead change it to modify the projectrate object.,0,0.6441776752471924
1138135178,4414,Paul-Licameli,2023-03-16T05:11:04Z,likewise here set projectrate,0,0.9923242330551147
1138138969,4414,Paul-Licameli,2023-03-16T05:18:56Z,does as_setrate become unused at this commit?,0,0.9945068955421448
1138148897,4414,Paul-Licameli,2023-03-16T05:32:53Z,is that function unused now?,0,0.9915551543235779
1138159875,4414,Paul-Licameli,2023-03-16T05:52:52Z,"was all this per project persistency of signatures stipulated in design explicitly? if not, be sure there is agreement",0,0.9935253858566284
1138161914,4414,Paul-Licameli,2023-03-16T05:56:35Z,unless you agree to put it into an existing library not a new one,0,0.9921483993530273
1138165658,4414,Paul-Licameli,2023-03-16T06:03:31Z,comment is wrong,-1,0.7911021113395691
1138605804,4414,Paul-Licameli,2023-03-16T12:48:43Z,"the second commit in the sequence breaks the build with this line, and the build is fixed but wrongly, at ""selectionbarlistener no longer controls snapping"", by deleting the line.",0,0.9887716174125671
1138611667,4414,Paul-Licameli,2023-03-16T12:52:55Z,"answer, no, but still the function just calls through to `projectrate::get( project ).setrate( rate );` and there is no need i see for that extra level of abstraction around it in the remaining place.",0,0.98945552110672
1138613979,4414,Paul-Licameli,2023-03-16T12:54:35Z,i'm sure it's wrong -- the command parameter has no effect now,0,0.8524590730667114
1138693157,4414,Paul-Licameli,2023-03-16T13:46:13Z,"when i build the commit that introduces this button on my macbook, the button fails to display and i don't know why. there is just a blank space on the toolbar below the title.",0,0.6957566142082214
1138829158,4414,Paul-Licameli,2023-03-16T14:58:51Z,"ah, the commit comment mentions that visuals aren't all correct yet. i didn't see the second line. you know my habit of adding ellipsis... to the first line of a commit comment to direct the reviewer not to skip more explanation. i recommend it",0,0.8328601121902466
1138830470,4414,Paul-Licameli,2023-03-16T14:59:25Z,"i also observed at that commit that if you drag the toobar off the dock, it does not give you a resizer grip at the corner as other toolbars do.",0,0.987011194229126
1138941112,4414,Paul-Licameli,2023-03-16T16:00:50Z,"i notice now, most toolbars did not have the resizer grip. the two new ones do not. the few that do have it are the meters and play-at-speed, for which it makes sense, and also the time toolbar. the time toolbar adapts the numeric control to a bigger font or smaller. maybe there is a question for design whether that feature would also be desirable for the other toolbars that have this numeric control too -- the selection spectral selection toolbars (that last is hidden by default). or maybe we just ignore that question until after rebasing to qt.",0,0.9760000109672546
1138985998,4414,crsib,2023-03-16T16:16:44Z,"yeah, turns out there was an indirection, let me fix that",0,0.9843251705169678
1138991305,4414,crsib,2023-03-16T16:18:53Z,"bad merge with master, sorry for that",-1,0.9951896667480469
1139229718,4414,Paul-Licameli,2023-03-16T18:50:31Z,"if you add a setting object, be sure to eliminate all repetitions of the path elsewhere. so you must also change pluginmenus.cpp",0,0.9952197670936584
1139272127,4414,Paul-Licameli,2023-03-16T19:34:05Z,the `setname` call got lost and that has bad implications for the screen reader.,-1,0.7469672560691833
1139290648,4414,Paul-Licameli,2023-03-16T19:55:41Z,"the commit that does all of this -- should be squashed with the commit two previous, and the commit that adds images should be before that, if you want to eliminate the unfinished intermediate step of the history.",0,0.9893980026245117
1139295666,4414,Paul-Licameli,2023-03-16T20:01:22Z,"i am trying for myself a rebasing onto recent master and building each commit. so you will discover too if you do that, the need to change this path because the file is now in a library.",0,0.9900369644165039
1139296200,4414,Paul-Licameli,2023-03-16T20:01:56Z,the commit adding this file just disappears when you rebase.,0,0.992731511592865
1139305344,4414,Paul-Licameli,2023-03-16T20:11:43Z,the commit adding this file has an easily resolved conflict in libraries/cmakelists.txt,0,0.9951609969139099
1139309451,4414,Paul-Licameli,2023-03-16T20:16:29Z,"visibility isn't needed for this and the previous struct, but no harm",0,0.9635878801345825
1139310878,4414,Paul-Licameli,2023-03-16T20:17:49Z,avoiding repeated expression `projecttimesignature::get(mproject)` might be nice,0,0.9833852052688599
1139315045,4414,Paul-Licameli,2023-03-16T20:20:35Z,so the distinction between nearest and prior is lost after saving and reloading the project. should we try to fix that?,0,0.9868918061256409
1139331308,4414,Paul-Licameli,2023-03-16T20:33:40Z,is `cassert` really needed?,0,0.9922703504562378
1139334097,4414,Paul-Licameli,2023-03-16T20:36:48Z,should that instead be `return snaptosetting.getdefault();`,0,0.9940061569213867
1139335740,4414,Paul-Licameli,2023-03-16T20:38:47Z,another easily resolved conflict here,0,0.9734505414962769
1139338441,4414,Paul-Licameli,2023-03-16T20:42:05Z,you didn't use this function yet at this commit,0,0.9938035011291504
1139351064,4414,Paul-Licameli,2023-03-16T20:56:58Z,"please comment what the second member means. i had thought the meaning of the second member would be that the output time is different from the input time. but that is not consistent with the examples of snap functions in snaputils.cpp. if the purpose of the boolean is to indicate that a snap function is not found, while a snap function is expected always to return true in second place -- then a snap function should just return double. if that is not the intent, please comment what it is, and change the snap functions so that they sometimes return false.",0,0.9852949380874634
1139353409,4414,crsib,2023-03-16T20:59:41Z,"the whole library is not used in this commit, what's the point?",0,0.8524426221847534
1139354553,4414,crsib,2023-03-16T21:01:08Z,i do know how to resolve conflicts.,0,0.9604635834693909
1139355410,4414,crsib,2023-03-16T21:02:09Z,that's unfortunate omission that i forgot to implement. this function will be quite a bit more complex.,-1,0.9780600666999817
1139355769,4414,crsib,2023-03-16T21:02:37Z,this is the original behavior,0,0.993925154209137
1139359378,4414,Paul-Licameli,2023-03-16T21:07:03Z,the ordering preference initializer makes hints unnecessary. hints will be useful if ever there are scattered snap function definitions in other files,0,0.9937090873718262
1139359891,4414,Paul-Licameli,2023-03-16T21:07:45Z,i do not yet understand the purpose of grouping in this registry. i have not yet seen begingroup or endgroup used for any purpose.,0,0.9088233709335327
1139363563,4414,Paul-Licameli,2023-03-16T21:12:15Z,the transparency of the groups doesn't matter unless they are nameless,0,0.9693303108215332
1139365079,4414,Paul-Licameli,2023-03-16T21:14:07Z,i recall some strange detail about the non-uniformity of one of these frame formats. is the snap function correct?,0,0.8912505507469177
1139366033,4414,Paul-Licameli,2023-03-16T21:15:17Z,this is just like `snaptotime`. will it be changed?,0,0.9943051934242249
1139370694,4414,Paul-Licameli,2023-03-16T21:21:24Z,"this function is removed, but there is still one comment mentioning it. remove that comment.",0,0.9941288232803345
1139371805,4414,Paul-Licameli,2023-03-16T21:22:39Z,the commit that adds this file needs four `#include` directives to change so that it builds.,0,0.9933757185935974
1139373026,4414,Paul-Licameli,2023-03-16T21:24:09Z,this answers an earlier question of mine,0,0.9821001291275024
1139377657,4414,Paul-Licameli,2023-03-16T21:29:37Z,"let this stand for now, but be aware that i'll probably need to break dependencies on trackpanel and also projectwindow to make further progress to toolkit neutrality for larger parts of the code. trackpanel should instead either subscribe to change in selection and refresh itself, or poll for changes in idle time.",0,0.988471269607544
1139386221,4414,Paul-Licameli,2023-03-16T21:41:21Z,this should be in the previous commit if it fixes the build,0,0.9953362345695496
1139390390,4414,Paul-Licameli,2023-03-16T21:47:15Z,this function might be removed at the earlier commit where selectionbar stops using it,0,0.9938831329345703
1139394942,4414,Paul-Licameli,2023-03-16T21:53:52Z,"the commit that removes this can replace `#include ""numerictextctrl.h""` with ""componentinterfacesymbol.h"", lowering this guy in the dependency graph. that will require other `#include`s added in other places that depended on transitive inclusions.",0,0.9940470457077026
1139397405,4414,Paul-Licameli,2023-03-16T21:57:21Z,"you no longer use mconverter in the general case to define snapping -- and indeed it is excessively complicated for most uses. but for the weird cases of pal and/or ntsc frames, conserve old behavior. let snaptoframes include ""numericconverter.h"" and define snapping the old way just for the weird case.",0,0.9773479700088501
1139416898,4414,Paul-Licameli,2023-03-16T22:26:34Z,"why use xo(%d)? for locale dependent decimal point, or maybe even other digit characters.",0,0.9836769104003906
1139417047,4414,Paul-Licameli,2023-03-16T22:26:50Z,maybe more places need to do that,0,0.9545347690582275
1139420789,4414,Paul-Licameli,2023-03-16T22:30:20Z,this event handler changes the project rate but does not change preferences in the .cfg file which is what preference dialog pages are supposed to do. furthermore the commit says you moved quality but this does not remove it from the other page. who specified this change? i think it is not necessary for bears and bars and needs more thought.,0,0.9840202331542969
1139422292,4414,Paul-Licameli,2023-03-16T22:32:43Z,"i think the only other place where we used that project argument in the page factory, is for spectrogram preferences, because this dialog was reused (by me, several years ago) for the new purpose of also changing per-track spectrogram settings.",0,0.9884152412414551
1139444057,4414,Paul-Licameli,2023-03-16T23:12:21Z,does snap to prior become unavailable?,0,0.9913811087608337
1139445092,4414,Paul-Licameli,2023-03-16T23:14:30Z,does it update for change of language?,0,0.9931997656822205
1139445287,4414,Paul-Licameli,2023-03-16T23:14:59Z,wrong comment,-1,0.8904055953025818
1139446648,4414,Paul-Licameli,2023-03-16T23:17:52Z,comment,0,0.6779552102088928
1139447893,4414,Paul-Licameli,2023-03-16T23:20:30Z,"again, language?",0,0.9851112961769104
1139933529,4414,crsib,2023-03-17T08:38:55Z,"tbh the last place i would be looking for snapping would be ""time-frequency-selection"", but i can move the code i you want. when i have started working on this there was no `lib-time-frequency-selection` either.",0,0.971620500087738
1139934225,4414,crsib,2023-03-17T08:39:42Z,i had to look over all the places to understand how to use registries.,0,0.8718037605285645
1139957109,4414,crsib,2023-03-17T08:56:46Z,"the whole registry thing was done in anticipation of your criticism about the lack of open endlessness. i would personally agree with this criticism this time, so i took an open ended approach. doing it not open-endedly or even writing ""own"" would be much quicker, however i have tried to stick to the standard approach used in other places in audacity. this has costed me quite a lot of time.",-1,0.8825066685676575
1139959942,4414,crsib,2023-03-17T08:58:48Z,"i will do it in the following pr, probably not for 3.3 though",0,0.9831753969192505
1139963848,4414,crsib,2023-03-17T09:01:40Z,snapping is out of the selection tb,0,0.9937864542007446
1139965757,4414,crsib,2023-03-17T09:03:36Z,"for the music creation time signature is a vital part of the project. you have reminded me that i forgot about project history though, that i will fix (if have no objections).",0,0.7195121049880981
1139967697,4414,crsib,2023-03-17T09:05:31Z,that's unfortunate.,-1,0.9845683574676514
1139969415,4414,crsib,2023-03-17T09:07:16Z,"i've tried to keep history consistent and easy for review. i failed horribly in the end anyway, because nice history never matches the actual history.",-1,0.9879222512245178
1139970887,4414,crsib,2023-03-17T09:08:42Z,probably not anymore,0,0.8442733287811279
1139974722,4414,crsib,2023-03-17T09:12:40Z,"i would love to omit the ordering preference initializer, but turns out nothing works without it. by the time i figured that out i've spent to much time already to continue experiment on how things work. i would like to keep it this way though, this improves the readability somewhat.",0,0.7093655467033386
1139975849,4414,crsib,2023-03-17T09:13:45Z,"this is a draw back of commit by commit review, yes. it gets worse when everything is split into multiple pull requests too.",-1,0.6255298256874084
1139978553,4414,crsib,2023-03-17T09:16:27Z,potentially we will change the transparency or even make it dependent on user preferences.,0,0.9820926189422607
1139979134,4414,crsib,2023-03-17T09:17:01Z,it only affects the display for ntsc with drop frames.,0,0.9893959164619446
1139979916,4414,crsib,2023-03-17T09:17:45Z,no. i like it to have an explicit name.,0,0.9642139077186584
1139989806,4414,crsib,2023-03-17T09:27:26Z,i have read carefully about the ntsc drop frames. this excessive complexity is only needed for the display purposes. on top of that: * there is a question to design team about the chosen format. we do not have `23.97` display format in audacity. ( fyi) * we handle `29.97` in a straight forward way. we have a separate format that accounts for ntsc drop frames. * i don't really know how important is this format for snapping at all. so should i change this behavior now? i doubt it and i will have to extend the formats of numericconverter to do so.,0,0.6851756572723389
1139990913,4414,crsib,2023-03-17T09:28:24Z,"unfortunate leftover, i had `%d hz` before.",-1,0.9899907112121582
1140021548,4414,crsib,2023-03-17T09:56:02Z,"did. i agree that this is very questionable change, we have discussed it at some point during the design review. `projectrate` in audacity is a very confusing thing per se, which is made far worse by this change. quality preference page allows you to set the project rate to be used by a new project. this setting is called ""default project rate"". selection tool bar, on the other hand, controlled the sampling rate of the project (only by changing the projectrate value). this is now moved to audio preferences. so there is nothing wrong with what the commit message says. i do not understand the value of changing the sample rate of the project without the tracks resampling (or in allowing tracks to have different sample rates in one project). i think that we need to discussed it carefully again. i don't think that it is a blocker for 3.3 though. fyi",-1,0.8392840623855591
1140021716,4414,crsib,2023-03-17T09:56:12Z,as per design.,0,0.9933838248252869
1140022966,4414,crsib,2023-03-17T09:57:22Z,"this needs to fixed, yes. turns out that the timetoolbar doesn't work either.",0,0.9774577617645264
1140157729,4414,Paul-Licameli,2023-03-17T12:16:04Z,"snapping modifies what is time-selected, so it is related. i dont feel very strongly on this",0,0.858478844165802
1140160995,4414,Paul-Licameli,2023-03-17T12:19:23Z,"what did not become a registry yet is the table of formats in numericconverter. i thought i might see that, when you mentioned registries. i hope you agree that registries have their value and will be easier for you to use again.",0,0.6846532821655273
1140162921,4414,Paul-Licameli,2023-03-17T12:21:13Z,or allow me to clean it up? i may still rebase that pr that removes dependencies on toolbars,0,0.9941826462745667
1140165394,4414,crsib,2023-03-17T12:24:00Z,it's up to you :-) i can do that without problems,1,0.99261873960495
1140173728,4414,Paul-Licameli,2023-03-17T12:30:30Z,"actually, there was never undo/redo for rate changes either.",0,0.9844300746917725
1140176906,4414,Paul-Licameli,2023-03-17T12:33:14Z,"i do want to follow this with refactoring that demotes projectselectionmanager to lib-time-frequency-selection, so that will depend on lib-snapping if it still separate.",0,0.9923884272575378
1140183689,4414,Paul-Licameli,2023-03-17T12:38:59Z,maybe an edge case in little used functionality. it seems the snap functions for the weird cases might be good as separately registered stuff.,0,0.9111642241477966
1140184662,4414,Paul-Licameli,2023-03-17T12:39:44Z,which makes more obvious sense as needing i18n,0,0.9912753105163574
1140191284,4414,Paul-Licameli,2023-03-17T12:45:07Z,maybe lib-beats would push things into this registry and into the tables of numeric formats in the ideal reorganization  but it would not paint any more things green.,0,0.9662133455276489
1140203302,4414,crsib,2023-03-17T12:57:31Z,"my point is that right now we do not have snap-to format that needs the complexity of the ntsc drop frames. snapping the time to 29.97 (or, more correctly, to 30 * 1000 / 1001) does not require the magic from the numeric converter, as we do not care about the frame number - we only want to snap to the frame boundary.",0,0.9811310768127441
1140267333,4414,Paul-Licameli,2023-03-17T13:53:10Z,but the code to do it remains in the library for future use maybe.,0,0.993989109992981
1140366935,4414,crsib,2023-03-17T15:15:23Z,i have rechecked and this change is correct. the name is now set in `selectionbar::setselectionmode`. this method is called from `selectionbar::populate()` so the name is always set and correct.,0,0.9878756403923035
1140396408,4414,crsib,2023-03-17T15:41:09Z,"yeah, i think i will leave it for now.",0,0.9621410965919495
1140412848,4414,crsib,2023-03-17T15:54:39Z,"i have rechecked, changing the language re creates all the toolbars from scratch. i thought that time toolbar was broken as i had untranslated beats&bars mode set",0,0.9876102209091187
1140598603,4414,Paul-Licameli,2023-03-17T18:52:28Z,"one thing i overlooked in the first round of review. this `redrawproject` call was lost. my branch to break dependencies on toolbars, which conflicts so much with this one, adds a subscription to projectwindow so it redraws itself. meanwhile: your rebased branch is failing some builds",0,0.9550613164901733
1140652807,4414,crsib,2023-03-17T19:52:45Z,"it fails sanity test with the timeout, i will check why.",0,0.9871440529823303
1140658314,4414,crsib,2023-03-17T20:00:31Z,"is it really need though? i don't know. fix is quite easy, provided that redrawproject defers the action.",0,0.982125997543335
1140977365,4414,Paul-Licameli,2023-03-18T09:30:07Z,"as i said, now i have done that rebase to clean this up.",0,0.9924235343933105
1140978102,4414,Paul-Licameli,2023-03-18T09:36:25Z,i'll do that cleanup in another branch,0,0.9891027212142944
1140979535,4414,Paul-Licameli,2023-03-18T09:49:12Z,"you removed the repetition of the path literal, which is good. but you introduced an `extern` declaration, which i don't like. it lets you ""cheat"" without properly declaring this setting in a header file, and including that file, so that the tool that produces the ""jungle"" graph doesn't reflect the complete, real dependencies. please declare the setting in selectionbar.h. that does not add dependency on selectionbar -- the dependency was already there because of this extern; now it is made more obvious. and we may not like adding dependencies on the toolbars, but from a src/menus file it is not bad. these files are already tops of the dependency graph -- note that they are .cpp files without corresponding .h and rely on registration to add their functionality.",0,0.6281049847602844
1140979988,4414,Paul-Licameli,2023-03-18T09:54:24Z,i'm satisfied,1,0.8741406798362732
1140980107,4414,Paul-Licameli,2023-03-18T09:55:21Z,"it's not ""horrible""",-1,0.7228333950042725
1140987831,4414,Paul-Licameli,2023-03-18T10:05:50Z,thanks for the explanation. if the boolean means nothing more or less than a success indicator -- then i might instead just use `using snapresult = std::optional ;`,1,0.9552648067474365
1140988422,4414,Paul-Licameli,2023-03-18T10:10:44Z,but too i think the functions might be scattered to other files in a later library reorganization (which i don't demand with this pr). the snapping routines special to beats and also the numeric format special to beats would live together and push their special case stuff into registries.,0,0.9908646941184998
1140988601,4414,Paul-Licameli,2023-03-18T10:12:38Z,"on the other hand i see now, that you reuse transparency explicitly for another purpose. i was only thinking of how registry.cpp assigns meaning to transparency in the merging procedure.",0,0.988155722618103
1140988838,4414,Paul-Licameli,2023-03-18T10:14:51Z,maybe we start `lib-video` just to register this with a big `wip` in cmakelists.txt :-),0,0.9860596060752869
1140989378,4414,Paul-Licameli,2023-03-18T10:18:45Z,"what i described is now part of my own pr, to follow this one",0,0.9920898675918579
1140990446,4414,Paul-Licameli,2023-03-18T10:27:36Z,"i wonder sometimes though, should xo(""%d"") be a thing? [a link] we still use sexagesimal time units after all [a link]",0,0.9299848079681396
1140990683,4414,crsib,2023-03-18T10:30:25Z,ideally any formatting function should handle the locale. but it seems to be not the case for wxstring::format,0,0.9915804266929626
1140991031,4414,Paul-Licameli,2023-03-18T10:33:26Z,"i had forgot whether you needed special work with each toolbar to get translation update, besides setting the label. seeing `updateprefs` reminded me that language is one preference.",0,0.9647035598754883
1146257989,4414,Paul-Licameli,2023-03-23T14:08:32Z,build failure on macos -- use operator * instead,0,0.9902228116989136
1146273798,4414,crsib,2023-03-23T14:19:12Z,"yeah, i found it out already...",0,0.974398136138916
1146414914,4414,Paul-Licameli,2023-03-23T15:56:09Z,unused,0,0.96555495262146
1146415365,4414,Paul-Licameli,2023-03-23T15:56:29Z,unused,0,0.96555495262146
1146420544,4414,Paul-Licameli,2023-03-23T16:00:07Z,"answering that question, i have suggested that a lib-time-signature, or lib-beats or whatever you name it, would make sense as a place in which to collect all special behavior related to beats and bars, and put registrations that push more behavior into the other libraries. it was true before this commit that all `undostateextension` subclasses and their factories were in green libraries, not in audacity. given lib-beats, that could remain so.",0,0.9917479753494263
1146422856,4414,Paul-Licameli,2023-03-23T16:01:48Z,they could be `const`,0,0.9925508499145508
1146425341,4414,Paul-Licameli,2023-03-23T16:03:19Z,commit comment disagrees with the new name you really chose,0,0.9136955738067627
1146435462,4414,Paul-Licameli,2023-03-23T16:10:16Z,"the changes for focused digit are good ones i hoped to see, after i reviewed the existing numericconverter code. but now this function requires the precondition `mdigits.size() > 0`. where is the proof of that?",1,0.6158980131149292
1146436253,4414,Paul-Licameli,2023-03-23T16:10:52Z,"as noted, insufficiently safe, unless you test first for no digits and exit with no effect.",0,0.9696199893951416
1146438051,4414,crsib,2023-03-23T16:12:15Z,great catch! but what should be index of the focused digit in this case? i think `-1` is as good value as any.,1,0.9967331886291504
1146441509,4414,Paul-Licameli,2023-03-23T16:14:53Z,visibility should be unnecessary if there are no non-inline member functions,0,0.9919047355651855
1146443278,4414,crsib,2023-03-23T16:16:14Z,`lib-time-frequency-selection` is a library that depends on `lib-project-history`. so should `projecttimesignature` go there? should beats go there as well?,0,0.9922312498092651
1146443618,4414,Paul-Licameli,2023-03-23T16:16:31Z,"i see this cast, and think, better that `i`, `j`, `pos` and the members of the structure be `size_t` -- unless -1 for invalid values is used somewhere?",0,0.9903509020805359
1146449663,4414,crsib,2023-03-23T16:20:56Z,i kinda kept that cast intact (it was implicit previously). it is weird that old code (and the one moved to a new class) haven't really used the `digitinfo::field`. instead it tried to match the `pos` of the digits to get the corresponding field.,-1,0.911002516746521
1146473549,4414,Paul-Licameli,2023-03-23T16:39:22Z,"i would even make the structure members `const size_t` then also, `numericfield::digits` should be `size_t`",0,0.9942654967308044
1146483111,4414,Paul-Licameli,2023-03-23T16:47:05Z,"this commit is good. i would now make it better: `numericconverter::mfields` should be private, and a protected member function gives `numerictextctrl` only the `const` access to the array that it requires.",1,0.9592067003250122
1146488616,4414,Paul-Licameli,2023-03-23T16:51:34Z,this naming convention for ctor arguments isn't necessary. they can just be the same as the members.,0,0.9928115010261536
1146506146,4414,Paul-Licameli,2023-03-23T17:05:48Z,"seeing `-1` made me pause in my review to reason about all uses of `pos` to be sure there was no missing bounds checks. i would instead write `size_t pos{ wxstring::npos };` but seeing that, still i would do the same check. really the safety condition is this: when `parseformatstring` builds the vector of `numericfield`, it is always a legal subscript in `mvaluetemplate`, which will also have the same length as `mvaluestring` when that is built. that should be commented somewhere",0,0.9862268567085266
1146508308,4414,crsib,2023-03-23T17:07:38Z,`mvaluetemplate` was never read. it haven't survived :-),0,0.8035709857940674
1146511348,4414,crsib,2023-03-23T17:09:26Z,"in any case - it was left uninitialized previously, so it really had some random value. i need to revisit the code, probably we can remove the `pos` as well",0,0.9909406900405884
1146515550,4414,Paul-Licameli,2023-03-23T17:11:19Z,"i notice that the `if` and the `else` branch below choose the same format string always. zero padding was made always true, somewhere else in this file, some long time ago. but maybe this function should not be aware of that and still prepared to eliminate the zero padding.",0,0.9847044944763184
1146518854,4414,Paul-Licameli,2023-03-23T17:13:16Z,"i see the enum, i think it's closed-endedness, and i would rather see registration remove the enum completely. maybe i'm about to see that. no spoilers, please!",1,0.6253507733345032
1146519179,4414,crsib,2023-03-23T17:13:32Z,in later code you will find the checks (but somewhat too late). this can be fixed easily,0,0.9921315312385559
1146520942,4414,crsib,2023-03-23T17:14:59Z,that function is wrong in any case. i think i should rewrite it. passing `11` as the range doesn't quite work :-),1,0.9477089643478394
1146522706,4414,crsib,2023-03-23T17:16:19Z,this on stays. it can be quite easily removed though.,0,0.9909737706184387
1146530366,4414,Paul-Licameli,2023-03-23T17:21:12Z,the commit introducing this enum class fails to build. it does not yet remove the old enumeration. one line of the ctor of `numericconverter` should change to ` if (type == numericconvertertype::time )`,0,0.9938284754753113
1146567685,4414,Paul-Licameli,2023-03-23T17:42:18Z,"`fields` is not defined. i would write it [code block] so that the formalized postcondition could be cut and pasted and compiled as the last line before returninng from a definition of `valuetostring`, assuming a local variable called `result`",0,0.9944705963134766
1146568563,4414,Paul-Licameli,2023-03-23T17:43:08Z,"and so that the post could also be written just after the point of call, supplying the missing `this` and changed variable names appropriately, and using only public member functions of the class",0,0.9941142201423645
1146605477,4414,Paul-Licameli,2023-03-23T18:01:36Z,i would make these three `const` (returning the value of scalingfactor from `parseformatstring`),0,0.9944086670875549
1146606579,4414,Paul-Licameli,2023-03-23T18:01:55Z,`mutable` is unhappy but then ntsc is just a weird case,-1,0.9712207913398743
1146632977,4414,Paul-Licameli,2023-03-23T18:14:56Z,why was this new line needed?,0,0.9823294281959534
1146703074,4414,Paul-Licameli,2023-03-23T19:10:08Z,assigned but not yet used at the commit that introduces it.,0,0.9919590950012207
1146704668,4414,Paul-Licameli,2023-03-23T19:11:51Z,simplify with `clamp`,0,0.9953634738922119
1146975498,4414,Paul-Licameli,2023-03-23T23:32:37Z,the second `move` is a little strange,0,0.5407370924949646
1146976689,4414,Paul-Licameli,2023-03-23T23:35:05Z,"this does nothing, but i haven't seen whether later commits add to it",0,0.9827890992164612
1146983044,4414,Paul-Licameli,2023-03-23T23:49:11Z,spelling,0,0.9833834767341614
1146983991,4414,Paul-Licameli,2023-03-23T23:51:29Z,"that looks like a dangerous by-reference capture, but it isn't so long as the tables remain static... worth a commen",-1,0.946039080619812
1146985093,4414,Paul-Licameli,2023-03-23T23:54:04Z,"the three ""begin"" hints can't all be satisfied -- but registry will sort by the internal identifiers for determinacy. but i think the ordering of this registry really doesn't matter for anything the user sees.",0,0.9838390350341797
1146986792,4414,Paul-Licameli,2023-03-23T23:57:56Z,the commit that deletes this finally repairs the build of the commit sequence (except for the porblem building tests on mac),0,0.9947853684425354
1146987295,4414,Paul-Licameli,2023-03-23T23:59:11Z,"you know ""iff"" is a mathematician's shorthand for ""if and only if?"" when you see that word, it isn't a spelling mistake!",0,0.9559469223022461
1146987591,4414,Paul-Licameli,2023-03-23T23:59:48Z,"but you can also write ""whether"" as i do sometimes, to be more precise than ""if""",0,0.9933851361274719
1147306902,4414,crsib,2023-03-24T09:21:04Z,"hmm, i thought tests on mac are fixed, at least ci passes...",0,0.956980288028717
1147308366,4414,crsib,2023-03-24T09:22:21Z,"in the previous version, i had crashes without `orderingpreferenceinitializer`, if i remember correctly.",0,0.9844998121261597
1147330274,4414,Paul-Licameli,2023-03-24T09:42:14Z,i'm still marching up the commit sequence to c9f0e36d59,0,0.9879394769668579
1147412088,4414,Paul-Licameli,2023-03-24T10:47:49Z,"not obvious, but -- this introduces the change to `adjust` that you mentioned in meeting, to fix a bug. clamping the stepped value to bounds, and scaling, were done in the wrong sequence. please mention this subtletly in a commit comment. you must have observed the bad interaction of scaling and min and max while trying to make things work for beats. was this also a bug in the spectral selection toolbar? in fact, maybe it used to be, but see commits 24c2c6e, 0dd3aef where the setting of minimum and maximum were disabled.",0,0.9789689779281616
1147414226,4414,crsib,2023-03-24T10:49:44Z,this came solely from the code observation,0,0.9939642548561096
1147432921,4414,Paul-Licameli,2023-03-24T11:08:12Z,"the template argument is not for crtp. it's to specify the type of argument supplied to computed registry items, which you don't need in this registry. so just use empty angle brackets to default the argument: `<>`",0,0.9948987364768982
1147437269,4414,crsib,2023-03-24T11:13:10Z,"this won't link due to the symbols duplication. this is the reason the snap registry uses some type as well, but you have missed it probably because it is called visitor as well. the `template< typename visitortype = computeditem::defaultvisitor ` is really confusing, it took me a lot of time to figure out that visitortype is not related to the visitor, rather it is a factory. i can use some random tag type here, if you think this would improve the code. tbh, i think registries need quite a lot of work to be done.",-1,0.9511749744415283
1147437597,4414,Paul-Licameli,2023-03-24T11:13:25Z,"seeing you write things like this again, to define another registry, i'm thinking i didn't do enough with the template magic to make the definition of new registry types easier. i have ideas. so, wait for it in 3.4...",0,0.8684461712837219
1147438486,4414,Paul-Licameli,2023-03-24T11:14:14Z,"more shortcomings in the registry system, if you must use `baseitem` rather than a more specific type as your template parameter. i must think about that.",0,0.9111130833625793
1147438647,4414,crsib,2023-03-24T11:14:24Z,"registries should be simplified, not made more complex.",0,0.9771977066993713
1147440785,4414,Paul-Licameli,2023-03-24T11:16:15Z,"a new registry -- and yet, there is still a closed-ended enum class as an argument, which means, the purpose of a registration system still isn't realized. ideally instead of an enum value, there would be a dynamically assigned small integer value (suitably wrapped perhaps in some other new type) passed to the registrator.",0,0.9845464825630188
1147444756,4414,Paul-Licameli,2023-03-24T11:20:06Z,"this is the stuff that the factory type below needs: the parameters of a formatter that are not known at compile time. and i see beat and bar specific stuff here, and i think again that this is a failure of open endedness. there should instead be some type erasure. maybe the argument of the factory should just be `void*` after all? or, `std::any` so that there could be some dynamic type checking by the function, that the expected sort of data are given to it.",0,0.892010509967804
1147451295,4414,Paul-Licameli,2023-03-24T11:26:09Z,there is an assumption that groups don't nest.,0,0.9820833206176758
1147456471,4414,crsib,2023-03-24T11:31:04Z,"please consider it to be no written in the largest font possible. `std::any` does not helps open endianness in any way. how would the numericconverter knows what is expected by the converter? i have not yet seen a place where `any` is an indication of anything but bad design in c++. `void*` can be justified in c due to lack of closures, but not in c++. this specific place is even worse than effectsetting: there is no 1-1 correspondence between the user (numericformatter) and the implementation (formatter), so such architecture would become unusable. i can propose passing a reference to audacityproject instead, if you are ok with this dependency. this would be a simple and easily extensible solution.",0,0.5890341997146606
1147457198,4414,crsib,2023-03-24T11:31:44Z,there is indeed. begingroup assumes it as well.,0,0.9925143122673035
1147459035,4414,crsib,2023-03-24T11:33:02Z,there could be a string based identifier. we need to be able to set the type in the controls.,0,0.9928389191627502
1147475446,4414,Paul-Licameli,2023-03-24T11:46:02Z,"the ""hack"" that the commit comment mentions is, i now see, the `getfraction()` function. please mention that specifically in the commit comment.",0,0.9938406944274902
1147480107,4414,Paul-Licameli,2023-03-24T11:50:29Z,"i also notice now that this big commit in 2021 171d8cf added the special hack of '>' in the mini-language, but the long comment explaining the syntax of the language wasn't update for it. and there is a confusing long i18n comment repeated in many places. i haven't thought whether there was a better way to localize the decimal point. have you?",0,0.7813342809677124
1147482028,4414,crsib,2023-03-24T11:52:11Z,we need to use system one. however this is a problem for future us :-),0,0.619144856929779
1147485500,4414,Paul-Licameli,2023-03-24T11:55:21Z,"there would ideally be a nicer way to express this more in the style of the menu definitions, just using a variadic constructor expression that includes all the details of all the formats. but never mind that for now.",0,0.9828982353210449
1147506327,4414,crsib,2023-03-24T12:15:31Z,"actually, i think that passing audacityproject would be an only option when we implement the ability to have a different tempo and signature across the project :-)",0,0.7610527873039246
1147518277,4414,Paul-Licameli,2023-03-24T12:29:08Z,"ideally this could use observer, but that change would be a lot of work, and the places using the message will not be in green libraries soon if ever.",0,0.9380645155906677
1147520331,4414,Paul-Licameli,2023-03-24T12:31:13Z,"the integer information is no longer set. so i made a careful check of all old uses of these events to be sure the integer value is never retrieved from the event. but there is one such place still! in `spectralselectionbar::onupdate` but then it's only this inialization `int index = evt.getint();` of a variable that is never used, so delete that please",0,0.9849255681037903
1147520992,4414,Paul-Licameli,2023-03-24T12:31:53Z,"if there were an observer message with only the necessary information, i would not have needed to check all that. but you would have written much more stuff.",0,0.9758478999137878
1147537177,4414,Paul-Licameli,2023-03-24T12:48:42Z,"oh no -- now i think you should do all the work of using observer, after all. whereas `tt_setaudiotimeformat` received a `numericformatsymbol` before, now instead it gets `numericformatsymbol` constructed from the internal identifier only, possibly losing translatable string information. in fact, in the tables now, all the numericformatsymbols are like `{ xo(""seconds"") }`, that is using the constructor `componentinterfacesymbol( const translatablestring &msgid )`, so none will really lose information. yet, it doesn't work now with the correct, future-proof generality.",0,0.9708364009857178
1147539755,4414,Paul-Licameli,2023-03-24T12:51:29Z,"similar remarks about the calls to `ssbl_setfrequencyselectionformatname`, `ssbl_setbandwidthselectionformatname`",0,0.9928146600723267
1147541080,4414,Paul-Licameli,2023-03-24T12:52:50Z,"and yet again -- i do have that other pending branch to clean up all that stuff, eliminating those bogus listener classes. maybe it would be less work for us all if i simply pushed that bit of work onto your brnach! that would avoid the problem.",0,0.6179447770118713
1147552464,4414,crsib,2023-03-24T13:03:05Z,i was under impression that the match is done by `internal`. i don't really understand what could be the reason behind the locale specific matching for identifiers. if this is the case - saving to the configuration was broken long before this pr.,0,0.9670502543449402
1147553405,4414,Paul-Licameli,2023-03-24T13:04:03Z,this commit removes this without restoring an equivalent. a later commit does that. stringly speaking it breaks a feature. but i agree it's already too much to squash it all.,0,0.8688613772392273
1147554340,4414,crsib,2023-03-24T13:05:01Z,how can you break a feature that doesn't work?),0,0.9750099182128906
1147555917,4414,Paul-Licameli,2023-03-24T13:06:39Z,the introduction of long-distance coincidence of strings literals between two source files is unfortunate. i don't see yet how these functions could be moved into parsednumericconverterformatter.cpp,-1,0.9593189358711243
1147558302,4414,crsib,2023-03-24T13:08:54Z,why should they?,0,0.9220157265663147
1147558925,4414,Paul-Licameli,2023-03-24T13:09:33Z,"no -- that's wrong. with only one exception (defaultselectionformat), they are not used within this file, but are only used by various dialogs and toolbars. so they easily can and should be moved to that other file. what to do about defaultselectionformat to make it nicer, i don't know yet.",0,0.8308861255645752
1147560673,4414,crsib,2023-03-24T13:11:14Z,i do agree with this. i've just tried to keep this review 1% less long and boring,-1,0.7610234022140503
1147565296,4414,Paul-Licameli,2023-03-24T13:15:08Z,"i think that since ""hh:mm:ss + milliseconds"" is a string with special significance in numericconverter as the default -- then, parsednumericconverterformatter.cpp should call the function that returns that string where it initializes the table, instead of duplicating the literal. and the suggests that the return type of `defaultselectionformat` should be `numericformatsymbol`.",0,0.9841470718383789
1147567321,4414,crsib,2023-03-24T13:17:05Z,"sorry, i don't understand this point at all.",-1,0.993238091468811
1147583433,4414,crsib,2023-03-24T13:31:20Z,"as an option i can move this specific formats into the numericconverter.cpp, so i can keep all the constants in one file. this will, however, affect the user visible ordering. i don't think that this is desirable.",0,0.9879540205001831
1147694948,4414,Paul-Licameli,2023-03-24T14:54:42Z,i do not understand or agree with your uncompromising opposition to all uses of `any`. however my review is not complete enough for me to know whether even i think it is right. i have not yet examined how these configuration things are built and used.,-1,0.7901237607002258
1147697008,4414,Paul-Licameli,2023-03-24T14:56:21Z,"audacityproject is a sort of all-purpose ""context"" oftentimes, it's true",0,0.9842224717140198
1147859880,4414,Paul-Licameli,2023-03-24T17:11:30Z,"you do -- good, please do the small cut and paste. seeing well organized code pleases me rather than bores me. for the same reason we like `boolsetting` and similar for eliminating repetition of a string literal in favor of just one named object -- so this would be good.",1,0.9768801927566528
1147861044,4414,Paul-Licameli,2023-03-24T17:12:43Z,"i would not like that. really i think time and frequency formats would be nicer separated into their own files, but let's not do that yet.",-1,0.9045379161834717
1147867445,4414,crsib,2023-03-24T17:19:32Z,"introducing new (bad) unintended dependencies by doing that, as we saw in this pr already. that specific case should be solved differently though, we should instead have listeners for the preferences reset. tbh i'm quite confused by how you don't like enums, but instead replacing them with constants or global objects :-)",1,0.7841976284980774
1147872072,4414,crsib,2023-03-24T17:23:52Z,"speaking of preferences objects - personally i see shared global writable preferences as a massive source of potential bugs. using objects doesn't make it worse, but it doesn't really fix a problem either.",0,0.574018657207489
1147873072,4414,Paul-Licameli,2023-03-24T17:24:48Z,"it's not saving to config that would be broken. i just haven't followed the chain of consequences to see whether some l10n would be broken afterward in-session. and even then it might only become broken if for any reason the tables had to change their english strings and use the two-argument constructor of the symbol to keep compatibiliy (but that is unlikely to happen). so it would be not broken, but fragile. but as i say, really the selection bar listener classes should be eliminated, and i have a commit already to do that which does not require all else that is in my branch. i would like to append that commit to this branch.",0,0.9390949010848999
1147875340,4414,crsib,2023-03-24T17:27:06Z,"in any case, you have not convinced me that i am wrong. citing componentinterfacesymbol implementation: [code block] we do store `internal` in preferences, so i don't think that i have introduced any kind of bug here.",0,0.9819375276565552
1147876547,4414,Paul-Licameli,2023-03-24T17:28:25Z,"right, that too would eliminate an enum type.",0,0.9898489117622375
1147878449,4414,Paul-Licameli,2023-03-24T17:29:53Z,"if you mean the usage of them should be simplified, then the added template metapoetry is the complexity than enables the simplicity of use. are you opposed to the effort of investing in better templates?",0,0.985759437084198
1147882026,4414,crsib,2023-03-24T17:31:43Z,so should i proceed?,0,0.9838431477546692
1147882434,4414,Paul-Licameli,2023-03-24T17:32:08Z,"explain more some time. i hope you recognize the good purpose they serve. if you mean it should be easier to define new registries to serve that purpose, then i agree and i have some ideas.",1,0.9125539064407349
1147883996,4414,Paul-Licameli,2023-03-24T17:33:48Z,"you found it deductively? well that is good too, even better.",1,0.893227756023407
1147897047,4414,Paul-Licameli,2023-03-24T17:48:37Z,"i see the settings object as revealing the need to make a link dependency explicit. the problems of bad global state may not be solved but the naming of an object with linkage, instead of the reliance on coincident string literals, forces a more deliberate choice about where to define the global object and which place to make dependent on the other place.",0,0.9855167269706726
1147899245,4414,Paul-Licameli,2023-03-24T17:51:08Z,"i dislike enums for a different reason. it's closed-endedness. if instead the set of possibilities may need to grow and serve very unrelated special cases, i would rather have a registry and also good dependency inversion.",0,0.5118696689605713
1147900686,4414,crsib,2023-03-24T17:52:41Z,"i've started writing the comment about how i do not understand why this value was ""switched"", but understood the reason in process. i still think that it could be written differently - in the end we know the frame length is fixed, only the string representation can be different.",0,0.9776297807693481
1147901243,4414,crsib,2023-03-24T17:53:19Z,the real question is how it worked without this line before,0,0.9774004817008972
1147902262,4414,crsib,2023-03-24T17:54:24Z,this was not intentional,0,0.9806923270225525
1147908225,4414,Paul-Licameli,2023-03-24T18:01:23Z,there is more in that class than just its equality and comparison operators.,0,0.9847849607467651
1147909252,4414,crsib,2023-03-24T18:02:37Z,"for one - i don't think `inlinegroupitem` should not be parametrized with a factory which is called visitor :-) in the end, you can only have single `dllexport`ed subclass using the default parametrization, otherwise audacity won't link due to the symbol conflicts between libraries. so i had to use some kind of tagging to overcome this issue. somehow you have missed `struct snapregistrygroup : public registry::inlinegroupitem ` which is wrong too, because inlinegroupitem expects a factory, not a visitor :-)",1,0.9743321537971497
1147912476,4414,crsib,2023-03-24T18:06:40Z,"there is. but we only use equality here and we store this value in preferences. and this value **was** stored in preferences before. so if it will break - it will break globally, not because code here relies only on internal part. for display purposes numericformatsymbol can still be retrieved from the registry. this is how the menu is built!",0,0.9834233522415161
1147915205,4414,Paul-Licameli,2023-03-24T18:09:50Z,"allow me to push the commit that removes the listener classes so i can relieve my doubts, the code gets simpler, and we can stop arguing about this point.",0,0.9578061699867249
1147920512,4414,crsib,2023-03-24T18:16:17Z,"sure, go ahead",0,0.9827264547348022
1147964952,4414,Paul-Licameli,2023-03-24T19:08:27Z,"no, it is really parametrized by a visitor type, which can also act as the context expected by the lambdas that become computeditems in the registry. read this closer: `void appendone( const computeditem::factory &factory )` the visitortype is a template parameter of a ""factory"" type alias but is not itself a factory type. it's the input to the factory. example from pluginmenus: [code block] change the argument of the lambda to audacityproject* (and project to *project inside) and it properly fails to compile the call to appendone. the class `toolbarmenuvisitor` (bad name, i will change it in the pr for lib-menus) implicitly converts to audacityproject & and is also the template argument of the group items used in the menu registry.",0,0.9910645484924316
1148016919,4414,crsib,2023-03-24T20:18:20Z,"i can see how toolbarmenuvisitor is a visiting factory, this doesn't help establishing that relationship when one tries to figure out how to use the registry :-) nor does it help with the linking problems or writing simple registries. for both registries introduced in this pr i had to hack my way through. i understand what you have tried to achieve and i find this solution to be very elegant, but i have a strong opinion that this should be not be done by `inlinegroupitem`. instead, some well documented `computablegroupitem` can be used (naming is my weakness, yes).",1,0.9819620251655579
1148037873,4414,Paul-Licameli,2023-03-24T20:49:39Z,"some details may be revisited, but what i wanted was the convenient variadic calls to `items` or `section` or `menu`, which usually accept `command` but can sometimes just take a lambda in-line for the computed item. the lambda must accept the correct argument type for that registry. what that type is -- had to be given somehow as a template argument.",0,0.9932936429977417
1148044451,4414,Paul-Licameli,2023-03-24T20:53:04Z,"better comments, maybe newer c++17 template tricks for more convenience -- all of this is needed. i need to look over registry.* with fresh eyes after having first done it some years ago, and the pull request for registry-changes has been waiting as a draft for a long time, still needing its self review and cleanup as non-draft. then also i hope you will learn registry inside and out -- read all of registry.cpp and understand how this pull request makes some bug fixes and improvements.",1,0.746826171875
1148346368,4414,Paul-Licameli,2023-03-25T10:34:16Z,a stray character,0,0.904309093952179
1148375233,4414,Paul-Licameli,2023-03-25T14:01:38Z,"repeated work when you come here from `setcustomformat`, but there are other paths",0,0.9942203760147095
1148376419,4414,Paul-Licameli,2023-03-25T14:10:43Z,"pedantically... this commit should be squashed with ""use parsednumericformatconverter in the numericconverter""",0,0.9902123808860779
1148376627,4414,Paul-Licameli,2023-03-25T14:12:13Z,i should have noticed when i reviewed that commit. i am sorry my review was so hasty and careless.,-1,0.9924152493476868
1148383999,4414,Paul-Licameli,2023-03-25T14:31:51Z,"checking again to see what else i might have missed in that commit, i found nothing.",0,0.9583550095558167
1148384934,4414,Paul-Licameli,2023-03-25T14:39:47Z,wrong comment,-1,0.8904055953025818
1148385809,4414,Paul-Licameli,2023-03-25T14:46:44Z,"really -- this is an unnecessary file! when the .cpp accomplishes all its influence on program behavior by registrations, it can be headerless. see src/menus or src/import for other examples.",-1,0.9928387999534607
1148386128,4414,Paul-Licameli,2023-03-25T14:49:30Z,give that an `i18n-hint` comment,0,0.9929192662239075
1148386269,4414,Paul-Licameli,2023-03-25T14:50:28Z,"and at `xo(""bar"")` in snaputils.cpp, too",0,0.9945870637893677
1148386368,4414,Paul-Licameli,2023-03-25T14:51:47Z,i18n-hint,0,0.9788827300071716
1148386466,4414,Paul-Licameli,2023-03-25T14:52:21Z,"""one"" where is the bug you refer to? can you fix it?",0,0.9854093194007874
1148386672,4414,Paul-Licameli,2023-03-25T14:54:21Z,i notice that `fracfield` gets no label,0,0.9900251626968384
1148387006,4414,Paul-Licameli,2023-03-25T14:56:52Z,"i notice `false` passed to the `frac` ctor argument, a little surprising, but then i also see it only influences a different override of `valuetostring` that this class doesn't use",0,0.9825511574745178
1148388748,4414,crsib,2023-03-25T15:09:58Z,i need it for unit tests,0,0.9875205755233765
1148388903,4414,crsib,2023-03-25T15:11:14Z,using log10 is a bad idea. i will rewrite that function anyway.,-1,0.9545964598655701
1148388942,4414,crsib,2023-03-25T15:11:30Z,yes,0,0.9686408638954163
1148389655,4414,Paul-Licameli,2023-03-25T15:17:32Z,"that leads me to think that maybe `numericfields` should contain only the commonly needed fields, and the subclasses of `numericconverterformatter` privately add whatever else is special-purpose, in .cpp files and not included elsewhere. `base` is not needed by this new class. `range` isn't needed by this class either after `createdigitformatstr` uses it to decide the format string. `zeropad` isn't needed as a member either -- for either subclasss! it can be just an argument of the constructor of `numericfield` and `createdigitformatstr `. `pos` and `formatstr` are used by each subclass, but there is no common code in the base class that uses them, except initialization in the constructor. so they too might be removed. that could shrink `numericfield` to just `digits` and `label` -- which are used in the ui layeer code in numerictextctrl. then that means the public interface of lib-numeric-formats is simplified. this structure, which is exposed to numerictextctrl, would have less in it needing documentation.",0,0.9895674586296082
1148390245,4414,Paul-Licameli,2023-03-25T15:22:15Z,the same can be said of parsednumericconverterformatter.h,0,0.9940028786659241
1148390888,4414,Paul-Licameli,2023-03-25T15:26:49Z,indent,0,0.9154122471809387
1148392894,4414,Paul-Licameli,2023-03-25T15:43:27Z,didn't this cause you divide-by-zero crashes?,0,0.9671397805213928
1148393925,4414,crsib,2023-03-25T15:52:11Z,there is a check mfracpart and there are no integer divisions.,0,0.9946885108947754
1148395294,4414,Paul-Licameli,2023-03-25T16:02:30Z,should this be an `override`? (i'm not sure..),0,0.8662228584289551
1148395371,4414,Paul-Licameli,2023-03-25T16:03:06Z,why not call `handleformatterchanged`? (which will do one extra thing),0,0.9927207231521606
1148396620,4414,Paul-Licameli,2023-03-25T16:13:48Z,"revisiting the question of where this should go. i like the idea of a `lib-beats` for other reasons, but even without that, it makes most sense to keep this registration in the file projecttimesignature.cpp. this would require you to change `lib-project-interface` to `lib-project-history-interface` in lib-numeric-formats/cmakelists.txt. i don't think that is a bad dependency. i consider lib-project and lib-project-history as low-level things (and have even thought that they might be merged).",0,0.8125452399253845
1148403891,4414,Paul-Licameli,2023-03-25T17:10:09Z,"at last i have reached the commit in which `numericconverterconfig`, introduced five commits previously, is fully used. forget what i said about `std::any`, yet i'm still uncomfortable with that structure and how the messages are passed. mostly it's analogous with how changes of project rate are communiated to the formatter -- and i have decided i dislike that too. figuring out the more pleasing organization looks like it will turn into another proposed commit from me insted of an explanation, because i wanted to make the change myself to see if it made sense and compile, and it became rather extensive.",-1,0.9234692454338074
1148405083,4414,Paul-Licameli,2023-03-25T17:19:34Z,"i'm catching up with this commit now, which did some of what i suggested to simplify `numericfield`.",0,0.9918434023857117
1148408286,4414,crsib,2023-03-25T17:46:26Z,"i've planned to change that to audacityproject reference, if you don't mind.",0,0.9881496429443359
1148408395,4414,crsib,2023-03-25T17:47:18Z,and i plan to move beat/bar duration calculation to the projecttimesignature,0,0.9943944215774536
1148410009,4414,Paul-Licameli,2023-03-25T18:00:04Z,"essentially this is a many-to-one mapping from identifiers of selection formats, to identifiers of their grain size, and the latter identifiers are then mapped to snap functors by another registry. this repetition of lots of string literals that are private to parsednumericconverterformatter.cpp doesn't feel good. let it stand for now, but now i think the registry of snap functors wants to be placed in the same library with the registry of numericconverteritems, and that registry should implement this map with extra information in the registered items, which is then accessed from snaputils with a visit.",-1,0.9630290269851685
1148410803,4414,crsib,2023-03-25T18:07:06Z,"this is only needed for config migration, it is not used otherwise. please, let's not overcomplicate this. i would rather remove it and stick to default values.",-1,0.7133153080940247
1148411403,4414,Paul-Licameli,2023-03-25T18:11:25Z,no mistake here?,0,0.9810042977333069
1148411472,4414,crsib,2023-03-25T18:11:43Z,i really want to stress that again - i don't think that snapping and numeric formatters are related. they are separate concepts and snapping must not be handled by lib-numeric-format.,0,0.9244179129600525
1148411568,4414,crsib,2023-03-25T18:13:02Z,if you mean the changed tittle - consider it as bug fix :-),0,0.9924057126045227
1148415858,4414,Paul-Licameli,2023-03-25T18:48:01Z,good answer,1,0.9828249216079712
1148416367,4414,Paul-Licameli,2023-03-25T18:53:01Z,i disagree  i think it is reasonable that some form of information about the unit could be part of the registry of formats and accessible to the visitor.,0,0.9374779462814331
1148417744,4414,crsib,2023-03-25T19:01:38Z,"so do i. formatting time to string is unrelated to snapping, they must not share libraries. what happens now is just a configuration migration. it is safe (that's it - a failure has no user visible implications), it is not used anywhere in calculations. it will not be used anywhere in calculations. if you are uncomfortable with it - the only fix is to remove it. i have very strong opinion about it. half of this pr is about breaking the ties between snapping and time display. under absolutely no condition snapping should rely on numeric format functions. what you see in this map is a simple way of converting the list of well known values from the old audacity versions to the new one. it does not introduce any kind of dependency between libraries.",0,0.7480403184890747
1148422279,4414,Paul-Licameli,2023-03-25T19:36:48Z,"ok there is agreement about something. i said let it stand and still think that. there are more important structural issues. but this change made me think that: some notion of identifier of time unit is needed these identifiers should not be a closed-ended list all in one place and each string literal should occur only once in the source the registry of formats includes one such identifier in each leaf, which a visitor can see, so that repetition of that registrys key strings is not needed the registry of snap functions is keyed on the same these criteria are not met yet in the pr",0,0.9570149183273315
1148422948,4414,Paul-Licameli,2023-03-25T19:43:18Z,"maybe im arguing that this bit of logic needs to be elevated to a higher level library. maybe lib-snapping holds the registry of snap functions but snaputils, which finds and applies the functions, goes up to lib-time-frequency-selection.",0,0.9646447896957397
1148423600,4414,Paul-Licameli,2023-03-25T19:46:58Z,"maybe the correction of the setting object at startup time, migrating an old config, is the only thing to elevate to a higher library. then snapping and formats depend neither on the other?",0,0.9874799847602844
1148423844,4414,crsib,2023-03-25T19:49:22Z,"why? what complex logic do you expect from ""finding"" snapping functions? unlike numericconvertertype it is not set anywhere explicitly in code.",0,0.982071578502655
1148429315,4414,crsib,2023-03-25T20:35:46Z,i have pushed a commit trying to clarify the intention of the `readsnapto`. if you are not satisfied and still consider it to be dependency - i will remove that code. resetting snap value to second would be just a minor inconvenience for the users.,0,0.9897693395614624
1148560671,4414,Paul-Licameli,2023-03-26T13:49:20Z,"i approve. so no more `numericconverterconfig`? audacityproject is at a low level of the dependency tree and you can think of it as the context argument for many things that need per-project state, and of course attaching more stuff non-intrusively to the project is what `clientdata` is all about. all that was very much not true of the source code tree before 2019. the project depended on almost everything else becuase it had accessor functions defined in it to retrieve all those others. this was a major reason why hundreds of source files were in a big strongly connected component of the graph. inventing `clientdata` was a great exercise of the dependency inversion principle. i didn't know the solid jargon at the time actually but i was led to the principle by experience.",0,0.8475492596626282
1150445931,4414,Paul-Licameli,2023-03-28T11:29:17Z,"i'm not convinced yet that there is no path that divides by `mfracpart` when it is zero. there is a test here, but you don't then reassign it as 1 or anything like that.",0,0.8423613905906677
1150450287,4414,crsib,2023-03-28T11:32:10Z,"there is no integer division. there cannot be any exception. in any case, please do not continue the review now, specifically of this file.",0,0.9896969199180603
1150473241,4414,Paul-Licameli,2023-03-28T11:49:50Z,"yes, `const auto fraclength = beatlength * mlowertimesignature / mfracpart;` is not an integer division because `mfracpart` is coerced to floating point. but that is irrelevant and my objection is still unanswered. i do not see a guard against division by `mfracpart` when it is zero.",0,0.9814957976341248
1150475185,4414,crsib,2023-03-28T11:51:37Z,it. is. safe. and again - do not review this file now.,0,0.7212252020835876
1150482811,4414,Paul-Licameli,2023-03-28T11:56:47Z,"the comment isn't right. ""/selectionformat"" is still used and still written but does not control snapping at all. what is right is to say, older versions of audacity did not have the ""/snap/to"" key. come to this function only when that key is undefined. i think `snaptosetting` should be static in this file, then, so that all reads of it must go through `readsnapto`. that implies a change in `onresetconfig` in pluginmenus.cpp",0,0.9725450873374939
1150487379,4414,crsib,2023-03-28T12:00:06Z,"this comment is right. `selectionformat` no longer controls snapping. this review already contains 300 comments, which were so far converted to around 30 action point, most of which were extremely minor. this is extremely frustrating and time consuming.",-1,0.9928158521652222
1150495748,4414,Paul-Licameli,2023-03-28T12:06:38Z,"this change is good, and to make it even better, used `taggedidentifier`. `using numericconvertertype = taggedidentifier ` (the tag is an ""elaborated type"" that you don't need to define) this makes a type distinction between this and all other `taggedidentifier` specializations so they won't impliciatly interconvert. note, identifier.h contains several `taggedidentifier` specializations, but do not add to that list. i don't like that list and need to move those aliases elsewhere after fixing some still remaining legacy confusions about the right levels for certain declarations. (see also lib-components, a library with an unclear purpose.)",1,0.8261018395423889
1150504124,4414,Paul-Licameli,2023-03-28T12:12:32Z,"changing an enumeration to an identifier type opens the possibility of an open-ended scattering of the different types, yet, that does not yet happen at this commit",0,0.9899747967720032
1150543430,4414,Paul-Licameli,2023-03-28T12:39:11Z,"danger! define this as a static variable inside a function which returns a reference to that variable. otherwise, if the registered formats are later scattered to other files, then you may suffer from the problems of unspecified sequence of static inititalizations across translation units.",-1,0.9851256608963013
1150570330,4414,crsib,2023-03-28T12:57:22Z,the map is guaranteed to be initialized before the first use and only once. there is precisely zero need for lazy initialization here.,0,0.9921897053718567
1150575214,4414,Paul-Licameli,2023-03-28T13:01:04Z,"then once again, you went to the trouble to make a registry, without taking actual advantage of a registry, so what was the point?",0,0.729041576385498
1150608375,4414,crsib,2023-03-28T13:24:40Z,"common, really? you've blocked this pr because you thought that having a format type as a string was not open ended enough. numericformatters are registered from different places now. i don't plan to move them to a different library because i don't want to create `lib-beats-formats` and i don't want the potential `lib-beats` to depend on `lib-numeric-formats`, because it would be a lower level library. what i agree is that implementing my own registry would've saved me days of time.",0,0.6201406717300415
1150622269,4414,Paul-Licameli,2023-03-28T13:33:53Z,"suppose we wanted the well-known frequency and bandwidth formats to be kept separate from time formats, which might make some sense for better separation of concerns. then there would be some scattering of the cases of this new small registry, and then what i said about the static variable would be relevant. this need for a static defined within a function is such a frequency occurring pattern with registrations that i had to mention it.",0,0.9886795878410339
1150693108,4414,Paul-Licameli,2023-03-28T14:13:58Z,"consider this (please, not ""blocking!"") suggestion about what would seem to me a better organization. - `frequencyconverterformats_`, and what depends on it, `parsedfrequency`, move out of `parsednumericconverterformatter.cpp` into some new file. - then `numericconvertertype_frequency`, used by `parsedfrequency`, also moves its definition into that new file and its declaration into the corresponding header. that requires `frequencydefault` to move too. - now `numericconvertertype.*` don't mention frequency cases at all. - do similar for bandwidths: collect all that is special to bandwidth formats in one file. - even the time-specific formats and registrators might be separated from `parsednumericformatconverter`. then that file is responsible for defining and interpreting the little language, but is (almost) agnostic about special case details. (but there are still some legacy oddities about sample rates and ntsc frames.) - then `numericconvertertype.*` aren't needed. - dependency inversion and open endedness are really achieved: the special cases (time, frequency, bandwidth) depend on the general case, each special case concentrated into one source file. the open-endedness of the registration system is really used to advantage to get this. all that would seem the more natural organization of things to me, and when you first mentioned you were using registrations, i hoped that this was where it was tending.",0,0.9530138373374939
1150718191,4414,Paul-Licameli,2023-03-28T14:30:49Z,"so far the only instance of a new registrator object that is really scattered is `beatstime`. whether you make a new library for time signature or not, still i think it makes sense to concentrate all that is special-case to time signature into one or a few related files, not mixed up with others. so i think `beats` and `triplets` should move out of snaputils.cpp and join `beatstime` in one file. this does not make format conversion dependent on snapping, or the opposite. the general purpose files for those two things are kept separate. but there would be one higher level place that pushes related things for time signature into each of those registries.",0,0.9692073464393616
1150730408,4414,Paul-Licameli,2023-03-28T14:39:18Z,"correct, selection format did control snapping too. anyway i understand the explanation that emphasizes that this is only for migration.",0,0.9850730299949646
1150735501,4414,Paul-Licameli,2023-03-28T14:42:53Z,"registries let us ""scatter"" special cases away from certain closed-ended central listings so that instead we ""gather"" in one place the things that implement a new feature, such as time signature, or spectral selection. the new feature can be non-intrusive in the general case code, which is ""open for extension but closed to modification.""",0,0.9897549748420715
1150759857,4414,crsib,2023-03-28T14:59:16Z,absolutely not. there is absolutely no difference to open-endedness in where those initializations reside. they are in the same file for the sake of reducing the number of changes so your own rule is followed.,0,0.9671497344970703
1150794125,4414,crsib,2023-03-28T15:22:55Z,"this will make the `numericconverter` to be an absolute nightmare to use. it does expect a fixed type by design, there is no audacity-user choice in that. making it an identifier made things bad. your ide no longer can help you. your compiler no longer can help you. scattering the possible values across the files will leave the developer without any clue about how to use `numericconverter` or `numerictextctrl`. enum are not always bad. not everything need to be extensible. speaking of software design - `numerictextctrl` should not be a subclass of `numericconverter`. they are unrelated types. considering that you chose not to make methods like controlstovalues to be virtual - they cannot be even interchanged safely.",-1,0.9715964198112488
1150872628,4414,Paul-Licameli,2023-03-28T16:21:28Z,"no disagreement on that -- and that it still is doesn't reflect any particular wish of mine. i think you will discover that james separated the classes first, very long ago.",0,0.9590948224067688
1151666171,4414,Paul-Licameli,2023-03-29T09:40:48Z,"edge case. on repeat review, i realized the subscriptions are incomplete. snapping may also be influenced by rate, and might need to change with project rate change, if you are so closely zoomed in, you can resolve samples. yes, unlikely. but then i also thought: there might be just one subscription here to projectsnap. project snap could listen to changes of rate and time signature (and whatever else might be snapped to in future) and translate it into a single message for change of parameters relevant to snap.",0,0.9351280331611633
1151670105,4414,Paul-Licameli,2023-03-29T09:44:01Z,"two statements on one long line, the second, a no-op",0,0.9818971753120422
1151672837,4414,crsib,2023-03-29T09:45:39Z,wait for the commit i will push in couple hours! or probably not xd,1,0.9718708395957947
1151674560,4414,crsib,2023-03-29T09:47:07Z,"nah, i think it won't be really changed by the next commit.",0,0.9725030660629272
1151746641,4414,Paul-Licameli,2023-03-29T10:48:10Z,can this be a `const` member?,0,0.9950882792472839
1151751703,4414,Paul-Licameli,2023-03-29T10:52:55Z,a minor point. these two are not made mutually exclusive and custom will quietly override the symbol in case someone give both. but who cares.,0,0.695589005947113
1151775879,4414,Paul-Licameli,2023-03-29T11:15:54Z,"timetoolbar and selectionbar listen for changes and then inform their numerictextctrls. this feels unsatisfactory -- the controls should do their own subscriptions. but getting audacityproject& into the constructors of all numerictextctrl everywhere is too bothersome. i believe these toolbars (and the spectral selection bar, never mind it) are the only non-modal text controls. there are others in timedialog and the label editing dialog and effects that are modal. edge case (i haven't tried it yet): new project. set time signature, and make beat the preferred format. another new project. set a different time signature. switch back to first project. open a modal numerictextctrl. which time signature is used? if it's the wrong one, it's because the numerictextctrl (and numericconverter) are not correctly initialized for the project's time signature but instead use the last values saved in preferences. please just note this, don't try to fix it!",-1,0.9398719668388367
1151777286,4414,crsib,2023-03-29T11:17:18Z,"yeah, just wait me to press push xd",0,0.9885681867599487
1151781861,4414,Paul-Licameli,2023-03-29T11:22:06Z,"i noticed today (it escaped me in an earlier round of review) that the earlier change in deviceprefs changed project rate immediately in the event handler and ignored dialog cancellation, but this now delays the side effect on the project until the ok button. i think that's better, and consistent with how preferences are changed. but is there any debate?",0,0.6584080457687378
1151785294,4414,crsib,2023-03-29T11:24:42Z,why there would be any debate?,0,0.9631208181381226
1151786008,4414,petersampsonaudacity,2023-03-29T11:25:05Z,there are many rough-edges with having multiple projects open - this is just the latest one.,0,0.9749374985694885
1151786426,4414,Paul-Licameli,2023-03-29T11:25:29Z,oh damn it's outdated now,-1,0.9940504431724548
1151788255,4414,crsib,2023-03-29T11:27:15Z,"this is a problem with commit by commit review, yes. especially when every commit does a step by step transformation. i hope you understand my concerns about matryoshka prs now.",-1,0.7969846129417419
1151789756,4414,Paul-Licameli,2023-03-29T11:28:49Z,is this refactoring written or just contemplated?,0,0.9842979311943054
1151790590,4414,crsib,2023-03-29T11:29:39Z,does it matter for this review?,0,0.9863808751106262
1151818975,4414,Paul-Licameli,2023-03-29T11:53:37Z,will i see a commit doing that today?,0,0.9907015562057495
1151819721,4414,Paul-Licameli,2023-03-29T11:54:14Z,"i don't know, there might be another opinion about ui guidelines",0,0.8942561149597168
1151819964,4414,crsib,2023-03-29T11:54:23Z,it is literally the next commit on the branch,0,0.9937293529510498
1152167972,4414,Paul-Licameli,2023-03-29T15:59:16Z,"i notice that the behavior of the false branch changed, and documentation doesn't explain it, but then too, it is never reached anyway because the second argument is always true.",0,0.9850186705589294
1152188698,4414,Paul-Licameli,2023-03-29T16:16:52Z,"thanks for this assertion which explains that crash you saw. i wanted to know how to reproduce this. so, it was in resetting the configuration. i reproduced the assertion failure at the commit before this one. then i rebased my long waiting registry-changes draft pr branch onto it and tried again, and confirmed that the problem is fixed. sorry for the pain that the withholding of that fixed caused. let's get that branch self-reviewed, and reviewed, and merge early in 3.4 so the registry system is more reliable.",-1,0.9822008609771729
1152190027,4414,Paul-Licameli,2023-03-29T16:18:06Z,is the change from 12 to 11 at 50d15a573ca3fc478b09ef94a9009b22c099cd76 intended?,0,0.9943254590034485
1152214827,4414,crsib,2023-03-29T16:35:06Z,"yep, bug in numericfield is fixed. in some of the next commits this will be further improved",0,0.9392003417015076
1152261300,4414,Paul-Licameli,2023-03-29T17:15:35Z,`std::move`?,0,0.9936856627464294
1152273902,4414,Paul-Licameli,2023-03-29T17:27:38Z,"might as well do this for the spectral selection bar too, though in fact sample rate is never used when formatting frequencies or bandwidths.",0,0.9919884204864502
1152284780,4414,Paul-Licameli,2023-03-29T17:37:11Z,"timedialog is constructed only in the function `onsetregion` where audacityproject& is available, so it could easily have more complete context",0,0.9933187961578369
1152288450,4414,Paul-Licameli,2023-03-29T17:40:45Z,"`tagseditordialog` is constructed only in `showeditdialog` and all calls to that have `audacityproject&` near at hand, so likewise, they can have fuller context",0,0.9929108023643494
1152291368,4414,Paul-Licameli,2023-03-29T17:43:44Z,"timerrecorddialog already has a project reference in it, so more context",0,0.9912846088409424
1152295299,4414,Paul-Licameli,2023-03-29T17:47:41Z,"you could sneak audacityproject& in here too, with a change to the factory function at the bottom of the file -- but only when it is given non-null. oh well, at least one use of `emptycontext()' is necessary then.",0,0.990994393825531
1152298374,4414,crsib,2023-03-29T17:50:52Z,timerrecorddialog uses custom format strings and doesn't use rate at all.,0,0.9888972640037537
1152304461,4414,Paul-Licameli,2023-03-29T17:56:52Z,"are these necessary before a project can be created? it is not obvious why so, but i am guessing the construction of the things hooked onto `clientdata::site` by the libraries that lib-numeric-formats uses, made it necessary. those include lib-project-rate now.",0,0.992496132850647
1152306027,4414,crsib,2023-03-29T17:58:26Z,projectrate has a very complex initialization.,0,0.7197957038879395
1152309562,4414,Paul-Licameli,2023-03-29T18:01:47Z,"that's right, and `qualitysettings::defaultsamplerate` unusually uses a computed default value, using `audioiobase` if it were just the constant 44100.0, i wonder if the test could simplify",0,0.9909867644309998
1152309940,4414,crsib,2023-03-29T18:02:09Z,"mockedaudio can be omitted if two assertions are removed from the audioio. it is not possible to omit mockedprefs, because projectrate flushes unconditionally. it seems that some of this class are hanging on ci for some reason. i'm trying to figure that out, it is not reproducible locally or in the windows sandbox.",0,0.9815393090248108
1152330345,4414,Paul-Licameli,2023-03-29T18:22:35Z,"it returns bool now, and not all false returns are ultimately checked (via updateformatter or setcustomformat), but maybe it doesn't matter. what mattered was to verify sufficient null checks of `mformatter` (yes)",0,0.9841944575309753
1152342762,4414,Paul-Licameli,2023-03-29T18:35:55Z,"after deleting these lines, these preferences used only to initialize a new project or to show the values in the preference dialog. there are written not only by the dialog, but also in projecttimesignature whenever a project's time signature is changed. is that the right behavior? it is not like how projectrate behaves, so it seems inconsistent.",0,0.9708622694015503
1152362810,4414,Paul-Licameli,2023-03-29T18:56:30Z,"this commit was a tremendous effort. i'm still not done reviewing it. i thought the idea of it was one we would abandon as just too hard. did you have the insights to make it happen only yesterday? thanks for doing it. i assume you are thinking that elimination of these uses of `sampleratecontext` from src/effects, in favor of `projectcontext`, would be a good thing, but i hope you are not now attempting it and will be satisfied to leave this as a known issue to fix in future. as you know i have pending draft prs for `effectcontext`, to make the effect objects even more stateless. i moved the project rate into context, and when i rebase that work onto this, i will try to put formatter context into effect context too.",1,0.9883272051811218
1152372288,4414,crsib,2023-03-29T19:06:28Z,"i'm not sure what dialog you are talking about. i do agree that what is done is not quite ideal. do we need this setting at all? do we want to have preferences for the default values? i don't really know, but i don't think it matters a lot now. reusing the last project rate for new projects is as good approach as the other ones.",0,0.8040363192558289
1152380439,4414,Paul-Licameli,2023-03-29T19:15:32Z,"aha, i was misled by these remaining, unnecessary lines in guiprefs.cpp, when i looked for all uses of the settings: [code block] so there is in fact no longer anything in the dialog then to make them available, unlike for the preferred project rate.",0,0.44493353366851807
1152381754,4414,Paul-Licameli,2023-03-29T19:16:55Z,can also remove: [code block],0,0.9950130581855774
1152400089,4414,Paul-Licameli,2023-03-29T19:36:53Z,don't need that assignment,0,0.9933117628097534
1152406706,4414,Paul-Licameli,2023-03-29T19:44:09Z,"besides `mformat` these can be const, and that might help understanding",0,0.9930237531661987
1152418385,4414,Paul-Licameli,2023-03-29T19:56:37Z,unused function,0,0.9824621677398682
1152425106,4414,Paul-Licameli,2023-03-29T20:03:01Z,should it be deleted or should the defensive checks of tempo and time signature values be put back into `updateformat`?,0,0.9937092065811157
1152426222,4414,crsib,2023-03-29T20:04:17Z,"the check is different now, considering that formatter listens to the changes of the projecttimesignature",0,0.9925317168235779
1152426327,4414,crsib,2023-03-29T20:04:24Z,i will remove it,0,0.9906105399131775
1152445495,4414,Paul-Licameli,2023-03-29T20:26:29Z,members might be const,0,0.9863022565841675
1152455145,4414,Paul-Licameli,2023-03-29T20:35:10Z,should the condition be `hasfracpart`?,0,0.9921138286590576
1152456077,4414,crsib,2023-03-29T20:36:00Z,"great catch, thank you!",1,0.9965803027153015
1152470936,4414,Paul-Licameli,2023-03-29T20:50:06Z,"this function checks that the width allocated to the field is at least the minimum number of digits, and otherwise just sufficient to show the given, maximum, 1-based value. i would comment that.",0,0.9951947331428528
1152544292,4414,Paul-Licameli,2023-03-29T22:22:44Z,still needs update,0,0.9839697480201721
1152545770,4414,Paul-Licameli,2023-03-29T22:25:08Z,i still agree it ought to be easier to write and its on me to improve registry.h so you can,0,0.9209619760513306
1152546675,4414,Paul-Licameli,2023-03-29T22:26:34Z,it should look more like a menu definition  which uses things not all in registry.h. there are template patterns there that could become more general utilities.,0,0.9899809956550598
1152550986,4414,Paul-Licameli,2023-03-29T22:32:35Z,please do this,0,0.9857422113418579
1152555991,4414,Paul-Licameli,2023-03-29T22:40:56Z,functionidentifier,0,0.9945533275604248
1152560678,4414,Paul-Licameli,2023-03-29T22:48:36Z,please stay tuned for these improvements!,0,0.8330932259559631
1152561807,4414,Paul-Licameli,2023-03-29T22:50:37Z,i hope this comment proved to be a good stimulus,1,0.9821699261665344
1152562405,4414,Paul-Licameli,2023-03-29T22:51:48Z,the long comment all out the mini language might still be updated,0,0.993213415145874
1152565165,4414,Paul-Licameli,2023-03-29T22:56:37Z,still...,0,0.8812305331230164
1152569736,4414,Paul-Licameli,2023-03-29T23:00:49Z,"still, wrong comment",-1,0.8323597311973572
1152578738,4414,Paul-Licameli,2023-03-29T23:13:36Z,this suggestion stands,0,0.983160674571991
1152581286,4414,Paul-Licameli,2023-03-29T23:18:38Z,have you tried this edge case? the latest commit as of this comment may include fixes for that,0,0.9946868419647217
1152582528,4414,Paul-Licameli,2023-03-29T23:21:17Z,"there was not, in fact, a refactoring of audioio, which i feared would add even more burden to this long review. not to imply that there are not still many virtuous refactorings to be done there some day.",-1,0.589175283908844
1152827812,4414,Paul-Licameli,2023-03-30T07:13:31Z,its only audioiobase of lib-audio-devices that is the actual dependency?,0,0.9912994503974915
1153100185,4414,crsib,2023-03-30T11:10:18Z,i think this is a missing feature of the setting classes. they should reset when the configuration resets. the need to manually reset preferences wrapped in setting violates open/closed - every time you add such preference you end up updating pluginmenus. ideally `cachingsettingbase` should listen to reset preferences events and call `invalidate`,0,0.9690629243850708
1153110975,4414,Paul-Licameli,2023-03-30T11:21:00Z,"i have formed a different opinion: i blame how shuttlegui presently handles settings objects. it bypasses them and directly uses gprefs->write() on the path. that happens in shuttleprefs.cpp. instead, in all places where the tie... functions are called with settings object, these should be rewritten always as named settings objects, cleaning up many preference paths that are not yet settings, and passed as non-const references. then, rewrite shuttlegui to use the interface of settings only; and then invalidate() will become unnecessary. the waiting work to do this cleanup is already in my other monster branch attempting a revised shuttlegui and would be the first stage of that ambitious project.",0,0.5587496757507324
1153118323,4414,Paul-Licameli,2023-03-30T11:28:25Z,"right, the huge commit did not touch projectselectionmanager. so the edge case could be fixed with one more subscription, to projectrate, there.",0,0.9924091100692749
1153122991,4414,crsib,2023-03-30T11:32:12Z,"i don't think we are talking about the same thing. i am talking about `resetpreferences` not actually resetting any of the `cachingsettingbase`, i don't see how changing shuttlegui will help to solve this problem. for this reason `onresetconfig(const commandcontext &context)` growth every time new `cachingsettingbase` setting is created (if one cares about resetting of this value). btw this is an example, where everything is scattered between translation units, but open/closed is violated. on top of that, it creates inconsistent behavior: if specific `cachingsettingbase` is not manually added to `onresetconfig` there is a different state between gprefs and `cachingsettingbase`. if that setting is not modified, it will be reset on the next launch, so it won't be kept. at very list we need a global message that preferences were reset.",0,0.891563355922699
1153146471,4414,Paul-Licameli,2023-03-30T11:53:33Z,"i see it now, and agree. i think invalidate() should be made unnecessary. i did not remember this other necessary part of that work. generally, naked `gprefs` must be discouraged in new code and fixed in a big cleanup. open/closed, correctly done, allows things to scatter. i never claimed that conversely, if things are scattered, therefore open/closed is realized. in fact i never did claim settings objects in particular as an example of application of open/closed as i understand it. but i want them for the other reason that magic literals (here not numbers but string literals) should be avoided.",0,0.8597522377967834
1153149867,4414,Paul-Licameli,2023-03-30T11:56:48Z,what bugs can be demonstrated? in fact this should not be difficult to fix now. make every settings object an observer of a singleton publisher that fires after `gprefs->deleteall().`,0,0.9873064756393433
1153156625,4414,crsib,2023-03-30T12:03:26Z,"not difficult, but not for now. i expect extensive testing. 1. remove the line we are discussing 2. change the selection mode 3. reset the configs using menu 4. observe selection mode has not changed 5. relaunch audacity 6. observe selection mode changed to deafult. i expect that there are other similar problems, or problems with the stickiness which are not so easy to observe.",0,0.9210574626922607
1153340810,4414,Paul-Licameli,2023-03-30T14:21:05Z,"""note""",0,0.9911112189292908
1153350909,4414,Paul-Licameli,2023-03-30T14:27:52Z,"good, but there are still a few mistaken ""i18-hint"" comments in snaputils.cpp and updatenoticedialog.cpp",0,0.6394979953765869
1153353043,4414,crsib,2023-03-30T14:29:19Z,"well, that is weird, grepping last time gave me no results. i have 6 now :-( will fix asap",-1,0.9967194199562073
1153453479,4414,Paul-Licameli,2023-03-30T15:41:07Z,are we really making that string visible to the end user?,0,0.9898543953895569
1153464466,4414,crsib,2023-03-30T15:49:50Z,"you mean beta? yes, this is by design",0,0.9892007112503052
1153582365,4414,Paul-Licameli,2023-03-30T17:37:19Z,"you put this in the red library, not src/widgets. okay.",0,0.9923809170722961
1153591319,4414,Paul-Licameli,2023-03-30T17:45:59Z,"i might have used a chain-calling options class for named parameter idiom for the valuetypes and the bool, so the call sites might be easier.",0,0.9841004610061646
1153631387,4414,Paul-Licameli,2023-03-30T18:23:57Z,"hey, i want an initializer too! :crying_face:",-1,0.9874611496925354
1153632058,4414,Paul-Licameli,2023-03-30T18:24:25Z,spelling,0,0.9833834767341614
1153633249,4414,Paul-Licameli,2023-03-30T18:25:15Z,spelling  and please dont have an infarction,0,0.7577100396156311
1153640242,4414,Paul-Licameli,2023-03-30T18:31:17Z,static_cast?,0,0.9944572448730469
1153653455,4414,Paul-Licameli,2023-03-30T18:42:37Z,"trying to run it on mac, i got strange looking results for the lts  but my environment was not clean. i deleted audacity.cfg and tried again, and saw 4 not blank, and the down arrow of the combo looked more normal. but i see rounded corners and slightly different height mismatching the tempo and uts boxes which are square and positioned a bit higher.",0,0.8195641040802002
1153674197,4414,crsib,2023-03-30T18:58:24Z,"well, this is not a c-cast and this form is much shorter. i don't have any hard feelings either",0,0.6640459299087524
1153674757,4414,crsib,2023-03-30T18:58:53Z,it is initialized in constructor,0,0.9955868721008301
1153676625,4414,crsib,2023-03-30T19:00:23Z,"i will check that, thank you. this constant inconsistency is a primary reason for the migration to a different ui toolkit",1,0.9467954635620117
1153689129,4414,Paul-Licameli,2023-03-30T19:12:12Z,have you seen valnum.h? our own adapted versions of these classes for reasons i dont know.,0,0.9735027551651001
1153693327,4414,Paul-Licameli,2023-03-30T19:17:10Z,i dont understand this asymmetry between spin up and down,-1,0.811051607131958
1153706325,4414,Paul-Licameli,2023-03-30T19:32:42Z,i see that now,0,0.9697239995002747
1153722866,4414,crsib,2023-03-30T19:51:05Z,looks to be a copy from the wx source tree. i am confused. the code comes from 2013 with a message [code block] i think they match wx validators exactly,-1,0.5685793161392212
1153724570,4414,crsib,2023-03-30T19:53:11Z,"i forgot to delete that line... it makes no harm, but it is not really needed anyway.",0,0.9372668862342834
1153735536,4414,crsib,2023-03-30T20:05:22Z,fun fact - wxcomboctr and wxcombobox look disturbingly differently on macos.,-1,0.8686242699623108
1153821587,4414,crsib,2023-03-30T21:50:45Z,"i've tried to do wxcomboctrl, but it is not focusable in read-only mode. so i have just adjusted the height to make it look a tiny bit better on macos",0,0.9624279737472534
1153862388,4414,Paul-Licameli,2023-03-30T22:49:51Z,was it at that point a future version of wxwidgets?,0,0.9915850162506104
774289430,2295,Paul-Licameli,2021-12-23T03:06:11Z,"i'm skipping review of the three module* files of course, assuming they are cut-and-pasted from third party code.",0,0.9771182537078857
774301814,2295,Paul-Licameli,2021-12-23T03:56:53Z,unnecessary include,0,0.9794029593467712
774306264,2295,Paul-Licameli,2021-12-23T04:15:48Z,let's comment that this line is the (sole?) entry into platform-specific code in one of three conditionally compiled files.,0,0.992495059967041
774307778,2295,Paul-Licameli,2021-12-23T04:22:15Z,"""it reports errors that are a consequence of faulty logic within the program such as violating logical preconditions or class invariants and may be preventable."" [a link] maybe that doesn't really describe what happens here, maybe system_error is more like it, but this is not important. i see all of these standard exceptions do get caught. if there is need to propagate an error beyond this module, better that a subclass of audacityexception be used for that.",0,0.9862041473388672
774308803,2295,Paul-Licameli,2021-12-23T04:26:35Z,spelling,0,0.9833834767341614
774495020,2295,Paul-Licameli,2021-12-23T11:04:48Z,the same block of code except for the string literal. i would make a lambda to avoid the duplication.,0,0.9916083216667175
774501770,2295,Paul-Licameli,2021-12-23T11:17:35Z,"there is an include dependency cycle between vst3effect.h and vst3effectsmodule.h. a cycle of just two files doesn't concern me much, but it would be nice to figure out the extra effort to break the cycle. i think the module depends one-way on the effect, becuase it must be a factory of effects.",0,0.9766305685043335
780837786,2295,Paul-Licameli,2022-01-09T22:07:59Z,should there be a destructor too that uses the funknown_dtor macro for some debug checking?,0,0.9932843446731567
780841541,2295,Paul-Licameli,2022-01-09T22:45:12Z,i am pleased to see that the new files in internal/ have no dependency cycles. i can study them in a bottom-up order to understand them. please write a little more commentary about the purposes of the classes.,1,0.8394372463226318
780841713,2295,Paul-Licameli,2022-01-09T22:46:41Z,start the comment with `//!` and doxygen will extract it as the brief description of the class that follows. you can write a long comment for detail after the brief comment if you enclose it in [code block],0,0.9941178560256958
780842530,2295,Paul-Licameli,2022-01-09T22:54:28Z,this function never assigns `index`. but does the caller expect that you do?,0,0.9935359954833984
780843534,2295,Paul-Licameli,2022-01-09T23:03:38Z,"the deleter in the .cpp file is always the same lambda, with an empty capture, so you could declare a zero-sized deleter class here with an `operator ()`, and define it in the .cpp file, and make this unique_ptr just one pointer wide.",0,0.9942143559455872
780843938,2295,Paul-Licameli,2022-01-09T23:08:01Z,i think there is an incomplete clause in that comment,0,0.9796047210693359
780844294,2295,Paul-Licameli,2022-01-09T23:11:38Z,this return path does not assign `index`. is that ok?,0,0.9954623579978943
780844525,2295,Paul-Licameli,2022-01-09T23:13:59Z,incorrect ``,-1,0.844312846660614
780844708,2295,Paul-Licameli,2022-01-09T23:15:25Z,"you mean ""in real life"" ?",0,0.9866097569465637
780845810,2295,Paul-Licameli,2022-01-09T23:26:14Z,"""try to grab""",0,0.9722895622253418
780854633,2295,Paul-Licameli,2022-01-10T00:49:13Z,"i think i missed some interesting discussions during my week off. what's the proof of correctness of this algorithm? 1. tthere are two `parameterchanges` objects, and at all times each is held in exactly one of five places (editor, processor, first, second, or pending) and each place holds at most one. 2. only the editor thread ever makes pending non-null. 3. only the editor thread ever makes second null. every exchange satisfies those conditions; from that you can deduce that editor never fails to lock one of the objects. do i reason right? is this reasoning worth commenting?",1,0.8506927490234375
780856074,2295,Paul-Licameli,2022-01-10T01:01:05Z,"is it worth the trouble to write `auto cleanup = finally([&]{ handler->endedit(id) })` after the ""begin"" call?",0,0.9855238795280457
780856959,2295,Paul-Licameli,2022-01-10T01:08:50Z,there are four cases above for controls. do you try examples of vst3 plug-ins that exercise all four of these paths?,0,0.9939823746681213
781136120,2295,Paul-Licameli,2022-01-10T12:08:24Z,"see also the class messagebuffer in playbackschedule.h where i solved the same problem in a lock-free, but not wait-free algorithm, yet very probably looping only very rarely, and using only two slots. which of these solutions is better? i think there is a utility to be extract from it into one of the lower libraries. which are the threads that communicate? in the cases of my messagebuffer, it's the main thread sending messages to a worker thread -- the one which must maintain high throughput but can tolerate variation in latency, not the one that executes as the callback for the portaudio library. changes of looping play bounds are the sort of changes done there. in your case, i presume this is also about adjustment of sliders detected by the main thread. it is the low-latency thread that is receiving the messages. however, i believe that is a wrong implementation (an old error and nothing wrong with this pr). see issue #2082. things should be restructured so the receiver thread for your messages is the same as those using messagebuffer.",0,0.9855604767799377
781571869,2295,Paul-Licameli,2022-01-10T21:38:01Z,"the build is broken if not on windows. that must be fixed of course. one if the fixes is simply to omit ""/msw"" in that path. there are other fixes to do in vst3utils.cpp",0,0.980248749256134
781576529,2295,Paul-Licameli,2022-01-10T21:43:02Z,"i see shared_ptr, also many iptr because you must use them with vst3 objects, and those are shared pointers. but in fact only mmodule, meffectclassinfo, and msetup are shared among copies of the object (which must be made for master-slave connections), which isn't obvious unless you read the copy constructor. make it more obvious here in the header with comments, and perhaps rearrange the sequence so the really shared members are separate from the really unique ones.",0,0.9932945370674133
781615139,2295,Paul-Licameli,2022-01-10T22:19:04Z,"i see how three of these values are ultimate communicated to the vst3 library in vst3processblock, but i don't see where the sample rate is given to it. is that an omission? have you tested with non-default sample playback rate? (change it in the drop-down at bottom left) if you have an effect like an equalizer, but vst3 is misinterpeting the sample rate, then you might hear wrong results at non-default sample rate choices.",0,0.9889750480651855
781621506,2295,Paul-Licameli,2022-01-10T22:26:24Z,"this needs a catch block to stop std::exceptions, as is done in the two other places that may construct vst3effect",0,0.9939418435096741
781623698,2295,Paul-Licameli,2022-01-10T22:30:41Z,"need null check on meditcontroller, as elsewhere",0,0.9938929080963135
781624051,2295,Paul-Licameli,2022-01-10T22:31:22Z,need null check,0,0.9933799505233765
781625140,2295,Paul-Licameli,2022-01-10T22:33:18Z,"this isn't null checked, but i think you guarantee the invariant that it is not null, if meditcontroller is not null",0,0.9902364611625671
781625559,2295,Paul-Licameli,2022-01-10T22:34:12Z,null check?,0,0.9947369694709778
781628571,2295,Paul-Licameli,2022-01-10T22:39:44Z,"please add comments about which of the above are invariantly non-null, after construction. i think that includes meffectcomponent, not mcomponenthandler; and mpendingchanges is sure to be non-null provided that mcomponenthandler is not null.",0,0.9938058853149414
781635738,2295,Paul-Licameli,2022-01-10T22:54:13Z,use `reinterpret_cast` consistently here,0,0.993656575679779
781636698,2295,Paul-Licameli,2022-01-10T22:56:18Z,and perhaps make a little inline function to do this query. it happens in seven places.,0,0.9933170080184937
781647075,2295,Paul-Licameli,2022-01-10T23:18:50Z,"this writes a number as the key into commandparameters. but parameterinfo also has short and long titles. maybe the title should be written, or (if that is not certain to be unique among parameters) a concatenation of a title and the id. if you use a vst3 effect in a macro and edit the settings, that key is stored in the macro text file, and will be visible to anyone who tries to read it. maybe an advanced user might try to edit the text of a macro file directly, and mnemonic names for the parameters, instead of simple numbers, would be helpful. of course setautomationparameters must be correspondingly changed too.",0,0.9883527159690857
781648083,2295,Paul-Licameli,2022-01-10T23:21:17Z,"beginedit/endedit pair again. maybe make a little ""parameditscope"" utility object to do them in ctor and dtor.",0,0.9888752698898315
781653725,2295,Paul-Licameli,2022-01-10T23:34:15Z,"are these two just ""dummies"" that you will never do, or should the comments say todo? i think you will need to do them in future, to complete the analogy with vst2 handling, and allow the user to save settings. but we aren't near that stage of testing yet.",0,0.9851486682891846
781657832,2295,Paul-Licameli,2022-01-10T23:44:34Z,"is this also unfinished work? i looked a little bit into vst headers and i think a ""factory preset"" is in their jargon a ""program"" (so it was in vst2) and the relevant interface for getting the information is iunitinfo in ivstunits.h.",0,0.992738664150238
781679000,2295,Paul-Licameli,2022-01-11T00:41:55Z,should this `performedit`be bracketed with `beginedit` and `endedit` (outside the loop)?,0,0.9932292699813843
781679158,2295,Paul-Licameli,2022-01-11T00:42:23Z,should this `performedit`be bracketed too?,0,0.9941646456718445
781679982,2295,Paul-Licameli,2022-01-11T00:44:23Z,this function isn't a dummy,0,0.9860052466392517
781681372,2295,Paul-Licameli,2022-01-11T00:48:17Z,"why does getlatency() take a maximum over the group of processors but this function does not? the gettailsize() function isn't yet used, and there are some old comments from leland about that, but i'm not sure what they should be used for, unless maybe they matter in generation of sounds.",0,0.9690039157867432
781684573,2295,Paul-Licameli,2022-01-11T00:57:36Z,this function might be called in a worker thread. maybe it should not log messages.,0,0.988996148109436
781685312,2295,Paul-Licameli,2022-01-11T00:59:45Z,maybe blocklen should be cast from an unsigned to a signed type before you take a minimum. could the other argument to min be a negative that indicates an invalid value?,0,0.9887993931770325
781688902,2295,Paul-Licameli,2022-01-11T01:10:02Z,"for the vst2 effect, processinitialize is called. for vst3, you only `syncparameters` but don't do the other side effects. is it correct?",0,0.9950069189071655
781690870,2295,Paul-Licameli,2022-01-11T01:16:00Z,"i see suspend and resume only call `setprocessing` for slaves, not for `this`. that is not like vst 2. however maybe vst 2 did that unnecessarily, because it was only for the unnecessary calculations that i removed at commit 81951abe5dbc3c263bc5e4d40ccb3e685bfa0170. is this what you were thinking? then maybe my commit was not complete, in its removal of unnecessary things.",0,0.9867817759513855
781692193,2295,Paul-Licameli,2022-01-11T01:20:06Z,do not ignore the `forcemodal` argument. show modally or non- as in the other overrides.,0,0.9914917349815369
781694777,2295,Paul-Licameli,2022-01-11T01:27:35Z,is this todo? other overrides re-load last used settings from saved preferences. this function is called the first time the effect is used again in a session.,0,0.9957159161567688
781696148,2295,Paul-Licameli,2022-01-11T01:31:56Z,"this should return false when the plain dialog was last used in populateui, to be like the vst 2 implementation",0,0.9939269423484802
781699191,2295,Paul-Licameli,2022-01-11T01:41:16Z,i presume the four functions above are todo,0,0.9908329844474792
782203556,2295,vsverchinsky,2022-01-11T14:32:42Z,"yep, accidentally was added multiple times by the ide, and i overlooked that, thanks!",1,0.9672182202339172
782228580,2295,vsverchinsky,2022-01-11T14:58:06Z,"the only reason why vst3effectsmodule is needed here is that vst3effect duplicates itself when the effect requests to add a new realtime processor, no details about vst3effectmodule itself actually are needed here, so to make everything clearer i'll extract vst host access function from vst3effectsmodule to some other place",0,0.9921906590461731
782229511,2295,vsverchinsky,2022-01-11T14:59:04Z,won't harm,0,0.9556841850280762
782249781,2295,vsverchinsky,2022-01-11T15:19:34Z,"our implementation does not use it. vst documentation is not very wordy about the use of this parameter, and there are no examples of how this parameter is used in the sdk samples as well. moreover, it's not stated that the index should be persistent, but plugins can access our implementation through `iparametervaluequeue ` interface. so yes, it would be safer to assign a value to it. thanks for spotting this",1,0.9223819375038147
782255977,2295,vsverchinsky,2022-01-11T15:25:56Z,good point,1,0.9818260669708252
782948877,2295,vsverchinsky,2022-01-12T10:53:10Z,"it should be ""though both getparameterdata and addparameterdata return pointers to shared objects"", but now i have doubts that such restriction is correct since vst plugins are allowed to access those objects as well",0,0.9727243185043335
783005202,2295,vsverchinsky,2022-01-12T11:53:09Z,"1 - yes, 2 - yes, 3 - yes, and first one as well. there are only two threads (at most): processing and ui/editor thread. there are only two buffers that are used to store changes, any of them is either: 1) stored in `mfirst` or `msecond` and considered to be empty, ui thread may move one of them to `mpendingchanges` 2) stored in `mpendingchanges`, only ui thread is allowed to store on of the buffers in that variable. 3) stored in unique pointer returned by `getpendingchanges`, and isn't accessible from ui thread until buffer is returned to `mfirst` or `msecond` by processing thread ui thread will try to lock the buffer in `mpendingchanges` first, if it locked one in `mfirst` or `msecond` instead it may happen so that `mpendingchanges` isn't yet read by processing thread and then the implementation may become a bit more complicated. at most one of the buffers is hold by processing thread, at least one of the buffer is available from ui thread (`mpendingchanges`, `mfirst` or `msecond`)",0,0.9829338192939758
783939505,2295,vsverchinsky,2022-01-13T13:06:40Z,"i believe that `vst3effect::setsamplerate` and `vst3effect::setblocksize` are used to set up the effect. yes, i've tested effects with non-default sample rates.",0,0.9916502237319946
784004437,2295,vsverchinsky,2022-01-13T14:24:18Z,"well, probably neither of them doesn't make sense. especially gettailsize(). as i understand tail is used to process effects that produce more samples than they consume (like reverb or delay). and the problem is that different tracks may have different sample rates thus, different tail sizes. block size, however, is always the same for each track/processor.",0,0.9207809567451477
784005363,2295,vsverchinsky,2022-01-13T14:25:11Z,"yes, thanks",1,0.8420318365097046
784021462,2295,vsverchinsky,2022-01-13T14:42:05Z,"shouldn't be the case, `maxsamplesperblock` is always positive (see `vst3effect::setblocksize`) and is set before the processor is activated, and `blocklen` should be positive as well.",0,0.9901997447013855
784026313,2295,vsverchinsky,2022-01-13T14:47:09Z,"i believe so, the `realtimeinitialize` is called before any call to `realtimeaddprocessor`, so we cannot configure them here (but they are initialized in `realtimeaddprocessor` instead), and there is no need to set up the ""container"" effect since it's not used for realtime processing.",0,0.990124523639679
784031524,2295,vsverchinsky,2022-01-13T14:52:22Z,"maybe vst2 implementation does not need to initialize the ""master effect"" too, there is no need to do so in the vst3 implementation since all the processing is done by ""processor effect"" instances, in the case of realtime processing master effect simply holds initial parameters with which other instances would be initialized",0,0.989787220954895
784743631,2295,vsverchinsky,2022-01-14T10:47:26Z,yep,0,0.7848060131072998
785984806,2295,vsverchinsky,2022-01-17T12:59:42Z,"it's unfinished, yes, but i don't think that ""program"" is a synonym for ""factory preset"", as it does not contain a set of parameter values, but rather enables or disables processing units",0,0.9784714579582214
792489681,2295,Paul-Licameli,2022-01-26T10:16:40Z,don't need `pluginsettings::`,0,0.994192898273468
792495541,2295,Paul-Licameli,2022-01-26T10:23:46Z,`static_cast` would be modern,0,0.9943678975105286
792496956,2295,Paul-Licameli,2022-01-26T10:25:28Z,`static_cast` again,0,0.9950266480445862
792500253,2295,Paul-Licameli,2022-01-26T10:29:43Z,and `size_t`,0,0.9948311448097229
792509916,2295,Paul-Licameli,2022-01-26T10:41:57Z,`size_t`,0,0.9915273785591125
792510092,2295,Paul-Licameli,2022-01-26T10:42:12Z,`size_t`,0,0.9915273785591125
792519190,2295,Paul-Licameli,2022-01-26T10:53:50Z,indentation,0,0.9911677837371826
794419146,2295,Paul-Licameli,2022-01-28T11:22:59Z,"""conditionally""",0,0.9701704382896423
794437458,2295,Paul-Licameli,2022-01-28T11:49:41Z,"this line was introduced in the commit ""some basic loading functionality"" and the source file is added to the build in the following commit ""vst3 sources added to cmakelists"" and the build fails because the include path should remove ""../../"" do an interactive rebase to fix the include path in the earlier commit. then each commit in the sequence will build.",0,0.9950852990150452
794505654,2295,Paul-Licameli,2022-01-28T13:32:41Z,i would prefere a reference return type to indicate that it is never null,0,0.9926825165748596
794529789,2295,Paul-Licameli,2022-01-28T14:03:45Z,"do not use unique_ptr to a wxwindow object. pointers to them are never supposed to be given to operator delete. instead just use `safenew`. whenever you make a wxwindow with a non-null parent, it is owned and will be correctly destroyed when the parent is destroyed. so, a naked new is the correct thing in this case.",0,0.9935516119003296
794530120,2295,Paul-Licameli,2022-01-28T14:04:11Z,"likewise, do not use `unique_ptr` here.",0,0.992526650428772
794532075,2295,Paul-Licameli,2022-01-28T14:06:24Z,complete the analogy with `vsteffect::buildplain`. do not omit the `setname` call. david bailes will tell you it is important so that the screen reader pronounces the name.,0,0.9912625551223755
794545551,2295,Paul-Licameli,2022-01-28T14:21:36Z,i would like this function better if it returned `iptr `,0,0.9035625457763672
794546556,2295,Paul-Licameli,2022-01-28T14:22:40Z,"returning a ""stupid"" pointer means i have to check all uses of the function to be convinced there is no leak",-1,0.7371313571929932
794560097,2295,Paul-Licameli,2022-01-28T14:37:54Z,"i would prefer the string literals ""processorstate"" and ""controllerstate"" appearing in only one place each and given a name",0,0.9848707318305969
794563350,2295,Paul-Licameli,2022-01-28T14:41:28Z,is setting component state twice through two different interfaces necessary? (a eustion to answer from steinberg documentation),0,0.9935075044631958
794839927,2295,Paul-Licameli,2022-01-28T19:45:54Z,avoid new calls to `audacitymessagebox`. instead include `basicui.h` and use `basicui::messagebox`. leave fewer calls to rewrite later when we try to make this toolkit neutral.,0,0.9874436259269714
794855352,2295,Paul-Licameli,2022-01-28T20:05:13Z,"a raw string literal would help the reader: `r""([\\*?/:<>|])""`",0,0.9943976402282715
794862540,2295,Paul-Licameli,2022-01-28T20:18:15Z,"unnecessary #include is still there. remember `vst3effect` does not inherit `effect`, strange but true",-1,0.7845125198364258
794873064,2295,Paul-Licameli,2022-01-28T20:38:01Z,"""to shared objects""",0,0.9946367144584656
794873300,2295,Paul-Licameli,2022-01-28T20:38:25Z,"""because they are pointers to temporary objects""",0,0.9910863041877747
794875681,2295,Paul-Licameli,2022-01-28T20:43:02Z,"""try to grab"" again",0,0.983339786529541
794891948,2295,Paul-Licameli,2022-01-28T21:11:09Z,need two `reinterpret_cast`s for consistent style,0,0.9883777499198914
795050324,2295,Paul-Licameli,2022-01-29T13:06:51Z,"i see that this function is new since my last round of review but not used. (it was declared then, but not defined. now it is defined but never called.)",0,0.989402174949646
795050543,2295,Paul-Licameli,2022-01-29T13:08:35Z,"why is `plugin_api` linkage visibility necessary? nothing needs to link to these functions. these are overrides, so the pointers to functions are discovered by the framework at runtime instead. that's the point of virtual function tables.",0,0.9870834350585938
795052241,2295,Paul-Licameli,2022-01-29T13:24:12Z,is that last sentence still true? i think all of that has been fixed now.,0,0.9909012317657471
795052629,2295,Paul-Licameli,2022-01-29T13:28:20Z,"doxygen extracts the brief description but not the detailed description. keep this separation of brief and detailed, and rewrite the detailed inside [code block]",0,0.9940270185470581
795054204,2295,Paul-Licameli,2022-01-29T13:46:07Z,more plugin_api we may not need,0,0.9928590059280396
795054350,2295,Paul-Licameli,2022-01-29T13:47:44Z,"this comment block does not separate brief and detailed descriptions. so all will appear only in the detailed description on the doxygen pages. this isn't wrong, but you might reconsider what would best help someone else using those pages.",0,0.9539657235145569
795055533,2295,Paul-Licameli,2022-01-29T14:01:45Z,more `plugin_api` to remove,0,0.995032787322998
795055786,2295,Paul-Licameli,2022-01-29T14:03:43Z, ,0,0.8391243815422058
795062072,2295,Paul-Licameli,2022-01-29T14:51:08Z,"i see you broke the dependency cycle between vst3effectsmodule and vst3effect. the module depends on effect, one-way. you removed things from vst3effectsmodule.h and defined them in vst3effect instead. that is good, but now i see a duplication of this string constant. could you make a static function in vst3effect.h and use it here? .",0,0.5367477536201477
795114188,2295,Paul-Licameli,2022-01-30T01:49:36Z,"i think the two fields above are non-null only when the object is not constructed by copy and should be in the section with `mplugview` etc., below.",0,0.9871838688850403
795114831,2295,Paul-Licameli,2022-01-30T01:59:35Z,"the non-copy constructor may leave meditcontroller null. it makes mcomponenthandler non-null only if meditcontroller is. these things should be stated here in comments. in my first round of review, i looked at uses of these two fields to see if null checks were sufficient. every use of meditcontroller should be preceded by a null check of it or of mcomponenthandler. that condition is satisfied everywhere. every use of mcomponenthandler needs a null check. i checked again and it looks good now.",0,0.5401725769042969
795115207,2295,Paul-Licameli,2022-01-30T02:05:07Z,"there are two calls to `buildplainui` here. they pass pointers to meditcontroller and mcomponenthandler. a look inside the function shows that it is assumed that the pointers are not null, but there is no comment to that effect. that condition is guaranteed here, so there is not a bug. still, i would prefer to say what i mean with types: make `buildplainui` take references instead of pointers to make clear that null is not allowed. then at the places where we call it, we have to dereference pointers. that would make me look for the proof that the pointers are not null, and i would get it from the suggested comments in the header about invariants.",0,0.9770456552505493
795116131,2295,Paul-Licameli,2022-01-30T02:19:02Z,"ah no you don't, if non-null mcomponenthandler implies non-null meditcontroller",0,0.9835083484649658
795116406,2295,Paul-Licameli,2022-01-30T02:22:40Z,still needs resolution,0,0.9783198237419128
795116821,2295,Paul-Licameli,2022-01-30T02:29:03Z,reassigning nulls in a destructor should be unnecessary,0,0.9913445711135864
795117196,2295,Paul-Licameli,2022-01-30T02:34:05Z,"which is correct, doing this call before or after endedit? it changed since my first round of review here, but is consistent with the other call to it now.",0,0.9924578666687012
795117447,2295,Paul-Licameli,2022-01-30T02:39:01Z,"this function is called in a worker thread. it's not good to call wxassert there. if the assertion is violated for any reason, the debug build will try to make a dialog from a non-main thread. maybe just a simple `assert` instead if you must express some assertion.",0,0.9838669300079346
795117559,2295,Paul-Licameli,2022-01-30T02:40:53Z,"as i wrote in the first round of review, more should happen in this function, like reading last-used effect settings which were stored in preferences during the last session of audacity.",0,0.992389976978302
797794762,2295,vsverchinsky,2022-02-02T16:30:01Z,"according to vst documentation, it's not prohibited to change parameter names. it's not difficult to append suffix if parameter has a title to a parameter key, like `0_vol`. then, to read it from a commandparameters we would need to extract id number and discard suffix.",0,0.9919392466545105
797856375,2295,vsverchinsky,2022-02-02T17:36:00Z,"not used as an index, but rather a loop iteration counter",0,0.9901626110076904
797856586,2295,vsverchinsky,2022-02-02T17:36:16Z,thanks,1,0.8643599152565002
797935247,2295,vsverchinsky,2022-02-02T19:08:09Z,thank you,1,0.9420937299728394
797965177,2295,vsverchinsky,2022-02-02T19:57:35Z,yes,0,0.9686408638954163
797968315,2295,vsverchinsky,2022-02-02T20:01:49Z,this would be inconsistent with other use cases of pluginsettings then,0,0.9902434945106506
797989759,2295,vsverchinsky,2022-02-02T20:33:04Z,turned out there is a safer and shorter for to query interfaces via `funknownptr<>`,0,0.9912387728691101
797992403,2295,vsverchinsky,2022-02-02T20:37:09Z,"i'll remove it, we don't need it now, since we don't have automation support yet",0,0.9876530170440674
797995551,2295,vsverchinsky,2022-02-02T20:41:40Z,"`plugin_api` expands to `__stdcall`, under windows platform it does not make difference when compiling for x64 or arm processors, but when compiling for x86 there would be an error.",0,0.9929921627044678
797997661,2295,vsverchinsky,2022-02-02T20:44:44Z,"this comment relates to the `componenthandler` class itself, not the client code which uses it.",0,0.9906368851661682
798007030,2295,vsverchinsky,2022-02-02T20:58:24Z,"for that purpose it would be better to read `iparameterchanges` documentation, i cannot imagine anything helpful i could add that isn't a duplicate of what's written there",0,0.989395797252655
798029156,2295,vsverchinsky,2022-02-02T21:31:18Z,"doesn't matter actually, because editcontroller should not notify componenthandler about parameter change when seyparamnormalized is invoked directly",0,0.9826120138168335
798029972,2295,vsverchinsky,2022-02-02T21:32:28Z,"yep, thanks",1,0.9539868831634521
800606836,2295,Paul-Licameli,2022-02-07T12:29:13Z,"i see you have removed a check in ""programfiles(x86)"" that was in an earlier version of the pr. no mistake?",0,0.9902684688568115
800616258,2295,Paul-Licameli,2022-02-07T12:41:47Z,"in this and other effects that must be noexcept, but call untrusted foreign code -- do similarly to what i did for the other effect families. wrap the body in [code block] it is not implemented yet, but i think we should detect errors turned into return codes, and disable the effects that raise them.",0,0.9941658973693848
800664114,2295,Paul-Licameli,2022-02-07T13:39:46Z,"i see that since the last version of this branch, you moved activatebuses out of processinitialize into the constructor, and there is no longer a complementary de-activation. that seems wrong, like a kind of leak.",0,0.829439103603363
800687982,2295,Paul-Licameli,2022-02-07T14:05:57Z,"i suspect off-by-one mistakes in these lines. if the right coordinate of viewrect is non-exclusive, which is how it works with wxsize, then it is left + width - 1. similarly for top, height, and bottom.",0,0.8363494277000427
800689380,2295,Paul-Licameli,2022-02-07T14:07:28Z,"""its""",0,0.9842362403869629
800689710,2295,Paul-Licameli,2022-02-07T14:07:52Z,"""its""",0,0.9842362403869629
800690038,2295,vsverchinsky,2022-02-07T14:08:13Z,"yes, there is no need to search x86 plugins in x64 bit audacity as they will not be loaded anyway",0,0.9943550825119019
800698407,2295,Paul-Licameli,2022-02-07T14:17:16Z,"the commit ""generator effect duration control added"" doesn't compile. the commit ""user presets"" adds this include directive, which fixes it. it would be nice to do an interactive rebase and make all the commits compile.",0,0.9881386160850525
800705937,2295,vsverchinsky,2022-02-07T14:24:43Z,the viewrect's definitions of width and height: [code block] they aren't same as in wxrect,0,0.9934005737304688
800719407,2295,vsverchinsky,2022-02-07T14:37:47Z,"[code block] well, probably the funciton name is misleading here. some plugins may have `kdefaultactive` flag set which means that we need to activate the bus manually (this also means that some plugins do not requrire manual bus actiavtion at all), there is nothing said about bus deactivation. as i understand deactivation may be required when changes to bus arrangement are made (we don't support this feature yet, we always use default arrangement), so we don't need to make additional calls to `iaudioprocessor::activatebus` this `activatebuses` activates only that are flagged with `kdefaultactive` but i actually not 100% sure about this, the documentation is either incomplete on this topic, or i miss something. there are two places where bus activation is mentioned and mentions are made in a different context, though they do not contradict each other. especially if you take them literally i think. thank you for that question. anyway everything seems to work fine, considering restrictions on bus arrangements we do have now.",0,0.9901962280273438
800742245,2295,vsverchinsky,2022-02-07T14:59:21Z,"i'm not sure that understand your question. the type of `runloop` variable is `iptr `. `owned` is a macro which grabs raw pointer and constructs iptr object without reference count increment. `runloop.get()` returns a raw pointer, but `runloop` constructor assigns it to the field of type iptr",0,0.9447181820869446
800837598,2295,Paul-Licameli,2022-02-07T16:31:01Z,"i misunderstood, i thought this was about dllexport linkage.",0,0.8200914263725281
800839781,2295,Paul-Licameli,2022-02-07T16:33:16Z,"should this and the following declarations have ""override""?",0,0.9920489192008972
800843144,2295,Paul-Licameli,2022-02-07T16:36:51Z,"`gpointer` is an alias for `void *` so `static_cast` is appropriate, and less surprising to read",0,0.9888572096824646
800844163,2295,Paul-Licameli,2022-02-07T16:37:54Z,what is `condition` for ? it is ignored,0,0.9922342300415039
800846983,2295,Paul-Licameli,2022-02-07T16:40:52Z,"the map is keyed on the handler only, not the handler and file descriptor pair. is that all right? or is it possible to reassign `meventhandlers[handler]` ?",0,0.995681643486023
800851152,2295,Paul-Licameli,2022-02-07T16:45:17Z,"why a search loop in the hash map when instead you could write: `if (auto end = meventhandlers.end(), iter = meventhandlers.find(handler); it != end)`",0,0.9811317920684814
800853943,2295,Paul-Licameli,2022-02-07T16:48:12Z,"give `eventdata` a destructor that does those two steps (with a null check first), and a move constructor tha nulls the channel and id. then this would simplify just to erasing the iterator. it would also make it clearer that there is no leak of gtk resources when the runloop is destroyed.",0,0.9933731555938721
800856852,2295,Paul-Licameli,2022-02-07T16:51:13Z,"i suggested that `eventdata` should be a smart raii handler with a destructor, and so too, the above two resource acquiring calls could be done inside its constructor so that there aren't any ""naked"" pointers.",0,0.9864946603775024
800862179,2295,Paul-Licameli,2022-02-07T16:56:42Z,"i suggested a constructor, move constructor, and destructor in this structure for simpler resource management",0,0.9911766052246094
800863072,2295,Paul-Licameli,2022-02-07T16:57:36Z,similarly the data type of this map might be instead a structure that calls `g_source_remove` in its destructor,0,0.9928325414657593
800875588,2295,Paul-Licameli,2022-02-07T17:10:40Z,this function will return zero the second time it is called. that is strange. why?,-1,0.9267489314079285
800882338,2295,Paul-Licameli,2022-02-07T17:18:08Z,"`size_t` would be a better type, unless you need -1 for invalid?",0,0.9899644255638123
800887933,2295,Paul-Licameli,2022-02-07T17:24:14Z,can the duplication be eliminated? can this file be shared with the old vst implementation?,0,0.9936594367027283
800892403,2295,Paul-Licameli,2022-02-07T17:29:11Z,"the commit that introduces `funknownptr` can be squashed as a fixiup of ""plugin gui & processing fixes""",0,0.9950945377349854
800894291,2295,Paul-Licameli,2022-02-07T17:31:17Z,"the commit ""plain ui imporvements"" has a mis-spelling in the commit comment, and it doesn't build, because the line above is introduced only in the following commit. please fix that up.",0,0.9537705779075623
800914613,2295,Paul-Licameli,2022-02-07T17:54:24Z,"in fact, shouldn't the whole commit be squashed with ""plugin gui & processing fixes""? i say that commits in a new feature branch should not be too few and too big, but also should not leave a record of errors and corrections.",0,0.9871454238891602
800916987,2295,Paul-Licameli,2022-02-07T17:57:06Z,"`sethost` is now no longer empty, but it is still incomplete. see how the private configuration ""parameters"" is loaded and stored for the other effect families.",0,0.9952132701873779
800918064,2295,Paul-Licameli,2022-02-07T17:58:24Z,"""an""",0,0.9904956817626953
800926998,2295,Paul-Licameli,2022-02-07T18:10:02Z,"i think it is incorrect to restrict what you write into `parms` by this condition. there is some unfortunate confusion in terminology in audacity, where ""automation"" refers to macro programming itself, not automation curves of effects (which is what i think the steinberg api refers to). the intention for macros is that any kind of user control that the effect supports should be programmable by macros. and this is not only for macros. it is also for saving in the .cfg files as your default, preferred settings for the effect. if you exit audacity, then restart, then reopen the effect dialog (maybe to apply the effect destructively) -- then you should see all dials, pushbuttons, etc. as they were before.",0,0.6557019948959351
800928479,2295,Paul-Licameli,2022-02-07T18:11:53Z,"see my other comment about ""parameters"" being restored in sethost. that is also part of the persistency of last user choices.",0,0.990898847579956
800935507,2295,Paul-Licameli,2022-02-07T18:21:01Z,"good. the difference between the toolkits is surely worth commenting, as a possible source of confusion.",1,0.9428876042366028
802817603,2295,vsverchinsky,2022-02-09T15:55:48Z,it's not used by the event handler,0,0.9926053285598755
802825051,2295,vsverchinsky,2022-02-09T16:02:12Z,vst sdk examples and vstgui implementation use only handler to identify channel,0,0.9937404990196228
802851479,2295,vsverchinsky,2022-02-09T16:24:55Z,that's how it implemented in other effects,0,0.9924014806747437
802859577,2295,vsverchinsky,2022-02-09T16:30:57Z,you expect that list of options will stay same for both vst and vst3?,0,0.9903380274772644
802872849,2295,vsverchinsky,2022-02-09T16:43:18Z,"unfortunately some vst plugins may expose many thousands of parameters, which sometimes aren't present in the plugin interface, it's the safest option i see right now to remove such parameters from the list",-1,0.7291340827941895
804624386,2295,Paul-Licameli,2022-02-11T12:57:45Z,"i think the destuctor of `eventhandler` destroys some resources too early, but you can fix this by giving the struct a move constructor that zeroes the id and channel pointer in the source of the move.",0,0.9836311340332031
804625114,2295,Paul-Licameli,2022-02-11T12:58:35Z,likewise you may need a nontrivial move constructor.,0,0.9851587414741516
804678207,2295,vsverchinsky,2022-02-11T14:03:24Z,"not sure that i understand. the type of `eventhandler` is `std::unique_ptr<>`, once the ownership is moved, `eventhandler` doesn't point to the object any more. do i miss something here?",0,0.797617495059967
804687803,2295,Paul-Licameli,2022-02-11T14:14:28Z,"you are right, it is a unique_ptr, and i overlooked that. but implementing the move copy in eventhandler and timerhandler, which act as resource handles, would be the right thing to do in those classes, considering what they do independently of how they are allocated: make sure that they are move-only and never are copied by mistake. it would allow you to avoid the unnecessary extra indirection of a unique_ptr.",0,0.9771339297294617
1431719151,5791,saintmatthieu,2023-12-19T17:16:49Z,"i just removed the contrast measure in a follow-up commit, improving performance of the classifier and simplifying the procedure. please ignore this part while reviewing.",0,0.9899097681045532
1432541543,5791,Paul-Licameli,2023-12-20T10:33:23Z,fix the comment,0,0.9931963682174683
1432541703,5791,Paul-Licameli,2023-12-20T10:33:33Z,fix the comment,0,0.9931963682174683
1432557844,5791,Paul-Licameli,2023-12-20T10:48:23Z,put a banner on the file and `#include` guard,0,0.995328426361084
1432561554,5791,Paul-Licameli,2023-12-20T10:51:30Z,i wish we had `std::span` from c++20. i wish we could use `std::vector` less often to pass contiguous ranges of values. because `std::vector` specifies storage management details that are extraneous to the algorithm. without `span` you would need at least one extra `size_t` argument so that you could pass simple pointers. don't fix this but remember it and think about it.,0,0.8867895603179932
1432595750,5791,Paul-Licameli,2023-12-20T11:25:23Z,the assertion should be commented as a precondition,0,0.9940381050109863
1432603856,5791,Paul-Licameli,2023-12-20T11:34:12Z,"you use template parameters t and u, not requiring them to be the same. you use `double` in the return type. maybe you might make this more general? (could there be some future need to use it with `long double` or `std::complex ?) maybe `template , typename t, typename u>` maybe also the common cases where t and u are both double or both float could also declare `extern math_api` explicit template instantiations here, and a companion .cpp file could generate the definitions.",0,0.9929478168487549
1432619243,5791,Paul-Licameli,2023-12-20T11:51:25Z,see here for a formula that suggests a one-pass accumulation of the answer which might or might not make a difference in performance [a link] but see also [a link],0,0.9928110241889954
1432624512,5791,Paul-Licameli,2023-12-20T11:56:43Z,"here too, this is just variance (times n)",0,0.9897927045822144
1432630039,5791,Paul-Licameli,2023-12-20T12:02:26Z,i think this line is unnecessary to build,0,0.8444536328315735
1433207325,5791,Paul-Licameli,2023-12-20T21:38:37Z,banners for this and other new source files,0,0.9942944645881653
1433214534,5791,Paul-Licameli,2023-12-20T21:48:51Z,"previous contents of `buffer` matter -- this is addition, not assignment. a header comment should say that.",0,0.9941036105155945
1433224802,5791,Paul-Licameli,2023-12-20T21:58:57Z,i figured out that the only uses of `getfloats` are in this function. is there a guarantee that `frame.data()` used as the buffer will be zero-initialized first? only if the given `frame` is empty before this `resize`. precede this with `resize(0)` and then there is no more doubt.,0,0.991228461265564
1433228708,5791,Paul-Licameli,2023-12-20T22:03:18Z,here is the use of `getnextframe` but i see no zeroing out of the buffer between passes. is there in fact a bug here?,0,0.9910470843315125
1433236151,5791,Paul-Licameli,2023-12-20T22:15:18Z,"to treat the short file boundary case really fully, should there be a while loop below? with a careful test that the loop makes progress each time? or should you be sure to zero-fill any uninitialized part remaining after the second read? (which would be a consequence of first resizing the buffer to zero above)",0,0.9921187162399292
1433937999,5791,Paul-Licameli,2023-12-21T11:19:40Z,"clarify with comments that this class does not calculate stft, but is only a source of time-domain frames, with windowing function applied",0,0.9946356415748596
1433947119,5791,Paul-Licameli,2023-12-21T11:28:25Z,you might just write `std::plus{}`,0,0.9930025935173035
1434000357,5791,Paul-Licameli,2023-12-21T12:17:17Z,"not clear in context here, what string you mean. use `//!` instead of `//` and it becomes a doxygen brief comment.",0,0.9595620036125183
1434003078,5791,Paul-Licameli,2023-12-21T12:20:08Z,make a `` comment,0,0.9949245452880859
1434010393,5791,Paul-Licameli,2023-12-21T12:27:27Z,i might write [code block],0,0.9927812218666077
1434011342,5791,Paul-Licameli,2023-12-21T12:28:28Z,are you also assuming `fullsize > 0` ? (loops below won't terminate if it is 0) can it be unsigned?,0,0.9942846894264221
1434012512,5791,Paul-Licameli,2023-12-21T12:29:40Z,incorrect if x is 0 or negative; again consider an unsigned argument,0,0.8708491921424866
1434017222,5791,Paul-Licameli,2023-12-21T12:34:13Z,the function name doesn't suggest exactly what it does. 6 is not a power of 2 or of 3.,0,0.984176516532898
1434018673,5791,Paul-Licameli,2023-12-21T12:35:01Z,or simply `n % 9 == 0`,0,0.9928143620491028
1434019919,5791,Paul-Licameli,2023-12-21T12:36:16Z,so really `getpowersof2and3` could generate just the powers of 2 and the triples of those,0,0.991729199886322
1434020216,5791,Paul-Licameli,2023-12-21T12:36:36Z,i don't know what `odf` abbreiviates,0,0.9568700790405273
1434020791,5791,Paul-Licameli,2023-12-21T12:37:12Z,`j` is never 0,0,0.9837436079978943
1434021455,5791,Paul-Licameli,2023-12-21T12:37:54Z,this condition too is always false,0,0.9707971811294556
1434024820,5791,Paul-Licameli,2023-12-21T12:41:25Z,"i would make a small companion `.cpp` file, just to define the destructor non-inline, so that the linker doesn't need to de-duplicate the virtual function table but will allocate it just in that .cpp. not very important for a header file that is not widely used, but i make a habit of this whenever i make a new abstract base class.",0,0.9859780073165894
1434031768,5791,Paul-Licameli,2023-12-21T12:48:13Z,"i took another look this morning, and i'm still not convinced, that the loop using `getnextframe` in `mirdsp.cpp` is correct. i still think later passes have a buffer contaminated with previous data. but all of that could be fixed down at this level, if only the first `addchannel` instead assigned the buffer, not accumulating into it. only the second `addchannel` should remain. and then no special header comments would be needed.",0,0.9470251798629761
1434034892,5791,Paul-Licameli,2023-12-21T12:49:28Z,this type is nowhere used,0,0.9941652417182922
1434044316,5791,Paul-Licameli,2023-12-21T12:56:07Z,"if i correctly understand the statistical methods of roc, then whether the allowed false positive rate is consistent with the threshold, depends on probability distributions of ... whatever `threshold` measures, in two different populations of sound files, those that have rhythmic content and those that do not. so then are the four magic numbers below derived experimentally from a certain corpus of example files that you take as representative?",0,0.9895798563957214
1434069456,5791,Paul-Licameli,2023-12-21T13:19:02Z,"`timesignature` is not assigned on all paths. better to make it consistent that way. or maybe better, why not return `musicalmeter` by value and eliminate arguments?",0,0.9911120533943176
1434071254,5791,Paul-Licameli,2023-12-21T13:20:46Z,"maybe one `musicalmeter` member instead, directly initialized",0,0.9905547499656677
1434082468,5791,Paul-Licameli,2023-12-21T13:31:21Z,"should this standard deviation be defined in the same place as the mean, `bpmexpectedvalue`?",0,0.992771565914154
1434084722,5791,Paul-Licameli,2023-12-21T13:33:36Z,redundant words,0,0.5258431434631348
1434091283,5791,Paul-Licameli,2023-12-21T13:40:04Z,this use of the normalized hann window is only as a moving-average kernel -- spectral properties are not important. am i right?,0,0.9902310967445374
1434092641,5791,Paul-Licameli,2023-12-21T13:41:15Z,maybe that loop can just be `std::accumulate` on one or two ranges,0,0.9849234819412231
1434604163,5791,Paul-Licameli,2023-12-22T00:10:43Z,i don't understand this multiplier.,-1,0.7470483779907227
1434604568,5791,Paul-Licameli,2023-12-22T00:11:55Z,make a ``,0,0.993243396282196
1434608698,5791,Paul-Licameli,2023-12-22T00:23:44Z,can this divide by 0?,0,0.9924967288970947
1434615304,5791,Paul-Licameli,2023-12-22T00:41:14Z,"the argument is called `samplerate` but at the point of usage it is passed a frame rate, which is sample rate divided by a hop size -- hop rate? hops per second.",0,0.9938574433326721
1434616135,5791,Paul-Licameli,2023-12-22T00:43:31Z,i don't pretend to know the theory here. maybe school me later.,0,0.8547242283821106
1434617207,5791,Paul-Licameli,2023-12-22T00:46:16Z,maybe reserve `frameprovider.getnumframes()` ?,0,0.9943768382072449
1434618791,5791,Paul-Licameli,2023-12-22T00:50:11Z,"if performance is concern enough for a progress indicator, perhaps we should seek optimizations. maybe the old functions in fft.cpp could be improved. such as by avoiding the un-permuting and re-permuting of the spectrum.",0,0.9849842190742493
1434621683,5791,Paul-Licameli,2023-12-22T00:57:49Z,no such parameter,0,0.992266833782196
1434623670,5791,Paul-Licameli,2023-12-22T01:03:19Z,is minnumbars <= maxnumbars always?,0,0.991800844669342
1434625719,5791,Paul-Licameli,2023-12-22T01:09:13Z,<= not < ? (twice),0,0.7355550527572632
1434964131,5791,Paul-Licameli,2023-12-22T11:07:30Z,"i wish we had c++20 ranges. without them, you could use standard algorithms without needing these temporary vectors just to hold integers. making these vectors seems wasteful and only obscures the two outer loops that might just as easily be written with an integer loop variable.",-1,0.5210554599761963
1435028287,5791,Paul-Licameli,2023-12-22T12:48:04Z,maybe call that `pulsetrainperiod`,0,0.9915105104446411
1435035906,5791,Paul-Licameli,2023-12-22T12:59:29Z,this comment makes me think of the problem of applying a varying stretch to correct irregularities of rhythm... have you thought of that?,0,0.9606079459190369
1435038076,5791,Paul-Licameli,2023-12-22T13:02:55Z,"`std::accumulate` defaults the operation to addition, so you can shorten that",0,0.9931102991104126
1435039421,5791,Paul-Licameli,2023-12-22T13:04:53Z,`std::abs`,0,0.9916866421699524
1435040457,5791,Paul-Licameli,2023-12-22T13:06:23Z,why `2 *`?,0,0.9887948036193848
1435041792,5791,Paul-Licameli,2023-12-22T13:08:25Z,you can default the last two arguments,0,0.9947086572647095
1435052545,5791,Paul-Licameli,2023-12-22T13:22:13Z,it looks like you just want an `unordered_set` hashed on the third member,0,0.9931713342666626
1435053706,5791,Paul-Licameli,2023-12-22T13:23:44Z,"is the normalized distance really a ""probability"" (vertical axis if you plot the distribution) or is it the ""random variable"" (horizontal axis)?",0,0.9908012747764587
1435054420,5791,Paul-Licameli,2023-12-22T13:24:45Z,"explain ""contrast"" -- the same thing as the ""score""?",0,0.9914826154708862
1435055143,5791,Paul-Licameli,2023-12-22T13:25:42Z,i would write inner braces around the first three members,0,0.9873678088188171
1435059237,5791,Paul-Licameli,2023-12-22T13:31:40Z,"is it correct to choose the hypothesis that minimizes error as the most likely correct hypothesis -- or, is there need to do something fancier with a bayesian formula? which would make some assumptions about the unconditional probabilities of the hypotheses (how often will a loop have 6/8? how often 4/4? etc.) and those data again might need to be derived from some corpus of examples we take as representative.",0,0.9850690960884094
1435061216,5791,Paul-Licameli,2023-12-22T13:34:30Z,"e.g. find a large enough population of examples where time signature is deduced from explicit metadata, not calculation?",0,0.9917961359024048
1435061963,5791,Paul-Licameli,2023-12-22T13:35:44Z,what is the source of all the numbers in these three maps?,0,0.9920352101325989
1435063626,5791,Paul-Licameli,2023-12-22T13:38:23Z,the data in the third map -- however derived -- might be used in that suggested bayesian formula.,0,0.9904911518096924
1435097509,5791,Paul-Licameli,2023-12-22T14:18:00Z,"that has units of samples / beat, so i might call it `beatlength`",0,0.9939565658569336
1435102383,5791,Paul-Licameli,2023-12-22T14:22:15Z,"you are testing increasing periods, not frequencies -- maybe that should really be called ""sub-harmonic""",0,0.975315511226654
1435121700,5791,Paul-Licameli,2023-12-22T14:38:41Z,"i think you could sequence this test before all the rest of the calculation of autocorrelation and scores, and skip all that if it is true",0,0.9854112863540649
1437553342,5791,saintmatthieu,2023-12-28T10:43:13Z,"i do think the case where `x` is of integer type is quite common. that's the use case i had, rounding onsets to tatum (or ""tick"") indices. for the rest, it's a bit complicated to find a solution that satisfies all cases without compiler warnings. i just generalized the weight type for usage convenience, but the return type is just double. users who need float coefficients shouldn't have trouble downcasting.",0,0.9316079616546631
1437562009,5791,saintmatthieu,2023-12-28T10:59:41Z,"yes indeed, this wasn't intended behaviour. addressing.",0,0.9665977358818054
1437582367,5791,saintmatthieu,2023-12-28T11:39:05Z,"yes, the perfect circular read-out would need a while loop. but it probably makes implementation easier not to care for this use case, which would be too short to be a musical loop anyway. i think initialization to 0 would only improve situations where the underlying file is less than twice the fft size, but it's cheap and easy, so will do.",0,0.9470047950744629
1437605887,5791,saintmatthieu,2023-12-28T12:24:48Z,that's an outdated comment - thanks.,1,0.5381565690040588
1437620103,5791,Paul-Licameli,2023-12-28T12:52:01Z,onset detection function,0,0.9934074878692627
1437620190,5791,saintmatthieu,2023-12-28T12:52:11Z,"making it unsigned doesn't protect against invalid input, since `fullsize > 0` is a pre-condition, so i don't see that much of a benefit. but yes, i should handle invalid argument values.",0,0.9870727062225342
1437656088,5791,saintmatthieu,2023-12-28T13:09:30Z,`n % 27 == 0` - we hold musical rhythms with two triple levels for realistic (e.g. a swung 6/8). but thanks for the tip.,1,0.9440450668334961
1437710949,5791,saintmatthieu,2023-12-28T14:44:55Z,"right - and this was a bug, missing the presence of a peak at index 0. thank you, addressing this has improved the performance of the classifier. see c0b0d85123b5403d4c8355ffdfc92374c4b46da0",1,0.651902973651886
1437712724,5791,saintmatthieu,2023-12-28T14:48:03Z,an obsolete remnant.,0,0.9351733922958374
1437721323,5791,saintmatthieu,2023-12-28T15:01:49Z,"two distributions of the score returned by the algorithm, yes, one for files whose ground truths say they are not music loops, and the other for the others. if the distributions do not overlap, then you have a perfect classifier and the threshold can be set anywhere between the two. but ours do, and we set the threshold such that it splits the non-loop population in 99% / 1% for the strict case, and 90% / 10% for the lenient case, the upper part of the split being the false-positive area. representativeness is indeed a topic. ideally i could take a representative sample set from what users are importing, but i don't have this. so i need a data set i'm happy with, and believe in it. the one use in this pr (next commit) is worth what it's worth. a follow-up ticket, #5795, may provide something more representative (although the goal of that ticket is first and foremost to make the dataset available to others for reproducibility).",0,0.9879857897758484
1437727259,5791,saintmatthieu,2023-12-28T15:12:41Z,absolutely.,0,0.963522732257843
1437729291,5791,saintmatthieu,2023-12-28T15:16:37Z,"these will be subject to change in follow-up improvement prs, i'm reluctant to invest time centralizing them, as little work as that may be.",-1,0.695777952671051
1437735052,5791,saintmatthieu,2023-12-28T15:26:33Z,i suppose it is in some way. the average of the signal is like its dft at 0hz. the window function reduces the amount of leakage of non-zero components in the 0hz measurement.,0,0.988324761390686
1437744848,5791,saintmatthieu,2023-12-28T15:45:35Z,"it's a poorly documented yet important multiplier. the moving average of the raw odf will be subtracted from it to yield the final odf, negative results being set to 0. this is to remove noise of small odf peaks before the method's quantization step. changing this value can impact dramatically the performance of the classifier. i'm still not completely happy with the odf. in some cases it can be very noisy in comparison with our perception of where onsets are. i'm exploring better solutions, and if i do find one, this smoothing may become obsolete. still, adding a comment.",-1,0.7779117226600647
1437745147,5791,saintmatthieu,2023-12-28T15:46:10Z,it's in the header.,0,0.9915506839752197
1437746376,5791,saintmatthieu,2023-12-28T15:48:11Z,not unless the input is only zeroes. adding a check.,0,0.9908918738365173
1437750934,5791,saintmatthieu,2023-12-28T15:56:47Z,"#5794 is planned for optimization. downsampling to 16khz is already something that could augment speed drastically. but i'm keeping that ticket for later. like i said, i'm not completely happy with the odf, and reworking it would put any optimization at risk. also, i don't mind the algorithm to underperform on master for a while, so that team members and especially and get to experience the progress bar and the nuisance it can be on file import before the final release.",0,0.7111262679100037
1437754501,5791,saintmatthieu,2023-12-28T16:03:13Z,will `iotarange` complain if it isn't?,0,0.9666563272476196
1437755466,5791,saintmatthieu,2023-12-28T16:05:08Z,"given that `tatumrate` is not an integer, that won't make much difference. `mintatumsperminute` and the other are ballpark values anyway.",0,0.9741316437721252
1437759423,5791,saintmatthieu,2023-12-28T16:12:52Z,"this could be an application of the result of this analysis indeed. we could offer the user the possibility to automatically warp the onsets to the nearest tatum. generalizing our integration of the time-stretching from staffpad may not be that tricky, but there would be real difficulties related to waveform painting. or maybe the painting would be so subtle we wouldn't even need to address it ... then pencil and brush would also have to be disabled for time-warped clips, but ux-wise that wouldn't be too bad either.",0,0.9468140006065369
1437760382,5791,saintmatthieu,2023-12-28T16:14:52Z,of course.,0,0.9627540707588196
1437760807,5791,saintmatthieu,2023-12-28T16:15:48Z,"such that the error nicely spans `[0, 1)`. will comment.",0,0.9934768080711365
1437768333,5791,saintmatthieu,2023-12-28T16:30:23Z,"you're right, it's not a probability, `1 - distance` it's just a score. the probability of the file being a loop given that score is what we use in the benchmarking to determine the thresholds.",0,0.9910814762115479
1437769308,5791,saintmatthieu,2023-12-28T16:32:25Z,"outdated comment, thanks. (see [a link] if you wish)",1,0.9078831672668457
1437769719,5791,saintmatthieu,2023-12-28T16:33:08Z,in fact `score` and `error` are rather redundant. i simplified.,0,0.987834095954895
1437771920,5791,saintmatthieu,2023-12-28T16:37:43Z,"this is part of the following, disambiguation step of the algorithm. for now we're only interested in tatum quantization. but since tatum rate typically is faster than beat rate, a follow-up disambiguation step is necessary. there, time signature ""popularity"" are taken into account to decide how tatums should be grouped in beats and beats in bars. see the introductory comment in the header.",0,0.9921371340751648
1437789624,5791,saintmatthieu,2023-12-28T17:10:15Z,"you're right, i am using probabilistic measures that may be more clearly be brought together with a clear formulation of the bayes theorem. i just created a ticket for that: [a link]",0,0.9876124262809753
1437790733,5791,saintmatthieu,2023-12-28T17:12:39Z,it's more the period index that i'm increasing. renaming.,0,0.9882826209068298
1437817932,5791,saintmatthieu,2023-12-28T18:15:45Z,"nice! that may be a non-negligible speed improvement. i may remove this `fourfourit` in a follow-up algorithmic improvement, but until then ...",1,0.9881026148796082
1437818400,5791,saintmatthieu,2023-12-28T18:16:57Z,i don't understand.,-1,0.8783383965492249
1439751210,5791,saintmatthieu,2024-01-02T19:29:23Z,this won't help for very small x.size().,0,0.9803992509841919
1439982307,5791,Paul-Licameli,2024-01-03T00:42:05Z,"i see it is now corrected, though there are two passes over the buffer (to zero it, then to add to it). maybe that marginal inefficiency is unimportant.",0,0.9799348711967468
1439987617,5791,Paul-Licameli,2024-01-03T00:58:04Z,"are you trying to handle corner cases? you deal with zero for `numsamples`. log2 returns -infinity for a zero argument, nan for a negative, and idealhopsize might be zero. i'm just trying to think of abusive inputs... the numbers come from virtual functions of `audio` below which have no postconditions.",-1,0.5827970504760742
1440989748,5791,Paul-Licameli,2024-01-03T21:46:24Z,considering that crash i fixed in the unit test -- you might comment that the lifetime of the source encloses that of this?,0,0.9928762912750244
1441009640,5791,Paul-Licameli,2024-01-03T22:07:42Z,"i notice now the window is periodic in `size`, not symmetrical; perhaps worth a header comment",0,0.9906328916549683
1441091266,5791,Paul-Licameli,2024-01-03T23:30:37Z,did you mean `0 < delta && delta < 1. / 8`,0,0.9922164678573608
1441172648,5791,Paul-Licameli,2024-01-04T01:13:18Z,"this may be a problem: the function may take paths that do change the tracks, but do not push an undo state. therefore those changes of the tracks will be lost if you undo the import command that was previously pushed, then redo again. or the changes will be consolidated as part of the next undo item that is pushed, which may be for an unrelated editing operation.",0,0.9704670906066895
1441177270,5791,Paul-Licameli,2024-01-04T01:25:29Z,it may loop infinitely because the termination test is == not >=,0,0.9831064939498901
1441520403,5791,Paul-Licameli,2024-01-04T09:25:57Z,it's only for debug purposes. do you want to push `powspec` before or after the swap?,0,0.9934878349304199
1441521466,5791,Paul-Licameli,2024-01-04T09:26:58Z,do you want to push one more power spectrum for debug output?,0,0.9937666654586792
1441534993,5791,Paul-Licameli,2024-01-04T09:40:05Z,i don't understand the context of the remark,-1,0.615146815776825
1441538832,5791,Paul-Licameli,2024-01-04T09:43:52Z,`const auto size = x.size()` (lift that out of the loop) `k = (k + n + i + size()) % size()` i don't know whether that might make this hot inner loop run faster -- measure,0,0.9870507717132568
1441560820,5791,Paul-Licameli,2024-01-04T10:05:46Z,like not alike,0,0.9204155206680298
1441603585,5791,Paul-Licameli,2024-01-04T10:50:57Z,`const auto odfsr = odf.size() / audiofileduration;`,0,0.9937753677368164
1441605940,5791,Paul-Licameli,2024-01-04T10:53:37Z,"comments at least for the more abbreviated member names? remind the reader what ""odf"" means",0,0.9923432469367981
1441610040,5791,Paul-Licameli,2024-01-04T10:57:34Z,"good, i like to see the ""iife"" technique used to make clear that something remains const after once computed. (immediately invoked function expression)",1,0.9747899770736694
1441612574,5791,Paul-Licameli,2024-01-04T11:00:28Z,"""numbers""",0,0.9897712469100952
1441614613,5791,Paul-Licameli,2024-01-04T11:02:48Z,"so write `const int maxnumbars = std::max(minnumbars, ...);`",0,0.9927892088890076
1441630225,5791,Paul-Licameli,2024-01-04T11:20:52Z,"i wonder about this use of `isround` sometimes wrongly rejecting a hypothesis. would it be better to do it with integer operations? suppose `tatumsperbeat` contains nums and denoms, `(beatsperbar * num) % denom == 0` is the condition",0,0.8838863372802734
1441637157,5791,Paul-Licameli,2024-01-04T11:29:02Z,maybe one `musicalmeter` member,0,0.9891401529312134
1441638902,5791,Paul-Licameli,2024-01-04T11:31:02Z,you assigned that already above maybe just collect all assignments here,0,0.9922118186950684
1441668743,5791,Paul-Licameli,2024-01-04T12:01:26Z,`numtatums` is the key of the map but also duplicated as part of the value. it's not important.,0,0.9925731420516968
1441695829,5791,Paul-Licameli,2024-01-04T12:31:34Z,"i got confused reviewing elsewhere -- this member actually is a number of tatums, not divisions",0,0.5513229966163635
1441703771,5791,Paul-Licameli,2024-01-04T12:40:53Z,"i feel a similar doubt here, as with `isround` -- you should express the test with integer arithmetic only",0,0.8173990845680237
1441710043,5791,Paul-Licameli,2024-01-04T12:48:21Z,"is this so hard? `bardivision` is constructed in only one place, at line 98. you can prove there with little difficulty that `beatsperbar` is not more than 4. what i might do: give `bardivision` a constructor with explicit preconditions -- and since its members are const, the preconditions become invariants. then this function can assume the invariant is satisfied. the burden of proof of the precondition shifts to the place of construction.",0,0.9753298163414001
1441712395,5791,Paul-Licameli,2024-01-04T12:51:08Z,"do as in the previous suggestion, and `ts` will not be optional.",0,0.993454098701477
1441713794,5791,Paul-Licameli,2024-01-04T12:52:49Z,i still don't know the source of the numbers.,-1,0.5989580750465393
1441734642,5791,Paul-Licameli,2024-01-04T13:13:52Z,now i feel confused about whether this mapping is correct. wasn't the autocorrelation just half of a vector expected to be conjugate-symmetric?,-1,0.9734917879104614
1441736767,5791,Paul-Licameli,2024-01-04T13:16:08Z,"so, this while loop is climbing up to a local peak? summarize with a comment if i understand right",0,0.9907107949256897
1441747025,5791,saintmatthieu,2024-01-04T13:26:50Z,"sorry, was just a not for myself. if `x.size() == 1`, this crashes. have to fix this.",-1,0.9927365779876709
1441756487,5791,saintmatthieu,2024-01-04T13:36:42Z,"`minbarduration < maxbarduration`, and they divide the same value, so `minnumbars <= maxnumbars`.",0,0.9883623719215393
1441852551,5791,Paul-Licameli,2024-01-04T14:52:23Z,you don't need to capture this in the lambda -- it's a constant,0,0.9924585223197937
1441858919,5791,Paul-Licameli,2024-01-04T14:57:41Z,"i've done bottom-up review of all these calculations, twice now. i'm doing one more pass, top-down, depth first. now i think it would be clearer if moved this multiplication by 1.5, into mirdsp where the moving average is used. then this so-called `getmovingaverage` will really do what the function name suggests, and only that.",0,0.9712782502174377
1441888072,5791,Paul-Licameli,2024-01-04T15:20:10Z,unused,0,0.96555495262146
1441895973,5791,Paul-Licameli,2024-01-04T15:23:01Z,maybe this function could be called `generatetempohypotheses`,0,0.986078143119812
1441947117,5791,Paul-Licameli,2024-01-04T16:03:41Z,this is used only in `runquantizationexperiment` -- maybe this computation could be lowered into that function for clarity; pass `possibledivs` into it instead,0,0.9924346208572388
1441948037,5791,Paul-Licameli,2024-01-04T16:04:27Z,"""generate hypotheses"" here about tempo...",0,0.9895206689834595
1441948663,5791,Paul-Licameli,2024-01-04T16:04:58Z,"maybe call this ""best fit tatum number""",0,0.987443745136261
1441952465,5791,Paul-Licameli,2024-01-04T16:08:28Z,"could there be more than one hypothetical bar division with a four/four signature? if so, why should the first be preferred?",0,0.9895486831665039
1442111329,5791,saintmatthieu,2024-01-04T18:22:17Z,"the autocorrelation is not conjugate-symmetric, only symmetric: it's real numbers. i'm confident that the code below is correct.",0,0.9458848237991333
1442137606,5791,saintmatthieu,2024-01-04T18:51:59Z,actually not: we are pushing another odf frame because it's based on the adjacent differences. the correct number of power spectra already has been pushed.,0,0.9919066429138184
1442164412,5791,saintmatthieu,2024-01-04T19:23:17Z,"absolutely, thanks.",1,0.8062466979026794
1442881884,5791,Paul-Licameli,2024-01-05T13:27:38Z,incidentally noticed that `getpossiblebardivisors` in `mirutils` are not used at all,0,0.9726770520210266
1442889694,5791,Paul-Licameli,2024-01-05T13:33:39Z,c++23 would let you write `0uz` instead to make a size_t literal,0,0.9921408891677856
1442895173,5791,Paul-Licameli,2024-01-05T13:36:39Z,are not is,0,0.9740740656852722
1446746636,5791,saintmatthieu,2024-01-10T00:05:22Z,comment from -licameli:,0,0.9765338897705078
1446747135,5791,saintmatthieu,2024-01-10T00:06:14Z,from -licameli:,0,0.992805540561676
1446747506,5791,saintmatthieu,2024-01-10T00:07:02Z,from -licameli:,0,0.992805540561676
1446747865,5791,saintmatthieu,2024-01-10T00:07:39Z,from -licameli:,0,0.992805540561676
1446748202,5791,saintmatthieu,2024-01-10T00:08:20Z,from -licameli:,0,0.992805540561676
1446749099,5791,saintmatthieu,2024-01-10T00:10:03Z,from -licameli: [a link] (comment is a bit long to be copied.),0,0.9918851852416992
1446749399,5791,saintmatthieu,2024-01-10T00:10:39Z,from -licameli:,0,0.992805540561676
1446749736,5791,saintmatthieu,2024-01-10T00:11:07Z,from -licameli:,0,0.992805540561676
1446749918,5791,saintmatthieu,2024-01-10T00:11:32Z,from -licameli:,0,0.992805540561676
1446755880,5791,saintmatthieu,2024-01-10T00:23:32Z,ok,0,0.9233372807502747
1446760245,5791,saintmatthieu,2024-01-10T00:27:33Z,"it could, but since the false-positive tolerance itself being rather arbitrary, we shouldn't be preoccupied with that kind of precision.",0,0.95497727394104
1446762289,5791,saintmatthieu,2024-01-10T00:31:38Z,"i agree, checksum is a better choice of name. also changing the signature to something more straightforward.",0,0.8837583065032959
1446770627,5791,saintmatthieu,2024-01-10T00:49:50Z,"looks ok. i've just run the benchmarking again, counting the total number of samples, which is 84540711. to get the average dc offset in db, `20*log10(1840.31005859375/84540711) == -93.24349792273436`, close to the noise floor for 16bit audio.",0,0.885381281375885
1446770802,5791,saintmatthieu,2024-01-10T00:50:11Z,i don't mind - thanks.,1,0.8207072615623474
1446772745,5791,saintmatthieu,2024-01-10T00:54:37Z,"that could be a problem. i expect it will be close, though, since i don't expect the false-positive and true-positive rates to differ much or at all. as for the floating-point arithmetic ... in a follow-up pr i intend to make the evaluation dataset easily available, not only on the machine i'm using right now. when i'm there i'll test it on the macbook i have, see what happens.",0,0.909075140953064
1446774458,5791,saintmatthieu,2024-01-10T00:58:01Z,"yes, the commits i'm preparing should fix this. most importantly, the calculated thresholds are consistent with the values used in `musicinformationretrieval.h`, [code block]",0,0.9909466505050659
1304419878,5043,Paul-Licameli,2023-08-24T14:23:54Z,"replicated in another pr -- again, wrong number?",0,0.9766006469726562
1304421081,5043,Paul-Licameli,2023-08-24T14:24:45Z,"please edit the commit comment. put breaks in the very long line that is the third paragraph, and remove the last line.",0,0.9944992065429688
1304433990,5043,Paul-Licameli,2023-08-24T14:33:47Z,"""adequate""",0,0.8352077603340149
1304436302,5043,Paul-Licameli,2023-08-24T14:35:22Z,"do i understand the intention: if i cut from a project with 60 bpm tempo, and paste into a project with 120 bpm tempo, it is not meant to play back the same, but play twice as fast? and so the selection change too?",0,0.9861418604850769
1304440543,5043,Paul-Licameli,2023-08-24T14:38:15Z,"a test of the branch tells me i have described how it behaves. whether that is as design specified, i don't know, but assuming so, i update the qa checklist.",0,0.980130672454834
1304458265,5043,Paul-Licameli,2023-08-24T14:50:19Z,"`mprojecttempo` can be private and this branch still builds. please do that. is there a commit i didn't review yet in another branch that needs `mprojecttempo`? if so, rewrite that to use `track::getprojecttempo` which as you see is not a simple accessor. remember i rewrote it that way to fix the uninitialized variable that made the error drawing stereo clips.",0,0.9928277134895325
1304485954,5043,Paul-Licameli,2023-08-24T15:11:20Z,"this one line: i think in an earlier version you duplicated this unnecessarily in `wavetrack` at places where `init` had already been called, which was why the member was protected, but i pointed out the redundancy.",0,0.9880081415176392
1304490863,5043,Paul-Licameli,2023-08-24T15:15:09Z,it builds for me without this inclusion and without prefs.h,0,0.9919827580451965
1304497323,5043,Paul-Licameli,2023-08-24T15:20:27Z,"does this added line, with the other at 630, fix a known bug in copy-paste? strictly speaking that's not the scope of the pr or the stretching project. is there an issue number that it fixes?",0,0.9930128455162048
1304497728,5043,Paul-Licameli,2023-08-24T15:20:48Z,i will add to the qa checklist anyway,0,0.993069589138031
1304502614,5043,Paul-Licameli,2023-08-24T15:24:53Z,"the function might be more understandable if you do that stretch only when `!stretchotherbeforeresampling` but i understand that if `stretchotherbeforeresampling`, then the line does nothing because the stretch ratio is already unit.",0,0.9872099161148071
1304513357,5043,Paul-Licameli,2023-08-24T15:33:27Z,did experimentation with larger numbers might find an easy way to improve performance?,0,0.9902737736701965
1304520980,5043,Paul-Licameli,2023-08-24T15:39:36Z,"i like this swap for better exception safety, but it is still imperfect. now it is set up to happen if an exception occurs before `newsequences` were fully filled, which is also possible because of a db failure. so really you need another boolean for a stage of partial success. that is, `bool swappedonce = false;` above. make the `swap` in the finally only if `swappedonce`. assign `swappedonce = true;` after the other swap below.",0,0.5032709240913391
1304555599,5043,Paul-Licameli,2023-08-24T15:57:47Z,why this exception?,0,0.9841788411140442
1304560199,5043,Paul-Licameli,2023-08-24T16:01:26Z,"1. what happens inside a `finally` may happen during stack unwinding, so the called functions should be `noexcept`. (i don't believe in adding `noexcept` just because you can; but only when there are certain strong reasons for it like here.) 2. this might not restore the state of the other track exactly. `mrawaudiotempo` in a clip may go from empty to non-empty and not back again.",0,0.9781060218811035
1304561614,5043,Paul-Licameli,2023-08-24T16:02:44Z,"i wonder if instead this should be an assertion that is stated as a precondition. but then the precondition may need to be repeated for the functions that call this, and so on up the stack until somewhere you can give some convincing argument that the condition is guaranteed.",0,0.9487959742546082
1304563394,5043,Paul-Licameli,2023-08-24T16:04:18Z,the two places that use this function also use `const_cast`. i feel some unease. i might approve reluctantly.,-1,0.8054295778274536
1304572521,5043,Paul-Licameli,2023-08-24T16:11:05Z,move this to a `default:` case of the `switch` to remove a compile warning.,0,0.9942197799682617
1304590123,5043,Paul-Licameli,2023-08-24T16:27:31Z,this overload is not used,0,0.9933053851127625
1305005742,5043,Paul-Licameli,2023-08-25T00:57:16Z,"the definition of this function is better now, but it is still not used",0,0.9904389381408691
1310213549,5043,saintmatthieu,2023-08-30T12:41:35Z,spot on.,0,0.9896013140678406
1314963314,5043,Paul-Licameli,2023-09-04T13:41:21Z,still unresolved,0,0.793069064617157
1315985724,5043,saintmatthieu,2023-09-05T14:28:53Z,i reverted this change - wrong since `mprojecttempo` became part of `channelgroupdata`.,0,0.8974642157554626
1315996337,5043,saintmatthieu,2023-09-05T14:36:40Z,"yes, that's correct. it's a simple ux rule: preserve the length in beats rather than in seconds.",0,0.9910275340080261
1316032511,5043,saintmatthieu,2023-09-05T15:02:41Z,"the reason is obscure, but there is one. `copy->clearsequence(playendtime, sequenceendtime)` clears the trimmed data. if we don't call `copy->settrimleft(0)`, one may still think the hidden data is valid. further down i call `newclip->applystretchratio()`. this provisionally sets left and right trim to 0, to reduce the ramping in/out of the effect if possible ... note that, in 5-of-6, i remove that call on `newclip`, but this is a healthy change in any case, making changes in the lines below safer.",0,0.9864053130149841
1316038681,5043,saintmatthieu,2023-09-05T15:06:58Z,"i didn't experiment with larger numbers, no. this number is the hop size for either the analysis or the synthesis (depending on the stretch direction), so it might spare iterations.",0,0.9892205595970154
1316049842,5043,saintmatthieu,2023-09-05T15:15:24Z,agreed. cherry-picked your fix-commit d15f03a1c4ca0b6f59d286ac59862635b3d27457.,0,0.9366375207901001
1316069242,5043,saintmatthieu,2023-09-05T15:29:57Z,"now i think this throw behaviour is too strict. this method is used so far in `wavetrack::pastewavetrack` and `wavetrack::clearandpaste`. i cannot think of a reason for either of them not to be callable before they are made part of a project, but maybe i'm not thinking hard enough. a more pragmatic approach would be for this method to assert and return without doing anything instead of throwing, without stating a pre-condition. the assert might reveal a concrete example where this doesn't hold in the future, yet there might not be any consequence at all (e.g. if no stretching occurred), in which case bothering the user with it would just be annoying to everyone. ok for assert without pre-condition ?",0,0.5633823275566101
1316084753,5043,saintmatthieu,2023-09-05T15:41:45Z,"i never used that keyword before. i notice, though, that [code block] doesn't yield a warning, which would make even more tedious checking that all nodes of the call tree of `onprojecttempochange` also are `noexcept`. or am i missing something ?",0,0.9003540873527527
1316096726,5043,saintmatthieu,2023-09-05T15:51:10Z,"i hadn't thought about that, but looks like i'm a lucky guy: `track.getprojecttempo().has_value()` if and only if `track.onprojecttempochange` was called at least once. if it wasn't, then this method doesn't proceed. if it was, then all clips have `mrawaudiotempo` set.",1,0.9174972772598267
1321898836,5043,Paul-Licameli,2023-09-11T18:08:09Z,"""scope""",0,0.9877140522003174
1321914868,5043,Paul-Licameli,2023-09-11T18:25:06Z,"i still dislike the `const_cast` in two places and the non-obvious reasoning why there is never a net side effect on `waveclip`. an alternative is that `provisionallysynchronizeprojecttempo` (renamed maybe) takes a reference to a `const wavetrack` and returns a shared pointer to a new, duplicate wavetrack that has the project tempo change in it. its scope is only as long as this `finally` would be. maybe a lot of memory allocations and deallocations but a sharing of all the blocks in the sqlite database so none of the very expensive things are done.",-1,0.9105420112609863
1321918816,5043,Paul-Licameli,2023-09-11T18:28:58Z,"consider too that duplication of the in-memory wavetrack structures, but with sharing of sqlite resources, happens all the time when you push and pop the undo stack, or even just modify the current entry because of a change of the selected interval. and we hardly notice the performance.",0,0.9859641790390015
1321920000,5043,Paul-Licameli,2023-09-11T18:30:07Z,"now i think, let the exception stand. rewrite the function as i suggested so it doesn't mutate other but constructs a copy. if the preconditions are not satisfied, throw. the two places where this function is called are in pasting and i already made sure years ago with exhaustive examination of call paths that these are safe places to throw and have audacityapp::onexceptioninmainloop catch it and deal with it.",0,0.9761337041854858
1322570488,5043,saintmatthieu,2023-09-12T07:28:35Z,"that's a good idea, better than this kind of magic i was doing. see 8604d5726a239849bdd80636a3d948c31e076ccd.",1,0.9775481820106506
1322756916,5043,Paul-Licameli,2023-09-12T09:35:30Z,"the commit comment ""preserve beat length of selection when copying across projects"" describes this part of it. perhaps the rest of this commit needs other commit comments, whether in the same or a separate commit.",0,0.9900673627853394
1322767017,5043,Paul-Licameli,2023-09-12T09:43:47Z,i don't remember what this line fixes -- was it only necessary when you were using temporary side effects on clips?,0,0.9543319940567017
1322767574,5043,Paul-Licameli,2023-09-12T09:44:18Z,but this change makes sense regardless,0,0.97981196641922
1322772367,5043,Paul-Licameli,2023-09-12T09:48:10Z,``,0,0.9134702086448669
1322776133,5043,Paul-Licameli,2023-09-12T09:51:18Z,"`leader` is assumed to be non-null, so i would instead type it as `wavetrack *& leader` and in the header write a doxygen comment `[out] leader`",0,0.9935988187789917
1322825731,5043,Paul-Licameli,2023-09-12T10:24:46Z,"a small change. but i remember some of the surprises in getting effects figured out, were the unintended consequences of changing `<` to `<=` tests in certain `wavetrack` and `waveclip` member functions that were more widely used. are there such surprises here? i did review all uses of `getcliptime` and now, i think not.",0,0.9646803736686707
1322848756,5043,Paul-Licameli,2023-09-12T10:39:18Z,this simple change raises similar doubts. but i presume you have retested the destructive effects with this change? this pr is based on all of that other stuff. i have in fact noticed zero-length clips sometimes as a thing that ought to be debugged later. is there a way of making zero length clips in 3.3.3 that gets fixed by this? maybe there are existing issues about them?,0,0.8432540893554688
1322866977,5043,Paul-Licameli,2023-09-12T10:57:24Z,i might write this without the vector: `const auto range = tracks.any () + [&](const auto ptrack){ return synclock::issynclockselected(t) || (notlocked && playable); }`,0,0.9934440851211548
1322867386,5043,Paul-Licameli,2023-09-12T10:57:48Z,then just use `range` twice in range-for statements,0,0.9946000576019287
1322869820,5043,Paul-Licameli,2023-09-12T11:00:11Z,strings. ?,0,0.9762236475944519
1322871847,5043,Paul-Licameli,2023-09-12T11:02:16Z,"i see a repetition of these strings and would like to see a convenience function to make the progress indicator, so the strings occur in just one place",0,0.9887531995773315
1322887539,5043,Paul-Licameli,2023-09-12T11:17:14Z,"a conditional call to `join` is now unconditional. does this change behavior? in the case that the selected portion of track for eq contains split lines, not at the extremes of the selection, then this is intended to put the lines back where they were. does this conserve that behavior?",0,0.9931962490081787
1327184799,5043,saintmatthieu,2023-09-15T11:53:49Z,"not sure anymore either, but it still is better this way: `waveclip::onprojecttempochange` is the only way a clip's project tempo can be set, hence `wavetrack::insertclip` calling it with `oldtempo == nullopt`. best would be to add a dedicated api, but i'm lazy.",0,0.8114200234413147
1329514717,5043,saintmatthieu,2023-09-19T03:04:54Z,"when i changed the boundary check in the first place, it was to redefine clip intervals as standard closed-begin, open-end. consistently, and for adjacent clips, `clipa.getplayendtime() == clipb.getplaystarttime()`. this is a place that went against this rule of thumb that i haven't addressed earlier, and would prevent me from using `getclipattime` in `pasteone`: there i don't want a clip whose end is at `t0` to interfere. i also looked at uses of `getclipattime`. it's used in `getenvelopeattime`. my testing of envelope editing showed that it still worked properly. will add a qa checkbox.",0,0.984298825263977
1329555946,5043,saintmatthieu,2023-09-19T04:15:37Z,"not that i know of. #2263 wrongly reports zero-length clips, but that's actually the click-to-merge vertical line. in any case, it'd be wrong indeed to split a track on the first sample of a clip. one could even question whether a track should be splittable at the second-last sample of a clip, leaving a length-1 clip, barely more usable than a length-0 clip. but i didn't venture that far.",0,0.7970705032348633
1329662375,5043,saintmatthieu,2023-09-19T07:02:43Z,"iiuc, the `+` overload works like an ""&&"", and your proposal would yield another condition: `playable && (issynclockselected || notlocked)`. i think what could work is [code block] but that's not so important.",0,0.9874541759490967
1329663385,5043,saintmatthieu,2023-09-19T07:03:52Z,addressed - see proposal in more recent commits.,0,0.9854506254196167
1329664152,5043,saintmatthieu,2023-09-19T07:04:40Z,part of the utility functions proposed in recent commits.,0,0.9913380146026611
1329771617,5043,saintmatthieu,2023-09-19T08:36:51Z,"i think that `cliprealstartendtimes` contain the original clip boundaries, and `join` isn't called across any of these. but i'm trying to figure out if this function is needed at all. what it does: takes `newcontents`, a one-clip track with the output of the effect, replaces the content of `oldtrack` in `region = [start, start + len)` with it, preserving existing clip boundaries strictly within `region`, but merging at `start` if it splits a clip underneath, and likewise for `start + len`. this is the intended behaviour for other effects - if merging doesn't mean stretch-rendering, else there is no merging. can you recall why this is a special case ? also, it crashes on `master` for [a link]: not modifying the selected region, apply some eq. `getclipattime` above returns an unchecked nullptr. i haven't got to the bottom of this but if this function isn't needed i may not have to. #5138 doesn't repair it but this branch does somehow.",0,0.9851933121681213
1332881044,5043,Paul-Licameli,2023-09-21T11:03:39Z,"this commit eliminates some duplication. but it doesn't do enough. see this in `effectoutputtracks.cpp`: [code block] this lambda needs to be defined only once, and reusable. in the other two places that use the strings, they repeat part of this lambda, but not the reset of it -- therefore those progress indicators have non-functional cancel buttons! the utility should take a reference to `count` and construct a lambda that captures it. the utility returns a `std::function` and comments that it may throw `userexception`.",0,0.9004966616630554
1332886781,5043,Paul-Licameli,2023-09-21T11:08:58Z,there is a fourth place -- in autoduck. the identical lambda could be eliminated. the utility could construct the progress indicator. do you know c++14 extended lambda capture? it lets a lambda hold a `unique_ptr` which c++11 could not do. [code block] there is need to vary the progress bar message for autoduck but nothing else. so the utility could take that as another parameter.,0,0.9938244819641113
1332900153,5043,Paul-Licameli,2023-09-21T11:21:47Z,"you would need another parameter too, the denominator of the division.",0,0.9909911155700684
1332907224,5043,Paul-Licameli,2023-09-21T11:28:47Z,"okay, this commit totally rewrites the previous. but it does it with a very weird and unnatural inversion of control. what led to this choice? i think it would make more understandable code if instead you had a factory making a function object that you just call to update the user, and you write loops more naturally, just bumping the count captured by reference in the factory. did you not do this just because you could not figure out the lambda capture? abstracting just the test for user cancellation means decisions about how to iterate the range aren't forced -- and you would not need the line above but could iterate with `rbegin` and `rend` as it was. really i don't like this. try it as i suggested.",-1,0.8434972763061523
1332922020,5043,Paul-Licameli,2023-09-21T11:42:49Z,"this commit reuses the utility, for nested loops. maybe i understand better now why that led to the strange inverted flow of control. still i don't like it. the simpler alternative to eliminate repetition would be to write another utility that wraps one progress reporter in another, that takes another denominator and another reference to a count.",-1,0.9625336527824402
1333211418,5043,Paul-Licameli,2023-09-21T15:00:18Z,"this commit is small, but i remember now the doubts i had about it. the changes in generator led me here, and just that led me to separate the destructive effects branch first, and get all of its problems figured out first. my doubt is because is that the boolean `merge` governs more than just the internal splitting of the new pasted clip: see all the rest in `clearandpasteone` under `if (merge && splits.size() > 0)` i was thinking then, and write it down now, that i think the correct fix may require more boolean arguments to control the details more finely.",0,0.8863937258720398
1333221516,5043,Paul-Licameli,2023-09-21T15:06:07Z,"contrast the behavior: - select part of a track, with a stretch. apply an effect. drag the new clip to another track. drag (don't stretch) clip edges. - similar but pasting instead of applying an effect (and there doesn't need to be any stretch). for the effect, the clips containing unchanged data retain hidden clip information. but for paste -- as a consequence of this commit -- they do not. (without this commit, of course there were no new splits at the selection bounds.) which is the correct behavior? i think there should be consistency between these cases. as for the new clip in the middle -- for the effect, it turns out to preserve the rest of the clip, stretched but without the effect applied. (but #5220 will change that behavior for performance reasons). for paste, the middle clip can still carry hidden data from the place from which it was originally cut or copied.",0,0.9869983792304993
1334305998,5043,Paul-Licameli,2023-09-22T12:20:10Z,"the argument `starttime` is now unused, so remove it",0,0.9955891370773315
1334321714,5043,Paul-Licameli,2023-09-22T12:35:18Z,this needs scope only within the `else` block,0,0.9934449195861816
1334325421,5043,Paul-Licameli,2023-09-22T12:38:52Z,one could rewrite this with `std::lower_bound`,0,0.9918497800827026
1335545546,5043,saintmatthieu,2023-09-25T08:17:46Z,"is the following a correct understanding of your proposal? [code block] [code block] if it is, yes, it's more standard and straightforward at first, but as client you still ought not to forget to update your `count`, which i did, scatterbrained me, forget already (but which you spot during review). so i wonder what is better: straightforward but incomplete, or quirky but complete.",0,0.8969992399215698
1335604306,5043,Paul-Licameli,2023-09-25T09:07:58Z,yes like that but  the lambda must capture with = not & or you get a dangling reference!,0,0.9922985434532166
1335661830,5043,saintmatthieu,2023-09-25T09:55:01Z,"great catch, thank you. we could add one more boolean, to control the `split` argument of the internal call to `handleclear`, currently hard-coded to false. this would solve the problem you describe, but would introduce new problems: ""there is not enough room ..."" if the pasted data is larger than `[t0, t1]`, and a unfilled gap if the pasted data is less than `[t0, t1]`. and me believing i was done with it ...",1,0.9943358302116394
1335780924,5043,saintmatthieu,2023-09-25T11:55:53Z,"... which makes me realize that, in `wavetrack::pastewavetrack` and `clearandpasteone`, the `endtime` argument was wrongly passed as `insertduration` argument to `pasteone`. i suppose this wasn't noticed by qa because these two outer methods are called with temporary tracks, all with their first clip at 0.",0,0.9809091091156006
1335798729,5043,saintmatthieu,2023-09-25T12:12:00Z,i find this simpler to understand.,0,0.9548293948173523
1336097248,5043,saintmatthieu,2023-09-25T16:00:21Z,"following-up our discussion, i tried your idea to get inspiration from `std::for_each` - _that_ is the kind of suggestion i was hoping you were going to make from the beginning. works like a charm, see [a link].",1,0.978992760181427
1337008460,5043,Paul-Licameli,2023-09-26T10:41:33Z,just make another deduced template type parameter for the callable. don't implicitly and unnecessarily construct a `std::function` from a lambda. see how `for_each` deduces the callable type. [a link],0,0.9954458475112915
1337009849,5043,Paul-Licameli,2023-09-26T10:42:46Z,"now the utility function is nicer to use, but i feel that basicui.h is the wrong place for it. i'm not sure what is the right place for it.",0,0.7690971493721008
1337014141,5043,Paul-Licameli,2023-09-26T10:46:49Z,"`progressreporter` too can be a deduced type, allowing more generality and avoiding some more `std::function` constructions.",0,0.9909787178039551
1337021340,5043,Paul-Licameli,2023-09-26T10:53:53Z,"""intersected"" typo",0,0.9907859563827515
1337025914,5043,Paul-Licameli,2023-09-26T10:58:10Z,the loops and nested loops surely look much nicer now. i think the function needs a better name than `splitprogress`. perhaps `withredenominatedprogress` and some comments explaining the change of denominator as the size of the given iterator range.,0,0.8862559199333191
1337054677,5043,Paul-Licameli,2023-09-26T11:25:18Z,not just commenting assertions but adding one. so can you prove this new one is satisfied at the point of the call?,0,0.994473397731781
1337638631,5043,saintmatthieu,2023-09-26T18:41:42Z,"i made several attempts at finding a better name, but then came to think that it wasn't such a bad name after all. added a description in 1bc93b7.",0,0.9159199595451355
1337640474,5043,saintmatthieu,2023-09-26T18:43:38Z,but doesn't the user then loose the information that it takes a double and returns a void just by looking at the function's signature?,0,0.9834837317466736
1337641818,5043,saintmatthieu,2023-09-26T18:45:05Z,"provided that the comment i added is correct, yes.",0,0.9934192299842834
1338442899,5043,Paul-Licameli,2023-09-27T11:08:36Z,indentation,0,0.9911677837371826
1338443933,5043,Paul-Licameli,2023-09-27T11:09:42Z,"space after ,",0,0.9888643026351929
1340008513,5043,Paul-Licameli,2023-09-28T11:54:12Z,should you reassign `clipatt0` after `splitat`? to be sure you shift the correct one and make no assumptions about how `splitat` mutates the clips previously present?,0,0.9939711689949036
1340105094,5043,saintmatthieu,2023-09-28T12:54:36Z,"yes, that's a potential crash indeed. will publish a fix ...",0,0.8038052320480347
1347001862,5043,Paul-Licameli,2023-10-05T08:21:03Z,"i see the commit that fixes envelopes. i read through all uses of envelopes in this file, to see if it is complete. do these need any changes? i think not, but let me know the code paths were tested too and recommended to qa. `insertsilence` `appendsilence` `clearandaddcutline` `expandcutline`",0,0.9688227772712708
1347007576,5043,Paul-Licameli,2023-10-05T08:25:03Z,this comment raises a lot of questions about a function used in many places. did you study all those uses?,0,0.9654802680015564
1347012550,5043,Paul-Licameli,2023-10-05T08:28:47Z,"you don't need the comment above. we have done the work to guarantee it now that this is always so: upgrading the opening of old files with misalignment, and changing what happens when mono tracks are joined into stereo.",0,0.9929043650627136
1347017085,5043,Paul-Licameli,2023-10-05T08:32:03Z,that comment line might be kept,0,0.9934921860694885
1347020577,5043,Paul-Licameli,2023-10-05T08:34:45Z,"i see this commit that changes join behavior, and i ask whether it might make unnecessary changes in case clips already have equal stretches.",0,0.9861978888511658
1347037548,5043,Paul-Licameli,2023-10-05T08:47:11Z,"if the function can already return false for failure, and uses of it are checked, maybe there should not be an assertion.",0,0.9813722372055054
1347115648,5043,Paul-Licameli,2023-10-05T09:38:49Z,"i'm confused. `true` not `false` must be passed if the intention is not to change behavior in this path, as the comment suggests. that is, to pass the default for `split` to `pasteone`, which is `true`, but is also the negation of `merge`. places where you can reach this: - repeat effect - paulstretch - cut, copy, split cut by label - track::synclockadjust (but is this in fact unreachable because of overriding functions?) other places, but where i think the destination track is always empty so it does not matter: - stereo to mono - benchmark",-1,0.7853071093559265
1347123797,5043,Paul-Licameli,2023-10-05T09:43:43Z,"reviewing this commit, i looked at all uses of `pasteone`, and there is one call that was not rewritten, because it passes a defaulted value. that is in sync-lock adjustment of a wavetrack to lengthen it with silence. was this case tested? is the desired behavior to insert silence without splits, or with them? is this consistent with other insertions of silence, like the silence audio command?",0,0.9762776494026184
1347132765,5043,Paul-Licameli,2023-10-05T09:49:16Z,the commit that made this change fails to compile because one more use of `split` remains in `wavetrack::pasteone`,0,0.9914571642875671
1347149817,5043,Paul-Licameli,2023-10-05T09:59:31Z,"i see an exact comparison of floating point values, and i want to know whether they were first rounded to a multiple of the same inverted rate. that's not obvious in context here.",0,0.9787078499794006
1347154419,5043,Paul-Licameli,2023-10-05T10:02:20Z,"and: please amend the comment for this commit, with some line breaks",0,0.9943137168884277
1347155278,5043,Paul-Licameli,2023-10-05T10:02:47Z,this repairs the build failure of two commits previous,0,0.9922822117805481
1347159059,5043,Paul-Licameli,2023-10-05T10:05:09Z,"so, behavior may change in the case editing can't move clips, and merge is true. the lines after this small-scope `if` happen when they did not happen before.",0,0.9923330545425415
1347162011,5043,Paul-Licameli,2023-10-05T10:06:50Z,same question here as in the previous commit: should times be rounded before comparison?,0,0.9920088052749634
1347165474,5043,Paul-Licameli,2023-10-05T10:09:13Z,"good catch, now i'm embarrassed i didn't flag this problem in earlier reviews",-1,0.992595374584198
1347177601,5043,Paul-Licameli,2023-10-05T10:15:21Z,"remember, i prefer to keep include directives sorted by the last path component only, because path prefixes will often change (shorten) as we make more libraries. so omit this please.",0,0.9933125376701355
1347216475,5043,Paul-Licameli,2023-10-05T10:43:40Z,ignore what i said about exception safety: this is still right. but i would like to conserve this assertion of the postcondition.,0,0.9889806509017944
1347227511,5043,Paul-Licameli,2023-10-05T10:53:54Z,"yes, this corrects a mistake i introduces at af5911aa2e59f1ebcdc0c4e5e8c8e9581fb49dd5",0,0.9899531006813049
1347264826,5043,saintmatthieu,2023-10-05T11:27:10Z,"not tested but examined: the other places pass unstretched time values to the envelope methods, which looks correct. i added qa test cases nevertheless :thumbs_up:",1,0.9851711392402649
1347265299,5043,saintmatthieu,2023-10-05T11:27:33Z,no i haven't.,0,0.982358992099762
1347267718,5043,saintmatthieu,2023-10-05T11:29:40Z,"that doesn't invalidate this statement that we are assuming equal boundaries, though, does it?",0,0.9730435013771057
1347277062,5043,saintmatthieu,2023-10-05T11:34:58Z,"ah, crap, i forgot that check ... thank you !",-1,0.7166358828544617
1347280362,5043,saintmatthieu,2023-10-05T11:36:28Z,yeah sure.,0,0.9592881202697754
1347291255,5043,Paul-Licameli,2023-10-05T11:44:40Z,"we do assume that, and there will be nothing left todo later",0,0.9716140627861023
1347302944,5043,saintmatthieu,2023-10-05T11:54:19Z,"right, should be `true`. your mention of paulstretch made me uncover another bug, where when applied to a stretched clip results in the not-enough-room error. i'll have a fix commit for that.",0,0.9839857220649719
1347311317,5043,saintmatthieu,2023-10-05T12:01:27Z,"the default value was negated, and so was its usage in `pasteone`, so all good here. the intention was from the very start not to change the behaviour for existing usages, so i haven't reconsidered them.",0,0.9379361271858215
1347325893,5043,saintmatthieu,2023-10-05T12:13:31Z,"you're right, adding some rounding at the beginning of that method.",0,0.988269567489624
1347326823,5043,saintmatthieu,2023-10-05T12:13:55Z,where do you see the need for line breaks?,0,0.9856160879135132
1347334124,5043,saintmatthieu,2023-10-05T12:19:01Z,they probably should. addressing ...,0,0.9800354838371277
1347489450,5043,saintmatthieu,2023-10-05T14:10:43Z,"i remember your objection from a previous pr, but in that case the headers were ordered if one omitted the `../..`. here they were out of order whether accounting for path prefixes or not.",0,0.9883008003234863
1348897726,5043,Paul-Licameli,2023-10-06T15:46:49Z,"why is `preserve` non-default? other effects using a time warper pass the default `true` -- except nyquist, which lets the lisp code choose. and now i also see that noisereduction uses non-default for `merge` and i question that other inconsistency.",0,0.9605540633201599
1348915632,5043,saintmatthieu,2023-10-06T16:02:41Z,"just being extra cautious: the code before didn't preserve splits, and i didn't want to change that behaviour here.",0,0.9565224051475525
1348917117,5043,saintmatthieu,2023-10-06T16:03:49Z,"motivation in noisereduction.cpp would have been the same, i should think.",0,0.9842506647109985
1348922399,5043,Paul-Licameli,2023-10-06T16:07:53Z,must you also copy `mprojecttempo` to be sure `getstrectchratio` returns the same for both clips?,0,0.9945435523986816
1348924445,5043,Paul-Licameli,2023-10-06T16:09:47Z,this part looks good -- but you might even add `+ 1` to this `begin`,0,0.8424098491668701
1348936136,5043,saintmatthieu,2023-10-06T16:20:45Z,"this used to be the case when i put my designer cap on and decided the leftmost ratio were to be applied to the other clips, but that's not true anymore: all clips must be rendered unless there is consensus.",0,0.988906741142273
1348940881,5043,saintmatthieu,2023-10-06T16:24:43Z,"i don't expect there to be a use case for that: an empty clip normally is something freshly created for future insertion into a track, at which stage it gets the project tempo update. but it wouldn't hurt to be extra cautious. will add a to-be-squashed commit for that.",0,0.9578636884689331
1348952204,5043,Paul-Licameli,2023-10-06T16:29:39Z,oh i'm a fool,-1,0.9936588406562805
1255092217,4881,Paul-Licameli,2023-07-07T01:18:36Z,doxygen,0,0.9827454686164856
1255092935,4881,Paul-Licameli,2023-07-07T01:19:42Z,no,0,0.9063705205917358
1255094311,4881,Paul-Licameli,2023-07-07T01:22:04Z,project tempo is not copied. i might understand why but comment that,0,0.9893428087234497
1255094586,4881,Paul-Licameli,2023-07-07T01:22:29Z,here too,0,0.9838451147079468
1255567193,4881,Paul-Licameli,2023-07-07T09:50:22Z,first commit fails to build. waveformview.cpp and samplehandle.cpp.,0,0.910119891166687
1255579024,4881,Paul-Licameli,2023-07-07T09:59:37Z,"`getsequencestartsample` is now used only in `getbestblocksize` and that function exists only to give hints for destructive effects that loop over all samples of a channel, grabbing them in blocks and processing. so that too may disappear, later.",0,0.992732584476471
1255584134,4881,Paul-Licameli,2023-07-07T10:03:43Z,"should all mentions of ""play"" in function names or comments in this header file also change to ""visible"" for consistency?",0,0.9949567914009094
1255589990,4881,Paul-Licameli,2023-07-07T10:08:44Z,the commit that changes this name fails to compile spectrumview.cpp and spectrumcache.cpp,0,0.9843276143074036
1255597405,4881,Paul-Licameli,2023-07-07T10:15:00Z,"the commit for pencil tool does some irrelevant things in spectrum view. i'd like the minimal changes to maintain compilation to go into the previous commit, and all the more substantial changes attempting to correct spectrum view, in the last one.",0,0.8472002744674683
1255598241,4881,Paul-Licameli,2023-07-07T10:15:45Z,... but compilation of spectrum code is still broken in this commit anyway.,-1,0.6059725880622864
1255675636,4881,Paul-Licameli,2023-07-07T11:22:25Z,"samplehandle.cpp is the first part of this pull request that i am studying more deeply. i see how this function, used in hit testing, now changes rate when inside a clip. but there is still a use of `wavetrack::getfloats` in `samplehandle::hittest.` should we eliminate all uses of `getfloats` in here? should hit test fail if the cursor is not inside the x coordinate boundaries of a clip? (or within some pixel width tolerance or the boundaries?)",0,0.9442352056503296
1255677502,4881,Paul-Licameli,2023-07-07T11:24:07Z,"i also see `getenvelopeattime` is used, but that calls `getclipattime`, so if the latter hit-tests correctly for the x coordinate, so does the former.",0,0.9943367838859558
1255681050,4881,Paul-Licameli,2023-07-07T11:27:24Z,"`envelope::getvalue` is also called, passed a sample duration. maybe that use of rate needs to be corrected for the clip, and maybe it is unimportant when getting just one value.",0,0.990120530128479
1255685692,4881,Paul-Licameli,2023-07-07T11:31:45Z,"i'm looking at what did not change in these routines, as well as what did. there are samplecount members of samplehandle.h and the track's longsamplestotime is used to quantize the time value to a discrete sample count, by the wavetrack's rate. i think that should no longer happen -- instead it should always quantize according to a clip's rate and stretch.",0,0.9797506928443909
1255702075,4881,Paul-Licameli,2023-07-07T11:46:09Z,"some edge-case behavior of the paintbrush tool will change. first, maybe two clips are touching, you click just right of the boundary, and where before the left hand clip might be changed too, now it isn't. secondly, this routine has an asymmetry. fetching some initial out-of-bounds zeroes lets it succeed, but you fail instead of fetching right. to be really conservative, getting and setting of samples from neighboring clips, when there are only unit sample rations (because the user doesn't use tempo or time stretch at all), should work. but this is a very edgy edge-case in a little known and used feature.",0,0.8815997242927551
1255715005,4881,Paul-Licameli,2023-07-07T11:58:41Z,"good question, and i should have asked it too about the other use of `envelope::getvalue` in this file. the previous commit ""project tempo changes affect waveclip stretch ratios ..."" updates the times and durations stored directly in the waveclip immediately whenever there is a tempo change. and presumably that will happen too when adjustment of individual clips is implemented. and therefore when you hit-test clips by time, no additional accounting for ratio is needed. but you did not, in that commit, to anything to adjust the envelope values. either you should do that, or else adjust time with ratios here. maybe it's easier to understand to update all times and durations, in envelope as well as waveclip, to complete this. and maybe that would incidentally fix other misbehavior of envelope display that you showed me yesterday?",1,0.6771792769432068
1255724157,4881,Paul-Licameli,2023-07-07T12:07:24Z,"i'm reviewing changes in drag now, paying attention to what did not change as well as what did. i mentioned before the two `samplecount` typed members of samplehandle. they are [code block] and they are used in drag. but they depend on `longsamplestotime` and `timetolongsamples` which should be avoided now. change those two to store pixel x coordinates instead -- that is, `viewinfo::timetoposition` values will quantize the time, suitable for a comparison of click position with drag position.",0,0.9787241220474243
1255727060,4881,Paul-Licameli,2023-07-07T12:09:58Z,"compute a time value at the top of drag, not a samplecount value s0.",0,0.993259847164154
1255730947,4881,Paul-Licameli,2023-07-07T12:13:30Z,"i have no more to say about the sample handle. it was good to review this -- and understand how pixel to time and inverse mappings will work with the new data structures, and to understand what's missing for envelope.",1,0.9646628499031067
1255732539,4881,saintmatthieu,2023-07-07T12:14:52Z,"i haven't felt the need to change these, possibly because these refer to time points, hence stretching makes no difference.",0,0.979596734046936
1255896420,4881,saintmatthieu,2023-07-07T14:17:53Z,this morning i addressed spectrum drawing in a decent way i think. i squashed those changes and force-pushed. these lines are outdated.,0,0.89249587059021
1255942967,4881,saintmatthieu,2023-07-07T14:48:02Z,"nice that you found that `getvalue` use and the potential for confusion the sample-step argument has. afaics in the implementation, step size only becomes relevant for queries of more than one value. this step size defaults to 0. with more time i'd consider removing that optional argument and hard-code it to zero when it calls `getvalues` underneath. but here i'll just use the default value instead of the sample period.",1,0.9497104287147522
1255947453,4881,saintmatthieu,2023-07-07T14:50:51Z,it's preferable ; using `getfloatat` instead. thank you.,1,0.9525301456451416
1255952870,4881,saintmatthieu,2023-07-07T14:54:20Z,"indeed this is the approach taken, in that one-liner commit, calling `menvelope->rescaletimesby(ratiochange)` when project tempo change is reported.",0,0.9917935729026794
1288491442,4881,Paul-Licameli,2023-08-09T13:32:57Z,"reviewing the first commit. rather than removing all bounds checks on t, i think you should just change the initialization of `mrange`. see how there are checks on the neighboring clips, to limit the drag so that clips do not overlap. are you sure that stretching will still also avoid clip overlap? also will it avoid dragging the left end of the clip beyond the right end? (though i suppose negative stretch on a clip could make sense in theory)",0,0.9859057664871216
1288649198,4881,Paul-Licameli,2023-08-09T14:51:54Z,uniform initialization syntax?,0,0.9911407828330994
1288757612,4881,Paul-Licameli,2023-08-09T15:44:01Z,"skipping ahead to one of the easier small commits: persistency looks correct. i might this up while i had an excuse to change it, eliminating the repetition of string literals like ""rawaudiotempo"" and the rest, using named constants. take or leave that suggestion.",0,0.9479312896728516
1288793795,4881,Paul-Licameli,2023-08-09T15:56:19Z,"i would rename it `remapcutlines` and only do the `shiftby`, which later determines the point to paste at, when the cutline is later expanded. only then, do the `stretchrightto` part. this delays not only the expense of stretch calculation until it is really needed, but would also avoid compounding of data losses in case stretching happens more than once before cutline expansion. `waveclip::expandcutline` is already defined in terms of `waveclip::paste`, so maybe whatever you do to change paste will also cover cutline expansion -- except that, perhaps the new clip boundaries should not be made for cutline expansion.",0,0.9899112582206726
1288923727,4881,Paul-Licameli,2023-08-09T17:08:23Z,"you mean ""stretches"" not ""sets""",0,0.9876305460929871
1288930148,4881,Paul-Licameli,2023-08-09T17:14:31Z,"you add this comment, only to remove it in a later commit. maybe amend this commit instead.",0,0.9936687350273132
1288971606,4881,Paul-Licameli,2023-08-09T17:48:36Z,"i think the comments don't match the function names and are confusing. ""stretchleftto"" is really stretching the left bound while fixing the right bound. the clip is stretched ""from"" the invariant right visible bound ""to"" a new left bound. or say ""stretches the left from its present position to the absolute time"" it would also be good to comment that nothing happens if `to` is right of the present right bound. mutatis mutandis for the other function.",0,0.7296861410140991
1289807213,4881,Paul-Licameli,2023-08-10T09:06:07Z,"reviewing the fifth commit. if i read the function above in isolation, i see there might be a crash if when `oldtempo.has_value()` but `mprojectratio` does not. i had to reread other code outside of waveclip to convince myself the crash won't happen (`wavetrack::insertclip`). i would prefer you just crash-proof the function by changing the numerator to `mprojecttempo.value_or(*oldtempo)`",0,0.9787213802337646
1289811957,4881,Paul-Licameli,2023-08-10T09:09:53Z,"then, more than that: i think you are making an assumption that `mprojecttempo` is a cache of the previously seen `newtempo` value, which is expected to be the same as `oldtempo`. the cache is needed for `getstretchratio`. so you can use an assertion to document this assumption. it won't crash release code if violated, but violations might mean something plays at wrong tempo. so, a precondition: `assert(!(mprojecttempo.has_value() && oldtempo.has_value()) || *mprojecttempo == *oldtempo);` re-stated maybe informally in the header file: "" first ever invocation on this object, or else `oldtempo` equals the last seen `newtempo`""",0,0.9860270023345947
1289816243,4881,Paul-Licameli,2023-08-10T09:13:33Z,"i see this change, and the first thing i think is, was similar stretching of `getvisiblesamplecount` also done where needed at every other call of that function or use of its underlying member variables? i don't know the answer just now. it's not so quick to determine that. code review often means examining what did not change, not only what did change.",0,0.9736968874931335
1289818359,4881,Paul-Licameli,2023-08-10T09:15:18Z,"i read this, and i want to change the function name to `durationtosamples`. if this change is correct, that better describes the meaning of the return value. as with the distinction of durations from time points (as types!) in std::chrono.",0,0.9904809594154358
1289818870,4881,Paul-Licameli,2023-08-10T09:15:43Z,and then i would reexamine every use of the function to be sure they are correct.,0,0.9925246834754944
1289821070,4881,Paul-Licameli,2023-08-10T09:17:39Z,this too might change its name,0,0.9906249642372131
1289830556,4881,Paul-Licameli,2023-08-10T09:24:39Z,"this function could be private, and instead `getplaystarttime` and `getplayendtime` can be commented, that the return values are always multiple of the inverse of the track's stored rate, but that rate is independent of tempo changes or stretch.",0,0.9931150078773499
1289838970,4881,Paul-Licameli,2023-08-10T09:30:54Z,this function is not yet used at the commit i am reviewing. can it be made private?,0,0.9955629110336304
1289842871,4881,Paul-Licameli,2023-08-10T09:34:12Z,"what this function really does, is get the play end time, which is on the realtime time-line, but then subtract one sample duration, but that duration is on the different scale of the track's internal rate unadjusted for stretch. am i mistaken or is the purpose confused?",0,0.9628812670707703
1289846959,4881,Paul-Licameli,2023-08-10T09:37:12Z,the correction by `getappendbufferlen` was removed. was that your omission or an intended bug fix?,0,0.9947991371154785
1289859277,4881,Paul-Licameli,2023-08-10T09:44:27Z,"you are changing edge case behavior! i don't know what subtle off-by-one errors may result, or may be corrected. i looked back in history and found this comment added at commit e5dc8928dcc3a26bbd878d85682e9dbc1fd6f492 which references [a link] [code block] this commit changed < to <= for the test at the right boundary. i suggest you go to the bugzilla page, and do the steps to reproduce, to be sure there is no regression.",-1,0.8729722499847412
1289860629,4881,Paul-Licameli,2023-08-10T09:45:17Z,"see also later commits 1cc2f3b6fe250c71fc919b5738e726f360d1758d, a58328c3df0e9ace0362c28e93f449dba3322ee0, to understand the ancestry of this function.",0,0.9936475157737732
1289867121,4881,Paul-Licameli,2023-08-10T09:50:24Z,"please comment these new data members and also the old ones. the invariant assumed for `msequenceoffset`, `mtrimleft`, `mtrimright` are that they are always realtime durations. but the sample interval `1 / mrate` is not necessarily realtime duration. `mclipstretchratio` is used in `getstretchratio` which computes the factor, by which the sample interval is multiplied, to get a realtime duration.",0,0.991675615310669
1289869862,4881,Paul-Licameli,2023-08-10T09:52:34Z,should instead `getstretchratio() / mrate` be the subtracted term?,0,0.9943793416023254
1289874104,4881,Paul-Licameli,2023-08-10T09:56:07Z,"also: at commit 1cc2f3b6fe250c71fc919b5738e726f360d1758d, vitaly changed some member function names but neglected to update the comment. i would not only fix this, but improve the statement: `beforeplayregion, afterplayregion, and withinplayregion are mutually exclusive and exhaustive.` and now i must prove to myself that this remains true. and that was easily done with inspection.",0,0.951833963394165
1289877734,4881,Paul-Licameli,2023-08-10T09:59:11Z,what you assert at the top of this and the following new functions should be mentioned in the header file comments as ``,0,0.9953108429908752
1289922506,4881,Paul-Licameli,2023-08-10T10:30:15Z,"this function is true in case the play region is a proper subset of [t0, t1)",0,0.9945542812347412
1289951582,4881,Paul-Licameli,2023-08-10T10:57:56Z,maybe `intersectsplayregion` -- this is the non-disjointness test,0,0.9937196969985962
1289953251,4881,Paul-Licameli,2023-08-10T10:59:31Z,maybe it is correctly used but maybe the name misleads.,0,0.9522042274475098
1289955042,4881,Paul-Licameli,2023-08-10T11:01:17Z,"this one is the test for what you might describe as ""properly partial overlap"" excluding the case that either interval is a subset of the other",0,0.9921780228614807
1289955952,4881,Paul-Licameli,2023-08-10T11:02:12Z,"or simply ""includesplayregion""?",0,0.9945728182792664
1289959253,4881,Paul-Licameli,2023-08-10T11:05:32Z,"that name is unsatisfactory -- rather ""playregionwithin"" ? its the interval that extends the play region, not the opposite. when i read a member function name, i think of `this` as the subject of whatever verb is in it. all right, some better naming is needed for this set of functions, and i haven't necessarily given the best names yet.",0,0.7965654134750366
1289972224,4881,Paul-Licameli,2023-08-10T11:19:00Z,this change is not equivalent to the original. do you mean `extendsplayregiononbothsides`,0,0.9937241673469543
1289984388,4881,Paul-Licameli,2023-08-10T11:31:08Z,"maybe you did this at a later commit -- but while i review ""make waveform display work again"", i see that the `0.5` should be changed to `true`",0,0.9902426600456238
1289992943,4881,Paul-Licameli,2023-08-10T11:39:26Z,"the variable name might be updated. `sppmatch` perhaps. and update ""pps"" in the comment.",0,0.9942540526390076
1290005838,4881,Paul-Licameli,2023-08-10T11:49:36Z,"i assume you change this line in a later commit, but why not make it right in this commit?",0,0.9869621992111206
1290029961,4881,Paul-Licameli,2023-08-10T12:11:33Z,i have a doubt about the correctness. where did the `averagepixelspersample` value come from? i found it in the function `calculateadjustmentforzoomlevel`. that function uses clip rate but not stretch ratio. so i think it computes an incorrect pixels per sample value. i'm not sure what consequences follow.,-1,0.769812285900116
1290034967,4881,Paul-Licameli,2023-08-10T12:15:43Z,"i think the fix for that may just be to initialize `clipparameters::rate` accounting for ratio, and also remove `stretchratio` in `drawclipwaveform` and maybe i haven't seen that yet in a later commit where you did it?",0,0.9907351732254028
1290049746,4881,Paul-Licameli,2023-08-10T12:27:53Z,"i reexamined just what is done with `clipparameters::rate` and i see that for spectrograms, sometimes the rate is used for calculations relating to the y coordinate on the frequency scale -- and those should still use the unadjusted clip rate, but other calculations that convert sample counts to time points should be updated. so i anticipate seeing this as i review later commits.",0,0.9871276617050171
1290055171,4881,Paul-Licameli,2023-08-10T12:32:36Z,"it's good to see these comments. strictly they should be added in the commit ""project tempo changes affect waveclip stretch ratios""",1,0.9298979043960571
1290072883,4881,Paul-Licameli,2023-08-10T12:47:07Z,"i am skipping review of the pencil tool for now to work on the commit for spectrum view. i think this commit and the one for waveform view should be combined into one -- the commit for waveform that i reviewed is not really complete without some of these changes. as i anticipated, you needed to change `clipparameters` to remember the sample rate and the stretch, from which a correct sample rate can be computed. however -- were all the necessary changes made in all places where the old code used rate? i doubt it, and will give details.",0,0.9596143364906311
1290076227,4881,Paul-Licameli,2023-08-10T12:49:44Z,it's good to see `const` members replacing assignments within the constructor body. that aids understanding of the rest of the class and its uses. maybe you can do the same for more of the member variables.,0,0.7261934876441956
1290434250,4881,Paul-Licameli,2023-08-10T17:04:26Z,"i would prefer that you don't permute these lines. leave them alphabetical by the last path component. as more files move to libraries, and the `#include` lines change, there is just removal of `../` and can make a smaller diff.",0,0.9905281066894531
1290443728,4881,Paul-Licameli,2023-08-10T17:12:51Z,"these lines change the resulting time selection, but i don't understand why.",0,0.9132850170135498
1290455407,4881,Paul-Licameli,2023-08-10T17:23:08Z,"i think this omission should have been detected sooner, when testing #4867 or #4870. i think it will affect copy/paste and undo/redo for all track types. i will add to the qa checklist.",0,0.9749417901039124
1290877515,4881,saintmatthieu,2023-08-11T04:17:46Z,"indeed that's a better approach. no, stretching could have led to overlapping clips. i pushed a fix commit on top of this branch.",0,0.9903466105461121
1291195130,4881,Paul-Licameli,2023-08-11T10:49:33Z,i think this line is unnecessary because `track::init` was called in `emptycopy` and that copied the tempo.,0,0.9800401926040649
1291210799,4881,Paul-Licameli,2023-08-11T11:07:13Z,"but -- the comments are contradicted now by the changes in ""repair wavetrack copy/paste/join"" so what's right? did you try the cross-project case of copy/paste? did you copy copying to clipboard, closing source project, then pasting?",0,0.9896607398986816
1291214374,4881,Paul-Licameli,2023-08-11T11:11:11Z,some objections i raised in earlier commits are resolved here. it is easily seen that none of the optionals are dereferenced without checking first.,0,0.9907354712486267
1291220522,4881,Paul-Licameli,2023-08-11T11:18:21Z,good to see these `settrim*` calls for completeness. did you see any bad consequences when they were omitted?,1,0.8734661936759949
1291224769,4881,Paul-Licameli,2023-08-11T11:23:21Z,"you apply stretch ratio after any needed resampling or change of format. resampling to a lesser rate might be theoretically lossless for a band-limited signal, but maybe not practically. change of format to a lesser bit width mixes in some dither noise. maybe it's better to stretch first and make those other transformations after, for better quality?",0,0.9855719804763794
1291227416,4881,Paul-Licameli,2023-08-11T11:26:22Z,i would add `assert(getstretchratio() == 1);` which is the postcondition,0,0.9945095181465149
1291229599,4881,Paul-Licameli,2023-08-11T11:28:53Z,"you make side-effects on the waveclip object here, but before all operations have succeeded, and some might fail throwing exceptions because we run out of drive space for the database. i would rather bullet-proof this. add `bool success = false;` and assign it true only at the bottom of the function. test `success` in the `finally` and if it is false, restore trim-left and trim-right to their old values.",0,0.9861124157905579
1291234679,4881,Paul-Licameli,2023-08-11T11:34:44Z,maybe too small. did you see if it helps performance of clip joining to go larger?,0,0.9625900983810425
1291237505,4881,Paul-Licameli,2023-08-11T11:38:03Z,"`flush` might fail and throw. so instead, swap `newsequences` into place. in the `finally`, if there is not success, then swap again.",0,0.9831218123435974
1291239332,4881,Paul-Licameli,2023-08-11T11:40:08Z,`numprocessedsamples` never varies. should you remove it and use `numoutsamples`?,0,0.993657648563385
1291239911,4881,Paul-Licameli,2023-08-11T11:40:50Z,this function follows a comment that used to be attached to the following function.,0,0.9945144653320312
1291245486,4881,Paul-Licameli,2023-08-11T11:47:32Z,some of my earlier comments are irrelevant now after these changes in the interval test functions,0,0.975543200969696
1293207703,4881,saintmatthieu,2023-08-14T09:13:12Z,"nice that you spot this, it's outdated. i later realized there were places where a track was copied for the clipboard, but before it was re-contextualized by being added to a project, boundary-related queries were made onto its clips. hence the change of strategy: clip and track copies inherit the context from `orig`, and the pasting code is repsonsible for re-contextualization. will remove.",1,0.9721245765686035
1293215009,4881,saintmatthieu,2023-08-14T09:20:30Z,"perfect, thanks for doing my job.",1,0.989628791809082
1293221039,4881,saintmatthieu,2023-08-14T09:25:32Z,"... although, it can be that a clip (and its track) is copied from one project to another, in which case cached project tempo and `oldtempo` may differ.",0,0.9897213578224182
1293226595,4881,saintmatthieu,2023-08-14T09:30:32Z,"as we agreed verbally last thursday, i will leave it as is, since `stretchrightto` does not apply time-stretching, but only modifies the `double mclipstretchratio` value.",0,0.9943153262138367
1293232028,4881,saintmatthieu,2023-08-14T09:34:58Z,"yes. can't remember exactly what, probably overlapping clips.",0,0.918788731098175
1293258140,4881,saintmatthieu,2023-08-14T09:59:12Z,"thanks for that remark. resampling: computational cost: the fastest would be to time-stretch before in case of upsampling, and after in case of downsampling. quality: i do not know the algorithm sufficiently to say what influence the order has. i would have guessed that it can only be better with more frequency information, hence in case of downsampling i'd have first stretched and then downsampled. david hearn doesn't believe this to have a noticeable consequence. sample-format: computational cost: i suppose calculations are faster on lower precision samples, but i'm largely ignorant on the matter - that'd be a question to . quality: i don't expect a perceivable difference here. if someone is of another opinion i'd consider testing. the only obvious impact i see is wrt performance when resampling. i'll push something that handles this.",1,0.9691495895385742
1293259727,4881,saintmatthieu,2023-08-14T09:59:36Z,"thanks for that remark. resampling: computational cost: the fastest would be to time-stretch before in case of upsampling, and after in case of downsampling. quality: i do not know the algorithm sufficiently to say what influence the order has. i would have guessed that it can only be better with more frequency information, hence in case of downsampling i'd have first stretched and then downsampled. david hearn doesn't believe this to have a noticeable consequence. sample-format: computational cost: i suppose calculations are faster on lower precision samples, but i'm largely ignorant on the matter - that'd be a question to . quality: i don't expect a perceivable difference here. if someone is of another opinion i'd consider testing. the only obvious impact i see is wrt performance when resampling. i'll push something that handles this.",1,0.9691495895385742
1293261630,4881,saintmatthieu,2023-08-14T10:00:50Z,"thanks for that remark. resampling: computational cost: the fastest would be to time-stretch before in case of upsampling, and after in case of downsampling. quality: i do not know the algorithm sufficiently to say what influence the order has. i would have guessed that it can only be better with more frequency information, hence in case of downsampling i'd have first stretched and then downsampled. david hearn doesn't believe this to have a noticeable consequence. sample-format: computational cost: i suppose calculations are faster on lower precision samples, but i'm largely ignorant on the matter - that'd be a question to . quality: i don't expect a perceivable difference here. if someone is of another opinion i'd consider testing. the only obvious impact i see is wrt performance when resampling. i'll push something that handles this.",1,0.9691495895385742
1293263289,4881,saintmatthieu,2023-08-14T10:02:31Z,sure.,0,0.9824982285499573
1293270591,4881,saintmatthieu,2023-08-14T10:09:33Z,"ah, this one is confusing. it's not related to analysis/synthesis size. the result will be bit-exact independently on it. it's just to limit the amount of memory in our buffer. would `buffersize` be better?",-1,0.7990319132804871
1293274081,4881,saintmatthieu,2023-08-14T10:13:30Z,"oj - thanks. this was a bug, likely appending unwanted silence samples.",1,0.8790625929832458
1293294690,4881,saintmatthieu,2023-08-14T10:33:11Z,"to restore the original sequences i'd have the `flush` in a try-catch, so that i can detect if it's failed. but it seems to me that you're suggestion something different? also, there's another such a `flush` call that's not handled (i copy-pasted from it) ; is the situation there different?",0,0.9922754168510437
1293305548,4881,saintmatthieu,2023-08-14T10:44:14Z,i'm afraid i don't understand.,-1,0.9914025664329529
1293314106,4881,saintmatthieu,2023-08-14T10:54:05Z,"i often thought that having a type-safe differentiation between absolute and clip-relative times would spare us a few bugs and a little mental strain. i find the analogy between `std::chrono` time point and duration interesting, but i can't see how it fits here. what makes you say that `time` is a duration? `timetosamples` could very well be used to get the sample index closest to the time point `time`.",0,0.9388401508331299
1293396349,4881,saintmatthieu,2023-08-14T12:29:24Z,"i only remember i had a reason at the time, i'm sorry i should have written this down. now it seems wrong to me the way it is, and is inconsistent with `getplayendsample()`. in any case, i really would like to clarify the meaning of the append buffer length. i guess this append buffer is here for optimization, to reduce calls to sql. if that's right, shouldn't these not-yet-committed samples _always_ be reported? `getnumsamples()` doesn't account for it, and is used in several places where i don't see why it shouldn't (e.g., in `timetosequencesamples`, non-committed samples are not accounted for).",-1,0.9832210540771484
1293473093,4881,saintmatthieu,2023-08-14T13:39:18Z,"good suggestion. i did and the behavior is correct. you will see in `b742621` that i augmented the collection of `waveclip` methods for those kind of comparison, in an effort to make clip boundary checks in `wavetrack` easier to understand. these new methods (and renamed existing methods) have a consistent documentation and the comment you mention is probably not needed anymore.",1,0.9718595743179321
1293473853,4881,saintmatthieu,2023-08-14T13:39:56Z,thanks - the comment is obsolete now.,0,0.742604672908783
1293475637,4881,saintmatthieu,2023-08-14T13:41:28Z,i added those `` later and squashed them in the relevant commit.,0,0.9931747317314148
1293483965,4881,saintmatthieu,2023-08-14T13:48:28Z,"are you sure? for a clip with boundaries `[0, 1)`, `partlywithinplayregion(0.2, 0.3)` would return false, wouldn't it?",0,0.9936819076538086
1293487839,4881,saintmatthieu,2023-08-14T13:51:49Z,"perfect. if it returns `false`, then the intersection of clip boundaries and `[t0, t1)` is empty.",0,0.9895687699317932
1293500542,4881,saintmatthieu,2023-08-14T14:01:10Z,"indeed those are poor. thanks for the suggestion, will address.",1,0.6453322172164917
1293510007,4881,saintmatthieu,2023-08-14T14:06:27Z,"i had a need for it some place in `wavetrack`, probably, then not anymore, i suppose since i added the new boundary-check methods. will remove. sorry for having wasted your time.",-1,0.9934242963790894
1293516876,4881,saintmatthieu,2023-08-14T14:09:45Z,all good suggestions.,1,0.9443358182907104
1293534592,4881,saintmatthieu,2023-08-14T14:22:28Z,sure.,0,0.9824982285499573
1293558819,4881,saintmatthieu,2023-08-14T14:39:38Z,"in other words you are requesting a strong guarantee for this method? i would agree. coincidentally, not restoring the original trim values is a mistake, even in the case of successful stretching. there's a fix-up commit that does this. i don't see another state-changing method whose side-effect i should revert in case of failure. it would be useful to have a helper for this safety, like `effectoutputtracks` making a copy of the track and only replacing the original with it if successful.",0,0.9839527010917664
1293572896,4881,saintmatthieu,2023-08-14T14:46:28Z,it's for copy-pasting across project with different tempi. a selection of 10 seconds of audio in project a should become 5 seconds in project b if tempo in b is twice as fast.,0,0.9918067455291748
1293573391,4881,saintmatthieu,2023-08-14T14:46:43Z,will comment.,0,0.9752042889595032
1293577117,4881,saintmatthieu,2023-08-14T14:49:36Z,"i did just that, but your review would of course be welcome.",0,0.890338122844696
1293589025,4881,saintmatthieu,2023-08-14T14:58:32Z,that was wrong indeed. `coversentireplayregion` is what's in use now.,0,0.9268853664398193
1294348826,4881,saintmatthieu,2023-08-15T08:56:49Z,i did.,0,0.9033631682395935
1294363185,4881,saintmatthieu,2023-08-15T09:13:45Z,"interesting to observe is that `beforeplayregion(double t)` and other methods taking a time point, this ambiguity doesn't seem to arise. i guess `extendsplayregiononbothsides` has this problem because `t0` and `t1` may be interpreted as a play region. renaming `extendsplayregiononbothsides` to `playregionisextendedonbothsidesby(t0, t1)` would require also renaming `beforeplayregion` and the likes to `playregionisafter` ; do we really want this? i think getting used to `extendsplayregiononbothsides` is easy.",0,0.9707819223403931
1294446369,4881,Paul-Licameli,2023-08-15T10:50:54Z,"this is an error in conflict resolution! shift the clips of each channel, not only those of `this` `wavetrack`.",-1,0.861480176448822
1294466839,4881,Paul-Licameli,2023-08-15T11:18:50Z,"this isn't right, and not what i suggested. this block is visited on function exit, whether normal or exceptional. what i suggested is: 1. at top of the function, `bool success = false;` 2. at the very bottom of the ""happy path"", after all possibly throwing calls have not thrown, assign `success = true;` 3. in this finally block, reassign the old trim left and trim right values, only if `!success` 4. also do the swapping, not assignment, of `msequences`. one swap below before the `flush`, and another conditional swap here if not successful. so, this also requires `newsequences` is declared before the `finally`.",0,0.5499625205993652
1294469612,4881,Paul-Licameli,2023-08-15T11:22:43Z,"we both forgot something about cutlines last week: they too can have envelopes and paste envelope points into the clip when they are expanded. did you test this possibility? just as, one of these commits is a one-line fix to rescale envelopes of the main clip -- so too here, i think you must remap any envelope points in the cutline.",0,0.9909104704856873
1294513487,4881,Paul-Licameli,2023-08-15T12:08:50Z,"is the clip stretching handle completely correct, or must you also restore the `std::clamp`? what happens below if snapping is disabled? i don't see where `t` is limited by `mrange` on that path.",0,0.9925448298454285
1294530613,4881,Paul-Licameli,2023-08-15T12:29:03Z,"generally we prefer american spellings, ""neighbor""",0,0.9901944994926453
1294531730,4881,Paul-Licameli,2023-08-15T12:30:19Z,i would simply write `as_const(*this)` `std::as_const` is new in c++17 and you can leave off `std::` because `wavetrack` inherits `std::enable_shared_from_this`,0,0.9943344593048096
1294561771,4881,Paul-Licameli,2023-08-15T12:58:09Z,maybe make that `>=`,0,0.9832707047462463
1294594545,4881,saintmatthieu,2023-08-15T13:25:24Z,cool!,1,0.993294894695282
1294595756,4881,saintmatthieu,2023-08-15T13:26:32Z,"me too, since audacity is originally american. that one slipped. thanks.",1,0.9687409400939941
1294599413,4881,saintmatthieu,2023-08-15T13:29:55Z,thank you: that's a change i forgot to revert.,1,0.8834279775619507
1294601556,4881,saintmatthieu,2023-08-15T13:31:58Z,"i coincidentally thought about this earlier today and already pushed a fix. spot on, though.",0,0.9816024899482727
1294613583,4881,saintmatthieu,2023-08-15T13:42:01Z,"that's the piece i was missing, thank you. regarding the trimming, i attempted to explain in my earlier reply that it is correct to restore the original trim values, whether success or not. rendering stretching should not modify a clip's boundaries, trimming included. i'll add a comment.",1,0.9372698068618774
1294617389,4881,saintmatthieu,2023-08-15T13:44:51Z,oj ... :1st_place_medal:,1,0.9736421704292297
1294622219,4881,saintmatthieu,2023-08-15T13:48:39Z,"... in fact i'm renaming this ""getnextclip"". ""neighbor"" could be confused with ""adjacent"".",0,0.9834244847297668
1294636793,4881,Paul-Licameli,2023-08-15T14:00:49Z,this loop repeatedly sorts the clips by time in `getneighbourclip`. avoid that by using `getsortedcliparray` once at this level.,0,0.9896897077560425
1294639886,4881,Paul-Licameli,2023-08-15T14:03:37Z,the default can simply be '{}' provided then that you null-check it where you use it,0,0.9951481223106384
1294641488,4881,Paul-Licameli,2023-08-15T14:05:13Z,here too; and i would also make a `using` type alias for the repeated type.,0,0.9943116903305054
1294649150,4881,Paul-Licameli,2023-08-15T14:10:52Z,and for `std::pair ` which gets repeated a lot in the overrides. nicer to name it with a single word like `unstretchinterval`,0,0.9900051951408386
1294651298,4881,Paul-Licameli,2023-08-15T14:12:41Z,simplify the default here too,0,0.9948923587799072
1294659894,4881,Paul-Licameli,2023-08-15T14:18:08Z,maybe `std::lower_bound` instead of `find_if` for logarithmic not linear complexity in the number of clips. after all we are encouraging the making of many little clips. at least that's what i saw in the demo of the prototype.,0,0.9859707951545715
1294662613,4881,Paul-Licameli,2023-08-15T14:20:26Z,null check on `reportprogress` here,0,0.9941892623901367
1294665108,4881,Paul-Licameli,2023-08-15T14:22:37Z,just pass '{}',0,0.994398295879364
1294666683,4881,Paul-Licameli,2023-08-15T14:24:02Z,null check on `reportprogress`,0,0.9943519830703735
1294670159,4881,Paul-Licameli,2023-08-15T14:27:11Z,"any `xo` that you add, ask if he likes the exact words.",0,0.9820642471313477
1294670340,4881,Paul-Licameli,2023-08-15T14:27:20Z,here too,0,0.9838451147079468
1294670490,4881,Paul-Licameli,2023-08-15T14:27:28Z,here too,0,0.9838451147079468
1294670985,4881,Paul-Licameli,2023-08-15T14:27:55Z,you didn't use `count`,0,0.9905260801315308
916481945,3176,Paul-Licameli,2022-07-08T05:45:55Z,"this commit is ok except i think this comment should be clearer. what is valid? say maybe instead, mptrack points to the removed track, if some other shared pointer is preventing its deletion",0,0.9644373059272766
916602347,3176,crsib,2022-07-08T08:47:22Z,"hmm, i'm trying to say that track pointer is valid during the event in any case",0,0.9790701866149902
927519791,3176,Paul-Licameli,2022-07-22T10:29:10Z,"i don't understand why noisereduction required special treatment. can you explain? this new function needs to be called only from realtimeeffectstateui, and noise reduction is not one of the realtime capable effects, so i don't understand how you can ever reach this override.",0,0.8863512277603149
927538618,3176,crsib,2022-07-22T10:55:46Z,"as you know, i do not trust in ""something is not called now"" :-) the reason `geteffectuiclientinterface` is there for symmetry. i had some reasoning why this was not done for `nyquisteffect`, but i don't remember it.",1,0.9842627048492432
929698270,3176,Paul-Licameli,2022-07-26T08:50:21Z,"maybe the commit that does this should logically be last in the sequence, because all else is in place not to cause bugs in non-modality only then",0,0.9641481041908264
929701820,3176,crsib,2022-07-26T08:53:47Z,agreed!,1,0.5302326083183289
929703752,3176,Paul-Licameli,2022-07-26T08:55:35Z,"this member should move earlier in the header file, before `mmainsettings` (and the initializers ordered appropriately) just so that the `` section comments are correct.",0,0.9952008724212646
929710046,3176,Paul-Licameli,2022-07-26T09:01:30Z,"realtimeeffectstate has a `site` which has this thing in a slot which has a `shared_ptr` to the good stuff. i might have arranged it differently: realtimeeffectstate has a `shared_ptr` to a sharedstate structure that it declares, as a `site`; then this would be a simple attachment and would not need to be cloneable. either would work. what other attchments to states might be needed in future? i don't know yet. the latter way of doing it would make it impossible for them to be un-shared.",0,0.9817264676094055
929713360,3176,Paul-Licameli,2022-07-26T09:04:48Z,"at first i feared a leaky `shared_ptr` cycle but then i saw `mcurrentstate` is a `weak_ptr`. good, so use `weak_from_this()` instead to make that more obvious.",0,0.8156229853630066
929725117,3176,Paul-Licameli,2022-07-26T09:15:56Z,should there be a null check on `currentstate`?,0,0.9930660724639893
929726910,3176,Paul-Licameli,2022-07-26T09:17:42Z,"""its""",0,0.9842362403869629
929728669,3176,Paul-Licameli,2022-07-26T09:19:15Z,its,0,0.6934903860092163
929731588,3176,Paul-Licameli,2022-07-26T09:22:08Z,or just `assert(false)`,0,0.9938057661056519
929738833,3176,crsib,2022-07-26T09:29:14Z,"ironically, there was assert(false), but at some point i have decided to make it more explicit",0,0.9630789160728455
929749332,3176,Paul-Licameli,2022-07-26T09:39:38Z,"the `shared_ptr` is only lazily initialized. i think this means that different versions of the state in the undo history my or may not shared state. would that have bad consequences? - make a new state - do some other edit - click the cogwheel then the current track list points to the shared state but the pushed undo state does not. does this mean i could undo, click the wheel again, and have two non-modal dialogs open at once? or is there something i haven't seen yet that destroys the dialog whenever you undo and redo? (but then why have this shared state)? but swap the last two steps, and then there is sharing. if i am right that there could be a bug, then the shared_ptr should instead be assigned eagerly whenever a new state is made, then always copied. so either rearrange the storage as i suggested, or used `buildall` in the constructor of `realtimeeffectstate` and have `realtimeeffectstateui` alway make the shared state.",0,0.9699375629425049
929755881,3176,Paul-Licameli,2022-07-26T09:45:58Z,"the deleted code for a modal dialog restored state as it was in case the dialog is cancelled or the esc key is hit, and it pushes an undo history item for change of state if the dialog is ok'd. i don't see where this commit preserves that behavior by other means.",0,0.9929046034812927
929762349,3176,Paul-Licameli,2022-07-26T09:52:31Z,"replacing a weak pointer with a reference might look unsafe, but i think it is a safe enough assumption that this window will be destroyed only before the associated project.",0,0.9814956784248352
929772087,3176,crsib,2022-07-26T10:02:43Z,"as it was mentioned in pr description - the undo/redo is intentionally left unimplemented for the effect parameters. and for the reference - there are several daws that do not implement it all as well and at least for ableton there were problems observed with the implementation (i. e. undo restored the parameter value to some unexpected state). if and when we decide to implement the undo/redo for stacked effect parameters - we will have to create an item for each parameter user changes (see ableton as the reference). the potential problem i expect now is that audacity project won't get ""dirty"" on parameter change, but i would rather fix it in a different pr.",0,0.9741722345352173
929772367,3176,Paul-Licameli,2022-07-26T10:02:59Z,"when the user deletes an effect from the stack, hide the dialog. when the user replaces one effect with another in the stack, that too should hide the dialog. but i don't see a corresponding change in `oneffectlistitemchange`. that is the function reached through an observer callback.",0,0.9916383624076843
929773833,3176,crsib,2022-07-26T10:04:38Z,"thank you for pointing this out, i will check.",1,0.9591843485832214
929774489,3176,Paul-Licameli,2022-07-26T10:05:21Z,"does this line properly belong to the earlier commit ""adds a class to manage stacked effects settings ui"" ?",0,0.9947242140769958
929778856,3176,crsib,2022-07-26T10:10:08Z,i would say no,0,0.8280943036079407
929779427,3176,crsib,2022-07-26T10:10:44Z,will fix,0,0.9934358596801758
929779805,3176,crsib,2022-07-26T10:11:04Z,realtimeeffectpanel is a child of projectwindow,0,0.9925432205200195
929780772,3176,Paul-Licameli,2022-07-26T10:12:08Z,"why is this not done in case of replacements (as indicated by evt.mextra)? i think i do understand that this can happen if you do a destructive effect application via other ui, or you finish recording, if i look for uses of `tracklist::replace`. the commit comment gave some explanation, and this code should too. but then in the case of replacement, shouldn't there be another branch to call `updaterealtimeeffectuidata`? the track object is replaced with another one which is now the current state of the track in the project.",0,0.9855141639709473
929783149,3176,Paul-Licameli,2022-07-26T10:14:33Z,"aha, here it is then. you are relying on the deletion and addition events both arriving, which is part of the contract in track.h. and you don't rely on the sequence of their arrival.",1,0.5008665323257446
929790241,3176,Paul-Licameli,2022-07-26T10:21:36Z,"was it agreed then with designers that the formerly specified undo/redo behavior is now abandoned? do we open another issue for the future effort to figure out the problem? if there will not be undo/redo states for the ok button, still i think something could be done: the ok button should call `modifystate` -- what also happens for the power button changes. then the change of settings becomes, not another state, but fused with whatever is the latest undo state. this is similar to what is done when you simply change the selection, and makes for argubly less surprising behavior, if after ok-ing the dialog, you undo and redo again, expecting the settings to be unchanged. besides all that, there is also the reasonable expectation that if you cancel the dialog, tentative changes of settings should be cancelled and old state restored. but nothing does that now.",0,0.9773138165473938
929790387,3176,Paul-Licameli,2022-07-26T10:21:47Z,right,0,0.9678029417991638
929790788,3176,Paul-Licameli,2022-07-26T10:22:13Z,not sure i understood why.,0,0.5378299951553345
929795060,3176,crsib,2022-07-26T10:26:36Z,i've talked with on that. can i see the previous specification please? afaik the dialog specified has no ok/cancel buttons whatsoever. there will be no ok button,0,0.9906396865844727
929799884,3176,crsib,2022-07-26T10:32:08Z,please see #3090 for the design. stackable effects are really different from what happens on destructive path so there are different assumptions about the behavior. unfortunately we have a chicken-egg problem here: we cannot reasonably implement #3090 before non modality is achieved and without it there seems to be a confusion about the behavior of the buttons that will be removed from the dialog.,0,0.9792211055755615
929806309,3176,Paul-Licameli,2022-07-26T10:38:52Z,"so then i looked at slide 8.0 (macos examples) and that is so. but is that an omission in the design? how is the user supposed to close the dialog? if it's only with esc or the close button, then there is no way to distinguish between committing and cancelling the changes.",0,0.9925952553749084
929810091,3176,Paul-Licameli,2022-07-26T10:43:23Z,i have commented at #3090,0,0.9941121935844421
929812957,3176,crsib,2022-07-26T10:46:51Z,"this matches the behavior for stacked effects in other daws though. in most of the cases i saw (including garage band) settings are always committed (on every change) and software provides no way to undo them. ableton tracks each and every parameter change, but every change is committed immediately as well. ![a link]",0,0.6013858318328857
929820667,3176,Paul-Licameli,2022-07-26T10:55:56Z,so maybe we have an opportunity to do things a bit better than those.,0,0.9609144330024719
930946734,3176,crsib,2022-07-27T11:27:21Z,turned out that this commit is not needed at all,0,0.9907336235046387
930998848,3176,crsib,2022-07-27T12:27:05Z,turned out that removing wasn't handled properly either,0,0.9426892399787903
932657977,3176,Paul-Licameli,2022-07-28T20:49:09Z,"this `#include` is new since my last round of review, and unfortunately makes bad depenency cycles. this is from a ""before"" picture made by scripts/graph.pl: bad -- cycles crept in this release that we should fix later. but let's not make them worse: remove the one `#include` and this bubble still grows by one, including the new file realtimeeffectstateui. i'm not sure which is the edge to cut so that this doesn't happen. but at least this does not tie in audioio and the other realtime* files. my unmerged library extractions in progress would move those files down into lib-audio-io. and how to do the rest of the code change to break the dependency is easy to see: the two functions of `realtimeeffectlist` that you modify already do `publish` so you can make subscriptions elsewhere to handle this.",-1,0.9570866227149963
932704050,3176,Paul-Licameli,2022-07-28T21:44:22Z,"you followed one of the suggestions for changing the management of lifetimes of the shared state. is it all correct? - generate noise, open sidebar, add any effect, but do not yet click the gear - do something undo-able - undo - click the gear - redo - click the gear again this was a sequence that i feared might erroneously leave two non-modal dialogs opened connected to the same effect state. this doesn't happen. yet, the reasons why it doesn't happen seem a little fragile to me. it doesn't happen because `projecthistory::popstate` fires many track deletion, then addition, events in these lines: [code block] and the subscription you added calls `hiderealtimeuifortrack` -- with the consequence, that any undo or redo makes the non-modal dialog disappear, i think? -- which might be considered unacceptable to qa. now, the ""lazy"" creation of `realtimeeffectstateui` happens anyway almost always, whenever you cause a push or pop of the undo stack -- which can mean, there is little point in avoiding doing it sooner, eagerly. and the way to do that, as i suggested, is to have `realtimeeffectstate` call `meffectstateextensions.buildall()` in the constructor. that would defeat my doubts. or it would also do so, if you do the other thing: have `realtimeeffectstate` hold a `shared_ptr` to its `extensions` and copy that pointer in the copy ctor. then `buildall` won't be needed. and not needing `buildall` might mean economy in case `extensions` ever needs to host some other attachment.",0,0.9696524739265442
933009150,3176,crsib,2022-07-29T08:44:09Z,"shoot, my bad! will be fixed for sure!",-1,0.995949387550354
942317293,3176,Paul-Licameli,2022-08-10T11:03:31Z,the comment is not correct -- noisereduction does not override the function. and i don't think it needs to because it is not eligible for effect stacks.,0,0.9863060712814331
942328581,3176,Paul-Licameli,2022-08-10T11:17:03Z,"this change is new since i last reviewed, and i would describe this oppositely -- what was a deep copy is now shallow. this has the consequence that the state is only transient state. there is no longer any undoing or redoin of changes of settings, but only of the composition of the effect list.",0,0.9871388077735901
942333700,3176,Paul-Licameli,2022-08-10T11:23:20Z,this comment is not consistent with `realtimeeffectlist::moveeffect` which leaves the pointer in the message null,0,0.987718939781189
942336684,3176,crsib,2022-08-10T11:27:04Z,"yeah, you are right, my bad",-1,0.9931829571723938
942340307,3176,Paul-Licameli,2022-08-10T11:31:40Z,"the `#include` that made the bad dependency cycle is still here, but not needed to build now so easily deleted.",0,0.977035403251648
942342813,3176,Paul-Licameli,2022-08-10T11:34:51Z,"deletion of the copy constructor might be done in the commit ""realtimeeffectlist performs shallow copy for states""",0,0.9942873120307922
942360561,3176,Paul-Licameli,2022-08-10T11:56:33Z,"i think this may fail to fire when intended, in case `mcurrenttrack` expired because the track was replaced because some other edit was done to it that caused tracklist::replace",0,0.9822516441345215
942362538,3176,Paul-Licameli,2022-08-10T11:58:57Z,"the problems of dangling pointers to states or parts of states are surely fixed now, so no fear. maybe though, this event handler closes the dialog too often because it isn't discriminating about which track. but to do that right might require a shared pointer to the interesting track, not weak. and then there would be the problem of invalidating that shared pointer, and updating it to find the corresponding track in a different undo state. because i observe that undo or redo causes the dialog to disappear, because of this case of the switch. maybe that is acceptable for now. maybe testing will result in some request to change the design.",0,0.5021530389785767
942363957,3176,crsib,2022-08-10T12:00:41Z,i have checked and mcurrenttrack is always consistent,0,0.9898723363876343
942365511,3176,crsib,2022-08-10T12:02:28Z,"i do not see your point. `mextra == 0` means that the track is removed from the project as per contract. please, provide an str of a behavior you think is wrong.",0,0.7146377563476562
942372541,3176,crsib,2022-08-10T12:10:45Z,"seems that undo is calling clear, readding the duplicate back later",0,0.9929742813110352
944514606,3176,Paul-Licameli,2022-08-12T14:20:49Z,i should have noticed this last round -- `pstate` is moved-from therefore null. nothing in non-modality depends on this but the events should anyway behave as advertised.,0,0.9896000623703003
944524872,3176,Paul-Licameli,2022-08-12T14:30:26Z,"the commit that removes this copy constructor should also remove the comment in the header file, `members that are copied for undo and redo`",0,0.995978832244873
944532833,3176,Paul-Licameli,2022-08-12T14:38:14Z,spelling,0,0.9833834767341614
944537676,3176,Paul-Licameli,2022-08-12T14:43:06Z,the variable name `effect` might be less confusing as `state`,0,0.9852874279022217
944544520,3176,Paul-Licameli,2022-08-12T14:50:10Z,"wow, that's crtp x 3 !",1,0.8267744183540344
944546074,3176,Paul-Licameli,2022-08-12T14:51:51Z,can the non-modal dialog exist but be hidden? then this function name might mislead.,0,0.9845384359359741
944546798,3176,Paul-Licameli,2022-08-12T14:52:35Z,"but, no, i see.",0,0.989048421382904
944553013,3176,Paul-Licameli,2022-08-12T14:58:51Z,"we come here when rebuilding the side bar. but can there be edits of the track name that don't get reflected in the dialog title? a complete solution might be done with subscription to undo/redo events. which i suggest as a bug fix after this pr, not a blocking problem.",0,0.9928351044654846
944556390,3176,Paul-Licameli,2022-08-12T15:02:36Z,"to be really complete... it would also subcribe also to changes of preferences, in case the effect name is a built-in that can be retranslated for changed of locale.",0,0.9909630417823792
944576108,3176,Paul-Licameli,2022-08-12T15:25:03Z,copy-pasted comment refers to a nonexistent variable,0,0.9883157014846802
944578566,3176,Paul-Licameli,2022-08-12T15:27:45Z,comment is trying to explain why `release()` doesn't leak below. it's because the dialog has a non null parent.,0,0.9906051754951477
944581549,3176,Paul-Licameli,2022-08-12T15:31:17Z,why was this subscription needed?,0,0.9920427203178406
944600040,3176,Paul-Licameli,2022-08-12T15:52:12Z,"did you intend to hide a non-modal dialog but not destroy it? the closing of the project window does cause the dialog to be destroyed, because it sets its parent pointer to the projectwindow. there are other non-modal dialogs associated with a project -- like tools > macros... -- and nothing special is needed to ensure that they are cleaned up.",0,0.9925445318222046
944603941,3176,Paul-Licameli,2022-08-12T15:56:24Z,i have also,0,0.9896153211593628
944607314,3176,crsib,2022-08-12T16:00:25Z,it fixes an assert in `effectuihost::~effectuihost()`. is this assert important? you tell me.,0,0.9931643605232239
944610558,3176,Paul-Licameli,2022-08-12T16:04:45Z,"i think buildall is now unnecessary for correct lifetimes of `realtimeeffectstateui`, now that the state objects are shared across undo history states. undo/redo still closes the window. if there is an enhancement to avoid that, remember that test case should be: - add an effect to a stack but don't open settings yet - make some undoable edit - undo - click the gear - redo (here, the sidebar must reconnect to another track) - click the gear again and the second click should hide the dialog, not open a second dialog.",0,0.9860913157463074
944611928,3176,crsib,2022-08-12T16:06:41Z,"i had nave expectation that track_data_change will be fired, because, well, track data has changed. but you are right, it is not",0,0.9607429504394531
944617228,3176,crsib,2022-08-12T16:13:37Z,"ironically, msvc now has a diagnostic for that ![a link]",0,0.7133793234825134
944630731,3176,crsib,2022-08-12T16:30:09Z,"well, that means it's a bad comment anyway :-) it should be about `effectinstance` lifetime",1,0.9597873687744141
944631650,3176,crsib,2022-08-12T16:31:19Z,"it is no longer needed on the other hand, the (weak) pointer to effectinstance is no longer stored",0,0.9929163455963135
944632936,3176,crsib,2022-08-12T16:33:03Z,"let's keep it for now, probably, it does no harm either",0,0.7332755327224731
944686380,3176,Paul-Licameli,2022-08-12T17:52:47Z,"if any more clientdata are attached to the realtimeeffectstate, they too would be built non-lazily. well we don't care about that now.",0,0.9395393133163452
944686924,3176,Paul-Licameli,2022-08-12T17:53:35Z,"okay, and maybe that old assertion is an inappropriate one. but let it all stand.",0,0.6371604204177856
944781910,3176,Paul-Licameli,2022-08-12T19:36:06Z,also for the `reset`? you can make that happen with the history dialog,0,0.9951770305633545
944785429,3176,Paul-Licameli,2022-08-12T19:40:44Z,"this requires that #3365 be merged first, so that the dialog is closed when it must be.",0,0.9947382807731628
944785785,3176,crsib,2022-08-12T19:41:11Z,will do,0,0.9619618058204651
944786276,3176,crsib,2022-08-12T19:41:48Z,"yep, right now it is kind of no-op",0,0.6598516702651978
944789217,3176,Paul-Licameli,2022-08-12T19:45:38Z,this commit breaks the build but the next and final commit fixes it.,0,0.9609270691871643
944795215,3176,Paul-Licameli,2022-08-12T19:53:15Z,"this commit is insufficient to update langauges in (e.g.) the dialog for reverb. it only fixes the dialog title, not the static texts and label buttons. destroying and recreating the dialog may do it. that is i think `realtimeeffectstateui::hide` then `realtimeeffectstateui::show`",0,0.9916163086891174
944801183,3176,Paul-Licameli,2022-08-12T20:01:22Z,"correct that, it is rather, still closing the dialog unnecessarily. we want the dialog to close exactly when it should.",0,0.764664888381958
944819650,3176,Paul-Licameli,2022-08-12T20:26:34Z,"now i'm trying to make it work by cherry-picking my fix onto this branch, and it doesn't, revealing an incompleteness of my proposed fix. so watch for an amendment of #3365 !",-1,0.5474784970283508
944842857,3176,Paul-Licameli,2022-08-12T20:46:12Z,"okay, i amended #3365, which you should review first. but still not enough: if i cherry-pick it onto your branch, i must make one more change: your message handler must do nothing for messages of type `purge`. with that change i observe that undo and redo close the dialog only exactly as needed. so, are we done yet, debugging undo/redo? no, i think there is one more problem. wait for more.",0,0.922390878200531
945580952,3176,Paul-Licameli,2022-08-15T09:56:26Z,spelling,0,0.9833834767341614
945582413,3176,Paul-Licameli,2022-08-15T09:58:36Z,the last commit in the sequence is still correcting a build error of the previous commit. i'd like both commits to be compilable.,0,0.9903090596199036
945583722,3176,Paul-Licameli,2022-08-15T10:00:39Z,"you don't update ui for the reset message, which can happen if you choose a state using the history dialog, and so the title of a dialog might be incorrect in that case. however that case will correctly fall through to the check for reachability of states below.",0,0.9953994154930115
945584090,3176,crsib,2022-08-15T10:01:12Z,"well, rebase error again. rebasing takes like half a time on this branch now",-1,0.8811060190200806
945587636,3176,Paul-Licameli,2022-08-15T10:06:57Z,"i merged other approved things to master lately, so please also rebase onto those.",0,0.9932739734649658
1295776515,5041,Paul-Licameli,2023-08-16T11:49:56Z,should this comparison use discrete sample counts?,0,0.9893681406974792
1295797495,5041,Paul-Licameli,2023-08-16T12:06:45Z,"non-ascii mathematical notation in comments, nice",1,0.9722362756729126
1295799474,5041,Paul-Licameli,2023-08-16T12:08:32Z,"see uses of `` with `@{` and `@}` elsewhere in the source tree, so that doxygen can associate a comment with multiple class members. the generated pages will have nicer information and just looking at the source code makes clearer the intended ""scope"" of your comment.",0,0.9927886128425598
1295801264,5041,Paul-Licameli,2023-08-16T12:10:15Z,here you can simply use `//!` for a doxygen comment on one member.,0,0.9920024871826172
1295805487,5041,Paul-Licameli,2023-08-16T12:14:16Z,i think this function should use `timetolongsamples`,0,0.9894994497299194
1296367556,5041,Paul-Licameli,2023-08-16T19:58:39Z,"no, just delete the function! it is defined but not used anywhere in these six prs",0,0.6404378414154053
1296369747,5041,Paul-Licameli,2023-08-16T20:01:08Z,delete this comment please,0,0.9831079840660095
1296777100,5041,saintmatthieu,2023-08-17T07:18:27Z,isn't it too much to have private members show up in doxygen?,0,0.9829602241516113
1296828948,5041,saintmatthieu,2023-08-17T08:00:03Z,"the playtime boundary getters return sample-rounded values, but results can be different whether we round `t` or not, so it's an important question. mathematically it is correct as it is. someone can use the method to check whether the cursor splits the clip visually. but we also use this method to decide whether a clip should be split or not, in which case it's a headache to figure out what should be done when splitting a clip a fraction of a sample before its play end time. i'm thinking now that these boundary-check methods should take `samplecount` arguments. then it's the responsibility of the users to decide what rounding they want. the internal variables (`msequenceoffset`, etc) must stay `double`s because of stretching. i haven't seen a problem related to that, though, perhaps because the places that use this already pass rounded values. for the sake of time, would you agree to leave it as-is for now and keep this in mind if problems are reported?",0,0.9809219241142273
1296837406,5041,saintmatthieu,2023-08-17T08:07:46Z,it's deleted.,0,0.9838584065437317
1296845751,5041,saintmatthieu,2023-08-17T08:15:08Z,"it is used, in `wavetrack::applystretchratio`, in pr 5. i'll remove it from this pr, and rebasing will force me to re-introduce it. then i'll use `timetolongsamples`.",0,0.992345929145813
1296934657,5041,Paul-Licameli,2023-08-17T09:28:54Z,"all might help someone needing to understand the implementation, not just interface. there is the notion of representation invariant for instance  invariant conditions involving private member variables. might as well follow conventions with `` there too",0,0.9906052947044373
1298376288,5041,Paul-Licameli,2023-08-18T12:08:14Z,"i think i wrote this elsewhere, bug again: `0.5` should change to `true` at the commit ""make waveform display work again"" to match the change of argument type.",0,0.9906461238861084
1298392366,5041,Paul-Licameli,2023-08-18T12:26:25Z,"near the end of this function `findcorrection`, clean up two things please: use `std::clamp` and `assert`",0,0.9906796813011169
1298407552,5041,Paul-Licameli,2023-08-18T12:42:25Z,i see this change in `drawindividualsamples`. i wonder whether it's complete. i see another use of `clip->getrate()` that is not corrected for stretch later. but it's only fetching one value from the envelope and passing a time-step value for successive samples that doesn't matter and could be 0.,0,0.9864831566810608
1298408977,5041,Paul-Licameli,2023-08-18T12:43:52Z,"the domain of the envelope (viewed as a curve or function) is always updated with ration changes to be real time, correct? so `time` given to `getvalue` is right? did you test display of individual samples with an envelope too?",0,0.9944890737533569
1299369268,5041,Paul-Licameli,2023-08-20T12:30:11Z,"as i wrote on the closed pr, the commit ""make waveform display work again"" doesn't completely do what it says. instead the next commit ""spectrum display..."" completes the work for waveform display too. so properly, these two commits should be squashed into one (plus the fixup i pushed). maybe that commit would be too large and you might find a nice way to separate small steps like changes of arguments of functions or construction of `clipparameters` but then i see the next commit ""wavechannelview clean-up ..."" does yet more things that correct the calculations, which comes after ""spectrum drawing does not need a widesamplesequence ..."" but that one is easy, just deletions. i have to look at the diff of a sequence of four commits to understand the whole transformation and be confident it's right. this isn't easy.",0,0.9842151999473572
1299370732,5041,Paul-Licameli,2023-08-20T12:40:19Z,"is this comment in commit ""spectrum display..."" correct?",0,0.9951122403144836
1299402809,5041,Paul-Licameli,2023-08-20T16:25:35Z,"if 0 is an excluded value, maybe the member doesn't need to be `std::optional` but instead you would test the value wherever it is used.",0,0.9899264574050903
1299403106,5041,Paul-Licameli,2023-08-20T16:28:47Z,i spent a surprising amount of time studying this small commit to convince myself it was correct. rereading the whole class led me to push one more commit for an possible undiscovered problem. i think backwards scrubbing with stretch applied might be wrong.,0,0.8145797252655029
1299403836,5041,Paul-Licameli,2023-08-20T16:35:56Z,"i found this small commit difficult to understand because `durationtodiscard` is multiplied by the clip's rate only in one place, but then also divided by stretch ratio in another place. i think the members `mlastreadsample` and `mtotalnumsamplestoproduce` should be commented. `mlastreadsample` counts raw samples but `mtotalnumsamplestoproduce` counts stretched. also, what should have made the bug ""obvious"" in earlier reviews -- is that the clip's rate should always be divided by the stretch ratio, never multiplied by it.",0,0.8146795630455017
1299843850,5041,saintmatthieu,2023-08-21T09:15:19Z,"you've fixed a bug indeed, thank you. added the missing unit test that would have caught it.",1,0.9787472486495972
1299913890,5041,saintmatthieu,2023-08-21T10:16:58Z,"i considered some time ago already providing a class only for the implementation of `timeandpitchsource` and let `clipsegment` use it. it could have avoided this confusion. now `mlastreadsample` is a member of the source, and represents a sample index before stretching. `mtotalnumsamplestoproduce` is a member of `clipsegment` and represents a sample count after stretching.",0,0.9919195175170898
1299914648,5041,saintmatthieu,2023-08-21T10:17:42Z,"now i did it. the commit ""review comments: extract timeandpitchsource from clipsegment ..."" only just does that - no change in logic.",0,0.9887205958366394
1299924255,5041,saintmatthieu,2023-08-21T10:27:15Z,one advantage of `optional`: the compiler will tell you if you are not de-referencing when you should. a bare double won't warn against unchecked uses.,0,0.9785559177398682
1299926094,5041,saintmatthieu,2023-08-21T10:29:10Z,"it's outdated, stemming from the time when spectrum display did not account for stretching. thanks.",1,0.9360058307647705
1299940579,5041,Paul-Licameli,2023-08-21T10:43:57Z,"i tried to demonstrate backwards scrubbing going wrong without this fix, but i could not. maybe `samplesperchannel` is never greater than `remainingsamplesinclip` because of other tests elsewhere, but the class `clipsegment` should not depend on that pattern of usage.",0,0.9870325326919556
1299968117,5041,saintmatthieu,2023-08-21T11:11:56Z,"right. i did not a good job with my interactive rebase for this part. i may mistakenly have attempted to re-order and squash the ""wavechannelview clean-up ..."" into ""make waveform display work again"", but actually it should have been squashed into ""spectrum display ..."" (and then squashing that into ""make waveform display work again"" as you suggested). i don't mind doing it, but is now a good time, since you've reviewed this already?",1,0.5609721541404724
1299992835,5041,saintmatthieu,2023-08-21T11:37:56Z,"correct. the x-position of the samples is scaled by the stretch ratio because the audio samples are stored in stretched state. the envelope is, though. i did, yes, and that works to the extent i tested it. not so confident about the corner cases, though.",0,0.9511430263519287
1300674381,5041,Paul-Licameli,2023-08-21T21:38:12Z,change pps  in the comment,0,0.9840778112411499
1300674948,5041,Paul-Licameli,2023-08-21T21:38:49Z,and the variable name,0,0.9948897361755371
1301768815,5041,Paul-Licameli,2023-08-22T14:49:02Z,this moved function is now more general than it needs to be. the first argument is always a size one vector at the sole place where you call it. maybe you feel like cleaning that up?,0,0.9910606741905212
1301771445,5041,Paul-Licameli,2023-08-22T14:50:48Z,your search-and-replace made the comment read strangely,0,0.5822305679321289
1302278623,5041,Paul-Licameli,2023-08-22T23:16:42Z,first two arguments are unused,0,0.9922667145729065
1302281321,5041,Paul-Licameli,2023-08-22T23:22:33Z,remember `min` is not `lowest` when the type is floating! -- but that's not the case here,0,0.9805285334587097
1302284604,5041,Paul-Licameli,2023-08-22T23:29:32Z,fix the variable name `clipendingadjustment`,0,0.995492696762085
1302296428,5041,Paul-Licameli,2023-08-22T23:34:02Z,arguments `track` and `selectedregion` are not used,0,0.9948700666427612
1302300193,5041,Paul-Licameli,2023-08-22T23:38:47Z,"`t1` is not used outside this constructor, so it might be a local variable",0,0.9926579594612122
1302317307,5041,Paul-Licameli,2023-08-23T00:16:59Z,"below, change `rate` to `samplerate` in commented-out code. sample rate not corrected for stretch ratio would be right because we assume the envelope already stretches its time coordinates.",0,0.9934900999069214
1302317789,5041,Paul-Licameli,2023-08-23T00:18:09Z,or `6 * threshold1`,0,0.9922716617584229
1302320333,5041,Paul-Licameli,2023-08-23T00:22:01Z,"below, likewise, change commented-out code",0,0.9940395355224609
1302328378,5041,Paul-Licameli,2023-08-23T00:41:07Z,`params` is unused,0,0.9943580031394958
1302334192,5041,Paul-Licameli,2023-08-23T00:55:02Z,unused,0,0.96555495262146
1302337814,5041,Paul-Licameli,2023-08-23T01:03:33Z,"maybe the first real bug i have found: while dividing by `getwidth` may correct a mistake introduced earlier -- yet i look at the uses of `speccache::populate` and i see one (in drawclipspectrum) passed the visible sample count, while the other (in this file) passed the sequence sample count. but now both use the sequence count. why is this right?",0,0.9150591492652893
1302345661,5041,Paul-Licameli,2023-08-23T01:21:26Z,"notice how `getfloats` had a `maythrow` argument defaulting true but passed false here. i added that years ago. i reasoned that if reading sample blocks failed for any reason, but only in display code, it should be non-throwing, and instead just zeroes should be substituted. but now that is lost with this transformation. see where `sampleblock.cpp` used to use the `maythrow` argument. but that was a guard around the concrete class that implemented `dogetsamples`. so i think `sqlitesampleblock::getfloatsampleview` should now add a try-catch around its new call to `dogetsamples` and the catch block needs to add zeroes. so that the behavior in exceptional cases does not change.",0,0.9713953733444214
1302593980,5041,saintmatthieu,2023-08-23T07:24:52Z,"at last i know what the `maythrow` is about - my bad not for having actively searched its meaning. `getfloatsampleview` is used for both display and playback, though, so adding a try-catch would override the current playback, throwing behaviour. it's not too much work to add this boolean to `getfloatsampleview`. otherwise we'd have to choose one behaviour for both use cases - always catching would also affect playback behaviour. added a commit that does this.",-1,0.9599912762641907
1302701314,5041,saintmatthieu,2023-08-23T08:52:55Z,"thanks for this question, it motivated me to (try and) understand this whole code better. i think it is okay the way it is. `numsamples` will be used to know whether the time-domain input to the spectrogram needs zero-padding, if the window goes beyond that. providing the sequence sample count, as opposed to the _visible_ sample count, allows the code to fetch samples beyond the visible boundary to draw the spectrum, which is good. the other call used to use `getvisiblesamplecount`, and leading to unnecessary zero-padding in case of right trimming. note, though, that that other call only gets executed if the fisheye state is `pinned`, but it never is, as it's hard-coded to `hidden`, so i cannot test that it indeed works with these changes. what i could test, though, is that an impulse, whether at the beginning or end of the clip, has its spectrogram displayed properly, also with left- and/or right-trimming.",1,0.9885931015014648
1302703735,5041,saintmatthieu,2023-08-23T08:54:47Z,ty,0,0.7169978022575378
1302703807,5041,saintmatthieu,2023-08-23T08:54:51Z,ty,0,0.7169978022575378
1302722329,5041,saintmatthieu,2023-08-23T09:09:49Z,how could i miss that ... thank you.,1,0.9914931654930115
1302723907,5041,saintmatthieu,2023-08-23T09:11:04Z,"haha, ""adjustemt""",1,0.9798816442489624
1302743915,5041,saintmatthieu,2023-08-23T09:27:37Z,"good that you spot this. this means that this function is actually not useful, and `spectrumcache` can call `audiosegmentsampleview::copy` directly instead. (it would probably be useful if `wavetrack::getsampleview` were used, but that's not the case.) removing.",1,0.9739711284637451
1302851106,5041,Paul-Licameli,2023-08-23T11:01:45Z,"i'll let your decisions stand on this, but maybe it should be reexamined later. maybe a clip with unusually large hidden data will cause caching to do too much work and even defeat the purpose of caching for performance. maybe there should be a smarter way to bound the cache size, more than the visible samples but fewer than the whole.",0,0.9679892063140869
1302867397,5041,Paul-Licameli,2023-08-23T11:18:08Z,now there is only a direct call to `copy`. the limiting of sample buffer size and the filling of extra space with zeroes don't happen. should they be restored?,0,0.9929056167602539
1302886734,5041,Paul-Licameli,2023-08-23T11:37:31Z,"you are right. `timecorrection` is scaled to the clip's raw sample rate, without the stretching ratio correction for real time. we want to find the correct x coordinate for that. so remove ""todo"" and explain in the comment more confidently.",0,0.9874696731567383
1302890888,5041,Paul-Licameli,2023-08-23T11:41:35Z,reference #2 on this page was my guide to implement this algorithm long ago. [a link] i used to be able to find freely available pdfs,0,0.9932594895362854
1302914256,5041,Paul-Licameli,2023-08-23T12:03:40Z,"almost completing review! the last thing i must understand is why you changed arguments in the other call of `grow` but not this one. are you correcting an old error? but i examined things and i find this added comment misleading. `t0` is, and was before the changes, a time relative to clip start. not absolute. and relative time is in fact what `grow` was expecting. the `t0` value is stored in `start` and ultimately used only in `getspectrogram` just above us here to check for a cache hit. the `t0` in the comparison is the same `t0` used here.",1,0.4623624086380005
1302915781,5041,Paul-Licameli,2023-08-23T12:05:06Z,"`getspectrogram` (this function, here) is called in only one place, and the `t0` value supplied there is from `clipparameters::t0`, and that value is initialized with a duration relative to clip play start, not an absolute time.",0,0.9935628175735474
1302920214,5041,saintmatthieu,2023-08-23T12:09:28Z,"right. i just pushed a commit that changes the `copy` behaviour to something more usual, with trailing samples being zeroed. i might have decided against it at the time to ease the implementation of `fillbufferfromtrackblocksequence`, but now that it's gone it's better to make the life of clients easier. sorry for the re-implementation and please take a close look at that commit.",-1,0.9875108003616333
1302920390,5041,Paul-Licameli,2023-08-23T12:09:38Z,"all right, now i think the other call of `grow` was correct all along, but the comment added there is incorrect. and this call was correct, but the added code, more seriously, is now incorrect. `t0` above also comes from `clipparameters` and therefore is relative to clip start. subtracting start time again will be wrong when start time is not 0.",0,0.9823986887931824
1302922352,5041,saintmatthieu,2023-08-23T12:11:23Z,you have an ieee subscription ?? :star-struck:,1,0.981562614440918
1302925681,5041,saintmatthieu,2023-08-23T12:13:54Z,"copy-pasting your explanation as comment here, tagging it with your initials.",0,0.9935296177864075
1302926607,5041,Paul-Licameli,2023-08-23T12:14:44Z,actually no,0,0.8664157390594482
1302937403,5041,saintmatthieu,2023-08-23T12:24:35Z,"there's no trace of absolute time here, i wonder what brought me to think there was. even then i was inconsistent. i wonder how my extensive testing didn't get me to spot the error, maybe because it ""only"" induced more cache misses ? anyway, fixing it.",0,0.7753861546516418
1307364845,5041,saintmatthieu,2023-08-28T12:32:30Z,i need your benediction :),0,0.9755631685256958
1307523722,5041,Paul-Licameli,2023-08-28T14:44:04Z,"i don't feel competent to review this without much more time for study of the library. i'll just ask: - does this affect performance only or does it change the calculations? - the reassignment of `hop_s_err` and `hop_a_err` used to happen once per function call. do you mean to make it happen at most once, or sometimes multiple times? - if not multiple times, then should `hop_s` and `hop_a` be changed after these two assignments? -",-1,0.7825571298599243
1307526669,5041,Paul-Licameli,2023-08-28T14:46:20Z,"again, i'll just trust this change without digging deep",0,0.8738154172897339
1308470363,5041,saintmatthieu,2023-08-29T09:16:50Z,"the naming of these variables isn't really descriptive. as i understand this code, `hop_a_err` is the analysis samples ""credit"". `exact_hop_a`, the ""exact analysis hop size"", can be a fractional number of samples, but of course, one can only feed discrete samples at a time. so when you need 2.5 samples to perform one fft, as soon as you get the 3rd sample, all 3 samples are processed, but you have a credit of 0.5 samples. this goes into `hop_a_err`. same principle for `hop_s_err` but in the ifft direction. there were situations (when `numsamples` wasn't the 1024 ""default"" or the stretch ratio is so low that `exact_hop_s < 1`) where those state variables were updated although no analysis or no synthesis happened. as a result, no samples were ever produced, and we were falling in an endless loop. now to your questions: * no, negligibly * sometimes multiple times, which is the correct thing to do: update your credit variables if and only if analysis/processing happened also tested the other extrem: stretching from 30s to 12h. i also did and these changes do not help. looking into it.",0,0.9743509292602539
1310090700,5041,Paul-Licameli,2023-08-30T11:00:07Z,what's your proof that the assertions in `as_size_t` are satisfied -- that there is no narrowing of a negative or a too-large `samplecount` value?,0,0.9936794638633728
1310111527,5041,Paul-Licameli,2023-08-30T11:18:28Z,same question,0,0.9845231771469116
1310111679,5041,Paul-Licameli,2023-08-30T11:18:36Z,same question,0,0.9845231771469116
1310180780,5041,Paul-Licameli,2023-08-30T12:17:34Z,"i see that before this commit, `audiosegmentsampleview` was constructed in only one place outside tests, in `sequence`, and always passing `size_t length` to the `samplecount` argument. if `audiosegmentsampleview` really eliminated use of type `samplecount` and only used `size_t`, it would move the need to use `as_size_t` to the point of construction. there are new places where it is constructed, all of them in `wavetrack` and added by this commit.",0,0.9921557903289795
1310182741,5041,Paul-Licameli,2023-08-30T12:19:20Z,"in fact, the accessor `audiosegmentsampleview::getsamplecount` was used nowhere before this commit.",0,0.9931396842002869
1310192407,5041,Paul-Licameli,2023-08-30T12:27:10Z,"here and elsewhere, ""half as many"" would read better than ""twice as few""",0,0.9782266020774841
1310200723,5041,Paul-Licameli,2023-08-30T12:32:14Z,"""intervals"" same spelling error in one other place",0,0.9789261221885681
1310204578,5041,Paul-Licameli,2023-08-30T12:34:41Z,"""the raw"" x 4 places",0,0.9937844276428223
1310212486,5041,Paul-Licameli,2023-08-30T12:40:45Z,"i must remember to fix this when i rebase #5031 onto this again: use the ""narrow"" not the ""wide"" clip when this class holds references to two clips.",0,0.9911593794822693
1310235623,5041,Paul-Licameli,2023-08-30T12:57:58Z,i hope that writing this commit was a good exercise in understanding the new channel and interval interfaces.,1,0.9466920495033264
1310373638,5041,Paul-Licameli,2023-08-30T14:29:31Z,inner pair of `{}`?,0,0.9905664324760437
1310386165,5041,Paul-Licameli,2023-08-30T14:38:26Z,"just as `start` and `end` are non-virtuals in `channelgroupinterval`, so should the be too in the base class `channelinterval`, i think. but that can be fixed later",0,0.9922437071800232
1310426966,5041,saintmatthieu,2023-08-30T15:06:38Z,"no proof, just assuming that users request reasonable amounts of time of reasonably stretched clips. in `mixerboard` usage, ~= 50ms are queried at a time. stretch ratio to get an overflow would have to be [code block]",0,0.9819684624671936
1310465013,5041,Paul-Licameli,2023-08-30T15:33:01Z,"my own, old comment in the file says ` // expect that the difference of t1 and t0 is the part of a track played // in about 1/20 second (ticks of trackpanel timer), so this won't overflow ` i didn't make a really rigorous proof then. but can we do better? stretches aren't limited yet to ""reaonable"" bounds and also the calculation above is specific to default sample rate.",0,0.989098310470581
1310465997,5041,saintmatthieu,2023-08-30T15:33:44Z,"i agree, i should be consistent with myself. a sample view is typically used to store a temporary buffer, and the total amount should never exceed what `size_t` can hold. shall i simplify this?",0,0.9845735430717468
1310469168,5041,Paul-Licameli,2023-08-30T15:36:02Z,"add to the comment ""unless stretch ratio is extreme""",0,0.9928602576255798
1310469413,5041,saintmatthieu,2023-08-30T15:36:14Z,sure,0,0.9422702193260193
1310475830,5041,saintmatthieu,2023-08-30T15:40:50Z,"that's not the part that causes me the most headache. i find this model quite sensible, and was happy to be able to easily use consistent aliases, such as `channelgroupsampleview` and `channelsampleview`. remains `audiosegmentsampleview` that on the occasion i'd rename `channelsegmentsampleview`. (i wouldn't use `channelintervalsampleview`, because ""segment"" is now coined to either clip or silence segments. a `wavechannelinterval`, in practice, implies (the channel of) a clip under the hood.)",0,0.7698647379875183
1310478763,5041,Paul-Licameli,2023-08-30T15:43:00Z,"the deleted `as_size_t` is now instead inside the function called above. i'm not convinced there won't ever be an extreme stretch ratio. if the assertion ever fired in a debug build -- the release build might continue, with a wrapped, small value. no harm except an inaccurate meter that put too few floats in its update queue. but with a less extreme value, which doesn't cause the assertion, still a large size_t value might not be allocable and the release build would crash. so how about this little bit of bullet-proofing here. [code block]",0,0.9621960520744324
1310479365,5041,saintmatthieu,2023-08-30T15:43:28Z,"indeed, whenever there's the need, we do this.",0,0.983170211315155
1310481244,5041,saintmatthieu,2023-08-30T15:44:53Z,"extremely low, to be precise. added.",0,0.973416805267334
1310484318,5041,Paul-Licameli,2023-08-30T15:47:08Z,do this also when constructing `meterfloatsarray`.,0,0.9945586323738098
1310495993,5041,saintmatthieu,2023-08-30T15:55:45Z,"i just tried to crash it, calling `floats tempfloatsarray{ std::numeric_limits ::max() };`. the exception was caught by the `publisher` code, which visits its observers within a try/catch block. this is the case here, since this scope reacts to an `ontimer` change. so :person_shrugging:",0,0.5319606065750122
1310524201,5041,Paul-Licameli,2023-08-30T16:17:07Z,"something very basic: does `msampleview` really need a longer lifetime than this function? i think not, it can be a local, not a member.",0,0.9854309558868408
1310688754,5041,saintmatthieu,2023-08-30T18:49:49Z,"it does, if we want the caching to work properly. actually i notice one improvement: emptying this view upon start/stop so as to allow cache eviction.",0,0.9839622974395752
1311360418,5041,Paul-Licameli,2023-08-31T09:30:20Z,good,1,0.8759189248085022
1311361719,5041,Paul-Licameli,2023-08-31T09:31:24Z,"that wasn't the suggestion: i said limit the try-catch scope to only the allocation, as in the code sample above.",0,0.9849069118499756
1311366124,5041,Paul-Licameli,2023-08-31T09:34:58Z,would be better,0,0.9500131011009216
1311401413,5041,Paul-Licameli,2023-08-31T10:04:39Z,i think this was wrong: it should be `timetosamples(t0 - getsequencestarttime())`,0,0.9363910555839539
1312743652,5041,saintmatthieu,2023-09-01T08:39:15Z,"no, the user is already supposed to give clip-relative times.",0,0.9865173697471619
1312745290,5041,saintmatthieu,2023-09-01T08:40:53Z,"but what use would this be, since the exception is already caught above ? i'm not sure we're understanding each other.",-1,0.7024731040000916
1312750926,5041,saintmatthieu,2023-09-01T08:44:22Z,an elaboration in this comment would be welcome.,0,0.9806859493255615
666612403,1207,Paul-Licameli,2021-07-09T01:28:53Z,"oh no, adding colors to the theme. that has not been done in a long time -- since 2017. james crook is more familiar with the theming system than anyone. a question is whether these choices of colors need to be different in other themes. if so, it's not obvious how to do it. it involved darkthemeasceecode.h, etc. which are generated by strange processes.",0,0.8717988133430481
666824151,1207,vsverchinsky,2021-07-09T09:48:52Z,i was relying on [a link] page doesn't provide information on theme source code generation though,0,0.988187849521637
666928146,1207,Paul-Licameli,2021-07-09T12:56:06Z,"i think it involved making a special build with experimental_theme_prefs and doing other things. but i also think the colors at the end of the table are just used unchanged in the other themes that don't redefine them. if you had inserted the lines in the middle, i think that might have messed up the non-default themes worse if they were not regenerated. i think there is much inconvenience in extending the theming system, which needs rewrites. but that's another topic.",0,0.8953151702880859
668382981,1207,Paul-Licameli,2021-07-13T02:34:22Z,"following the analogy with vruler controls, this function should not be virtual",0,0.9916613101959229
668386256,1207,Paul-Licameli,2021-07-13T02:44:12Z,this is not a pure virtual: you should commend that the default behavior is to return null.,0,0.9921118021011353
668386343,1207,Paul-Licameli,2021-07-13T02:44:28Z,*controls,0,0.9896360039710999
668386571,1207,Paul-Licameli,2021-07-13T02:45:10Z,more simply: `return {};`,0,0.9924465417861938
668386734,1207,Paul-Licameli,2021-07-13T02:45:46Z,just analogous with the vruler controls of course.,0,0.987734854221344
668390314,1207,Paul-Licameli,2021-07-13T02:57:10Z,"this implements the item ""play head should be rendered over a track panel (not separate tracks)"" of #1181 ? it's correctly done. please make it a separate commit then, for a single independent task, rather than making this one huge commit.",0,0.9767810106277466
668392220,1207,Paul-Licameli,2021-07-13T03:03:21Z,i do not understand the changes in this file. this disables the vertical stroke to indicate the zero-length selection. why? and why do you use that particular experimental? where is this change specified? can this be another small commit?,0,0.9383262991905212
668393441,1207,Paul-Licameli,2021-07-13T03:07:24Z,"this constant is only used in trackpanel.cpp -- perhaps it should be defined only in that file, until need arises to reuse the constant elsewhere.",0,0.990422248840332
668395775,1207,Paul-Licameli,2021-07-13T03:15:04Z,"you have redefined subdivisions in this file. i like that. it would be good to make a commit just of the changes of trackpanel.cpp, and the changes in trackview necessary for it. then, other commits to implement affordance controls specially for wavetrack and for notetrack.",1,0.8881720304489136
668396103,1207,Paul-Licameli,2021-07-13T03:16:08Z,"i have observed this: if you minimize a wave track (the button with a black triangle), it is taller than it was before. ""mute"" and ""solo"" buttons still appear. is this an intended consequence? is it desirable? please point it out to the designers and ask.",0,0.9626071453094482
668399111,1207,Paul-Licameli,2021-07-13T03:26:27Z,update this comment! it's not longer a complete description.,0,0.9846104383468628
668399369,1207,Paul-Licameli,2021-07-13T03:27:21Z,explicit maybe,0,0.9637237191200256
668399479,1207,Paul-Licameli,2021-07-13T03:27:42Z,consider that whenever a ctor has one argument.,0,0.9890210032463074
668400572,1207,Paul-Licameli,2021-07-13T03:31:17Z,why was this change needed? because of emptypanelrect not inheritinc commontrackpanelcell?,0,0.9924629926681519
668402214,1207,Paul-Licameli,2021-07-13T03:37:15Z,unnecessarily moved lines,0,0.6558213233947754
668403314,1207,Paul-Licameli,2021-07-13T03:40:40Z,"these lines aren't gone, but hoisted -- ok",0,0.9854884743690491
668404269,1207,Paul-Licameli,2021-07-13T03:43:58Z,why not matching #endif here?,0,0.985988438129425
668404418,1207,Paul-Licameli,2021-07-13T03:44:35Z,compilation fails if the experimental is turned off. fix it,0,0.988162100315094
668404536,1207,Paul-Licameli,2021-07-13T03:45:00Z,i don't think the lines above should be compiled only when the experimental is on,0,0.9680469632148743
668404774,1207,Paul-Licameli,2021-07-13T03:45:56Z,"this new #include is not needed, remove it",0,0.9958958625793457
668404809,1207,Paul-Licameli,2021-07-13T03:46:03Z,"this new #include is not needed, remove it",0,0.9958958625793457
668405627,1207,Paul-Licameli,2021-07-13T03:48:42Z,"we aren't yet wholly consistent about comment at tops of files, but see some examples with my name and imitate with your name in this and other new files.",0,0.9897621273994446
668406718,1207,Paul-Licameli,2021-07-13T03:52:18Z,all good,1,0.9065300822257996
668407327,1207,Paul-Licameli,2021-07-13T03:54:24Z,i'd prefer to avoid including trackpanel.h,0,0.9867957830429077
668407509,1207,Paul-Licameli,2021-07-13T03:54:55Z,just viewinfo::get(*pproject) and you can avoid use of trackpanel,0,0.9952545166015625
668408863,1207,Paul-Licameli,2021-07-13T03:59:15Z,i'm glad you figured out the use of laststate from other examples!,1,0.9772119522094727
668409067,1207,Paul-Licameli,2021-07-13T03:59:49Z,"remembering the rule that a .cpp file's own header should be the first included, good",0,0.9556966423988342
668410054,1207,Paul-Licameli,2021-07-13T04:03:14Z,"i might want to make a raii class, perhaps in trackartist.h, called tempclippingregion which does setclippingregion in its ctor destroyclipppingregion in its dtor... define it once, reuse the class in a few places.",0,0.9889588356018066
668410631,1207,Paul-Licameli,2021-07-13T04:05:20Z,this constant might be made private to the .cpp file,0,0.9947368502616882
668410995,1207,Paul-Licameli,2021-07-13T04:06:41Z,remove this comment,0,0.9814572334289551
668412203,1207,Paul-Licameli,2021-07-13T04:10:34Z,but then... perhaps the setting and destroying of the clipping region can happen inside drawclipaffordance? because that function always requires it? then you don't need to repeat it for wave track affordance.,0,0.9892873764038086
668413060,1207,Paul-Licameli,2021-07-13T04:13:19Z,assuming the clipping region is such that the bottom corners are not drawn.,0,0.9883238077163696
668413268,1207,Paul-Licameli,2021-07-13T04:13:57Z,reminder to check whether these and other new colors look good in all four of the built-in themes. ask the designers.,0,0.9787122011184692
668414417,1207,Paul-Licameli,2021-07-13T04:17:43Z,"what happens if the text is so long that it extends past the clip's right boundary? another clip's affordance might be painted after over part of it. the text is now always empty, but maybe you will need to truncate it with ...",0,0.9813195466995239
668415428,1207,Paul-Licameli,2021-07-13T04:21:02Z,"the trackartists additions might make a small separate commit, followed by commits for wave and note tracks",0,0.992276132106781
668416973,1207,Paul-Licameli,2021-07-13T04:26:00Z,this might be a simple pointer. it's safe to assume no clip you point to will be destroyed during the drawing of the track panel. so ownership semantics are irrelevant to the function.,0,0.9901594519615173
668418318,1207,Paul-Licameli,2021-07-13T04:30:17Z,"unecessary, remove it",0,0.942007303237915
668418892,1207,Paul-Licameli,2021-07-13T04:32:08Z,"again, this might be a simple pointer",0,0.9876006841659546
668419774,1207,Paul-Licameli,2021-07-13T04:34:58Z,"good, if not strictly needed correction; do the same for spectrumview",0,0.9090471267700195
668420905,1207,Paul-Licameli,2021-07-13T04:38:52Z,good that you figured out the need for this -- it must have been by recording?,1,0.7779116034507751
668421296,1207,Paul-Licameli,2021-07-13T04:40:16Z,i think that could safely be a static cast. wavetrackview controls the definition of its affordance cell as always of this type.,0,0.9883467555046082
668421451,1207,Paul-Licameli,2021-07-13T04:40:39Z,`return {};`,0,0.9836598634719849
668423099,1207,Paul-Licameli,2021-07-13T04:46:01Z,"eliminate this #include, as for notetrackaffordancecontrols",0,0.9939809441566467
668424281,1207,Paul-Licameli,2021-07-13T04:49:39Z,simplify`: {}`,0,0.9451031684875488
668424479,1207,Paul-Licameli,2021-07-13T04:50:15Z,`return {};` avoid repeating the type. let the compiler deduce it.,0,0.9928472638130188
668424693,1207,Paul-Licameli,2021-07-13T04:50:51Z,unused,0,0.96555495262146
668426013,1207,Paul-Licameli,2021-07-13T04:54:43Z,why the change? again because of that empty square above the ruler?,0,0.9811320304870605
668426456,1207,Paul-Licameli,2021-07-13T04:55:55Z,the logic has changed so that the following lines might execute with `clickedtrack==nullptr` which didn't happen before. fix that.,0,0.9946816563606262
668428028,1207,Paul-Licameli,2021-07-13T05:00:36Z,i'd like to avoid adding more wxunused,0,0.9727631211280823
668428704,1207,Paul-Licameli,2021-07-13T05:02:31Z,out-dent please,0,0.9900334477424622
668428996,1207,Paul-Licameli,2021-07-13T05:03:36Z,just `const audacityproject *` if you don't use the argument. it will make no compiler warning.,0,0.9933342933654785
668429273,1207,Paul-Licameli,2021-07-13T05:04:34Z,design specified this string?,0,0.9941473007202148
668429847,1207,Paul-Licameli,2021-07-13T05:06:24Z,might be a const reference argument to avoid the nontrivial copy of shared_ptr. not very important.,0,0.9873807430267334
668430952,1207,Paul-Licameli,2021-07-13T05:09:36Z,what does this line do?,0,0.9805620312690735
668432370,1207,Paul-Licameli,2021-07-13T05:13:55Z,this line looks weird. the conversion of shared to weak can just be left implicit.,-1,0.9911695718765259
668433530,1207,Paul-Licameli,2021-07-13T05:17:11Z,"what is really meant by this condition? that the clip was not dragged, but just clicked and released? i think a more correct test could be written, than reliance on the return code of release. add something to the base class for this purpose if you must.",0,0.9902377724647522
668434138,1207,Paul-Licameli,2021-07-13T05:19:12Z,"i don't like the existing typeswitches, i hope to eliminate many of them, and i want to avoid adding more of them. better: affordancehandle defines another virtual function; and wavetrackaffordancehandle is a further subclass supplying the behavior in the block below in an override.",-1,0.5821767449378967
668437145,1207,Paul-Licameli,2021-07-13T05:27:47Z,unnecessary,-1,0.580326497554779
668437812,1207,Paul-Licameli,2021-07-13T05:29:27Z,"what are the ""clip frame drawing fixes?"" corrections to the previous commit, or some intentional changes specified in the design? if the first, squash with other commits for wave and note track affordances once those are separated. if the second, explain more in commit comments.",0,0.9933912754058838
668632210,1207,crsib,2021-07-13T10:23:13Z,"it casts to the subclass, so static_cast is not safe.",0,0.9818499684333801
668734988,1207,Paul-Licameli,2021-07-13T12:55:09Z,"that's not a complete answer. static_cast can be safe in special cases where the programmer has some other way to prove that the cast is always correcct. the static_cast was a safe thing before that was in the code for years. i want to understand, why is it no longer so.",0,0.9451321959495544
668785396,1207,vsverchinsky,2021-07-13T13:52:54Z,"if it's guranteed to be a pointer to commontrackpanelcell, why then we use trackpanelcell instead? and in this case the problem is that emptypanelrect class is not derived from commontrackpanelcell, and the signature of trackpanelgroup::children doesn't say it has to be",0,0.9789648652076721
668808232,1207,vsverchinsky,2021-07-13T14:17:08Z,"i don't remember that desiners would requested such behaviour, it rather a unforseen consequence of having an affordance area which increases minimum track size. i'll let them know about this.",0,0.9838303923606873
669207340,1207,Paul-Licameli,2021-07-14T01:04:17Z,"the complete answer why the old code was not wrong to use static_cast: you can examine the subdivision of the area in trackpanel, and prove that the ultimate cells were always of subclasses of commontrackpanelcell. that's not true in general for a cellularpanel (the base class of trackpanel), but it is true for this subclass of it. this is no longer true after these changes. it might be made true again if emptypanelrect could also be a commontrackpanelcell, knowing which track it is associated with (at construction time), and overriding dofindtrack() to return that track. in fact it might be mildly advantageous to rewrite that class this way. then the static_cast can be restored.",0,0.9836238622665405
669208972,1207,Paul-Licameli,2021-07-14T01:09:41Z,"good points: but trackpanelgroup is misleadingly named for historical reasons (and my fault): cellularpanelgroup would be a better name. it is now meant to cooperate with cellularpanel, a more general base class of trackpanel but also of adornedrulerpanel (the timeline above it). ""trackpanelcell"" might be better called cellularpanelcell, and ""commontrackpanelcell"" is really the common subclass of all cells, specifically of trackpanel, so ""trackpanelcell"" should be the name only for that. the guarantee that the pointer to the visited cell is really of this subclass -- that guarantee is not given by cellularpanel, but it is given by trackpanel. did i make that clear? i'm not sure i did, but that's my explanation.",1,0.7278627753257751
669209322,1207,Paul-Licameli,2021-07-14T01:10:58Z,"that is, i mean compile them irrespective of that experimental",0,0.9920720458030701
669210136,1207,Paul-Licameli,2021-07-14T01:13:37Z,also mentioned today: what about right-to-left languages? maybe the code to draw the text needs to change in that case?,0,0.9937551021575928
669211256,1207,Paul-Licameli,2021-07-14T01:17:22Z,"the static_cast was justified by the fact that this uihandle class is produced only by cell objects that are part of trackpanel, and all other cells of a trackpanel were guaranteed to be derived from commontrackpanelcell.",0,0.9938062429428101
669211508,1207,Paul-Licameli,2021-07-14T01:18:13Z,"or again, the static_cast could remain, if the new empty cell type is also a commontrackpanelcell.",0,0.9917710423469543
669737397,1207,vsverchinsky,2021-07-14T15:45:37Z,"no, but we definitely will need another hit text for this handle, do i need to talk to designers about that or strings will be reviewed and updated later before we start next release?",0,0.991455078125
670327277,1207,vsverchinsky,2021-07-15T10:11:38Z,"let solve this with pr related to clip names, until then i remove label from affordances",0,0.9942217469215393
670333513,1207,vsverchinsky,2021-07-15T10:20:30Z,"you are saying that there is an agreement that trackpanel should contain only entities derived from commontrackpanelcell. i've made a small research and found out that these are not the only places where such assumption is used, so i believe it would be safer to do what you said. refactoring of this, if required at all, is outside of the scope of this pr.",0,0.9849231243133545
670335173,1207,vsverchinsky,2021-07-15T10:22:50Z,"the comment above says: constants related to y coordinates in the track panel and this is not the only constant used only in trackpanel.cpp, i'd preffer to keep it here to group related things together",0,0.994724690914154
670335623,1207,vsverchinsky,2021-07-15T10:23:32Z,thanks!,1,0.8631753921508789
670337026,1207,vsverchinsky,2021-07-15T10:25:28Z,"drawclipaffordance does not have enough of context to make proper clipping, also in example with wave clips, that would lead to redundant calls",0,0.9800187945365906
670343523,1207,vsverchinsky,2021-07-15T10:35:46Z,"thanks! fixed whole drawing, should be fine now",1,0.9942823648452759
670350500,1207,vsverchinsky,2021-07-15T10:46:58Z,do you mean use {} within ternary operator? i don't think c++ allows that,0,0.9912964105606079
670351341,1207,vsverchinsky,2021-07-15T10:48:16Z,"yep, typo, thanks!",1,0.9735854864120483
670353167,1207,vsverchinsky,2021-07-15T10:51:13Z,this is to highlight affordance on hover,0,0.994310736656189
670364406,1207,vsverchinsky,2021-07-15T11:09:06Z,"this is an error, thanks. still i did some changes, which allow me to draw cursor over affordance area properly",1,0.8118575811386108
671088706,1207,Paul-Licameli,2021-07-16T09:04:31Z,"i see the change now at 6888d9006ff9286ec38e8dd1c3e3c0324240269a, but i don't yet approve that.",0,0.9938238859176636
671103855,1207,Paul-Licameli,2021-07-16T09:28:07Z,still unresolved,0,0.793069064617157
671104835,1207,Paul-Licameli,2021-07-16T09:29:34Z,"i'm sure it does, at least in c++14 and later. i have compiled lines like it.",0,0.9840823411941528
671108370,1207,Paul-Licameli,2021-07-16T09:35:11Z,i made a card for this question in the project board.,0,0.9832602143287659
671109400,1207,Paul-Licameli,2021-07-16T09:36:53Z,the correct way to do that is to override uihandle::enter. see other examples.,0,0.9943285584449768
671110431,1207,Paul-Licameli,2021-07-16T09:38:34Z,this is still unresolved,0,0.9580997824668884
671117229,1207,Paul-Licameli,2021-07-16T09:49:43Z,remove these two functions,0,0.9934050440788269
671117477,1207,Paul-Licameli,2021-07-16T09:50:07Z,*thickness,0,0.9161193370819092
671119264,1207,Paul-Licameli,2021-07-16T09:53:00Z,this might be constructed also with a shared_ptr to the associated track,0,0.9940733313560486
671119411,1207,Paul-Licameli,2021-07-16T09:53:13Z,"changed base, good",1,0.970048725605011
671120456,1207,Paul-Licameli,2021-07-16T09:54:53Z,"... and then this might return non-null. it may be slightly advantageous to do that. certain click-drag-release actions query for the track the mouse is over during the drag, which might not be the same as at the click point. this information can be found when the mouse is over a vertical ruler or over a resizing area. it might as well be available too for this small rectangle.",0,0.9867022633552551
671123726,1207,Paul-Licameli,2021-07-16T10:00:18Z,"i do not approve this commit. was this change of appearance explicitly specified? to draw the zero-width selection over the affordance too? but, not do to that with non-zero-width selection? as implemented here, the line will also be stroked over the separator between stereo channels.",-1,0.5907525420188904
671126301,1207,Paul-Licameli,2021-07-16T10:04:35Z,"another point of the old implementation of the zero-width cursor is that the function drawoverlays() knows how to redraw certain simple strokes over the track panel area cheaply, without repainting everything, and existing calls to drawoverlays() after change of selection assume that the erasing of old selection and drawing of new will be done.",0,0.9887136220932007
671126888,1207,Paul-Licameli,2021-07-16T10:05:35Z,and that happens only for drawing implemented by subclasses of overlay. not trackpaneldrawable.,0,0.9938942790031433
671156327,1207,vsverchinsky,2021-07-16T10:58:46Z,what for we do need it now?,0,0.990920901298523
671195732,1207,vsverchinsky,2021-07-16T12:12:00Z,none of my compilers allow that. clang bundled with xcode 12.4 says: initializer list cannot be used on the right hand side of operator ':' msvc does not compile this as well. and minimum c++ standard version is set to c++17 in cmake (i didn't change that),0,0.9883843660354614
671209382,1207,Paul-Licameli,2021-07-16T12:30:15Z,"i'm not sure which picture i should look at there. still, if it is the correct design, the implementation should use overlay classes.",0,0.7282167673110962
671211138,1207,Paul-Licameli,2021-07-16T12:32:34Z,"when i click that link, the picture shows me a mono track, with a non-point selection -- and it id not painting over the affordance. and that behavior will happen with no other change. where is there a picture specifying a change for drawing of point selection? and also showing a stereo example?",0,0.9860087037086487
671214266,1207,Paul-Licameli,2021-07-16T12:36:46Z,"for instance, if you click in one track to select, then drag the mouse into another track, then the other track also becomes selected. this happens not only if the mouse drags into the waveform area, but even if it drags into the vertical ruler or control area. it should happen also if the mouse drags into the new empty cell. so the empty cell should report which track it is associated with. this may not be a very important case to fix, that anyone will notice. however, it is very easily implemented, and makes behavior a bit more consistent, so i say, do it.",0,0.9505854845046997
672271568,1207,Paul-Licameli,2021-07-19T12:55:48Z,"you are right, but nullptr will work instead of {}, and we should prefer that brevity and non-repetition of type information.",0,0.9861114025115967
672338180,1207,vsverchinsky,2021-07-19T14:16:05Z,does not compile either: non-pointer operand type 'const std::weak_ptr ' incompatible with nullptr,0,0.991452693939209
672587955,1207,vsverchinsky,2021-07-19T19:56:03Z,"as far as i can see, changing selection involves redrawing anyway (i didn't add any line to invoke redrawing), so from that perspective i don't see difference. right now i don't see solid solution for solving this issue with overlays, i can come up only with workarounds.",0,0.8536694645881653
672815010,1207,Paul-Licameli,2021-07-20T05:25:36Z,"is there a reason you can't implement the change in this file, rather than in trackpanel?",0,0.9932460188865662
672815319,1207,Paul-Licameli,2021-07-20T05:26:35Z,oh well,0,0.881588876247406
672815664,1207,Paul-Licameli,2021-07-20T05:27:35Z,"now it's resolved, thanks! i see you copied the implementation of selecthandle's double click, which still has one of the unfortunate typeswitches, but that can be fixed later.",1,0.9920719265937805
672817051,1207,Paul-Licameli,2021-07-20T05:31:28Z,"it may be a problem that we do too much unnecessary redrawing and should figure out how to do less of it. i don't see why you can't have the editcursoroverlay dynamic_cast to tack affordance cell types and then that's not null, then draw over the cell, just as with trackview.",0,0.9568108916282654
672817236,1207,Paul-Licameli,2021-07-20T05:31:59Z,approved this commit,0,0.954931914806366
672819112,1207,Paul-Licameli,2021-07-20T05:36:48Z,this dynamic cast could safely be static instead. wavetrackaffordancehandle can assume that it is only created by hit-tests on affordance areas of wave tracks.,0,0.9924209713935852
672819389,1207,Paul-Licameli,2021-07-20T05:37:36Z,thanks for this commit,1,0.8705613613128662
672819514,1207,Paul-Licameli,2021-07-20T05:37:56Z,i approved this commit,0,0.9325574636459351
672901673,1207,vsverchinsky,2021-07-20T08:07:40Z,"then the only reason for having a class for affordance cell (which is required to be a commontrackcell now) would be to detect it's type with dynamic_cast (or to check for wavetrackaffordancecontrols and notetrackaffordancecontrols separately). but when drawing is done in channelgroup, we don't need neither of these (separate class, type check).",0,0.9924393892288208
672913037,1207,vsverchinsky,2021-07-20T08:23:34Z,"i don't like dymamic_cast, but for me it's a general rule to use it when downcasting is required, it spots places where refactoring may be needed.",0,0.6990513801574707
674899986,1207,Paul-Licameli,2021-07-22T15:10:37Z,"this is not sufficient reason not to make the affordance cell class. when i rebase my long branch onto the part of affordances already merged, and resolved conflicts, i needed the new common class for other reasons. the code in trackpanel may be simpler, avoiding casts, but that also does not address the possible performance problems. short answer: i still have my doubts about moving the drawing. it may prove to be better this way. but, i also don't want to delay merging this, and the appearance is right. therefore: don't delete the lines above, but comment them out, as the possibly useful alternative way of drawing the cursor, which we may want to use again in future.",0,0.9125619530677795
674921133,1207,Paul-Licameli,2021-07-22T15:30:19Z,"spelling, ""navigation""",0,0.9937248826026917
674923652,1207,Paul-Licameli,2021-07-22T15:33:23Z,very good: you found out that the right-click case needs handling too. maybe just comment `right-click`,1,0.9687724113464355
674935280,1207,Paul-Licameli,2021-07-22T15:47:25Z,this is a large block of moved code. it used to happen in the click. i'm not sure how i reach it in the debugger now. can the commit comment explain the purpose of this move?,0,0.9811136722564697
674937142,1207,Paul-Licameli,2021-07-22T15:49:32Z,"more is happening here than the routine changes needed elsewhere for the distinction of the two indices. if it were me, i might make two commits. rather than that, add more explanation to the commit comment about the intention.",0,0.9916545152664185
674937374,1207,Paul-Licameli,2021-07-22T15:49:48Z,more commit comments about this.,0,0.9903308153152466
674940702,1207,Paul-Licameli,2021-07-22T15:53:30Z,"i disagree with that general rule. static_cast is appropriate instead of dynamic_cast, when you have good reasons to tell the compiler, ""trust me, i can prove that the check is not necessary."" dynamic_cast is also justifiable sometimes.",0,0.8779329657554626
750178462,2121,Paul-Licameli,2021-11-16T11:33:11Z,"by eliminating utf8ctowx, are you requring that tag strings to be canonicalized into utf-8 already, or requiring them just to be ascii strings? they are all ascii in practice (i just had to review them all). it is worth a comment. you know i like to say things with type disctinctions where i can. if we were using c++20, i would use std::u8string_view instead of std::string_view. not having c++20 and char8_t, what can we do? maybe at least make a different type alias to make the disctinction in function declarations, thought we won't have type checking by the compiler.",0,0.9536256194114685
750178577,2121,Paul-Licameli,2021-11-16T11:33:19Z,"by eliminating utf8ctowx, are you requring that tag strings to be canonicalized into utf-8 already, or requiring them just to be ascii strings? they are all ascii in practice (i just had to review them all). it is worth a comment. you know i like to say things with type disctinctions where i can. if we were using c++20, i would use std::u8string_view instead of std::string_view. not having c++20 and char8_t, what can we do? maybe at least make a different type alias to make the disctinction in function declarations, thought we won't have type checking by the compiler.",0,0.9536256194114685
750204812,2121,Paul-Licameli,2021-11-16T12:06:15Z,i'm taking this whole file on trust. are there any differences from the original i should know? as there were with tochars?,0,0.9628700613975525
750206466,2121,Paul-Licameli,2021-11-16T12:08:37Z,"""not matching the pattern""",0,0.9602072834968567
750206711,2121,Paul-Licameli,2021-11-16T12:08:59Z,"""too""",0,0.9643995761871338
750208447,2121,Paul-Licameli,2021-11-16T12:11:23Z,"""signed"" (in 4 places) ""singed"" means ""burned"" -- which you could also say as ""charred"" :-)",0,0.5371232032775879
750209264,2121,Paul-Licameli,2021-11-16T12:12:33Z,"(and it rhymes with ""cringed"")",0,0.9870612621307373
750212179,2121,crsib,2021-11-16T12:16:37Z,this time it is just the latest release of the library!,0,0.9915504455566406
750214047,2121,Paul-Licameli,2021-11-16T12:19:15Z,`unsigned(c) - '0'` ? i'm paranoid of signed char now.,-1,0.6984485387802124
750222814,2121,Paul-Licameli,2021-11-16T12:30:48Z,"i think you don't need `- 1`. you treat the last safe digit in the second loop below instead of the first. not wrong, but is it too much caution?",0,0.9728003144264221
750222917,2121,crsib,2021-11-16T12:30:56Z,"i don't actually think that char8_t implies any checks on encoding. however, we use expat, and expat seems to convert the output to utf8 internally. so specifically for this case, i imply utf8, and that is what originally implied. the utf8 allows to safely compare to ascii strings given that all the symbols are from the first half of the table. this covers audacity needs for 100% when working with tags and names. for attribute values - we explicitly convert from utf8 to wxstring where needed.",0,0.9855704307556152
750223873,2121,crsib,2021-11-16T12:32:07Z,probably `std::deque`? it can be more efficient on some platforms,0,0.9932328462600708
750225781,2121,Paul-Licameli,2021-11-16T12:34:38Z,this if-else is redundant with line 74,0,0.9914759397506714
750229472,2121,crsib,2021-11-16T12:39:21Z,"i'm pretty sure that this will generate the same code because of integer promotion rules. [a link] can do it you way, no probs :-)",1,0.9858450889587402
750229756,2121,Paul-Licameli,2021-11-16T12:39:38Z,should this be `std::is_signed_v ? static_cast ( std::numeric_limits ::max() / 2 + (isnegative ? 1 : 0)) : std::numeric_limits ::max()`,0,0.9939725995063782
750234840,2121,crsib,2021-11-16T12:44:52Z,"i want to keep the consistent overflow checks. i.e. for uint8_t digits10 is 3, but 257 is an overflow. so we allow to parse ""57"" quickly but give more caution while parsing ""157"" because we expect that it can be ""557""",0,0.9857471585273743
750238413,2121,crsib,2021-11-16T12:48:29Z,"hmm, thank you for pointing out, line 74 is redundant actually! i want `if constexpr` here exlicitlely.",1,0.9863641858100891
750244438,2121,Paul-Licameli,2021-11-16T12:54:38Z,"is it really 3, not 2? see immediately under ""example"" [a link]",0,0.9938563704490662
750246737,2121,crsib,2021-11-16T12:57:07Z,"hmm, could be a bit faster, yes!",0,0.8795468807220459
750249896,2121,crsib,2021-11-16T13:01:05Z,"hmm, yes, you are completely right!",1,0.7888118028640747
750266429,2121,Paul-Licameli,2021-11-16T13:22:05Z,"certainly it's safe when a tag is ascii, and all of them are. but i'm asking, are we _requiring_ them to be ascii now that you remove utf3ctowx ? you may miss my point about char8_t -- it is that, where a string or string_view is required to be utf8 encoding, it would be good to say that with one type, and where required to be ascii, to say that without another type, and it would be best if the types do not implicitly interconvert, so the compiler will help us catch misuses.",0,0.9849125146865845
750277735,2121,Paul-Licameli,2021-11-16T13:35:11Z,"i thought `deque` deals with big pages. existing projectfileioregistry (alias xmlmethodregistry ) registrations are maybe too few to justify it, and they happen only at startup. whereas, the lookups into the map may be many, and we want all the savings we can find during deserialization. the lookups may not really be many, yet, but xmlmethodregistry may be reused for many more fields later.",0,0.9820122718811035
750278915,2121,Paul-Licameli,2021-11-16T13:36:35Z,"not just faster, but correct. it was wrong without `/ 2`. you want overflow of the absolute value of the signed value at a lower threshold than with unsigned.",0,0.9728819131851196
750284456,2121,crsib,2021-11-16T13:42:54Z,"we can't even do it, because expat will always output utf8 encoded string. the safest assumption is that all std::string are utf8 encoded to be fair.",0,0.9830499291419983
750314906,2121,Paul-Licameli,2021-11-16T14:15:46Z,"temp > maxvalue is useless in the unsigned case. temp < result is an insufficient check for overflow! try it for example with resulttype as unsigned char, and the string ""724"". you will get 212 and no error detected. please review another suggested commit from me to fix this.",0,0.9556076526641846
750320590,2121,Paul-Licameli,2021-11-16T14:21:24Z,"sorry, i was wrong, because the template argument is ` ` not ` `",-1,0.9905969500541687
750322072,2121,Paul-Licameli,2021-11-16T14:22:52Z,"but the original was wrong too, because the cast to unsignedresulttype should be done before adding 1 ! (maybe it works, but the small change technically avoids actual overflow in the computation of maxvalue itself)",0,0.970984935760498
750350620,2121,crsib,2021-11-16T14:50:27Z,"yes, i rewrote it correctly",0,0.9886224865913391
750351568,2121,crsib,2021-11-16T14:51:21Z,"hmm, it will, but probably not for the `uint64_t`, let me think. definitely works for `uint8_t`: [a link] we can compile it out by if constexpr, but i don't think if it really matters though",0,0.9649550318717957
750356412,2121,Paul-Licameli,2021-11-16T14:55:54Z,"""text""",0,0.9915151596069336
750356878,2121,Paul-Licameli,2021-11-16T14:56:18Z,"""a number of get overloads""",0,0.9766026735305786
750359433,2121,Paul-Licameli,2021-11-16T14:58:41Z,"""uninitiallized""",0,0.9874722361564636
750361227,2121,Paul-Licameli,2021-11-16T15:00:27Z,isn't string_view cheap to pass by value?,0,0.9870389103889465
750370636,2121,Paul-Licameli,2021-11-16T15:09:43Z,"you use noexcept a lot. what is your understanding of the usefulness of it? my understanding is that noexcept is mainly useful for a few special functions like constructors, destructors, moves, and swaps so that standard library containers and algorithms can sometimes produce more efficient specializations. that is, where something like this might occur: [code block] but all these accessors, even if they don't ever throw, are unlikely to bring any such benefit by having the annotation.",0,0.9620552659034729
750381700,2121,Paul-Licameli,2021-11-16T15:20:25Z,"you just overloaded one function name ""get"" for the functions without default values. why not do the same for this other series? overloading one name makes nice uses of visit of a variant possible, with a simple generic lambda, as i did in this commit in master. 3acbcb4c2d8ada1e74991be79ecb3844568bcc0a",0,0.9853648543357849
750385688,2121,Paul-Licameli,2021-11-16T15:24:10Z,"as i showed in commit 3acbcb4c2d8ada1e74991be79ecb3844568bcc0a in master, we can use variant, with some restrictions. use `get_if` not `get`.",0,0.9946028590202332
750390367,2121,Paul-Licameli,2021-11-16T15:28:34Z,`std::is_signed_v ` is false: [a link] so maybe you should do like the standard library?,0,0.9948835968971252
750411836,2121,Paul-Licameli,2021-11-16T15:48:38Z,"unused expression, and incorrect result!",-1,0.9689958691596985
750418726,2121,Paul-Licameli,2021-11-16T15:55:20Z,maybe cast to unsigned and express this with one bitwise &,0,0.9898372292518616
750420153,2121,Paul-Licameli,2021-11-16T15:56:42Z,this entire source file makes me want to find a nicer rewrite with variant and visit and less repetition... but not now,-1,0.8596583604812622
750430536,2121,crsib,2021-11-16T16:07:05Z,it is,0,0.9914257526397705
750436381,2121,crsib,2021-11-16T16:12:58Z,for two reasons: 1. it's a part of contract for the user of the interface. similar to `const`. if i see `noexcept` - i expect that i don't have to handle the exception. 2. it impacts the code generation even more than const. ([a link],0,0.9811002016067505
750438879,2121,crsib,2021-11-16T16:15:32Z,i'm not sure if i understand what you mean. get(bool&) and getbool(bool) behavior is completely different.,-1,0.7681323289871216
750439405,2121,crsib,2021-11-16T16:16:02Z,"sure, why not!",0,0.4990353286266327
750439522,2121,crsib,2021-11-16T16:16:10Z,ooops,-1,0.9803285002708435
750442507,2121,crsib,2021-11-16T16:19:12Z,"well, this will only replace switch by mtype to switch by variant::index. i expect the compilation speed to be much worse in the case of a variant though.",0,0.9862848520278931
750452184,2121,crsib,2021-11-16T16:28:56Z,"there will be a huge set of nested ifs by a type, won't it? so the amount of code will be roughly the same, the compilation speed will be much worse though. get can be rewritten easily using a template, but again, the cost will be the compilation time.",0,0.875163733959198
750454812,2121,crsib,2021-11-16T16:31:46Z,"(you know, like) [code block]",0,0.990617573261261
750480476,2121,Paul-Licameli,2021-11-16T16:58:54Z,"i notice this change to the call to writeattr. (only to this call.) but the function xmlwriter::writeattr was not changed. there is still an implicit construction of a wxstring each time it is called. did you mean yet another change of arguments, to take std::string_view? this might squeeze some more performance out of serialization. but this pr is about the deserialization.",0,0.9860286116600037
750482515,2121,crsib,2021-11-16T17:01:09Z,"well, this is a mistake :-( i do, but not with this pr",-1,0.9967859983444214
750484914,2121,Paul-Licameli,2021-11-16T17:03:46Z,"instead of naming the overloads taking a default value as getbool, getint16, ... they might all be called get, but then a non-deduced template parameter would be needed when the default is not specified, thus get (). that might be an extra bother to type, but if for some reason you wanted these functions in a variant visitor, there would be a uniform syntax get () for some t. well never mind. i'm now reading how these functions are used in practice in a later commit.",0,0.9798081517219543
750490877,2121,Paul-Licameli,2021-11-16T17:10:31Z,is this a not always correct assumption that sizeof(long) is sizeof(int32_t)?,0,0.9886198043823242
750505433,2121,crsib,2021-11-16T17:27:26Z,the compiler replaces it with something like `(value - min) < (max - min)` if the resulttype is smaller than int64_t and simply compiles out this check if resulttype is int64_t. i feel like the direct comparison here expresses the intention better both for the reader and for the compiler.,0,0.9900975227355957
750507449,2121,crsib,2021-11-16T17:29:41Z,"on our platforms - yes, but let me rewrite it in a safer way.",0,0.9908764958381653
750508446,2121,crsib,2021-11-16T17:30:53Z,"hmm, i've looked below, we convert it to `int` later on",0,0.9787390828132629
750510604,2121,crsib,2021-11-16T17:33:27Z,"actually, previous code could lead to an undefined value in viewinfo.vpos. `tolong` docs state `false if the string does not represent a valid number in the given base (the value of val may still be modified in this case).`",0,0.9934858679771423
750515070,2121,crsib,2021-11-16T17:38:57Z,i can rename get to `tryget` if you want :-) this will allow to name this set of functions as simply `get` then.,1,0.9225072264671326
750516792,2121,crsib,2021-11-16T17:41:04Z,"just to clarify - i've tried to keep the diffs as small as possible, and i guess it was your intention as well when you were extracting this code into a library.",0,0.9913937449455261
750518936,2121,crsib,2021-11-16T17:43:46Z,"what's worse, now i see that in some cases (see `zoom` nearby) the original code had undefined behavior and i'm no longer sure that my changes are equivalent. i think i will go ahead with that tryget refactoring, this will force me to rewrite all such code as `a = value.get(a)`.",-1,0.9358626008033752
750663472,2121,Paul-Licameli,2021-11-16T21:09:04Z,"and yet isnt there generation of code to detect an exception trying to escape the scope, and forcing a call to terminate instead? my understanding is that this is required by the standard and is not free. see also the mention of table implementation at the end which seems to be questioning what scott said.",0,0.9900239109992981
750664829,2121,Paul-Licameli,2021-11-16T21:11:09Z,"i think you could just call them all get and rely on overload resolution, but maybe you would not want to. or maybe get_or? (see std::optional::value_or)",0,0.9886239767074585
750666165,2121,Paul-Licameli,2021-11-16T21:13:07Z,"who cares, we will be at c++20 with modules speeding up our builds next month. right after the similarly easy replatforming. yeah.",-1,0.45273327827453613
750667658,2121,Paul-Licameli,2021-11-16T21:15:30Z,cool. well at least one compiler.,1,0.9722046852111816
750673307,2121,Paul-Licameli,2021-11-16T21:24:23Z,"i like avoidance of repetition where i can get it with templates, with its advantages for maintainability. maybe i should care more about build time. but you know... lisp programmers know the value of everything and the cost of nothing. substitute meta for lisp",0,0.5226991772651672
750683088,2121,crsib,2021-11-16T21:39:36Z,"templates have a significant cost attached. they are slow to compile; they bloat the executables and libraries. in this case, having all the internal of the class exposed seems a bit much to me. there are places where they are extremely helpful, but i really don't think that this is the one.",-1,0.7768496870994568
750685706,2121,crsib,2021-11-16T21:43:54Z,"i've checked it over clang, msvc, and gcc. all three generated a single comparison instruction here and compiled out the int64_t case.",0,0.9895238280296326
750688783,2121,crsib,2021-11-16T21:48:39Z,overloading with reference and value type doesn't really play well.,0,0.7608540654182434
750699351,2121,crsib,2021-11-16T22:05:32Z,"only if the compiler sees that there is a potentially-throwing expression, and unlike throw() noexcept is not required to generate unwinding code at all. it may do it, though. in our case, as we build loads of shared libraries, the only case the compiler can know that for sure is if we correctly mark exported methods as noexcept. btw cppcoreguidelines e.12 is ""use noexcept when exiting a function because of a throw is impossible or unacceptable""",0,0.9660645723342896
751127787,2121,Paul-Licameli,2021-11-17T10:57:37Z,should you shrink the default to be sure the operating system doesn't grab a second 4k page that is mostly wasted?,0,0.9834681749343872
751130788,2121,Paul-Licameli,2021-11-17T11:01:44Z,why not just memcpy?,0,0.9847078323364258
751134680,2121,Paul-Licameli,2021-11-17T11:06:44Z,there is no check of the return value of readvalue!,0,0.9829959273338318
751134937,2121,Paul-Licameli,2021-11-17T11:07:03Z,ditto,0,0.9754701256752014
751143337,2121,Paul-Licameli,2021-11-17T11:19:00Z,"""handler""",0,0.9836646914482117
751153283,2121,Paul-Licameli,2021-11-17T11:32:49Z,xmlattributevalueview.h,0,0.9917062520980835
751155116,2121,Paul-Licameli,2021-11-17T11:35:23Z,i like the encapsulation of the isgoodint tests and similar now,1,0.9452415108680725
751159254,2121,Paul-Licameli,2021-11-17T11:41:07Z,this line made me look here and check the rules for copying of unions [a link],0,0.9927005767822266
751162357,2121,Paul-Licameli,2021-11-17T11:45:25Z,"squash the commit that made this change with the previous, to keep buildability of all commits in the branch",0,0.9941439032554626
751165090,2121,Paul-Licameli,2021-11-17T11:49:25Z,the skipping of empty tags was not preserved,0,0.9927011728286743
751171706,2121,Paul-Licameli,2021-11-17T11:58:58Z,i notice a few case insensitive comparisons in the old code. maybe it doesn't matter. some of the other ones are only about very old file formats.,0,0.9443287253379822
751172865,2121,Paul-Licameli,2021-11-17T12:00:44Z,"wait, you did take care of case-insensitive comparisons. but, you missed one of the old wxstricmps, above.",0,0.9750568270683289
751177260,2121,Paul-Licameli,2021-11-17T12:06:53Z,"i think you need a pop-front of mattrs to preserve this old behavior now, skipping ""filename"" before examining the rest. did you test importing of an audacity 2 file?",0,0.9888789653778076
751197669,2121,crsib,2021-11-17T12:35:08Z,"i'm not sure if i fully understand your concern. in case of a page fault, os always will fetch more than one page from the swap. in case the memory read can be satisfied from ram there is a balance of how many cache lines we are willing to waste for the buffer purposes vs the cost of reading data. 4k is usually a good compromise, but the optimal performance for sqlite reader proved to be around 32k, otherwise, the cost of reading itself reduced performance noticeably. speaking of how virtual memory is allocated the page size is rarely relevant too. and we have no control over it anyway, most likely an allocation will occupy the adjacent pages. `fread` buffer size is 4k by default in microsoft crt, 8kb on glibc. please keep in mind, that in our configuration sqlite does not use memory-mapped io, reading from disk usually is not implemented via memory mapping.",-1,0.5897178053855896
751212938,2121,crsib,2021-11-17T12:55:10Z,"this class was written to avoid the `memcpy`, specifically because memcpy was the number one hot spot. this would be odd to use it here. both on arm64 and x86(-64) this code will generate a single instruction on all the compilers we use. this code remains safe for older arm cpus. however, it was noted that msvc fails to optimize `memcpy` sometimes.",0,0.9862446188926697
751216894,2121,crsib,2021-11-17T13:00:10Z,as with the restructuring you do - i had no intentions to fix all possible issues with the original code. the `lastread` was not checked either.,0,0.988149106502533
751219015,2121,crsib,2021-11-17T13:02:44Z,i will squash it before merging,0,0.9915071129798889
751224588,2121,crsib,2021-11-17T13:09:55Z,fixed!,1,0.8815674781799316
751225858,2121,Paul-Licameli,2021-11-17T13:11:29Z,still have a comment typo,0,0.9165278077125549
751226156,2121,crsib,2021-11-17T13:11:51Z,"thank you pointing out, fixed!",1,0.9860170483589172
751228882,2121,Paul-Licameli,2021-11-17T13:15:14Z,reference and const reference is what i should have said,0,0.9765579104423523
751229426,2121,Paul-Licameli,2021-11-17T13:15:59Z,triple cool.,1,0.9685428738594055
751236670,2121,Paul-Licameli,2021-11-17T13:24:39Z,"i was thinking of allocating the memory for a vector of 4096 chars, which will have some small memory allocaiton overhead. does the memory allocator try to page-align such big requests, and if so, is there any small advantage in shrinking the vector size just a little so that data plus overhead fits that page?",0,0.9880205988883972
751247216,2121,crsib,2021-11-17T13:37:05Z,"not this specific case. wavetrack doesn't handle ""filename"" attribute anyway, so it should be safe. i will add pop_front anyway.",0,0.9894911050796509
751255004,2121,Paul-Licameli,2021-11-17T13:46:32Z,"i like to clean up these wxunused things when i have excuse to disturb a function. just omit the argument name. or, use `[[maybe-unused]]` if you want to be very modern.",0,0.9509073495864868
751263512,2121,crsib,2021-11-17T13:56:09Z,"i don't like it either, but i've tried to leave as much of the original code as possible",-1,0.9586076736450195
751264867,2121,Paul-Licameli,2021-11-17T13:57:38Z,"i just checked again the definitions of isgoodstring and isgoodlongstring. the first had an additional check that the other did not, that a string isn't over 4096 characters and possibly from a malicious file, or so the comment said. are you intentionally removing the excessive length check? i don't see where in the pr it is preserved. see commit 7547de9 which was recent and relevant, changing the bound used for the check. although in that commit, pehaps the better thing would have been to use isgoodlongstring somewhere to avoid the check.",0,0.9820479154586792
751274098,2121,Paul-Licameli,2021-11-17T14:07:11Z,"a general comment about these xmlvaluechecker functions: some become unused, so add a commit to remove them. do they all become unused? if they don't, maybe you missed one of the needed rewrites. in each place where one of the calls to these functions was eliminated, i want to review again to make sure that some other validation is there, with tryget() not get().",0,0.9813216328620911
751278298,2121,Paul-Licameli,2021-11-17T14:11:19Z,or maybe i should not bother?,0,0.9360531568527222
751285403,2121,crsib,2021-11-17T14:18:32Z,"isgoodlongstring() only checks that string has no `\0` except for the null terminator. it probably was relevant someday, but i don't see any point in keeping it. isgoodstring() exposes some arbitrary global constraint on all the strings originating from the xml file. i'm glad it is no longer used because such constraints should be implemented in a way that informs the user about it, not simply by discarding the data during the parsing. before [a link] the situation was especially bad because projects would open differently on different platforms. my point is - i see no reasoning behind checking for null characters or why the limit of 4096 characters is used. the first check is redundant by construction. expat is a c library, and it could not produce a string with null characters in the middle.",0,0.45161473751068115
751286043,2121,crsib,2021-11-17T14:19:12Z,good point!,1,0.9930058121681213
751819819,2121,Paul-Licameli,2021-11-18T01:48:27Z,good to see this change. there are other new inclusions of xmltaghandler.h that also only need xmlattributevalueview.h in other files. fix those too if you feel like it. but it's not very important.,1,0.9767038822174072
751827747,2121,Paul-Licameli,2021-11-18T02:10:07Z,"getblob is now unused, so remove it",0,0.9950190782546997
751861865,2121,Paul-Licameli,2021-11-18T02:38:08Z,is it ok to ignore .ptr in the fromcharsresult? (this is the only place you do ignore it),0,0.9942986965179443
751913308,2121,Paul-Licameli,2021-11-18T05:19:23Z,"i thought the emptiness of this function was a bug until i stepped in the debugger and figured out that it is visited only when reading back the xml header data from projectfileio::writexmlheader which we don't really need. (but still write to avoid compatibility breaks, right?) a comment explaining that would help.",0,0.941305935382843
751922010,2121,Paul-Licameli,2021-11-18T05:43:55Z,"mstringscache is a deque, i assume because you need non-relocation of the strings that you cache in it (so that you can make string_views later). but could repeated clearing of the deque and then re-allocation in it doing some wasteful reallocations? are all pages freed when you clear()? standard says std::vector::clear() does not change capacity, but i don't see the same stipulated for deque. maybe you can keep one dummy string in it, and resize to 1 instead of clearing, if it matters.",0,0.9852501749992371
751922593,2121,Paul-Licameli,2021-11-18T05:45:27Z,"this looks correct, but i don't understand what economy it gives you. still there is one std::string construction. are you sure there are in fact even more allocations in the non-ascii path?",0,0.9742956757545471
752005989,2121,crsib,2021-11-18T08:29:38Z,"around 15-20 percent speedup. c++ standard library fails horribly when it comes to working with strings and locales (nothing new, really. it was this way since the stl was created). another approach would be to use alternative converters. it will be a bit slower in general, but much faster if there are lots of non ascii labels in the project.",0,0.6212738156318665
752023252,2121,crsib,2021-11-18T08:52:18Z,"you really don't like deque ;-) usually, the problem with deque is considered to be different: the memory costs just for one item are very high because deque allocates in large chunks. std::sting is usually around 24-32 bytes (why, libc++?. no, really, why 32 bytes?). on clang deque allocates no less the 4k, on gcc - 512 bytes, which surely fits quite a bit of strings in. even horrible msvc implementation is not a performance concern here. we have worse problems to be solved first, for example, `sequence::handlexmltag` is currently the #1 issue, because it never estimates the resulting blocks count, so `mblock.push_back(wb);` is consuming most of the time right now. still, we have a 40x speed up, and that problem can be easily addressed in a separate, much smaller, and easier to review pr. in case we ever end up having deque to be a performance problem here - the fix will be as easy as a custom allocator. and trust me - you have to write them a lot when you are fighting for the performance :-)",1,0.9533466696739197
752088347,2121,Paul-Licameli,2021-11-18T10:09:07Z,i change my mind. ignore these requests for changes.,-1,0.6002631783485413
752094757,2121,Paul-Licameli,2021-11-18T10:17:10Z,custom allocator. i was wondering if you would find use for `std::pmr::string` and some other allocator for the character data.,0,0.9920042157173157
752131656,2121,Paul-Licameli,2021-11-18T11:02:02Z,"i found nothing wrong. only this: two tests of in waveclip and commandmanager, where it's not clear to me why you substituted that for isgoodstring there but not elsewhere. but isgoodstring, we agree, was a check we just didn't need.",0,0.9816493391990662
639997120,836,crsib,2021-05-26T17:57:05Z,this should be removed too,0,0.9937753677368164
639997491,836,crsib,2021-05-26T17:57:33Z,"we need to make sure, that this is not merged",0,0.9855033159255981
640013632,836,Paul-Licameli,2021-05-26T18:15:32Z,do you mean the whole file ?,0,0.992154061794281
640015630,836,Paul-Licameli,2021-05-26T18:18:39Z,i make no comments on this file,0,0.9894547462463379
640016264,836,Paul-Licameli,2021-05-26T18:19:43Z,[a link] that documentation page says to use this cmake variable as a last resort and with great caution. are we sure this is necessary to get usable debug symbols?,0,0.991908609867096
640036886,836,Paul-Licameli,2021-05-26T18:50:01Z,"chain-call idiom is nice. the naming convention in audacity is that member functions begin with a capital letter. perhaps just delete ""set"" from each name. nothing serious.",1,0.8074085116386414
640037306,836,vsverchinsky,2021-05-26T18:50:32Z,done,0,0.8682363629341125
640042208,836,Paul-Licameli,2021-05-26T18:57:59Z,"reinterpret_cast is the cast operator of last resort. static_cast is more appropriate when a void* context argument, given back to you by a c library, must be down-cast to a real type. that applies to the other uses of reinterpret_cast in this commit. and this declaration might also read better with auto. (which you did use elsewhere.)",0,0.992436945438385
640042457,836,Paul-Licameli,2021-05-26T18:58:22Z,but thank you for not using c style casts!,1,0.8263664841651917
640044377,836,Paul-Licameli,2021-05-26T19:01:04Z,"it helps to avoid compiler warnings about unused parameters. either omit the variable name, or comment it out, or inside the function write ` exinfo; assertion; `",0,0.9922780990600586
640044670,836,vsverchinsky,2021-05-26T19:01:33Z,"[a link] this is the only option which works, known to me at least (with xcode, other generators will require another solutions)",0,0.993330180644989
640046867,836,Paul-Licameli,2021-05-26T19:05:03Z,"consider c++11 raw string literal syntax instead of piling up the \ characters: ` r""(=\)"" ` and ` r""(\"")"" ` [a link]",0,0.9932814836502075
640052516,836,Paul-Licameli,2021-05-26T19:14:28Z,what is the reason to use fixed-size strings?,0,0.9921410083770752
640056219,836,vsverchinsky,2021-05-26T19:20:32Z,to avoid using heap allocations after exception occurs,0,0.9920071363449097
640058179,836,Paul-Licameli,2021-05-26T19:23:24Z,"final is good. the class needs a few comments as to purpose, and make the habit to use doxygen commands too. at least: ` //! a short description ` or `/*! a long description */ ` before this line. i had to read audacityapp.cpp to understand its purpose: use it at startup time to initialize crash reporting. also that this object needs only a short lifetime, unlike the crashreportcontext",1,0.892033576965332
640059001,836,Paul-Licameli,2021-05-26T19:24:49Z,"a brief doxygen comment about this function at least, being the most important one in the class. also, capital naming convention.",0,0.9932098984718323
640059744,836,Paul-Licameli,2021-05-26T19:26:03Z,this is a slight abuse of the non-short-circuiting &= operator. `ok = ok && ...;` is more proper.,0,0.9540489315986633
640064763,836,Paul-Licameli,2021-05-26T19:34:16Z,"also because it is statically constructed? yet it is a static constructed in a function, not file scope, and that function is done when already starting up the application, somewhat late in the startup process.",0,0.9884560108184814
640066189,836,Paul-Licameli,2021-05-26T19:36:29Z,"is this an early enough place to initialize? is this the earliest possible place? maybe the answer to the last in fact no, but the question should be asked and your answer should be a code comment. this source file contains the actual definition of main() if you look elsewhere.",0,0.9940392971038818
640067423,836,Paul-Licameli,2021-05-26T19:38:19Z,comments should emphasize that this function is for initialization...,0,0.9950042366981506
640068872,836,Paul-Licameli,2021-05-26T19:40:43Z,"... while this function executes after a crash, and so is constrained, such as, not to allocate memory. if i understand correctly.",0,0.9853361248970032
640070682,836,Paul-Licameli,2021-05-26T19:43:32Z,"when you write a .cpp / .h file pair, it is good to make the #include of the .h file the first of all #include directives. that compels you to put all the necessary nested #include directives or forward declarations in that header, so that other source code files might also #include the header as a self-contained thing. i noticed that one version of crashreportcontext.h has the standard map header but the other doesn't, but appears to need it because you include before it in the .cpp file.",0,0.987525224685669
640073164,836,Paul-Licameli,2021-05-26T19:47:48Z,"i figured out that this function executes in the context of a crash, as also the makecommand and send member functions, and therefore do unusual things to avoid memory allocation. but these three should contain comments, to make that clearer.",0,0.98808354139328
640073807,836,Paul-Licameli,2021-05-26T19:48:53Z,this and the remaining functions do not operate under the constraints of uploadreport(). say that too in comments.,0,0.9956568479537964
640075011,836,Paul-Licameli,2021-05-26T19:50:47Z,wcscpy_s is not necessitated by crash context here. is there another reason to prefer it to string class operations?,0,0.9912001490592957
640075281,836,Paul-Licameli,2021-05-26T19:51:12Z,as above?,0,0.9936766028404236
640075396,836,Paul-Licameli,2021-05-26T19:51:23Z,as above again?,0,0.993224024772644
640076295,836,Paul-Licameli,2021-05-26T19:52:49Z,"you might use std::optional. except we are not at c++17 yet. but there is an imitation of optional in src/memoryx.h. but maybe you can't include from src/ here. hm. make a ""todo c++17"" comment.",0,0.9924307465553284
640076850,836,Paul-Licameli,2021-05-26T19:53:49Z,"explain that ""this"" is context passed back to uploadreport.",0,0.9941938519477844
640077867,836,Paul-Licameli,2021-05-26T19:55:18Z,"can you comment, or point to documentation, explaining the call signature that this function must have? for instance i don't understand ""succeeded"" just reading this.",0,0.9754012823104858
640079390,836,Paul-Licameli,2021-05-26T19:57:33Z,"final ? comments, again, about purpose? likewise for unix version. i had to read other things to understand that this class is intended for statically constructed singleton use.",0,0.9879051446914673
640081041,836,Paul-Licameli,2021-05-26T20:00:21Z,"audacity has a convention (not always very strictly followed) that non-static member variables have names beginning with ""m"" followed by a capital. (and ""s"" for static). exceptions are for pod (plain-old-data) struct classes that don't need to maintain important invariant conditions, but this isn't a class like that. yes, ""m_"" might be a better convention. i wouldn't mind encouraging that for new code.",0,0.9642109274864197
640081752,836,Paul-Licameli,2021-05-26T20:01:29Z,"i forget that ""command"" was a member variable and had to look around again. ""m_command"" might have helped. i was trying to understand how much stack or other memory might have needed allocation. now i see it was allocated at startup time.",0,0.9706351161003113
640086365,836,Paul-Licameli,2021-05-26T20:09:19Z,"i looked up the documentation of the _s family of functions, and now i wonder if we also need to bulletproof this by proper use of: [a link] ""if set_constraint_handler_s is never called, the default handler is implementation-defined: it may be abort_handler_s, ignore_handler_s, or some other implementation-defined handler. "" so i think we want to be sure abort_handler_s is never called, preventing the crash report from happening.",0,0.9804930090904236
640087178,836,Paul-Licameli,2021-05-26T20:10:28Z,what is the context in which this function runs? is it a dedicated thread? is it a signal handler?,0,0.9921796321868896
640092350,836,Paul-Licameli,2021-05-26T20:18:50Z,"as else where with &=, here too |= is abused. non-short circuiting, and not appropriate with the type of err, which is errno_t better to write `err = err || ...;` and stop after the first error if any.",0,0.95932537317276
640095452,836,vsverchinsky,2021-05-26T20:23:50Z,"lots of things could go wrong, but keeping this data in a static storage should make it less vulnerable i guess",0,0.7520738244056702
640096700,836,Paul-Licameli,2021-05-26T20:25:47Z,"i read this and i question whether this static construction captures a dangling reference to descriptor or not. is it passed by value? then you are safe, but comment so. or better, say it in code by eliminating descriptor and just using the expression.",0,0.9510246515274048
640099134,836,Paul-Licameli,2021-05-26T20:29:49Z,"mostly for this file and its header, i omit remarks i would make analogous to windows case. there are a few others to make.",0,0.9889174699783325
640100938,836,Paul-Licameli,2021-05-26T20:32:38Z,"why do you hardcode a command name here but not for windows? should the string literals be only in crashreports and not in src? if so, maybe the repetition of the string literal could also be eliminated by using a macro for the executable name that you set up in cmake. i don't like to see coincident string literals: it's fragile. define the literal once, then use a repeated symbolic name.",0,0.6007152795791626
640101174,836,Paul-Licameli,2021-05-26T20:33:06Z,comments elsewhere about the string literal.,0,0.9871670603752136
640101919,836,Paul-Licameli,2021-05-26T20:34:23Z,"i think the literal should be mentioned in only one place, as a compiler command-line macro definition supplied by cmake, then just use the macro. and perhaps not use it at all under src/ but make it private to crashreports.",0,0.985322117805481
640110131,836,Paul-Licameli,2021-05-26T20:48:22Z,i'd like this new cmakelist.txt file (and all new ones) to have comments at top explaining the purpose. perhaps in #[[ long form ]]#,0,0.9762543439865112
640122910,836,Paul-Licameli,2021-05-26T21:10:11Z,"so this defines a special library statically linked into audacity, which uses breakpad::client, which is -- shared or static? i was thinking maybe these files should just be part of src/, but then i reconsidered the special need to have an easier build-time off switch for the whole thing, so this organization may be better. so let's explain all that in comments for the next reader.",0,0.9792720675468445
640123182,836,Paul-Licameli,2021-05-26T21:10:39Z,"explain too how parts execute at startup, others in the immediate post-crash context.",0,0.9875903129577637
640123641,836,Paul-Licameli,2021-05-26T21:11:31Z,"thank you for including all the relevant files in sources, even the .h files. which are not needed to make it build, but add convenience in the ide browser.",1,0.9148681163787842
640124114,836,Paul-Licameli,2021-05-26T21:12:25Z,"this sub-directory structure for the crashreporter executable, however, feels a bit wrong to me... more in that file",0,0.5100048780441284
640127443,836,Paul-Licameli,2021-05-26T21:18:32Z,"again, a long comment at top. this builds a separate executable from audacity, which is a sister of the audacity object file in the installed tree. so i think it should be at the same level of the source tree. is there any reason that would not work? so i think top cmakelists might first visit this, which defines the crashreporter target. the crashreports library is in effect dependent on this target. not really for build purposes, but at runtime it assumes this executable is present to be called. perhaps that dependency should be encoded in the cmake relations, by having this target have a compile_define in its interface (such as, the string literal ""crashreporter"" that i mention elsewhere).",0,0.9787977337837219
640131255,836,Paul-Licameli,2021-05-26T21:23:03Z,final? comments?,0,0.989424467086792
640131527,836,Paul-Licameli,2021-05-26T21:23:33Z,move up to first line?,0,0.9934644103050232
640135270,836,Paul-Licameli,2021-05-26T21:30:48Z,"if we do use lib-strings in this executable, then you could change the return type to translatablestring, which is not interconvertible implicitly with wxstring, and that would help document the purpose of this function and raise confidence that you don't mix translatable strings with other strings mistakenly.",0,0.9927718043327332
640136204,836,gera-gas,2021-05-26T21:32:27Z,"also i think simple conditions will be have a more readable. [code block] for optimization compiler is convoling all conditions itself for each cpu model. i saw something like this in old gcc version (around of 4.6). c++ code [code block] asm code [code block] i think you can don't worry about this moment. ps: sorry for using powerpc assembler syntax in example, just very forgot x86.",-1,0.9092812538146973
640145745,836,gera-gas,2021-05-26T21:51:00Z,may be remove this repeated `if (parameterindex < parameterscount)` to something like this? [code block],0,0.9940958023071289
640156950,836,Paul-Licameli,2021-05-26T22:11:25Z,where are the catches for this and the other throw statements? could the crash reporter itself crash on bad inputs? it should not.,0,0.9711700081825256
640157063,836,Paul-Licameli,2021-05-26T22:11:38Z,catch?,0,0.9725125432014465
640158125,836,Paul-Licameli,2021-05-26T22:14:15Z,"comment that this intentionally quits the application, having done its job.",0,0.9872662425041199
640161352,836,Paul-Licameli,2021-05-26T22:21:39Z,catch?,0,0.9725125432014465
640164742,836,gera-gas,2021-05-26T22:30:21Z,"i saw you sometimes using `static` variables for store various buffers length, may be put this values into single `enum` into `crashreportcontext`? ``` enum ... { kmaxdumpapplepathlength = 4096, kmaxbufferlength = 2048 ...",0,0.9942883253097534
640165419,836,Paul-Licameli,2021-05-26T22:32:11Z,but it's constructed before the exception.,0,0.992055356502533
640166032,836,Paul-Licameli,2021-05-26T22:33:49Z,"yes, maybe that is a good point. even though this function is not one of those called after the crash.",0,0.8908522725105286
640178191,836,gera-gas,2021-05-26T23:06:51Z,"i agree with -licameli and we should dividing headers, that needed for `.h` file should included only into `.h` file and that needed for `.cpp` should be included only in `.cpp` after `#include .h`. also -licameli, , i think it will be great if we can using `path/to/file` conception in `#include` directive. that means when we have file tree (example): `src/base/base.h`, `src/modules/module_a.h` and `src/app.h`, all path in `#include` will be same for each. for example: we want to include `src/base/base.h` in `src/modules/module_a` and `src/app.h`. therefore, `#include` directive will be same for both as: [code block] of course, i understand that is need to remake all dependiency connections, but may be in father use it?",1,0.8107888698577881
640182164,836,gera-gas,2021-05-26T23:17:29Z,"-licameli `m` or `m_` usual using for coloring private class members, and `_` in end of name (google style). better if we using `s` or `s_`. for example: `static int ssomstatic` or `static int s_somestatic`, i think second case better looking with `s_`.",0,0.9502949714660645
640186051,836,gera-gas,2021-05-26T23:28:39Z,"i think need move this function into some `breakpad` folder, because i don't see a reason to declarate it in `audacityapp.cpp`, because `initbreakpad` not dependenly (not using) of various `audacityapp` constructions.",0,0.9894027709960938
640462593,836,crsib,2021-05-27T09:39:33Z,this changes when ci builds. vitaly used it for testing,0,0.9939886331558228
640487639,836,vsverchinsky,2021-05-27T10:13:30Z,"it will bring lots of dependencies into crashreports module, and initbreakpad's job is to configure environment (which is defined by application) for breakpad to run.",0,0.9790919423103333
640495647,836,vsverchinsky,2021-05-27T10:25:43Z,"makes sense, will fix",0,0.9636189937591553
640503229,836,vsverchinsky,2021-05-27T10:37:12Z,"isn't it generated by implement_app for windows target? i thought that this is a ""reasonably early"" place to initialize breakpad",0,0.9930195212364197
640507916,836,Paul-Licameli,2021-05-27T10:44:59Z,"-gas i'm not sure i understand you. but if you mean paths with ../ are bad -- though now numerous under our src/ -- then i agree with that, and my big branch misc-modules eliminates many of those. it simplifies almost all inclusions to just a file name, with no directory names, by supplying appropriate -i options on the compiler command line.",0,0.7513040900230408
640511965,836,Paul-Licameli,2021-05-27T10:51:38Z,"-gas and in fact, it would be nicer to use size_t not int, when the intention is a constant that describes an array bound. because size_t is supposed to be the type sufficient to describe the size of any contiguous array in memory. so either static constexpr size_t maxbufferlength{ 2048 }; or enum : size_t { ... (i hope we all know that notation to specify the underlying type of an enum. you need it to properly forward-declare an enum type without the enumerators.)",0,0.9261950850486755
640514413,836,Paul-Licameli,2021-05-27T10:55:32Z,"i don't understand -gas. initbreakpad() is in fact defined in another folder. audacityapp must call it. makes the point (as i also noted in comments about the cmakelists.txt files) that the breakpad folder makes a static library for audacity, and that library itself depends on other libraries. cmake variables make it easy to eliminate all of that from a build if that is desired, so audacity does not have the (transitive) dependencies on breakpad.",0,0.9762986302375793
648171483,836,Paul-Licameli,2021-06-09T10:24:51Z,"at least one more thing before merging: make sure new translated strings and i18n-hint comments are exactly as in unusedstrings.h, then delete them from there. commit that. run locale/update_po_files.sh to verify that the strings are not removed from audacity.pot. (the lines may move.). do not commit that.",0,0.9938124418258667
648187471,836,Paul-Licameli,2021-06-09T10:49:53Z,why was this needed? i'm only asking.,0,0.9751072525978088
648195605,836,Paul-Licameli,2021-06-09T11:02:52Z,perhaps use lib-string-utils for this and similar,0,0.9905891418457031
648398370,836,vsverchinsky,2021-06-09T15:00:06Z,"this line was defining _debug symbol in relwithdebinfo and minsizerel configurations, which vc++ compiler does not expect to see when include system headers",0,0.993776798248291
648459255,836,vsverchinsky,2021-06-09T16:03:12Z,done,0,0.8682363629341125
648483733,836,Paul-Licameli,2021-06-09T16:34:34Z,"i see this one isn't used in the code any more. no problem, just some extra space taken up by translation catalogs.",0,0.9630712866783142
648485506,836,Paul-Licameli,2021-06-09T16:36:59Z,this string had an i18n-hint comment that was not preserved in the cut-and-paste. that should be done. the comment must be on the line before the string. this will guarantee that we preserve this comment in the audacity.pot file in future versions. the comment helps the translator when the english string alone isn't completely self-explanatory.,0,0.9752476215362549
648487053,836,Paul-Licameli,2021-06-09T16:39:07Z,"this string was not cut and pasted exactly into the code, where ""the"" was omitted. it must be done exactly now that audacity.pot is finalized for this release. otherwise, the translations will not be found by lookup and all users will see the english string as in the code.",0,0.9932557344436646
648514181,836,vsverchinsky,2021-06-09T17:16:45Z,"i added a temproary xc macro definition to crashreportapp.cpp, also i've checked that each string in unusedstring.h has a matching string in crashreportapp.cpp (including msgctxt, spelling etc.), but still, somehow, i missed ""the"" one",0,0.8757027387619019
648587970,836,Paul-Licameli,2021-06-09T18:50:45Z,preservation of the i18n-hint comments is still not done after the recent force push.,0,0.9764570593833923
648592833,836,Paul-Licameli,2021-06-09T18:55:46Z,"i understand you need another definition of xc if you don't include lib-strings. but the ctx argument must not be ignored. otherwise, the runtime lookup of the string will not find the translation. the string and the context must be passed to the wxtranslation system. i think the macro should expand to `wxgettranslation( msg, wxstring{}, ctx )` if you rebase this work onto more recent master, you can change to one of the updated languages (dutch, hindi, ukrainian, or corsican) and test that it works.",0,0.9861785173416138
651883576,836,Paul-Licameli,2021-06-15T15:03:39Z,*intentional,0,0.9908639788627625
651883729,836,Paul-Licameli,2021-06-15T15:03:49Z,*intentional,0,0.9908639788627625
651885062,836,Paul-Licameli,2021-06-15T15:05:15Z,"this has been replaced by the intentional memory leak to ensure the handler is never destroyed, but will catch crashes even in the cleanup of other static objects.",0,0.9939278364181519
651904480,836,Paul-Licameli,2021-06-15T15:26:01Z,"comment should emphasize that this builds a separate executable, invoked by fork-exec or windows equivalent, when the main program is trapping a crash.",0,0.9889988303184509
651913537,836,Paul-Licameli,2021-06-15T15:35:53Z,"there are many ""naked news"" in this file. i won't insist on cleaning them up, in this small, separate, short-running executable. but you should know about the conventions i insist on in audacity. 1) when you heap-allocate anything derived from wxwindow, and its parent is null, then that may ""leak"" a window that gets cleaned up only when the application exits. so this looks like a bug. (but modal dialogs may have null parent windows, because they are stack allocated.)",0,0.6185508966445923
651918283,836,Paul-Licameli,2021-06-15T15:41:00Z,"2) sizer objects are not windows. this should instead be: `auto mainlayout = std::make_unique (wxvertical);` and ultimately you pass `mainlayout.release()` to setsizer below. this eliminates a suspicious naked new, guaranteeing cleanup. (it would be better if the wxwidgets function took a std::unique_ptr argument, and you used `std::move(mainlayout)`. but wxwidgets was developed for c++98 and just uses a plain pointer in the interface, while explaining in documentation that it does take over responsibility to delete it. in c++11 and later, it is much better to let the types of arguments make this clear, and that is what we try to do in functions defined in audacity.)",0,0.9841073751449585
651920540,836,Paul-Licameli,2021-06-15T15:43:29Z,"3) this is a wxwindow object constructed with a parent window, and that means its deletion is guaranteed, if the parent's deletion is guaranteed. it is not right, then, for headertext to be a smart pointer. in audacity, there is a macro `safenew` for these cases, and it simply expands to `new`. i defined that macro to help me make a textual scan for new naked-news added to the program, that need to be corrected.",0,0.9886322617530823
651925158,836,Paul-Licameli,2021-06-15T15:48:48Z,"finally, this use of new is unlike the others. it isn't ""naked"" because it is the constructor argument of unique_ptr. still i prefer not having the keyword new appear at all, and would write instead: [code block] which is also briefer to read, avoiding repetition of the type name `wxlocale`. understand that all these remarks are not just about style: they are about the right habits for writing leak-free code using idioms consistent with much of audacity. especially point 2 above. it's proper ""raii"". it means i don't have to examine later lines of code to see whether they might throw exceptions or return early before the pointer is passed along to some other owner. this completes my comments about allocations.",0,0.6656171679496765
651936150,836,Paul-Licameli,2021-06-15T16:02:00Z,"comment should say ""exception"" not ""assertion."" but the important thing is that there is a i18n-hint comment now, which will be in future updates of audacity.pot, and help the translator understand that the word means something in the technical sense of c++.",0,0.9927282333374023
651936333,836,Paul-Licameli,2021-06-15T16:02:14Z,ditto,0,0.9754701256752014
651939238,836,Paul-Licameli,2021-06-15T16:05:58Z,comment it?,0,0.9879480004310608
652032998,836,Paul-Licameli,2021-06-15T18:06:48Z,*as command-line,0,0.9946374297142029
652041607,836,Paul-Licameli,2021-06-15T18:15:58Z,"if this were a more general purpose program, you would escape "" characters in the value string, here and in the windows version of this function too, and in parsearguments() of crashreporterapp.cpp. i had to find the use of setparameters in audacity.cpp to confirm this doesn't happen.",0,0.9907649755477905
652045305,836,Paul-Licameli,2021-06-15T18:20:56Z,shlemiel the painter! :-) [a link] but it's unimportant.,1,0.995230495929718
652050003,836,Paul-Licameli,2021-06-15T18:27:49Z,good point. and that's why it's important to comment that crashreportcontext has a trivial destructor which doesn't change the memory -- not just static allocation of storage.,1,0.955981433391571
652054159,836,Paul-Licameli,2021-06-15T18:34:01Z,is there a difference between shell programs on different platforms explaining why you need the extra \ characters in stream here and not on unix?,0,0.9921672940254211
1220397608,4771,saintmatthieu,2023-06-06T21:34:24Z,also for debugging,0,0.9891856908798218
1220405402,4771,saintmatthieu,2023-06-06T21:39:11Z,i wrote that debugging code to make sure that playback of a 20s mono track yielded for me [code block] columns are `elapsed time (ms) / object address / ctor-dtor message` (see implementation of `libsampletrack::block` for more detail).,0,0.9947361350059509
1220411458,4771,saintmatthieu,2023-06-06T21:44:34Z,sorry for the inadvertent formatting ...,-1,0.9934862852096558
1220414063,4771,saintmatthieu,2023-06-06T21:46:31Z,"oj, one `clip->grabfloats(start, len);` too many ; useless but doesn't break anything.",-1,0.5976533889770508
1220417760,4771,saintmatthieu,2023-06-06T21:50:05Z,"i haven't tried this yet, but now we should be able to query not more than the amount of samples required by the playback buffer (2400 for me on windows).",0,0.991536021232605
1221362315,4771,Paul-Licameli,2023-06-07T10:38:47Z,"i would prefer a solution that does not require polluting the interface of sampletrack with any mention of caching, but instead, lift the creation of caching scope up to places where wavetrack is known, and we also construct the decorator tracks. and that must wait on my other refactoring work, part of which i asked for review yesterday.",0,0.9752928614616394
1221382539,4771,Paul-Licameli,2023-06-07T10:53:50Z,"you are thinking of double checked locking but that is considered an anti pattern now because of our-of-order execution possibilities. [a link] i think a proper solution must use these functions instead somewhere, but they are for shared pointers not weak. even the check of the weak pointer before the lock is not thread safe. the standard library requires different shared and weak pointers to maintain the managed objects control block with thread safety, yes. but races on the pointers themselves can cause undefined behavior. so really you must put a lock scope around the weak pointer. you might use the spin lock class that is already in out libraries. you might also use two, more limited lock scopes by constructing the cache outside of the lock, and only then locking and assigning. money thread might lose the race to assign non null, in which rare case, it can just release what it allocated.",0,0.9621239900588989
1221386700,4771,Paul-Licameli,2023-06-07T10:57:53Z,i misplaced my comment modifying this class in lib-wave-track is acceptable. but the new types it uses should also be defined in this library and not in the lower one.,0,0.987041711807251
1221392556,4771,Paul-Licameli,2023-06-07T11:02:46Z,"no. this will conflict seriously with other refactoring i want you to review which introduces the wide sample sequence abstraction into the mixer. and i repeat, we should seek a solution where cache maintenance is entirely internal to lib-wave-track, and control of cache lifetime is upstairs in audacity, and it is all completely non-intrusive in lib-sample-track.",0,0.8379083275794983
1221410295,4771,Paul-Licameli,2023-06-07T11:19:50Z,"this holds shared pointers to blocks, so there is no dangling pointer problem. but this might construct a cache that becomes out of date with changing sequence contents. maybe it wont matter in actual uses but comments should explain the limitation. or maybe a complete redesign of caching with have sequence maintain more state and keep consistency.",0,0.9894730448722839
1221431298,4771,saintmatthieu,2023-06-07T11:35:17Z,"currently cache maintenance is in your to-be-introduced `lib-mixer`, through still persisting `sampletrackcache`. so this proposal wouldn't be worse than what we have now (with respect to your concern). giving responsibility of cache maintenance to the consumers of `sampletrack` (e.g. `mixersource`, `spectrogramcache`) makes the problems of eviction and cache miss avoidance easy. i cannot think of a solution that easy if this responsibility were to be that of `wavetrack`.",0,0.9838275909423828
1221444925,4771,crsib,2023-06-07T11:46:01Z,"i have looked into the spinlock implementation, and it calls `yield` every other time, so it's not better. i think we need extend it with a policy, that does not `yield` at all. yielding make the spinlock at least as expensive as the `mutex`, it should be avoided in threads that have latency guarantees.",0,0.9751763343811035
1221449066,4771,saintmatthieu,2023-06-07T11:49:51Z,i wouldn't mind so much rebasing my draft on top of your branch.,0,0.9487550258636475
1221457167,4771,saintmatthieu,2023-06-07T11:56:25Z,"if that's of concern, we could define an abstract wrapper for `sampletrack` (to become `widesamplesequence`), whose implementation (in `lib-wave-track` or a new lib only `lib-wave-track` would depend on) is injected in consumers of  wavetrack` and does the cache maintenance.",0,0.9926583170890808
1221461338,4771,Paul-Licameli,2023-06-07T11:59:36Z,"a shared pointer to a structure containing the weak pointer may seem weird but then it could be updated using the standard, non-member functions specialized for `atomic >`",0,0.5323610305786133
1221462751,4771,Paul-Licameli,2023-06-07T12:00:55Z,the not-worse organization should become a positively better one.,0,0.8986294269561768
1222021571,4771,saintmatthieu,2023-06-07T18:44:18Z,"maybe. if not i don't imagine this would get in the way of time stretching, meanwhile our current caching problem is.",0,0.9530749320983887
1222047582,4771,saintmatthieu,2023-06-07T19:08:49Z,"what could be executed out of order here? according to [a link] the creation of the shared ptr is executed atomically, and all other variables before the mutex are local.",0,0.9922768473625183
1222103934,4771,saintmatthieu,2023-06-07T20:09:56Z,"you shared a link to a solution for the case where multiple threads access the _same shared_ptr object_. here a new `shared_ptr` object is created each time - in which case ""all member functions (including copy constructor and copy assignment) can be called by multiple threads on different instances of shared_ptr without additional synchronization"". ([a link]",0,0.994720458984375
1224280955,4771,Paul-Licameli,2023-06-09T13:08:13Z,"remove this unnecessary line; then, this revision of the pull request makes no changes in `lib-sample-track`, which is very good.",1,0.5647370219230652
1225623025,4771,Paul-Licameli,2023-06-10T22:21:57Z,just replacing `//` with `//!` on a brief comment line before a member variable allows doxygen to extract the comment. do that with each member of this structure and also explain `usefullength`.,0,0.9946042895317078
1225624759,4771,Paul-Licameli,2023-06-10T22:26:56Z,i had to read sequence.cpp to understand that `usefullength` is a span of sample positions not necessarily covered by the blocks. better that i could have read a comment explaining that here.,0,0.9585467576980591
1225629007,4771,Paul-Licameli,2023-06-10T22:35:18Z,slow down. you are only setting yourself up for more conflict with stuff i have to do.,-1,0.9790816307067871
1225631057,4771,Paul-Licameli,2023-06-10T22:38:08Z,this solution no longer intrudes in sampletrack but still does intrude in lib-mixer. i am not yet decided whether i like it.,0,0.7891790866851807
1225635110,4771,Paul-Licameli,2023-06-10T22:44:58Z,"""effectively returns expired() ? shared_ptr () : shared_ptr (*this), executed atomically."" okay, i learned something -- `lock()` on a `std::weak_ptr` is thread safe. my memory though is that you can't have unsynchronized usage of a `shared_ptr` object.",0,0.985552966594696
1225635720,4771,Paul-Licameli,2023-06-10T22:46:15Z,there were more naive implementations of the double checked locking pattern in older days before c++11 that were later understood to be an anti-pattern.,0,0.9786295294761658
1225639615,4771,Paul-Licameli,2023-06-10T22:56:51Z,"other related and interesting c++ things to know are the thread safety guarantees in the language specification for the first time construction of static variables inside functions, and the related `std::once_flag` defined in ` `.",0,0.9715818762779236
1228334012,4771,Paul-Licameli,2023-06-13T15:31:55Z,"as we have discussed: the decorator should also remap envelope values on the time axis, and also remap the end time, and not just pass through the calls.",0,0.9940474033355713
1228454730,4771,Paul-Licameli,2023-06-13T17:12:09Z,"if you say it's a precondition, then it should be commented where the member function is declared in the header file, preferably with the `` doxygen comment convention",0,0.9936145544052124
1229407370,4771,Paul-Licameli,2023-06-14T10:53:21Z,"yes, why not instead [code block]",0,0.992233157157898
1229409591,4771,Paul-Licameli,2023-06-14T10:55:15Z,"this reassings `mcacheholders`, recreating the complete cache stucture, each time `get` is called -- but t0 and len may vary between calls. so this is why eviction works. only sufficient cache for the request is kept. when the old value of mcacheholders is released after the reassignment, reference counts in the caches for individual blocks may drop to zero. it may work but i wonder how it might be improved.",0,0.9887863397598267
1229411562,4771,Paul-Licameli,2023-06-14T10:56:46Z,this function is no longer used,0,0.9865809679031372
1229461716,4771,Paul-Licameli,2023-06-14T11:44:27Z,"i understand better how it works now. every time you call `get` on the decorator, it goes back to the sequence and finds the blocks that overlap the range. the old cache is not yet destroyed when a new one is made. any blocks with a non-expired weak pointer to a vector of samples use that. if the underlying sequence has been changed between calls to `get`, there is no invalidation problem. the range of the request is just mapped to the new blocks.",0,0.9449228048324585
1238333002,4771,Paul-Licameli,2023-06-22T10:31:32Z,"i don't like quiet narrowing conversion from `samplecount` to `size_t` and made a point of eliminating that in many places years ago. please use `limitsamplebuffersize` which contains some assertions, and initialize `towrite` then with `{}` syntax. `samplecount` is a wide integral type used for positions in a sample stream or durations, because you can overflow 32 bits at 44.1 khz with only about 13.5 hours, unlikely but not impossible. `size_t` is sufficient for buffer sizes that fit in memory.",0,0.9770321846008301
1238340681,4771,Paul-Licameli,2023-06-22T10:39:02Z,i prefer to use c++11 universal initialization syntax '{...}' where i can for member initializers.,0,0.9923086166381836
1238346190,4771,Paul-Licameli,2023-06-22T10:43:49Z,"only the lesser of `buffersize` and `getsamplecount` is written, instead of filling the buffer up to `buffersize` with zeroes as needed. that behavior is not obvious to guess from the un-commented header file. so please comment.",0,0.9952933192253113
1238346998,4771,Paul-Licameli,2023-06-22T10:44:38Z,replace `//` with `//!` for doxygen,0,0.9941504597663879
1238349098,4771,Paul-Licameli,2023-06-22T10:46:27Z,"""double checked locking"". use that in the comment.",0,0.994702160358429
1238350721,4771,Paul-Licameli,2023-06-22T10:47:59Z,"please mention that `std::weak_ptr::lock()` guarantees atomicity, which is important to make this work without races.",0,0.9942094087600708
1238352478,4771,Paul-Licameli,2023-06-22T10:49:48Z,notice this `msamplecount` correctly does not have type `samplecount` but instead `size_t` because it is for an in-memory block.,0,0.9920209050178528
1238360853,4771,Paul-Licameli,2023-06-22T10:56:05Z,"note `as_size_t` contains an assertion that you are not narrowing, so i like it better than the unchecked narrowing.",0,0.7080193758010864
1238361338,4771,Paul-Licameli,2023-06-22T10:56:27Z,`limitsamplebuffersize` might also express this,0,0.9932928085327148
1238363608,4771,Paul-Licameli,2023-06-22T10:58:00Z,that function also guards against the case that the `samplecount` is negative. that can happen because the type is also meant to expressed signed differences of positions in audio streams.,0,0.9933351278305054
1238373819,4771,Paul-Licameli,2023-06-22T11:05:59Z,i do not like new assertions with no accompanying comments to explain why they are justified. assertions should document assumptions you are making and explain them to the user. i consider an assumption at the top of a function to be justified if the header file has a `` doxygen comment.,0,0.8076611161231995
1238374605,4771,Paul-Licameli,2023-06-22T11:06:50Z,"you need more commentary to explain `ii` and state the precondition on its legal values. then, it is understood that the burden of a guarantee of the correctness of the assumption lies not in the function but in the places that use it.",0,0.9925293326377869
1238381167,4771,Paul-Licameli,2023-06-22T11:13:46Z,but see `wavetrack::get`. you can easily copy some of that to make this function more robust. [code block],0,0.9954262375831604
1238383737,4771,Paul-Licameli,2023-06-22T11:16:19Z,"this is better than your not wholly justified `assert(false)`. instead it asserts a postcondition of `nbuffers()`. actually that's not an explicitly stated postcondition in the header, but that can and should be added easily.",0,0.9689147472381592
1238406402,4771,Paul-Licameli,2023-06-22T11:39:32Z,it seems wasteful to allocate a lot of zeroes for this case. with some more effort in `audiosegmentsampleview` the silent case might be treated differently without the allocation.,0,0.549228847026825
1238408658,4771,Paul-Licameli,2023-06-22T11:41:49Z,what's a proof that this is a save `as_size_t` ? i think it can be deduced that `len` is not more than `length`. an `assert` of that with some explanation of that deduction would be welcome.,0,0.990545392036438
1238462448,4771,Paul-Licameli,2023-06-22T12:32:32Z,rename as `channelsampleview` ?,0,0.9948508143424988
1238738373,4771,Paul-Licameli,2023-06-22T16:00:03Z,that should be `as_size_t` and there should be some comments why that is not narrowing,0,0.9939138293266296
1238741217,4771,Paul-Licameli,2023-06-22T16:02:11Z,comment why this doesn't narrow,0,0.967495858669281
1238790063,4771,Paul-Licameli,2023-06-22T16:46:16Z,i think this call (but only this one) should be changed to `getsequencestarttime` so that the cache will have the correct contents in case a smart clip has any hidden data at the left end.,0,0.9841617345809937
1238807811,4771,Paul-Licameli,2023-06-22T17:04:13Z,"i think the comment should simply say ""one per channel""",0,0.9773682355880737
1238811732,4771,Paul-Licameli,2023-06-22T17:07:16Z,some doxygen commentary please about the purpose of the class.,0,0.987695574760437
1238812133,4771,Paul-Licameli,2023-06-22T17:07:36Z,`{}` member initializer syntax?,0,0.9939152598381042
1238813349,4771,Paul-Licameli,2023-06-22T17:08:30Z,"again, use `limitsamplebuffersize`",0,0.9953887462615967
1238815527,4771,Paul-Licameli,2023-06-22T17:10:36Z,you assume `buffersize >= written` but what proves that? should there be a check?,0,0.9925415515899658
1238819419,4771,Paul-Licameli,2023-06-22T17:14:28Z,"you assume after this a post of `getsampleview`: `size() == nbuffers - ichannel` please make that explicit in header comments, and assert the post here",0,0.9946722388267517
1238822643,4771,Paul-Licameli,2023-06-22T17:17:59Z,you need only the second,0,0.9946594834327698
1238831461,4771,Paul-Licameli,2023-06-22T17:27:15Z,i recall this was some non-team member's experiment that wasn't completed see commit 8e1b084f01f97266eb843af72ec8d31045aa11fa,0,0.9882785081863403
1238833592,4771,Paul-Licameli,2023-06-22T17:29:03Z,fix indent of line 347 (new numbers),0,0.9942309856414795
1238841017,4771,Paul-Licameli,2023-06-22T17:35:59Z,"please comment that only the 0th channel of `sequence` is really used. in the interim, this still works correctly for `widesamplesequence` backed by a right channel track, which always ignores its partner. please comment in the pr that qa should test spectrograms of stereo tracks, in which there is some obvious difference of content between the channels, to be sure the correct channel's stuff is drawn in each rectangle.",0,0.9926464557647705
1238915138,4771,Paul-Licameli,2023-06-22T18:52:50Z,could use alloca for this small allocation,0,0.9939275979995728
1239371068,4771,saintmatthieu,2023-06-23T06:29:49Z,"why on this particular class? class comments are the exception in this repo, if there's a rule of thumb i'd like to know it (besides that's it's a cool class).",0,0.8287551999092102
1239388718,4771,saintmatthieu,2023-06-23T06:51:21Z,"i don't understand this comment, i think you might be referring to the time-stretching decorator, which is another pr.",0,0.9131154417991638
1239435299,4771,saintmatthieu,2023-06-23T07:13:54Z,`limitsamplebuffersize` is handy :thumbs-up:,1,0.9919803142547607
1239449516,4771,saintmatthieu,2023-06-23T07:17:54Z,thanks.,0,0.5270382761955261
1239466395,4771,saintmatthieu,2023-06-23T07:24:23Z,"i'm addressing this reluctantly, i was hoping for no debate and time spending over this. it's not only about correcting `nbuffers`, but also handling a more complex situation underneath, where `powner` can be null.",-1,0.9465190172195435
1239475904,4771,saintmatthieu,2023-06-23T07:34:46Z,"you're right, that's not good.",-1,0.7718890905380249
1239513248,4771,saintmatthieu,2023-06-23T08:13:40Z,"`as_size_t` already does the assertion, but i'm adding a comment.",0,0.9943172335624695
1239549349,4771,saintmatthieu,2023-06-23T08:49:37Z,"that'd be wrong. say we have one noisy clip starting at 0, the first second of which is trimmed. now `start` is 0, and `length` is 2s. in your proposal, the returned view would be 2s of noise. `wavetrack` has to account for trimming ; the 1st second should be silence.",0,0.9065257906913757
1239550829,4771,Paul-Licameli,2023-06-23T08:51:01Z,"comment it at least because the class is meant for use outside the library that defines it. i dont think you must comment every type defined in anonymous namespaces. if many classes dont have doxygen, thats not an excuse for improving practice now.",0,0.9822269678115845
1239556690,4771,saintmatthieu,2023-06-23T08:56:12Z,thank you.,1,0.6976000666618347
1239557572,4771,saintmatthieu,2023-06-23T08:57:05Z,"right, i never took the habit for some reason.",0,0.9784325361251831
1239562710,4771,saintmatthieu,2023-06-23T09:02:04Z,"this is based on the fact that `audiosegmentsampleview::copy` won't return more than `towrite` samples. a unit-test proves this, which i'd argue is enough ? edit: that specific unit test didn't exist, you're comment made me aware of that. now it does, though.",0,0.9900334477424622
1239596874,4771,Paul-Licameli,2023-06-23T09:29:47Z,i understand the bug fix commit and expect you will squash it after complete review.,0,0.990090012550354
1239606798,4771,saintmatthieu,2023-06-23T09:38:41Z,"`nbuffers - ichannel`, really? i have been interpreting those arguments as ""give me `nbuffers` starting from index `ichannel`"", which results in `size() == nbuffers`. an alternative interpretation that would lead to `size() == nbuffers - ichannel` is ""give me buffers from index `ichannel` to index `nbuffers` (exclusive)"", but i don't think that's the intended one, or the naming would have been another. (your implementation of `wavetrack::get` does neither, but i think it attempted the former interpretation. i'm attempting a fix accordingly.)",0,0.9905810952186584
1239617693,4771,Paul-Licameli,2023-06-23T09:48:23Z,"sorry, what i wrote was mistaken. what i was thinking was, how to prove you don't index `buffers` out of bounds. so what i should have said is, there is an unstated postcondition that `getsampleview` always returns a vector of size `nbuffers`. so it would be good to make that explicit in that function's header.",-1,0.9383749961853027
1239619435,4771,saintmatthieu,2023-06-23T09:50:13Z,"mmh, but this commit is just making use of it in some other file. in any case, if you're correct now one should care if i removed those ifs. will append a tentative commit that does that.",0,0.977099597454071
1239625677,4771,Paul-Licameli,2023-06-23T09:56:37Z,"tests are just one line of defense ensuring code quality and raising our confidence. i think they should be complemented with assertions in the program. (i mean both `assert` and also the informal statement of pres and posts and invariants.) when i write assertions it means i'm very serious about persuading the unfamiliar reader (who might be you, or future me) that the code is correct, because i was working hard at the time to convince myself first and to make more explicit the assumptions that i relied on. a test, though automated, is the weaker form of ""well it seems to work"". true, human reasoning is still fallible and tests may still catch mistakes (perhaps because of future modifications by someone understanding the code imprefectly). still -- write contracts first, i think, and a well thought contract is then a guide for writing the test cases themselves. some correspondence between test cases and formal or informal assertions in the program is a good idea.",0,0.9147802591323853
1239627978,4771,saintmatthieu,2023-06-23T09:58:59Z,can do that.,0,0.9926786422729492
1239628014,4771,Paul-Licameli,2023-06-23T09:59:02Z,"you should also remember, though, that sometimes you must use `()`. one example is initializing a vector with a size. if the element type is implicitly constructible from an int or size_t, the `{}` syntax will invoke the wrong constructor. this danger exists when a class has a constructor taking `std::initializer_list`.",0,0.9813450574874878
1239637056,4771,Paul-Licameli,2023-06-23T10:09:02Z,"did you try this case? i didn't, but i thought i deduced a problem. `waveclip::getplaystarttime()` returns `msequenceoffset + samplestotime(timetosamples(mtrimleft));` which is assigned to `clipstarttime` then we compute `clips0` as so many samples into the playable part of the clip (the unhidden part) then we pass that into `waveclip::getsampleview` as `start` and it is passed unchanged into `sequence::getfloatsampleview` but that function is interpreting `start` as relative to the start of the sequence (which doesn't know about the trimming) and that includes the left trimmed part. so doesn't this mean that the cache contains the wrong stuff, left of the correct place by a shift equal to the trim length?",0,0.9864742159843445
1239637062,4771,saintmatthieu,2023-06-23T10:09:03Z,this fix attempt relates to [a link],0,0.9944473505020142
1239637615,4771,crsib,2023-06-23T10:09:44Z,"numerous times, i have seen well-thought assertions fail on the first run.",0,0.6830431222915649
1239638587,4771,Paul-Licameli,2023-06-23T10:10:50Z,you saw my retraction of my mistaken comment of yesterday?,0,0.9540286660194397
1239639084,4771,Paul-Licameli,2023-06-23T10:11:23Z,"i said i finished review, but then i wrote some more in answer to your answers.",0,0.9917148947715759
1239639358,4771,saintmatthieu,2023-06-23T10:11:44Z,"that wasn't my intention, but i don't want to feel i have to comment every single class where not necessary. the visibility-beyond-hosting-library sounds like a good rule of thumb to me.",0,0.8229004144668579
1239643498,4771,Paul-Licameli,2023-06-23T10:16:37Z,"yes, we are fallible, but still we should value well thought assertions and make attempts at rigor. as i said, i think contracts should be a guide to what cases should be tested. or if you like the tdd approach of writing failing tests first, and then then changing the program to succeed, i think then you should write something in the contract too after those iterations. tests might be ""executable documentation"" but i like documentation in the header itself, explaining all that is important in the interface in one place.",0,0.9538438320159912
1239652779,4771,saintmatthieu,2023-06-23T10:27:14Z,"i actually found an alternative implementation, where it is obvious that `written < buffersize`, and which does not unnecessarily iterate over segments after if `written` already `== buffersize`. but i'd have complied.",0,0.9910681843757629
1239665994,4771,saintmatthieu,2023-06-23T10:42:33Z,ok. i already added a `` line to that header stating this. is that good enough?,0,0.9904837608337402
1239673937,4771,saintmatthieu,2023-06-23T10:52:06Z,"good catch! but i'm fixing it in `waveclip::getsampleview`, accounting for `mtrimleft` like `getsamples` does.",1,0.9943447113037109
1239685273,4771,saintmatthieu,2023-06-23T11:05:43Z,"i did, yes, but i still think this assertion is incorrect.",0,0.9105592370033264
1239925635,4771,Paul-Licameli,2023-06-23T14:57:34Z,i didn't mention the file banners -- good that you remembered,1,0.9399575591087341
1239929085,4771,Paul-Licameli,2023-06-23T15:00:27Z,this comment block was ignored by doxygen because it did not begin with `/*!` or `/**`,0,0.9941388368606567
1239938288,4771,Paul-Licameli,2023-06-23T15:09:13Z,"the grave accents are markdown that make text appear in typewriter font. i often use it in `` and `` when a pre/post-condition can be written formally in c++. it's less important here -- doxygen will recognize the class name and format it as an html link. the grave accents cause the link to have typewriter font too. ""blocksampleviews"" however will fail to link because it's not the exact type alias name.",0,0.9895663261413574
1239941916,4771,Paul-Licameli,2023-06-23T15:12:45Z,"you might use the `` and `` doxygen commands in this banner, so the summary html page of files has a comment about the purpose. here's the reference for all commands. [a link]",0,0.9913098812103271
1239946410,4771,Paul-Licameli,2023-06-23T15:16:59Z,"you corrected the formal statement of the assertion. thank you. `nbuffers - ichannel <= nchannels()` is still the incorrect precondition in widesamplesequence.h. my fault, but please correct it there too.",1,0.9774352312088013
1239949995,4771,Paul-Licameli,2023-06-23T15:20:28Z,just use my initials `prl:` as in many other comments,0,0.9946080446243286
1239978455,4771,Paul-Licameli,2023-06-23T15:48:07Z,"this function is not intended to work with long lengths. the argument should be `size_t`. where it is used in `wavetrack::getonesampleview`, there is a use of `as_size_t` which could use some comments.",0,0.9931859970092773
1239997878,4771,Paul-Licameli,2023-06-23T16:07:05Z,"the last `` is not quite executable as written, so if i wrote it, i would not put only variable names in grave accents and leave the statement informal.",0,0.9915061593055725
1240003352,4771,Paul-Licameli,2023-06-23T16:12:53Z,"i like the improved test! my last irritating trivial comment for today: ""fewer"" not ""less"" is better english according to the grammar books, but a lot of english speakers don't observe that usage.",1,0.9923073649406433
1241763844,4771,saintmatthieu,2023-06-26T07:42:44Z,"good that you noticed the `as_size_t` to in the end call the implicit `samplecount` ctor. it probably will never be used for more than `size_t` can represent, yet semantically this is an audio segment between two clips, which `samplecount` can help realize. (also, i'd have to change it in the other ctor for consistency.)",1,0.9500073790550232
842691225,2668,Paul-Licameli,2022-04-05T11:47:55Z,unused constant vstcmdkey no longer needs a definition,0,0.9938187003135681
842694518,2668,Paul-Licameli,2022-04-05T11:52:13Z,remove this enum with vstsubprocess,0,0.9953292608261108
842745902,2668,Paul-Licameli,2022-04-05T12:49:23Z,"my recent changes in effectmanager may make the benefits of these changes less but still not zero. after my changes, instance initialization is avoided, but still not the plugin initialization.",0,0.9904059767723083
842837621,2668,Paul-Licameli,2022-04-05T14:13:54Z,"i wonder if this incomplete old idea would be valuable later, but still then, it would make sense to implement filtering by type in one common dialog accessible in common from all four menus. so it's all right.",0,0.8707776069641113
842892916,2668,Paul-Licameli,2022-04-05T15:00:44Z,"i'm looking at experimental_effect_management elsewhere, and i think it's time to retire this experimental flag. it's not going to turn off. so remove it from experimental.cmake and remove the related bits in effectsprefs.cpp",0,0.9548214673995972
842913096,2668,Paul-Licameli,2022-04-05T15:18:19Z,"i don't believe in using `noexcept` too widely, but functions meant to be called inside a `finally` and therefore inside a destructor should have it.",0,0.9488674402236938
842915460,2668,Paul-Licameli,2022-04-05T15:20:27Z,that applies to `onpluginvalidationfinished `,0,0.9948739409446716
856141445,2668,Paul-Licameli,2022-04-22T11:32:21Z,second '#' isn't needed. add a few words about the general purpose of these files.,0,0.9938649535179138
856144242,2668,Paul-Licameli,2022-04-22T11:36:44Z,"""vice versa""",0,0.9928216338157654
856146202,2668,Paul-Licameli,2022-04-22T11:39:44Z,"when you need an abstract base class with just one virtual function besides the destructor, an alternative is just to generate the type you need from std::function: [code block] it's your choice whether you prefer that suggestion here. maybe you anticipate more functions in the interface later.",0,0.9916600584983826
856149035,2668,Paul-Licameli,2022-04-22T11:43:41Z,"is the argument never null? if so, i would prefer to use a reference to say what i mean with types, leaving no doubt in the reader's mind about that, while needing no extra comments either.",0,0.9935075044631958
856150919,2668,Paul-Licameli,2022-04-22T11:46:43Z,"""description""",0,0.9778022766113281
856154091,2668,Paul-Licameli,2022-04-22T11:51:35Z,"this yields only every 2 failed tests. i'm curious, why 2, not 1, or some other number. did some article recommend that?",0,0.9441310167312622
856159951,2668,Paul-Licameli,2022-04-22T11:58:35Z,`explicit` ?,0,0.9892055988311768
856161653,2668,Paul-Licameli,2022-04-22T12:01:12Z,would a more careful definition be [code block],0,0.9862805604934692
856162816,2668,Paul-Licameli,2022-04-22T12:02:52Z,"so i read the class to understand that it's a move-only object for raii cleanup when a socket is opened. comment that before the class. perhaps too, ""unique_socket_guard"" would be a name that suggests that it is move-only.",0,0.9937291145324707
856166482,2668,Paul-Licameli,2022-04-22T12:08:18Z,perhaps comment `// todo c++20: use std::byte`,0,0.9920806288719177
856168238,2668,Paul-Licameli,2022-04-22T12:10:52Z,this line should be added in the same commit that defines the source code files in lib-pic. not later.,0,0.9948018789291382
856169882,2668,Paul-Licameli,2022-04-22T12:13:18Z,comment likewise,0,0.9874413013458252
856170400,2668,Paul-Licameli,2022-04-22T12:13:58Z,can the second argument be a reference?,0,0.9928092956542969
856170921,2668,Paul-Licameli,2022-04-22T12:14:40Z,can this be a const reference or a `*const`?,0,0.9942101240158081
856171314,2668,Paul-Licameli,2022-04-22T12:15:18Z,can this member be const? it's always good to add const when you can to help the reader understand what parts never vary after construction.,0,0.991504967212677
856175350,2668,Paul-Licameli,2022-04-22T12:21:01Z,"indeed this assumes callback isn't null, so i would rather have a reference argument then",0,0.9916173815727234
856177354,2668,Paul-Licameli,2022-04-22T12:23:47Z,what feature in wxwidgets was needed? say in the commit comment,0,0.9952462315559387
857198166,2668,Paul-Licameli,2022-04-25T00:35:16Z,"toutf8 used here, utf8_str used instead in the following function -- made me check in the wxwidgets headers to be sure they were not really different. why not simply use utf8_str as in the existing function making the differences between the two functions less?",0,0.9917261600494385
857199685,2668,Paul-Licameli,2022-04-25T00:47:13Z,"while you are touching this class, please do these things too: - use in-class member initializers so that the body of the constructor shrinks to nothing. - make sure no other members of non-class types are uninitialized. - remove the friend declaration, because long-distance friendships are bad for understanding code. make load() and set() public so you can.",0,0.9864034652709961
857200783,2668,Paul-Licameli,2022-04-25T00:55:36Z,this include becomes redundant when plugindescriptor.h is separated,0,0.9941164255142212
857441676,2668,Paul-Licameli,2022-04-25T09:40:08Z,"what were you intending the directory structure of the new library to mean? why not just leave it flat? the `internal` sub-directory and the parent directory are in fact in a dependency cycle because of the #include above. so as a whole the subdirectory is not lower-level. however, at the finer level of source code files, there is no dependency, which is good. just leave a flat folder structure, i say.",0,0.9856210350990295
857447545,2668,Paul-Licameli,2022-04-25T09:46:58Z,"- callback is assumed non-null inside the function -- therefore, make it a reference argument - id is a ""naked"" int. i would write a small channelid class wrapping the int and preventing implicit conversions to and from int. probably it would need operators == and != and maybe < (or just <=> if we had c++20)",0,0.9915424585342407
857448756,2668,Paul-Licameli,2022-04-25T09:48:19Z,"if channel becomes a reference instead of pointer, remember to pass `std::ref(channel)` to avoid the copy constructor.",0,0.9937134385108948
857462566,2668,Paul-Licameli,2022-04-25T10:04:25Z,what is the purpose of the unique_ptr making another layer of indirection? could you just use std::thread and use `joinable` to test for its activity instead of `operator bool` ?,0,0.9928537011146545
857465421,2668,Paul-Licameli,2022-04-25T10:07:53Z,"is there no ""un-binding"" needed later for inet?",0,0.9927986860275269
857473523,2668,Paul-Licameli,2022-04-25T10:18:03Z,"`man poll` tells me that -1 is a possible return value, indicating an error, stored in `errno` (which is a macro, not really a variable, on my system: i suppose they addressed the thread safety problem). so please make the check more exhaustive.",0,0.9926543235778809
857480996,2668,Paul-Licameli,2022-04-25T10:27:39Z,"on windows this is a possibly-failing constructor but there is no indication to the caller of the failure. either you need a boolean method to test for success, or should throw an exception. same applies to the server, on windows only.",0,0.9935681223869324
857481739,2668,Paul-Licameli,2022-04-25T10:28:30Z,ditto question use of `unique_ptr`,0,0.9747187495231628
857482642,2668,Paul-Licameli,2022-04-25T10:29:46Z,"... oh i see, but then createchannel() can indicate error. ok then.",0,0.9761177897453308
857485844,2668,Paul-Licameli,2022-04-25T10:33:53Z,the ipcserver object itself is not thread safe -- i mean `createchannel` could race to assign `impl::mworker` if two threads called it. maybe that is worth a comment.,0,0.9896931052207947
857486974,2668,Paul-Licameli,2022-04-25T10:35:19Z,"as with server, this initialization is not itself a thread safe function",0,0.9928601384162903
857490010,2668,Paul-Licameli,2022-04-25T10:39:26Z,"return void and throw, or return boolean for error? you made inconsistent choices for client and server. and client, unlike server, makes no error if mimpl failed initialization on windows. i think it is eaiser to make both return boolean and not throw.",0,0.9111183285713196
857490714,2668,Paul-Licameli,2022-04-25T10:40:19Z,"ditto use of a reference for the callback, and `std::ref`",0,0.9911841750144958
857500082,2668,Paul-Licameli,2022-04-25T10:52:36Z,argument `id` is not used,0,0.9928879141807556
857505976,2668,Paul-Licameli,2022-04-25T11:00:38Z,in fact the unique use of onconnect in bufferedipcchannel.cpp is always passing non-null (`this`).,0,0.9937060475349426
858065531,2668,Paul-Licameli,2022-04-25T22:10:01Z,"too much is happening in the commit ""pluginvalidator interface"" with too few code and commit comments. i am having trouble understanding it. the second line of the commit comment says ""code path that is used with ""bfast"" flag in checkforupdates was extracted into initializeplugins function"" and that explains this function. it might help to separate a commit that does only this part. perhaps ""revalidateplugins"" is also a clearer name for what this does.",-1,0.8789936900138855
858070813,2668,Paul-Licameli,2022-04-25T22:20:24Z,"four new abstract classes are introduced in the commit ""pluginvalidator interface"" but i'm not sure what they really do, or how they are meant to be used, from reading their names alone and from the lack of comments. i must study other code to understand.",0,0.7976870536804199
858163257,2668,Paul-Licameli,2022-04-26T01:51:29Z,"i am beginning to understand this new file. if you are here, you are in the main thread of a child process. the serve() loop detects requests and sends responses, while the overridden functions do work on another thread. nothing ever blocks inside serve(), which makes it a busy loop, in the admittedly unlikely event that it handles its requests faster than the responses arrive. whereas `ondataavailable` contains an assertion that is not provable from what i read here, and migh fail with unusual timing, unless there is more i don't understand yet about the main process. i would be more satisfied to see: - a std::mutex and associated std::condition_variable. - serve() waits [a link] for the condition: `!running || (request && channel)` - onconnectionerror, ondisconnect, an ondataavailable may make the condition true, so they call [a link] - serve() releases the mutex only after moving from mrequest. - ondataavailable holds the mutex while assigning to mrequest - after taking the mutex, it also waits on the condition variable for `!mrequest`, which really ""proves"" it - ondisconnect, which can make the condition true, also notifies the variable - the spin lock should still guard the use of mchannel so that serve() doesn't race with ondisconnect() destroying the channel.",1,0.5843544006347656
858458893,2668,Paul-Licameli,2022-04-26T08:52:56Z,should be `desc->getuntranslatedversion()`,0,0.9945057034492493
873150365,2668,Paul-Licameli,2022-05-15T10:59:08Z,"commit comment misspelled ""instance""",0,0.9717427492141724
873152034,2668,Paul-Licameli,2022-05-15T11:12:48Z,"commit comment misspelled ""stability""",0,0.9809235334396362
873154718,2668,Paul-Licameli,2022-05-15T11:33:04Z,is the convention `details` or `detail`? i used `detail`,0,0.995187520980835
873154822,2668,Paul-Licameli,2022-05-15T11:34:17Z,"""builds""",0,0.9754793047904968
873155033,2668,Paul-Licameli,2022-05-15T11:36:08Z,all these comments might use doxygen format `//! ...` or ` /*! ... */ `,0,0.9863129258155823
873156128,2668,Paul-Licameli,2022-05-15T11:45:04Z,"an assertion without proof -- but sufficient ""proof"" for me would be that you document in the header file, [code block] so the burden of further proof is properly on the caller.",0,0.9707077741622925
873156396,2668,Paul-Licameli,2022-05-15T11:47:05Z,"this comment disagrees with the implementation, and i think you want to change the comment. result is valid if and only if there is no error and there is at least one descriptor.",0,0.9781692028045654
873156865,2668,Paul-Licameli,2022-05-15T11:50:30Z,"why not `std::move(desc)`? you need it to avoid copying, because `desc` alone still is an lvalue reference even though the argument is declared with `&&`. and that might allow vector instead of list for the container, but maybe there is a reason for list i don't understand yet, some requirement of non-relocation of the memory.",0,0.9893937110900879
873157284,2668,Paul-Licameli,2022-05-15T11:54:12Z,duplicated string literal,0,0.992260754108429
873159303,2668,Paul-Licameli,2022-05-15T12:08:53Z,"now i'm wondering about the proper internationalization of error messages. does `translation` really work, or has the host process not intiailized translations before this point is reached? if it doesn't, maybe `translation()` can be applied to the msgid on the host side, if the `translatablestring` is a simple one without format arguments.",0,0.9656307101249695
873159366,2668,Paul-Licameli,2022-05-15T12:09:15Z,"and, two new non-internationalized messages.",0,0.9919986128807068
873160538,2668,Paul-Licameli,2022-05-15T12:16:38Z,"in audacityapp.cpp, `populatepreferences` follows `initpreferences` and that is where translation is initialized. that function, or pieces of it, should be moved out of audacityapp.cpp and demoted into one of the lib-s, so it can be used here too, resolving the doubts about `translation()` i mentioned before.",0,0.9939531683921814
873161195,2668,Paul-Licameli,2022-05-15T12:22:07Z,"""condition""",0,0.9895979166030884
873161894,2668,Paul-Licameli,2022-05-15T12:27:17Z,another non-translated string,0,0.9892423748970032
873162046,2668,Paul-Licameli,2022-05-15T12:28:31Z,this implies that this server expects messages as formatted by `makerequeststring`. then that should be commented in the header file.,0,0.9936475157737732
873162723,2668,Paul-Licameli,2022-05-15T12:33:51Z,"an assertion without proof. to fix it, improve documentation to explain that a request must be sent only after responses of all previous requests have been received by the client -- otherwise, requests may be lost: they don't queue up. that makes this class more understandable without reading the code that uses the class -- and that code doesn't exist yet, at the commit introducing this.",0,0.8945732116699219
873168899,2668,Paul-Licameli,2022-05-15T13:20:07Z,maybe it wont be difficult to build a small executable that links only this library and its dependencies. avoid wxmodule and wasteful loading of another audacity with all of its static initializations. not essential to making this pr.,0,0.9849356412887573
873188687,2668,Paul-Licameli,2022-05-15T15:51:40Z,"maybe less misleading to write, ""starts and communicates with a dedicated process to perform plugin validation"". but the member functions of it are available to call in the main process.",0,0.878243088722229
873188880,2668,Paul-Licameli,2022-05-15T15:53:13Z,"a thread join happens at the closing brace, so callbacks to members may happen before that completes, making mdelegate null matters while joining. am i right? it may help to explain a little more.",0,0.9933405518531799
873190041,2668,Paul-Licameli,2022-05-15T16:02:40Z,"if you really want to minimize the time inside the lock_guard: note that swap of an `optional` with another empty one does perform a move-construction, see [a link] ... but for wxstring that performs a string copy anyway, because wxwidgets is an old library not defining move constructors. you can improve this using `optional ` or you can use the member function `wxstring::swap` on *mrequest. (then `mrequest.has_value()` is still true, it has an empty string in it; so `mrequest.reset()` would be needed.)",0,0.992065966129303
873190093,2668,Paul-Licameli,2022-05-15T16:03:09Z,you also used `optional ` in pluginhost and might change it.,0,0.994227409362793
873192911,2668,Paul-Licameli,2022-05-15T16:26:39Z,what you wrote is equivalent to [code block] but does not lock the weak pointer for the intended scope! it should be [code block],0,0.9913092851638794
873193971,2668,Paul-Licameli,2022-05-15T16:35:20Z,"this means, handling of one request is complete, and another may be sent. it is very pleasing to see only one virtual function interface here, and the simplified implementation without the state machine and a switch. i find it more understandable than the first draft.",1,0.9099817872047424
873194219,2668,Paul-Licameli,2022-05-15T16:37:27Z,"i would also write the lambda capture without this, only with self to access this. and that would have caused a compilation error after the incorrect if, which might make you fix it correctly.",0,0.9927963614463806
873194573,2668,Paul-Licameli,2022-05-15T16:40:19Z,"the sixth commit, which introduces this file, fails to compile. it requires the overload of `registerplugin` added at the next commit.",0,0.9916344881057739
873195130,2668,Paul-Licameli,2022-05-15T16:45:49Z,"the constants `state_new` and `id_shownew` might also exist only when conditionally compiled. that would make it more obvious that the changes in this commit are complete and correct. that would mean one of the event bindings in the table is also eliminated, and one case of a switch statement, and one if-block in `setstate`.",0,0.9940686225891113
873195338,2668,Paul-Licameli,2022-05-15T16:47:32Z,"""plugins still exist""",0,0.993882417678833
873199958,2668,Paul-Licameli,2022-05-15T17:27:31Z,comments should explain that the callbacks occur on the main thread when the event loop idles or is yielded to.,0,0.9930188059806824
873200977,2668,Paul-Licameli,2022-05-15T17:36:53Z,it's good to make members of new classes `const` where possible as an aid to understanding. this is one member that could be const.,0,0.9861376881599426
873201782,2668,Paul-Licameli,2022-05-15T17:44:19Z,"is this where errors from pluginhost are used at last? then fixing the setup of locale in the other process is unimportant after all, and literal english string errors are all right. but then, where `translation()` was used, make it `debug()`.",0,0.9941775798797607
873202738,2668,Paul-Licameli,2022-05-15T17:52:01Z,this could be just a local variable,0,0.9912910461425781
873202904,2668,Paul-Licameli,2022-05-15T17:53:18Z,`poll` already did a `yield` too,0,0.9923547506332397
873204773,2668,Paul-Licameli,2022-05-15T18:10:46Z,"if the definition of `checkpluginupdates` is moved here, it makes the commit easier to review. more black lines, fewer red and green.",0,0.9932180047035217
873205563,2668,Paul-Licameli,2022-05-15T18:17:24Z,"moving the definition makes it clearer that false became true in this line. a more complete check of validity is done. still now, i wonder about this. what happens if a plug-in is upgraded to a newer version reinstalled at the same path? should that be detected and cause another load again in the sandbox? nyquist.cpp contains checks for advance of the modification date of the plug-in file, making it easier to try changes while you develop a plug-in. but those are just interpreted source code. maybe recording of time stamps is a future enhancement to do.",0,0.9759057760238647
873206763,2668,Paul-Licameli,2022-05-15T18:28:15Z,"does this leak? a wxwindow is managed when it has a non-null parent, but this non-modal dialog does not! but i see it does not leak because all the button event handlers cause it to destroy itself. very well, mention that here, to justify `safenew` (which is something like an assertion -- something needing a proof when you see it.)",0,0.8950673341751099
873206968,2668,Paul-Licameli,2022-05-15T18:30:02Z,"you do a lot with explicit sizers and control creations and so on. are you not comfortable enough with shuttlegui? all right if not, but a rewrite of this should be in the future to make all of this desirable plug-in checking platform neutral too. besides which: perhaps this dialog belongs in its own small source file.",0,0.9786353707313538
873991893,2668,vsverchinsky,2022-05-16T17:37:16Z,"depends on project i believe, do we have such convention?",0,0.985615611076355
874022697,2668,vsverchinsky,2022-05-16T18:12:50Z,"right, thanks! there is no such requirement, `plugindescriptor` will be copied later, when added to `pluginmanager`",1,0.9912902116775513
874052822,2668,vsverchinsky,2022-05-16T18:48:10Z,"hm, didn't think of it, thanks. it's hard to answer such questions without a complete understanding of requirement. though we can initialize i18n on the host side too, but then there is a question of language preference change. so, i don't have a complete answer, not use i18n in messages is a possible solution i think.",1,0.8473875522613525
874066172,2668,vsverchinsky,2022-05-16T19:05:22Z,"i was thinking of it too, and there is a downside - the size of application will increase, don't know how much though.",0,0.954559326171875
874075230,2668,vsverchinsky,2022-05-16T19:17:51Z,"yes, it's correct",0,0.9769917130470276
874084138,2668,vsverchinsky,2022-05-16T19:28:59Z,thanks! `this` is needed for class-member access,1,0.9890678524971008
874091829,2668,vsverchinsky,2022-05-16T19:39:08Z,fixed,0,0.920660674571991
874108555,2668,vsverchinsky,2022-05-16T20:01:30Z,thanks!,1,0.8631753921508789
874117743,2668,vsverchinsky,2022-05-16T20:13:48Z,"wasn't aware of that, thanks!",1,0.9611761569976807
874119431,2668,vsverchinsky,2022-05-16T20:16:06Z,it will cost some time because from what i see it doesn't yield each `poll`. in my case the difference was 2-4 seconds.,0,0.9683635234832764
874121599,2668,vsverchinsky,2022-05-16T20:19:09Z,i'd say yes. but for this we need to track module file timestamp (if there is a file),0,0.9925538897514343
874128773,2668,vsverchinsky,2022-05-16T20:27:40Z,"i'm still not very comfortable with wxwidgets) probably, you are right",-1,0.8014329075813293
875640947,2668,Paul-Licameli,2022-05-18T08:53:31Z,you didn't take this suggestion yet in the lastest force-push. did you not understand it?,0,0.978133499622345
1241278381,4797,Paul-Licameli,2023-06-25T20:03:09Z,"my first comment on this pr. i did not review the pr that added this library, so i must become familiar with that first. i see `libraries/lib-time-and-pitch/cmakelists.txt` lacks a long-form cmake comment at the top, which is the convention with other libraries. please supply that comment, about the general purpose of the library.",0,0.9893112182617188
1242063703,4797,Paul-Licameli,2023-06-26T11:40:43Z,"i see this header file changes in the second commit in the sequence, and nothing else changes in lib-mixer thereafter. you know i dislike the notion of an internal, stateful cursor leaking out of the abstract interface, and i would think it more elegant instead to change the `get` function to take a direction argument, and also to specify the reversal of samples is done in the result. but i think i will not insist on this if the schedule presses.",0,0.9567964673042297
1242064721,4797,Paul-Licameli,2023-06-26T11:41:38Z,some breaks in this very long comment line,0,0.6170670390129089
1242480129,4797,Paul-Licameli,2023-06-26T16:51:38Z,"good, now please add to the doxygen comments above, explaining the argument, and the expectation that the outputs are reversed. and likewise for `getenvelopevalues`",0,0.5947898626327515
1242522012,4797,Paul-Licameli,2023-06-26T17:27:48Z,"i would rather not see this ugly cast. i would rather see `widesamplesequence::getfloats` take `bool backwards = false` as the first optional argument. the ""narrow"" overload in `sampletrack` may simply supply false instead of exposing that argument to its callers.",-1,0.953739583492279
1242541090,4797,Paul-Licameli,2023-06-26T17:43:16Z,"i see reversal of the envelope values. but i was expecting to see `reversesamples` too, restoring the removed call in mixersource. i think this means the first commit breaks backward scrubbing, and that should not be. i haven't yet reviewed later commits, which might make it work again, when the wavetrack has its stretching decorator, but logically, shouldn't the proper place to apply reversal be here in wavetrack?",0,0.9846339821815491
1242547769,4797,Paul-Licameli,2023-06-26T17:48:42Z,"library header comment, please",0,0.9939666986465454
1242550701,4797,Paul-Licameli,2023-06-26T17:50:57Z,"if you really want to include this in the tree, the cmakelists.txt comment can refer the reader to it for more explanation.",0,0.9943366646766663
1242561625,4797,Paul-Licameli,2023-06-26T17:58:42Z,"i'm skipping the rest of this big commit for now, i will return and review it in detail last",0,0.9545610547065735
1242562583,4797,Paul-Licameli,2023-06-26T17:59:25Z,`override` is still missing for `getrate` and that makes clang give warnings,0,0.9920024871826172
1242564384,4797,Paul-Licameli,2023-06-26T18:00:43Z,you should also delete the `` mentioning `ii`,0,0.9952917098999023
1242569948,4797,Paul-Licameli,2023-06-26T18:05:19Z,"this call no longer needs to satisfy the removed precondition, but must now not index the array out of bounds, and so `clipinterface::getsampleview` should have a `` or `` comment guaranteeing the size of the result equals the width. and `clipinterface::getwidth()` should replicate the promise of `widesamplesequence::nchannels`: [code block]",0,0.9947038292884827
1242573033,4797,Paul-Licameli,2023-06-26T18:08:48Z,"however, i'm not yet sure i agree that `ii` should be removed as an argument.",0,0.8174270987510681
1242575438,4797,Paul-Licameli,2023-06-26T18:11:11Z,"you are assuming here that all channels will be needed in the cache. but remember what i explained about drawing code, including spectrogram, needing to stride ""channel-major"" but ""clip-minor"". the caches for spectrogram drawing might now be doing wasteful duplicated work? creating a left and right side cache, but only using one side, destroying that cache, then repeating for the right channel? .",0,0.964643120765686
1242578220,4797,Paul-Licameli,2023-06-26T18:14:07Z,might `move` the shared pointers,0,0.9917274713516235
1242582501,4797,Paul-Licameli,2023-06-26T18:17:38Z,i think you really mean: [code block],0,0.9764299988746643
1242587232,4797,Paul-Licameli,2023-06-26T18:22:31Z,"you handle un-owned tracks anyway, so weaken the ``. now remember too, that clips are not necessarily stored, sorted by start time. but are you assuming that where you use the results of this function?",0,0.9898584485054016
1242596374,4797,Paul-Licameli,2023-06-26T18:32:29Z,"this line, and the one in src/cmakelists.txt, are unnecessary for the build, and i would prefer you omit them so that the generated library graph does not have unnecessary edges.",0,0.986248791217804
1242614503,4797,Paul-Licameli,2023-06-26T18:41:23Z,"oh, never mind. the caching for spectrum view will not include the stretching decorator.",0,0.9453450441360474
1242632520,4797,saintmatthieu,2023-06-26T18:58:41Z,"the stretching decorator re-implements ::get, where the clip samples are reversed before being passed to the stretching algorithm. as a result scrubbing does work when injected that decorator, but you're right, `wavetrack::get` should reverse the samples, even if no other code has use for it. `wavetrack::getsampleview` isn't a virtual function and `backwards` could/should be removed from its arguments, leaving `cachingplayablesequence::get` do the reversal.",0,0.9939929842948914
1242634945,4797,saintmatthieu,2023-06-26T19:01:12Z,"i have to update this, thanks for reminding.",1,0.8725497722625732
1242654735,4797,saintmatthieu,2023-06-26T19:19:16Z,"not the stretching decorator, but `cachingplayablesequence` also uses `waveclip::getsampleview`. currently it calls it on two separate tracks each with mono clips, so there's no unnecessary work. when we do use wide clips, though, there'll be only one stereo track, `wavetrack::getsampleview` will call `getsampleview` on clips, and yes, doing unnecessary work if it stays at that. looks like i indeed need to preserve the `ii` argument ...",0,0.9828593134880066
1242659656,4797,saintmatthieu,2023-06-26T19:24:26Z,"ok for the ``. the stretching decorator sorts the clips this method returns, so we're good.",0,0.8660163879394531
1242665641,4797,saintmatthieu,2023-06-26T19:27:43Z,done.,0,0.9897913336753845
1242669658,4797,Paul-Licameli,2023-06-26T19:31:51Z,"in the interests of progress i will not block the pr if this is left unfinished, and scrubbing works in the end result, but you are aware of a need to come back and clean it up. really you should make sure that the sample reversal is part of the stated contract of `widesamplesequence` and that all overrides of `get` do it correctly -- whether it's the undecorated or the decorated wavetrack. maybe some overrides of `get` won't be directly called in 3.4, but you should not assume it will always be so. the classes should make sense in isolation and in test harnesses, fulfilling the base class contract. that's what the l of solid is all about.",0,0.9768282175064087
1242671677,4797,Paul-Licameli,2023-06-26T19:34:11Z,then perhaps the lack of promise of sortedness should be mentioned in a header comment.,0,0.9868918061256409
1242672606,4797,Paul-Licameli,2023-06-26T19:35:21Z,"if you just make a `// todo` note to revisit the efficiency problem in a later pr, i would accept that.",0,0.9852369427680969
1242952609,4797,Paul-Licameli,2023-06-26T23:55:32Z,this interface looks strange -- i don't see what tells it how many `buffers` are there.,-1,0.9301349520683289
1242952675,4797,Paul-Licameli,2023-06-26T23:55:38Z,class comments?,0,0.9890011548995972
1242954199,4797,Paul-Licameli,2023-06-26T23:58:05Z,"i would define `audiosegment.cpp` just to define the destructor non-inline -- so that the linker can avoid de-duplication of the definition of the destructor and the virtual function table of the class; also so that ""audiosegment.h"" is included in at least one translation unit before any other header, and we can be sure the header does not require any earlier #include for it to compile.",0,0.993298351764679
1242955371,4797,Paul-Licameli,2023-06-27T00:00:03Z,likewise for this class -- i would make one wimpy little translation unit just to give the virtual function table a unique home at link time.,0,0.5300777554512024
1242960804,4797,Paul-Licameli,2023-06-27T00:08:40Z,`size_t` seems a strange choice of type to describe a sample rate. it's not sizing something in memory.,-1,0.8621059060096741
1242978913,4797,Paul-Licameli,2023-06-27T00:19:25Z,you did make a tiny translation unit for this one,0,0.9904735684394836
1242979326,4797,Paul-Licameli,2023-06-27T00:20:02Z,"uniform member initialization syntax, here and elsehwere, maybe?",0,0.9895097017288208
1242982974,4797,Paul-Licameli,2023-06-27T00:24:14Z,"only now do i understand the meaning of the return value of `getfloats`. but audiosegment.h, lacking comments, didn't help me. please write some informal description of the contract in that header file. if it were me, i would even add a pure virtual `size_t getwidth() const` just so that i could use it to state a precondition on the size of `buffers` and call it just in not-ndebug builds to assert the precondition.",0,0.9793363213539124
1242990876,4797,Paul-Licameli,2023-06-27T00:35:18Z,maybe that should be `>=` just to be sure there is eventual emptiness even in the presence of an off-by-few error,0,0.9780927896499634
1242991936,4797,Paul-Licameli,2023-06-27T00:37:07Z,maybe `limitsamplebuffersize`; and are you sure that subtraction never underflows?,0,0.9940069913864136
1243259149,4797,saintmatthieu,2023-06-27T07:25:44Z,"i don't know of evidence that the compilation time gain is worth the manual effort. the early-include verification... yeah, all right.",0,0.9283761382102966
1243282022,4797,saintmatthieu,2023-06-27T07:43:02Z,"the effective number of channels is known in the context instances are used by both implementation and user. but you're right, looking back that's unusual. i'll pass a vector reference instead.",0,0.9925634264945984
1243287075,4797,saintmatthieu,2023-06-27T07:47:21Z,never thought of `size_t` that way ... will use just int.,0,0.9785035252571106
1243291295,4797,saintmatthieu,2023-06-27T07:51:02Z,because i initially added this in `lib-mixer` and wanted to be consistent with the code around me :d,1,0.9788740277290344
1243301827,4797,saintmatthieu,2023-06-27T07:58:40Z,"i don't understand what you mean here. in any case, i think it's obvious enough from the code that `mtotalnumsamplestoproduce >= mtotalnumsamplesproduced`, asserting this would make the code look uncertain.",0,0.9199458360671997
1243304395,4797,saintmatthieu,2023-06-27T08:00:15Z,"similarly to above, `mtotalnumsamplesproduced` simply can't be larger than `mtotalnumsamplestoproduce`. i wouldn't want the reader to start doubting this.",0,0.976563036441803
1243306415,4797,saintmatthieu,2023-06-27T08:01:33Z,absolutely.,0,0.963522732257843
1243325682,4797,saintmatthieu,2023-06-27T08:17:20Z,"oops : i added `audiosegment.cpp` and moved the dtor definition there, and now i'm getting unresolved external symbol. i can't see why, so at least for now i'll leave it with the inline definition.",-1,0.9738837480545044
1243342042,4797,crsib,2023-06-27T08:30:17Z,you likely need to export the interface,0,0.9933547973632812
1243429233,4797,saintmatthieu,2023-06-27T09:31:45Z,i'm addressing it.,0,0.9801849722862244
1243881096,4797,Paul-Licameli,2023-06-27T14:48:01Z,"`start` is an inclusive bound for the usual forward fetch and the other bound is exclusive. but as i recall how mixer works, `start` is exclusive and the other inclusive for backwards fetch. worth commenting.",0,0.9918587803840637
1243881563,4797,Paul-Licameli,2023-06-27T14:48:17Z,"likewise, clarify inclusive and exclusive bounds.",0,0.9919861555099487
1243920278,4797,Paul-Licameli,2023-06-27T15:10:05Z,"i see `backwards` is used to construct the cache, but is ignored when using it. samples are not taken from the end and reversed. so this implementation of `cachingplayablesequence` is incomplete, and so in the first commit, backwards scrubbing won't work right. but i see that later commits stop using this class for audio io, and in the remaining uses for spectrogram, there is never any backwards fetch. so for now just `assert(!backwards)` and comment about it.",0,0.9855980277061462
1243937000,4797,Paul-Licameli,2023-06-27T15:21:26Z,"you changed `float *const *` to `std::vector &` so there is information about the number of buffers. this is all right. but `std::vector` carries the irrelevancy about the allocator type in its second template argument, and this doesn't allow the caller simply to stack-allocate the pointers if desired. this is why i wanted `std::span` for such uses, but that is c++20. however it might be easily imitated in a new utility. it's also why my preference, lacking `span`, is to pass two arguments, the array of pointers and its size. now should there be an explanation about which buffers are filled? if the caller happens to pass more buffers then the width, should you expect zeroes in the extra buffers or unspecified? this abstraction still has no interface to query the width. none of the above is a blocking criticism.",0,0.9841927886009216
1243942756,4797,Paul-Licameli,2023-06-27T15:25:34Z,"you changed `samplerate` from `size_t` to `int`. in other audacity code, inconsistently, `int` and sometimes `double` is used for rates. if we really never need fractions of hz, then maybe `unsigned` would make most sense. let it remain `int`. you changed `numchannels` to `int` too, but i didn't ask for that -- `size_t` does make sense for that. but this too can stand.",0,0.9907159805297852
1243961691,4797,Paul-Licameli,2023-06-27T15:39:05Z,"here, an override of a pure virtual function is adding an assertion at the top -- that's an unstated, stricter precondition than the base class specified. that's bad form (violating the l principle) -- so again, i think `getwidth` should also be a pure virtual of the base class, so that the base class can formally state the precondition. and that would answer the question about excess buffers -- they are just not allowed.",0,0.9408622980117798
1243997086,4797,Paul-Licameli,2023-06-27T16:02:18Z,this test file fails to compile in the commit that introduces it. the audacity executable compiles.,0,0.9894010424613953
1244004069,4797,Paul-Licameli,2023-06-27T16:08:10Z,"this line now breaks the build at ""waveclip inherits clipinterface""",0,0.9942753911018372
1244016857,4797,Paul-Licameli,2023-06-27T16:17:21Z,"again -- if i see a new assertion at the top of a function, i want to see it commented too as an explicit precondition. the commit introducing this function repairs all the previous build problems.",0,0.9905162453651428
1244022320,4797,Paul-Licameli,2023-06-27T16:21:41Z,the informally stated (and not `assert`ed) precondition of the constructor of `waveclip` can be violated if you make a track with misaligned clips. but of course it doesn't matter much. wideclip is provisional only until i make real wide waveclips and misaligned clips become impossible.,0,0.9859080910682678
1244024256,4797,Paul-Licameli,2023-06-27T16:23:14Z,still an unnecessary arc in the modules graph,0,0.8354395627975464
1244028528,4797,Paul-Licameli,2023-06-27T16:26:27Z,"still missing one more `override`, for `getrate`",0,0.9828936457633972
1244036941,4797,Paul-Licameli,2023-06-27T16:31:58Z,i'm actually recommending an l principle violation with that assertion! but i understand the fix as not worth the effort now,-1,0.9760938286781311
1244044290,4797,Paul-Licameli,2023-06-27T16:37:59Z,"i would clarify, ""provided in each buffer""",0,0.9935699701309204
1244047969,4797,Paul-Licameli,2023-06-27T16:41:08Z,"that #include at least is unnecessary, maybe some others too",0,0.9897683262825012
1244053321,4797,Paul-Licameli,2023-06-27T16:45:46Z,wrong comment,-1,0.8904055953025818
1244057709,4797,Paul-Licameli,2023-06-27T16:49:32Z,"this is only test code, but i don't like naked `new`. you could `make_unique` and then `move` it.",0,0.8807706236839294
1244062273,4797,Paul-Licameli,2023-06-27T16:53:34Z,you mean `.h`,0,0.9896941184997559
1244069683,4797,Paul-Licameli,2023-06-27T16:59:36Z,you need `#include ` to define `size_t` and fix linux builds.,0,0.9951569437980652
1244071290,4797,Paul-Licameli,2023-06-27T17:00:23Z,that's a path on your computer only!,0,0.9946994781494141
1244080427,4797,Paul-Licameli,2023-06-27T17:05:29Z,i think you do need mock_prefs but why mock_audio?,0,0.9841639399528503
1244082608,4797,Paul-Licameli,2023-06-27T17:07:34Z,"declared, nowhere defined",0,0.9895365238189697
1244083679,4797,Paul-Licameli,2023-06-27T17:08:30Z,add `override` please,0,0.995182454586029
1244114407,4797,Paul-Licameli,2023-06-27T17:34:20Z,"`lib-stretching-sequence` does not depend on `lib-wave-track`, but the opposite. however the test executable depends on `lib-wave-track`. the build system let you do this, but i think i don't like it and should consider it a cycle. instead, you could lift all testing files that depend on wavetrack and waveclip into a new `lib-wave-track/test` directory. that may mean `lib-wave-track/test` might need to used some of the mocks defined in `lib-stretching-sequence/test`. does the test build system allow that dependency? ?",0,0.9349988698959351
1244123947,4797,Paul-Licameli,2023-06-27T17:42:48Z,i think the second base could be `private`,0,0.9881759881973267
1244128493,4797,Paul-Licameli,2023-06-27T17:46:41Z,"if the constructor is not meant for public use, but instead only the `create` factories -- maybe use the `createtoken` trick as in `effectstage`. the constructor has to be public, but `create` needs make-shared so `std` functions have to call the constructor. but the trick is a way to restrict the usage without the `std` functions needing to be `friend`s.",0,0.9910216927528381
1244132350,4797,Paul-Licameli,2023-06-27T17:49:07Z,more uniform initializations might be done for this and other test classes.,0,0.9852461218833923
1244740804,4797,saintmatthieu,2023-06-28T06:25:40Z,thank you!,1,0.9448403120040894
1244742856,4797,saintmatthieu,2023-06-28T06:28:14Z,removed - thanks!,1,0.9581992626190186
1244748628,4797,saintmatthieu,2023-06-28T06:35:02Z,`audacityproject::create()` leads to an audio-io setup in my `testwavetrackmaker`. not sure if/how it could be avoided.,0,0.9166904091835022
1244764341,4797,saintmatthieu,2023-06-28T06:49:53Z,"makes sense, there must be modifications in `wavetrack` needed for this integration test that i added in follow-up commits.",0,0.9883358478546143
1244767098,4797,saintmatthieu,2023-06-28T06:53:02Z,i need a refererence to `factory` after the move. it's feasible without this `new` but more complicated.,0,0.9790050983428955
1244773513,4797,saintmatthieu,2023-06-28T06:59:19Z,"i don't think we have a cyclic dependency. in fact, if i could remove `lib-stretching-sequence` from the list of libraries needed by this test executable and it would still compile. it's just one unnecessary arrow in the dependency graph ;)",1,0.9405419230461121
1244783569,4797,saintmatthieu,2023-06-28T07:10:03Z,"if we're picky, yes, we'll want `getwidth` and specifications about `buffers.size() > getwidth`. `audiosegment`s are used in `stretchingsequence`, which, like all `playablesequence`s in audacity as of now, has either only mono or stereo clips. this is why a need for `getwidth` wasn't felt in the first place. i suggest we leave it at that for now, and address it properly when/if we ever support tracks of mixed channel counts.",0,0.9895212650299072
1244785635,4797,saintmatthieu,2023-06-28T07:12:10Z,i wish c++ had a strictly-positive-integer type ...,-1,0.5859770178794861
1244795399,4797,saintmatthieu,2023-06-28T07:21:05Z,"oh well, you win :d",1,0.9940333962440491
1244798716,4797,saintmatthieu,2023-06-28T07:24:21Z,"could it ? checking ... ... no, because it passes itself as `timepitchandsource` to `mtimeandpitch`.",0,0.9901005625724792
1244802968,4797,saintmatthieu,2023-06-28T07:28:31Z,"it's ok, it can be used publicly, it's just that clients usually don't want to bother about injecting a factory and are happy with the default one. one test case, though, needs it. but that's a nice trick, never thought about it.",1,0.9782809019088745
1244809125,4797,saintmatthieu,2023-06-28T07:34:22Z,"i agree. it'd be hard to test, too. spot on, though.",0,0.8509616255760193
1244820395,4797,saintmatthieu,2023-06-28T07:44:18Z,i meant by that that i was going to address it. it's done now.,0,0.9909331798553467
1244823328,4797,saintmatthieu,2023-06-28T07:46:51Z,addressed,-1,0.5785259008407593
1245249641,4797,Paul-Licameli,2023-06-28T13:53:55Z,"but i think the test directory for a library should be responsible to test only that library. if a test executable involves other libraries higher in the graph, that argues for moving those tests.",0,0.9875554442405701
1318465255,5138,saintmatthieu,2023-09-07T11:26:05Z,`wavetrack::duplicate` does this check for you. we should consider making it a public helper method of wavetrack to places like these simpler.,0,0.9931849837303162
1318469813,5138,saintmatthieu,2023-09-07T11:30:56Z,"pardon me i thought it did: not really, or intricately. that said, `duplicate` won't apply stretch ratio if no clip is stretched in the interval. so behaviour would be preserved removing those checks - although it would have a negative impact on performance.",0,0.9667786955833435
1318475502,5138,saintmatthieu,2023-09-07T11:35:02Z,nice !,1,0.9870871305465698
1318477159,5138,saintmatthieu,2023-09-07T11:36:08Z,:thumbs_up:,1,0.9533231854438782
1318805924,5138,saintmatthieu,2023-09-07T15:46:48Z,"i've been using `timeinterval` on my other branch, which i think is appropriate since it's a pair of doubles.",0,0.9908046722412109
1318811510,5138,saintmatthieu,2023-09-07T15:51:38Z,i prefer the way it was before: easier to understand (i always have to look up the subtlety between lower_bound and upper_bound) and on usage average seldom more expansive performance-wise. but sure ...,0,0.6845563054084778
1319676421,5138,Paul-Licameli,2023-09-08T10:25:57Z,i will change the name,0,0.9922325611114502
1321321559,5138,Paul-Licameli,2023-09-11T10:16:17Z,"eliminate `wxunused` when you have an excuse to disturb a function with that macro. just declare `double, double` or if you want to be really modern: [a link]",0,0.9929754734039307
1321323557,5138,Paul-Licameli,2023-09-11T10:18:11Z,new strings.,0,0.991936206817627
1321327006,5138,saintmatthieu,2023-09-11T10:21:37Z,fyi copy-paste of agreed-upon strings from other places where pre-rendering is needed.,0,0.9912471175193787
1324068459,5138,saintmatthieu,2023-09-13T07:06:48Z,"you mentioned this utility in our meeting yesterday, but i didn't get the advantage over adding member functions to `wavetrack` ?",0,0.9936461448669434
1324075017,5138,saintmatthieu,2023-09-13T07:13:16Z,"in the ""timeandpitchinterface::ispassthroughmode"" commit of #5191, i'm consolidating checks of whether a clip is stretched with the decision in `staffpadtimeandpitch` to be in pass-through mode or not. provided that what i did there is correct, the check here should be `pclip->stretchratioequals(1)`.",0,0.993492066860199
1324095801,5138,saintmatthieu,2023-09-13T07:32:00Z,"now that i pay attention to the progress bar, i realize that there are two buttons: stop and cancel. i don't see a difference in behaviour between the two. `effectbase.cpp` uses just `progressshowcancel`, which seemingly we should here too.",0,0.97682124376297
1324096486,5138,saintmatthieu,2023-09-13T07:32:36Z,i'd be interested in knowing the difference between stop and cancel if anyone knows.,0,0.9255994558334351
1324108499,5138,saintmatthieu,2023-09-13T07:42:49Z,"not sure how much this matters, but we get boxes of different look and feel depending on whether we've selected too many samples ![a link] or when selection intersects stretched data: ![a link]",0,0.38938236236572266
1324112857,5138,saintmatthieu,2023-09-13T07:46:43Z,"a shortcoming that was already there that this commit should fix: this check should be placed before the `if (repairlen > 128) {` check : if you expand a clip by a factor of 2, and select 100 visible samples, the `repairlen > 128` fails. i've experienced it and it took me time to understand why. a lambda user would probably perceive this as a bug.",0,0.9659004807472229
1324134494,5138,saintmatthieu,2023-09-13T08:04:19Z,"i don't think someone should be able to call `applystretchratio` with an empty interval. i'd rather have ` `!unstretchinterval || unstretchinterval->second > unstretchinterval->first`. then, in effectoutputtracks.cpp, if the interval is empty, call `wavetrack::duplicate` with an `std::nullopt` (or equivalent).",0,0.9296374917030334
1324171053,5138,LWinterberg,2023-09-13T08:33:37Z,wording sounds good,1,0.7977312803268433
1324240268,5138,saintmatthieu,2023-09-13T09:28:04Z,i realize that the `unstretchinterval` arguments of `track::duplicate` and `wavetrack::applystretchratio` have opposite meanings: stretch nothing in the former and everything in the latter. maybe we should remove that argument from `duplicate` and `clone` and let the callers make a call after that to `applystretchratio` if needed.,0,0.9867059588432312
1324245267,5138,Paul-Licameli,2023-09-13T09:32:07Z,"i think smaller is often better for classes. the function i move into that file was defined in an earlier commit without intrusion into wavetrack. it wasn't necessary. the existing public interfaces were sufficient to define it. so then, why disturb and complicate the interface of wavetrack without need? i'm making the function available for reuse but keeping it separate from the class. i think we may identify more inessential member functions of wavetrack that could also be moved out. it's a big file doing too much. i think it would be better to have a smaller wavetrack class someone could study, which provides just the essential services and maintains important class invariants.",0,0.9257943630218506
1324274370,5138,LWinterberg,2023-09-13T09:55:52Z,"semantically, the (i) message is wrong in both cases anyway as we error out and abort. the red (x) would be more appropriate here. i have no strong feeling whether to use the big or the small text version. the big version feels a bit vista/7, but i also have no strong desire to see it changed at the moment. the smaller version is the more appropriate to use going forward though.",0,0.9351249933242798
1324293909,5138,Paul-Licameli,2023-09-13T10:13:03Z,done. i recall there was a difference between stop and cancel for import and export. i didn't look to see if that was conserved after all the refactoring in this release. it was possible to stop with a partially exported file instead of aborting the whole thing and deleting the file.,0,0.971441924571991
1324302385,5138,saintmatthieu,2023-09-13T10:21:01Z,"all right, so change to red, but what's the required change for the looks-and-feel (if any) ?",0,0.9890413880348206
1324306575,5138,saintmatthieu,2023-09-13T10:25:04Z,no strong objection to that.,0,0.8619003295898438
1325374795,5138,saintmatthieu,2023-09-14T05:32:44Z,if you get the chance while squashing: `if (bgoodresult && templist)`.,0,0.9902701377868652
1325375457,5138,saintmatthieu,2023-09-14T05:33:52Z,`if (clip->getstretchratio() != 1.0)`. i'll make the change myself.,0,0.9942786693572998
1325510340,5138,saintmatthieu,2023-09-14T07:43:33Z,"if nothing is selected, then `mt0 == mt1 == 0` and the assert this commit introduces in `effectoutputtracks::effectoutputtracks` is hit.",0,0.9943122863769531
1325553634,5138,saintmatthieu,2023-09-14T08:11:30Z,"neither of these false returns prevent the output tracks to be committed, actually. maybe we should fix this now, i.e. `bgoodresult = false` if `processone` fails.",0,0.9902315735816956
1325690407,5138,Paul-Licameli,2023-09-14T09:43:02Z,this makes a progress indicator for each wave track separately.,0,0.9938404560089111
1325694045,5138,Paul-Licameli,2023-09-14T09:45:19Z,instead you could move stretching after this loop. count wave tracks or maybe only the tracks needing a stretch first and construct a progress indicator with that denominator. then another loop to do stretching.,0,0.9930128455162048
1325696223,5138,Paul-Licameli,2023-09-14T09:47:00Z,remove that comment line,0,0.9917691946029663
1325699106,5138,Paul-Licameli,2023-09-14T09:49:23Z,maybe the progress indicator for stretch can be built by a reusable utility function in wavetrackutils.h. it would take another std::function just to report the varying `count` and give back another std::function.,0,0.9872183799743652
1325700464,5138,Paul-Licameli,2023-09-14T09:50:30Z,"when a zero duration interval is given, will there be a split there or will nothing happen? comment that",0,0.9931491017341614
1325702052,5138,Paul-Licameli,2023-09-14T09:51:46Z,does this stretch all or nothing? should be nothing,0,0.9656664133071899
1325703923,5138,Paul-Licameli,2023-09-14T09:53:13Z,tell me what warning this fixes,0,0.9917563199996948
1325704517,5138,Paul-Licameli,2023-09-14T09:53:44Z,duh,0,0.8287663459777832
1325709520,5138,saintmatthieu,2023-09-14T09:57:32Z,`warning c4273: 'audiograph::sink::~sink': inconsistent dll linkage `,0,0.9892832040786743
1325710384,5138,saintmatthieu,2023-09-14T09:58:14Z,nothing.,0,0.7564334273338318
1325714500,5138,saintmatthieu,2023-09-14T10:01:48Z,"i'm doing something like that in 4-of-6, where rendering happens also e.g. when joining.",0,0.9883297681808472
1325716937,5138,saintmatthieu,2023-09-14T10:03:59Z,"it's implied: `in which case clips are split at these boundaries before rendering - if rendering is needed` -> empty interval, no rendering needed.",0,0.994172990322113
1325722459,5138,saintmatthieu,2023-09-14T10:08:58Z,sounds better. trying that ...,0,0.887744665145874
1326142429,5138,Paul-Licameli,2023-09-14T15:35:41Z,"so i understand that means, yes there is a split?",0,0.9924851059913635
1326212380,5138,Paul-Licameli,2023-09-14T16:18:53Z,"i see, it was a duplicate definition of `~sink` which is still defined elsewhere.",0,0.9923012256622314
1326212997,5138,Paul-Licameli,2023-09-14T16:19:16Z,good,1,0.8759189248085022
1326216721,5138,Paul-Licameli,2023-09-14T16:21:38Z,"on further thought, the new utility function could just take a reference to a counter variable instead of a function. it would return a function. of course you would need to use c++14 ""extended capture"" [] syntax to allocate the progress indicator with `make_unique` so it would be destroyed along with the `std::function` when no longer needed.",0,0.993026852607727
1326222270,5138,Paul-Licameli,2023-09-14T16:25:03Z,that's a very alert catch. thank you.,1,0.9842821955680847
1326226835,5138,Paul-Licameli,2023-09-14T16:28:01Z,you are right. but you have fixed this with another commit that weakened the assertion.,0,0.9858814477920532
1326227168,5138,Paul-Licameli,2023-09-14T16:28:13Z,"again, duh",-1,0.9689586162567139
1326227552,5138,Paul-Licameli,2023-09-14T16:28:28Z,later,0,0.7526319026947021
1326232006,5138,saintmatthieu,2023-09-14T16:31:37Z,"not so alert, but through testing. other effects behave like that, i didn't comment them all.",0,0.9604870676994324
1326234006,5138,saintmatthieu,2023-09-14T16:33:02Z,"no, there is no split. i didn't realize this was so unclear - will clarify the comment when i get the chance.",0,0.9618259072303772
1327532539,5138,Paul-Licameli,2023-09-15T16:27:13Z,what if output tracks contains un-selected tracks of the sync lock group? they would be analyzed too,0,0.9928426742553711
1327539472,5138,Paul-Licameli,2023-09-15T16:33:55Z,this looks like an abandoned experiment you dont want to commit,-1,0.9577097296714783
1327541723,5138,Paul-Licameli,2023-09-15T16:35:54Z,i checked for the other use of findsilences but that is correctly left unchanged as it already applies to an output track.,0,0.9942692518234253
928817018,3278,Paul-Licameli,2022-07-25T12:16:52Z,most one-argument constructors should be `explicit`,0,0.9903130531311035
928831728,3278,Paul-Licameli,2022-07-25T12:33:36Z,"i see you add two virtual functions to the wrapper when you moved load() into it. i understand virtual `unload` lets wrapper avoid mention of `mdialog`. but i think the last part of `unload`: [code block] should be the responsibility of wrapper, balancing what it does in load. make those lines a non-virtual function; call it in the destructor of lv2wrapper, and also on the failure path of `load()`. and i think you defined virtual `callsetprogram` to avoid dependending on `mslaves`. but `load()` only needs `callsetprogram` to initialize a plug-in or an instance which will not yet have any slaves. so i think you don't need this function, and can instead let `load` call `callsetprogramb`",0,0.9880913496017456
928835270,3278,Paul-Licameli,2022-07-25T12:37:38Z,might simplify it with an inherited constructor: `using defaulteffectuivalidator::defaulteffectuivalidator `,0,0.9927531480789185
928847591,3278,Paul-Licameli,2022-07-25T12:51:01Z,"the commit that stubs `processinitialize` and others is incomplete. my fault for giving an incomplete description for step 4. (now updated) `processfinalize` should also be moved to the instance, and you will know all is correct when the effect also inherits `pertrackeffect` not `statefulpertrackeffect`. please figure out step 4 as a whole and squash all the 4.x commits.",-1,0.8767324090003967
928882020,3278,Paul-Licameli,2022-07-25T13:25:41Z,"your last commit fails to build because `vstinstance` becomes an abstract class when it inherits `vstwrapper`. i mentioned before why `unload` is the only virtual function you really need, and at this commit, you should define it for `vstinstance`. what part of `vsteffect::unload` should be moved into that function? this part, but not the part mentioning a dialog: [code block] that is because powering on is only something the instance needs to do, not the effect. in fact i think `poweron()` and `poweroff()` should end up in the instance class only. but to do step 4 without step 5, you will first need to move them into the wrapper class. then move them again in step 5. also in step 4, the `poweron()` in `buildfancy()` should be changed to call it on the instance, not on `this`. pass the instance into `buildfancy()` from `populateui()`.",0,0.9921286106109619
928906077,3278,Paul-Licameli,2022-07-25T13:48:02Z,"`vsteffectinstance` will also need to define all the other pure virtuals that were added to `vsteffectwrapper`. some of the new functions should be empty stubs, others should have the lines from the corresponding vsteffect functions moved into them, and data members should be moved too as needed to compile it. or a third possibility is that some members should be moved into vstwrapper and the functions become non-virtual. which of the new functions of `vsteffectinstance` should be empty? i think needidle, updatedisplay, sizewindow all serve ui purposes only so should be empty. what about the rest of them? i'm not decided yet.",0,0.9874818325042725
928911549,3278,Paul-Licameli,2022-07-25T13:52:55Z,"the virtual functions with non-void return are `gettimeinfo` and `getsamplerate`. if we have a vst handle for the plug-in distinct from the instances, will it need to report meaningful values out of `audiomaster` or will those cases never be invoked? i'm not sure of the answer. but i suggest this, and let experiment see if there is a problem: make default implementations of these non-pure virtuals to return nullptr at 44100. make overrides in the instance class. move the member mtimeinfo to the instance.",0,0.9823716282844543
928914011,3278,Paul-Licameli,2022-07-25T13:55:01Z,"it's unclear what `getprocesslevel` is supposed to report to the plug-in, but the legacy code in fact never returned anything but 1 because mprocesslevel is never changed. i say move mprocesslevel into the wrapper class and provide a default implementation to the non-pure virtual. maybe we will figure out the need for an override later.",0,0.9911323189735413
928915400,3278,Paul-Licameli,2022-07-25T13:56:16Z,i think the `void`-returning `setbufferdelay` and `automate` are meaningful only for instances. make default implementations that do nothing. override them in the instance.,0,0.9902011752128601
928923914,3278,Paul-Licameli,2022-07-25T14:03:44Z,"hm, making `automate` an override in the instance requires the array of slaves, which should move to the instance, but you can't really to that completely until step 5. i suggest, construct the instance with a reference to the array in the effect, to complete step 4. but then step 5 moves mslaves into the instance.",0,0.991771399974823
928927838,3278,Paul-Licameli,2022-07-25T14:07:22Z,"last comment for this round of review! this definition of `getlatencyb` seems weird to me. i think you do it because the `setbufferdelay` virtual function must be defined for all wrappers. but i say again, make it non-pure and let it do nothing in the base class. let the instance override it properly. then, that leaves no need to move the two data members into the wrapper. they belong in the instance only.",-1,0.9403050541877747
928929153,3278,Paul-Licameli,2022-07-25T14:08:30Z,"ah, one more comment. honestly the last. i don't think this function is necessary.",0,0.9543496966362
929017250,3278,pietro68,2022-07-25T15:27:06Z,"ok, done",0,0.9714605808258057
929084842,3278,pietro68,2022-07-25T16:35:37Z,"ok, done",0,0.9714605808258057
929095502,3278,pietro68,2022-07-25T16:47:52Z,"ok, done",0,0.9714605808258057
929219542,3278,pietro68,2022-07-25T19:20:21Z,"automate also references mmaster, so to have it a member of the instance, i had to move it to the wrapper. i think i implemented all your suggestions here? please check commit ""4.3 implement some virtuals in the instance""",0,0.9919920563697815
929229108,3278,pietro68,2022-07-25T19:32:57Z,"that's right, i could add the pluginpath as an arg to the instance constructor. done in commit 4.4",0,0.9950194358825684
929823312,3278,Paul-Licameli,2022-07-26T10:59:05Z,this call within `unload` is unnecessary.,0,0.9889057874679565
929832062,3278,Paul-Licameli,2022-07-26T11:08:54Z,this too is unnecessary.,0,0.5411731600761414
929838102,3278,pietro68,2022-07-26T11:14:34Z,"i commited part of your suggestion in 4.5. `muselatency` can not be moved to the instance, because it is referenced by `vsteffect::showoptions` - any idea on how to solve that?",0,0.9941980838775635
929843308,3278,Paul-Licameli,2022-07-26T11:20:58Z,"you did not remove `getlatencyb` or undo the move of the two data members `muselatency`, `mbufferdelay`",0,0.9925147891044617
929844691,3278,Paul-Licameli,2022-07-26T11:22:40Z,"if you examine how mmaster is used, it's really just a boolean that is true when an instance (a vsteffect) is not the master.",0,0.9884536862373352
929845571,3278,Paul-Licameli,2022-07-26T11:23:49Z,"you need mmaster in automate, but the wrapper has a no-op override of audomate, so there should be no need to put mmaster in the wrapper. you also moved mtimeinfo into the wrapper but it should be in the instane.",0,0.9950249791145325
929861858,3278,Paul-Licameli,2022-07-26T11:43:17Z,just duplicate that boolean in the instance. make it a constructor argument.,0,0.9949684739112854
929965233,3278,pietro68,2022-07-26T13:28:23Z,"but `mmaster` is set and used in 3 different `vsteffect` methods - that's why i put it in the wrapper. i probably could rework the code in a way that `vsteffect` does not need it anymore, but i'd leave that for later",0,0.9913553595542908
929969259,3278,pietro68,2022-07-26T13:31:46Z,`mtimeinfo` is again written/used in different methods of `vsteffect`. should i figure out how to move these uses of it from `vsteffect` to `vsteffectinstance` as part of step 4?,0,0.9943671822547913
930042679,3278,pietro68,2022-07-26T14:32:49Z,"now implemented in commit 4.6: i moved `muselatency` and `mbufferdelay` in the instance, leaving a copy of `muselatency` in the effect class which is passed to the instance at construction time.",0,0.9940313696861267
930049704,3278,pietro68,2022-07-26T14:38:17Z,"ok, removed",0,0.988579511642456
930049889,3278,pietro68,2022-07-26T14:38:25Z,"ok, removed",0,0.988579511642456
931625588,3278,Paul-Licameli,2022-07-27T22:17:35Z,"please do an interactive rebase, squashing this commit onto the second one, so that all commits are buildable.",0,0.993811309337616
932072268,3278,pietro68,2022-07-28T10:51:52Z,"ok, now done and force-pushed",0,0.8523727655410767
932073188,3278,pietro68,2022-07-28T10:52:55Z,"oops i should delete the ""build fix for osx"" commit - it's only whitespaces now",0,0.8115667700767517
934373560,3278,Paul-Licameli,2022-08-01T10:22:32Z,"i just noticed in review today, the omission of `virtual` from this destructor, though there are other virtual functions. it might look nicer to add it. it's not in fact important, so long as there are never yet any unique or shared pointers to a vsteffectwrapper.",0,0.9656406044960022
934374964,3278,Paul-Licameli,2022-08-01T10:24:16Z,"the minimal validator class doesn't yet appear to be necessary for the vst2 transformation, unlike the case for audiounits and vst3. but no harm in keeping the commit that adds it.",0,0.9887204766273499
934390914,3278,Paul-Licameli,2022-08-01T10:44:47Z,it is not necessary to move these two into the wrapper and i think they will eventually be in the instance.,0,0.9932025074958801
934392244,3278,Paul-Licameli,2022-08-01T10:46:28Z,the existing `statefuleffect` class might also serve the purpose,0,0.9944275617599487
934393090,3278,Paul-Licameli,2022-08-01T10:47:37Z,"the `#include` at top of the file can now be `pertrackeffect.h`, not needing the stateful subclass",0,0.9944756627082825
934397810,3278,Paul-Licameli,2022-08-01T10:53:59Z,"an earlier version of this pr copied muselatency into the instance in its constructor. that change should remain. what i should have said too: the block size, and the user block size, should also be passed into the constructor of the instance. also the array of slaves used to be passed as a reference into the constructor. why no longer? do that too.",0,0.9805054068565369
934402106,3278,Paul-Licameli,2022-08-01T10:59:29Z,"i don't like `doprocessfinalize`, `doprocessinitialize`, or `processblockb`. too much is stil being done in the wrapper class, and therefore the effect still has more state that it should. the purpose of this pr should be to remove as much effect state as possible, identifying the parts that should be per-instance state. and i think the reason you thought you needed this is: you let the slaves remain vsteffect objects, and did not change the type of the slaves to be vsteffectinstance. but you can do this. the array of slaves remains temporarily in the effect, until step 5 is done. but the virtual functions needed in the slaves are only `processfinalize` and `processblock`, now in the instance class, and other functions already in the wrapper.",0,0.9244779944419861
934403493,3278,Paul-Licameli,2022-08-01T11:01:18Z,"i would prefer to have these virtual functions defined non-inline, with comments inside the class about what they do (which is mostly nothing)",0,0.9423355460166931
934407047,3278,Paul-Licameli,2022-08-01T11:06:00Z,this function should be marked `override` and its definition should be non-inline,0,0.9951834082603455
934443631,3278,Paul-Licameli,2022-08-01T11:53:56Z,"if all is done right, `domakeinstance` and the `const_cast` should no longer be needed. `muselatency` and `muserblocksize` don't need to be member variables of the effect. they can become local variables of this function. but then they must be passed to the constructo of instance which stores them. but this may need to wait until step 5.",0,0.9892625212669373
935610976,3278,pietro68,2022-08-02T13:41:00Z,correct. now moved back in the effect.,0,0.9888315200805664
935618589,3278,pietro68,2022-08-02T13:47:25Z,"hmm... `statefuleffect` does not inherit `pertrackeffect` though. i gave it a try anyway, and i got compiler errors. never mind, this is only a temporary class that should disappear at point 5.",0,0.8217426538467407
935629969,3278,pietro68,2022-08-02T13:56:51Z,"ok, done",0,0.9714605808258057
935638171,3278,pietro68,2022-08-02T14:03:30Z,"muselatency, block size, user block size are now passed into the constructor of the instance and saved there. i chose not to pass the array of slaves into the instance constructor, because i now turned slaves from effects into instances - given that, it seems conceptually wrong that an instance should be interested in all other instances.",0,0.9838247299194336
935639151,3278,pietro68,2022-08-02T14:04:26Z,"i now implemented the ""middle class"" vstinstancebase as we discussed, please have a look there.",0,0.9925646781921387
935639803,3278,pietro68,2022-08-02T14:05:02Z,i made them inline now.,0,0.9894876480102539
935643373,3278,pietro68,2022-08-02T14:08:11Z,"ok, done",0,0.9714605808258057
935644368,3278,pietro68,2022-08-02T14:09:04Z,"i now pass them to the instance constructor. as you said, later in step 5. i could remove them from the effect.",0,0.9953422546386719
935685405,3278,pietro68,2022-08-02T14:43:03Z,"well actually at this point i need it, because i pass the instance it belongs to in its constructor, to retrieve it later in ::showclientinterface",0,0.993248701095581
935691503,3278,Paul-Licameli,2022-08-02T14:48:02Z,i do not yet see a force-push with that update,0,0.9844663143157959
943325912,3278,Paul-Licameli,2022-08-11T10:20:53Z,"this is the one virtual function of `vsteffectwrapper` that we can define in the base and then not override again, or so we think now. so the first commit might also remove `vsteffect::getprocesslevel()`",0,0.9935947060585022
943357199,3278,Paul-Licameli,2022-08-11T11:02:32Z,is this part of the comment still correct?,0,0.9918628931045532
943372086,3278,Paul-Licameli,2022-08-11T11:22:56Z,"i did not mention this before, but if you look for the analogous uses of `storesettings` on audiounit instances, one of them happens here. and `storesettings` now happened here too, because `processinitialize` did it next. call `processinitialize` not `doprocessinitialize` below; remove the duplicate steps above (beginning and end of set-program and what comes between, and also the storing of chunks).",0,0.9912086725234985
943385375,3278,Paul-Licameli,2022-08-11T11:40:36Z,"automate() is changed to use `callsetparameterb`, losing the loop over slaves. that seems like a wrong change in side-effects. you should call `callsetparameter`. but that doesn't exist in `vstinstancebase`. the fix should then be: move automate() to the instance class in step 4, which is what the header file says should happen. also move `callsetparameter` (which includes the loop) into instance, out of the effect object. but then `vsteffect::onslider` won't compile. but the solution for that will be, the validator object will call `callsetparameter` on the instance. that function will ultimately be in the validator. so make this temporary fix here in step 4: let the effect retain a pointer to the last constructed validator. assume there is never more than one valdator at once and that its lifetime will include any call to `onslider`, which will happen only while a non-fancy, plain ui dialog is open.",0,0.971950113773346
943390744,3278,Paul-Licameli,2022-08-11T11:47:19Z,"can the distinction between `callsetprogram` and `callsetprogramb` now be eliminated? i think so, but it needs some longer explanation from me.",0,0.9929662942886353
943418946,3278,Paul-Licameli,2022-08-11T12:21:18Z,i think there is no longer any need to make `doprocessfinalize` a separate function.,0,0.981545627117157
943428303,3278,Paul-Licameli,2022-08-11T12:31:21Z,"do not do this. we don't want to do mutex locking and unlocking in a worker thread. we will trust `settings` to be a copy of settings, properly updated in an atomic fashion, by the `effectsettingsaccess` object. yes, strictly speaking you are right that a data race on the `vsteffectsettings` stored in the effect, is possible while the transition to statelessness is not complete, and you might remove this mutex locking then. but i think that is excessive caution. i didn't transform audiounit effects with similar caution and i don't recommend you do it for vst.",0,0.6726642847061157
943431694,3278,Paul-Licameli,2022-08-11T12:34:58Z,"your step 5.1 removes these lines. i already explained how it should be done in step 4, eliminating the need for two versions of the set-parameter function.",0,0.9953063130378723
943435828,3278,Paul-Licameli,2022-08-11T12:39:19Z,"you made these changes in 5.1. i don't like the mutex. does experiment show that this is called on the main thread only in response to slider changes? i need the answer to that, before i can recommend the correct thing to do.",-1,0.9345080852508545
943440357,3278,Paul-Licameli,2022-08-11T12:43:55Z,"there is nothing in the instance now corresponding to `process`. instead you trust `pertrackeffect` to do destructive effect processing in its `process`, calling the `processblock` function of the instance. and after other recent refactorings, that happens in member functions of an `effectstage` object.",0,0.9933330416679382
943447380,3278,Paul-Licameli,2022-08-11T12:51:16Z,i think step 5.3 makes more sense squashed with step 4,0,0.9770376682281494
943450530,3278,Paul-Licameli,2022-08-11T12:54:29Z,"this change might be squashed onto step 4, making 4 more correct",0,0.9915646314620972
943455507,3278,Paul-Licameli,2022-08-11T12:59:27Z,more experience tells you that the division of responsibilities between instance and effect should change. redo the earliest commits to reflect this. so i think you are saying automate really is for the main thread only?,0,0.9908889532089233
943518826,3278,pietro68,2022-08-11T13:57:50Z,"removing it at this stage is not so simple, because doprocessfinalize is in vstinstancebase and it is used by vsteffect; but vsteffect does not know vsteffectinstance... we'd need to wait until step 5",0,0.9846242666244507
945551468,3278,pietro68,2022-08-15T09:10:50Z,ok done that in commit 4.2 (yet to be pushed while i am writing this) - you will see that to make it work i also had to add a call to `fetchsettings` inside `automate`.,0,0.9931107759475708
945572258,3278,pietro68,2022-08-15T09:43:00Z,"the short answer is: not, when doing realtime processing, at least at this stage (i mean, step 4) why? i tried the following: 1) place breakpoint in callsetprogram 2) choose a factory preset: when we reach callsetprogram, mslaves is empty so if we did only destructive processing, then we could go with callsetprogramb only (i.e. the version which ignores slaves) but: if i start realtime processing and then choose a factory preset, when i reach callsetprogram, mslaves is not empty - it has one item and i guess it is the item doing the realtime processing.",0,0.9796754121780396
945847407,3278,pietro68,2022-08-15T15:04:12Z,"i was wrong when i said that automate has to belong to the instance. it must indeed belong to the effect, because changes in sliders are intercepted by the effect vst callback. that being said, yes it is still wrong that automate() loses the loop over slaves. in commit 4.3 i fix that by having automate use callsetparameter and that required that minstances move to the instancebase class.",0,0.8941851258277893
946051875,3278,pietro68,2022-08-15T19:18:56Z,"as i told you during our talk, without introducing this mutex, i always ran into a crash when i moved a slider while processing realtime. this is because msettings was written in the main thread (when moving the slider), while it was read in the worker thread. but i will add a comment about the mutex being a temporary thing until the validator is fully implemented.",0,0.9818286895751953
946052670,3278,pietro68,2022-08-15T19:20:08Z,please see my comment above [a link],0,0.9947742819786072
946085934,3278,pietro68,2022-08-15T20:09:27Z,"ok, done in commit 4.5",0,0.9916175007820129
946843636,3278,pietro68,2022-08-16T14:22:32Z,ok,0,0.9233372807502747
951888329,3278,Paul-Licameli,2022-08-22T20:36:18Z,"""validator""",0,0.9936328530311584
951909361,3278,Paul-Licameli,2022-08-22T21:01:22Z,"step 5.1 adds this assignment, but never uses the member, and never reassigns it back to null. but i'm still progressing through the 5.x commits, which may be squashed into one if i approve them.",0,0.9902772903442383
952310838,3278,pietro68,2022-08-23T08:27:38Z,ok,0,0.9233372807502747
952325909,3278,pietro68,2022-08-23T08:41:41Z,"correct. i introduced `mvalidator` as a way to call `callsetparameter` on the validator's instance, in `::onslider`, as you previously suggested (or so i understood). then i found out that things work also without that call (and i left the code there commented out) so i could delete `mvalidator` now. shall i do it?",0,0.9822001457214355
952394641,3278,Paul-Licameli,2022-08-23T09:44:57Z,"in step 5.3, add: `subeffect.load()` to preserve the behavior.",0,0.9955462217330933
952408298,3278,Paul-Licameli,2022-08-23T09:58:28Z,"in step 5.4, think `poweron` and `poweroff` should not move to wrapper. they are only for the instance. power comes on, only in an instance. note `vsteffinstance.poweron()` -- it's not done on this. but there are calls to `poweroff` done on the effect. the right thing is to change those. where `closeui` does `poweroff`, do it instead to the instance stored in the validator. which is why `vsteffect::mvalidator` finds a use after all. als in `closeui`, reassign `mvalidator` to null when done. the `poweroff()` in the unloading of the effect should just be deleted.",0,0.9870637655258179
952410181,3278,pietro68,2022-08-23T10:00:22Z,good catch! ok,1,0.9965233206748962
860817187,2867,Paul-Licameli,2022-04-28T12:14:09Z,"this changes the format for the monolithic ""sprite sheet"" for dropping in a custom theme. after merging this we must remember to give the updated sheet to put in the wiki page. if more changes to this file are expected during this release cycle, then that can wait until they are all done.",0,0.9943601489067078
860820331,2867,Paul-Licameli,2022-04-28T12:18:03Z,"""which simplify""",0,0.9925150275230408
860825525,2867,Paul-Licameli,2022-04-28T12:24:10Z,"you include this for `evt_theme_change` and not `prefspanel`? as you might have guessed, that is a usage of wxevent that i would rather simplify with observer. in fact, i have a commit waiting in my big branch of module extractions doing just that. i should cherry-pick it, and push it onto your branch, and let you merge it with this branch.",0,0.9913152456283569
860830707,2867,Paul-Licameli,2022-04-28T12:30:14Z,"perhaps say ""which decorate given base classes with simplified theme support"" this is sort of a ""decorator pattern"" only it inserts behavior with inheritance, not object composition.",0,0.9860592484474182
860834913,2867,Paul-Licameli,2022-04-28T12:34:48Z,i'm more hesitant about using `noexcept` liberally. i saw a cppcon talk by john lakos describing reasons for caution. i need to review it again. i mostly use it only when i know something must be called inside a destructor. i look at this and i see it doesn't have a bounds check on the array access.,0,0.8263319730758667
860836592,2867,Paul-Licameli,2022-04-28T12:36:39Z,"given that the index is in bounds (might say it with a `` comment), should this return a reference to a guaranteed non-null object? perhaps. but maybe warn too about invalidation in case states are added or removed.",0,0.9932543635368347
860837463,2867,Paul-Licameli,2022-04-28T12:37:39Z,use `std::rotate` to simplify this,0,0.9940298795700073
860839214,2867,Paul-Licameli,2022-04-28T12:39:26Z,"and because this does all that `swap` can do, and more -- then remove `swap`",0,0.9934712648391724
860842206,2867,Paul-Licameli,2022-04-28T12:42:33Z,failing linux build wants (at least) `#include `,0,0.9443920850753784
860848516,2867,Paul-Licameli,2022-04-28T12:49:02Z,"good comment, saying what they types don't alone imply",1,0.9861651659011841
860853746,2867,Paul-Licameli,2022-04-28T12:54:20Z,"please put this new file pair directly into `src` not `src/widgets` the sub-folder division of `src` was never really ever done on any consistent principle, whereas the coming modularization will only move files again. the seeming intention of `src/widgets` is for reusable, and reused, windows like `ruler` but this looks like it will only ever have one use, closely associated with projectwindow.",0,0.9929488897323608
860881143,2867,Paul-Licameli,2022-04-28T13:21:03Z,`#include ` needed to build non-windows,0,0.9938010573387146
860890600,2867,Paul-Licameli,2022-04-28T13:29:44Z,just default it?,0,0.9927442073822021
860976273,2867,Paul-Licameli,2022-04-28T14:41:12Z,`name` is not used,0,0.9946168065071106
860978214,2867,Paul-Licameli,2022-04-28T14:42:56Z,"maybe you will want to set the window name, for reasons of the screen reader, if perhaps these things can be tabbed to -- talk to about it. in fact, accessibility for this new ui might need to be another issue with another pr, involving wxaccessible classes -- but i don't want to delay merge of this one for that.",0,0.9855420589447021
861071667,2867,Paul-Licameli,2022-04-28T16:05:12Z,"proof? if none, make a `` comment to license it, but then examine the calls to this function , where the burden of proof is then shifted.",0,0.9907958507537842
861072688,2867,Paul-Licameli,2022-04-28T16:06:22Z,"as i said elsewhere, what you assert here, should also be an explicitly commented precondition of the function called here.",0,0.9924241304397583
861080679,2867,Paul-Licameli,2022-04-28T16:14:39Z,"or else, just return and do nothing if the condition fails. other event handlers here do that.",0,0.9862050414085388
861084877,2867,Paul-Licameli,2022-04-28T16:18:57Z,do you need a null check on the return value?,0,0.9938482642173767
861091914,2867,Paul-Licameli,2022-04-28T16:26:38Z,"another assumption of non-null ness, prove how?",0,0.990653932094574
861098456,2867,Paul-Licameli,2022-04-28T16:33:46Z,assuming not null again as at 374,0,0.9887657761573792
861126575,2867,Paul-Licameli,2022-04-28T17:05:33Z,a future pr?,0,0.9885435104370117
861128339,2867,Paul-Licameli,2022-04-28T17:07:51Z,might simplify with comparison of two std::pairs?,0,0.9929465651512146
861129183,2867,Paul-Licameli,2022-04-28T17:08:51Z,"correct filer by real-time capability, ok",0,0.9799191951751709
861129419,2867,Paul-Licameli,2022-04-28T17:09:08Z,filter,0,0.8939088582992554
861130866,2867,Paul-Licameli,2022-04-28T17:10:55Z,quadratic insertion sort instead of n log n std::sort? shrug,0,0.9895688891410828
861133308,2867,Paul-Licameli,2022-04-28T17:14:06Z,i imagine different sorting and grouping criteria might be future demands. do what now? nothing but think about it,0,0.9487514495849609
861134236,2867,Paul-Licameli,2022-04-28T17:15:23Z,and?,0,0.9920211434364319
861136261,2867,Paul-Licameli,2022-04-28T17:17:50Z,"can the return type of this function be identifier then, not naked wxstring?",0,0.9934804439544678
861137058,2867,Paul-Licameli,2022-04-28T17:18:53Z,indent,0,0.9154122471809387
861401952,2867,Paul-Licameli,2022-04-29T00:44:58Z,"an alternative possibility: don't define this event. don't post it from realtimeeffectcontrol. instead, make the realtimeeffectlist a `publisher` of messages when its item list changes -- analogous to what tracklist does. (don't delay events with callafter as tracklist does for legacy reasons. let listeners callafter to delay their reactions as they need.) then the realtimeeffectswindow subscribes. this way of doing it is more consistent with existing designs and would allow other subscribers if we ever need them, which won't need to cooperate specially with realtimeeffectcontrol.",0,0.9871619343757629
861402675,2867,Paul-Licameli,2022-04-29T00:48:03Z,i like this solution better for the possible future expansions. but you can do just enough for present needs: let the list publish only deletions. we might generalize for additions and permutations later.,1,0.5370774865150452
861404043,2867,Paul-Licameli,2022-04-29T00:53:33Z,"for these other event types, closer coupling of this window and the item controls is proper.",0,0.9921361207962036
861417115,2867,Paul-Licameli,2022-04-29T01:49:12Z,"good, now also state it as a postcondition comment for `addstate`",1,0.7228761315345764
861421048,2867,Paul-Licameli,2022-04-29T02:07:03Z,"i see now that there is a serious problem in this design. there should be undo and redo of changes to the effect list. this is not yet part of this pull request. i anticipated the need at commit 5da76c6eae0aceb1823be43bcb9009aa20ead755 with some support. if this window persists through pushes and pops of the undo stack, then storing this pointer is the wrong thing. it might point into a version of the state that is in undo history but not the present project state, and it might become a dangling pointer if redo states are destroyed after an undo and then other edits. should the parent window just rebuild itself entirely whenever the undo stack is pushed or popped? maybe that's easiest to do. just subscribe to events from undomanager. in fact, you don't have a choice. if you can't predict at all how the composition of the realtimeeffectlist changes with undo or redo, you just have to read it all and rebuild. okay, that eliminates the dangling pointer danger.",-1,0.7032485604286194
861421643,2867,Paul-Licameli,2022-04-29T02:09:42Z,"i see uses of `translation` here and elsewhere when building buttons. that means one of these windows should be a `prefslistener` and recreate those labels, in case the user changes the language in interface preferences.",0,0.992967963218689
861421997,2867,Paul-Licameli,2022-04-29T02:11:15Z,this side-effect on the effect list should cause a push of the undo history. see my previous comment mentioning undo/redo matters.,0,0.9935938715934753
861422173,2867,Paul-Licameli,2022-04-29T02:12:02Z,this too needs an undo push.,0,0.9841485619544983
861422400,2867,Paul-Licameli,2022-04-29T02:13:01Z,"and here, another undo push.",0,0.9588134288787842
861422807,2867,Paul-Licameli,2022-04-29T02:14:50Z,"what i said there: the list window needs to subscribe to the undomanager so it can rebuild after undo and redo commands that might change the current list of effects, to avoid pointers into the wrong version of the realtimeeffectlist.",0,0.9910051822662354
861425681,2867,Paul-Licameli,2022-04-29T02:28:20Z,"i see no callback bound to this toggle button. maybe bind an empty lambda with one more explicit todo comment, like other todos in this commit.",0,0.9896071553230286
861426747,2867,Paul-Licameli,2022-04-29T02:33:10Z,"let's also have an `else` and another todo comment in case of other ids, so one effect can replace another. let's make as many todos as we can to make clear how much work remains.",0,0.9939789772033691
861431754,2867,Paul-Licameli,2022-04-29T02:54:40Z,"still more undo stack pushes are needed, for changes of settings in an effect stack. but this doesn't work -- as you may have known from testing. i think it was something you needed to discuss with me, but didn't find the opportunity? it doesn't work because for realtime capable effects, a non-modal dialog is opened, and modifysettings exits before the dialog closes. maybe then, the individual effect has other modifysettings calls in its event handlers, so it sort-of works. but not as you might expect from reading this code, and it won't interact correctly with undo and redo. how to fix this then? see the example of `effectmanager::promptuser` and `macrocommands::promptforparamsfor` which calls it, while inside this scope object's lifetime: [code block] that forces effect dialogs to open modally, even for realtime effects, if you are editing a macro, which is how you can step through those functions and understand. but they change the global effectsettings for the effect, which is of course not the right thing here.",0,0.977191686630249
861433554,2867,Paul-Licameli,2022-04-29T03:02:47Z,"another question to ask is whether all these things requiring pushes and pops of the undo stack are safe to do while playback is in progress. i think we surely want that -- one hope is that you listen as you change settings of a single effect, or even change the composition of the effect list. but now i doubt whether all is set up correctly in the audio engine for that, both to avoid dangling pointers and crashes, and to communicate changes of the sequence of effects properly inter-thread. the limited thing that i know was anticipated by leland's work, is the powering on and off of individual effects, which is what the suspending and resuming of states is for. and the point of the effectsettingsaccess class i developed is to communicate changes of settings of an individual effect correctly -- what this piece of code here will do. but adding, deleting, and permuting effects? or changing the whole stack at one with undo and redo? i must think.",0,0.6826270222663879
861441863,2867,Paul-Licameli,2022-04-29T03:38:49Z,"i see what this subscription is doing and i understand why you need something like it. i question whether this is exactly what we will want. first, sometimes multiple tracks are selected, as when you select all. this might, wastefully, visit this function once for each track, rebuilding the window many times, and finally leaving it as for the last selected track. would it be better to scan the track list for a unique selected track -- and empty the effect list if there is no such track? but then -- as i pointed out long ago, critiquing the design proposals -- there is a distinction between selection, which is non-exclusive, and focus (indicated by the yellow border), which is. i think it makes more sense to show the effect stack for the focused track, which means you should listen for what is now the `evt_track_focus_change` event (but, like theme change, another thing i want to rewrite with observer, and i also have a waiting commit for that, which i can cherry-pick and push onto your branch). will surely want to test this new feature and be satisfied with keystroke navigation, and again, the notion of a ""focused"" object, rather than a ""selected"" one, is in general relevant to the targeting of commands given by keystroke. see for instance `ontrackmenu` in `trackmenus.cpp` which handles shift+m in default key bindings. that keyboard shortcut opens the track drop-down menu for the (unique) *focused*, not selected, track.",0,0.6819429993629456
861648672,2867,DavidBailes,2022-04-29T09:39:25Z,"is there a current design specification for the effects panel which includes the keyboard navigation? i have asked this question on [a link] but have not yet received a reply. concerning whether the effects panel show the effects stack for the focused or selected track. the normal pattern is for a side panel to show some property of a selected item in a list. however, i don't think it fits the current case. a user might want to look at the effect stack without changing which track or track was selected, and each audio track having its own effect button implies this. note however, that when a user presses an effect button, then i presume the intention is that the focus is automatically moved to the effects panel. this means that the track is not the focus and won't have a yellow outline. are the designers happy with that? concerning the list of effects in the effects panel. when the figma designs of this were originally shared by jouni, the keyboard navigation of the list of effects, including the controls in each item, was specified as just a series of tabs. i commented on discord at the time that it would be much better if the keyboard navigation was appropriate for a list. unfortunately, nobody replied to that comment. it is still my view that the list of effects should have keyboard navigation which is appropriate for a list where each list item contains a number of controls, and in addition, the list is read as being a list by users of screen readers. given that these requirements have implications for how the code for the list is structured, first writing it so that works only with mouse interaction, and then ensuring that it works properly with keyboard interaction and screen readers will probably end up involving more work than if it was written with all types of interaction from the start.",0,0.9726497530937195
861704031,2867,Paul-Licameli,2022-04-29T11:05:59Z,also possible: the sidebar changes only if you press effects on another track. (or delete that track) the effects button of that track only is painted as down.,0,0.9929921627044678
874889410,2867,vsverchinsky,2022-05-17T14:27:03Z,added a commetary and replaced pointer with reference type,0,0.9950769543647766
874890343,2867,vsverchinsky,2022-05-17T14:27:38Z,"i'll skip it, as you've already done that",0,0.9866821765899658
874923721,2867,vsverchinsky,2022-05-17T14:52:44Z,"perhaps, what is implemented is not what was asked in the task description actually.",0,0.9593071937561035
874924172,2867,vsverchinsky,2022-05-17T14:53:05Z,there is no link yet),0,0.9779224395751953
875835230,2867,vsverchinsky,2022-05-18T12:31:49Z,"there is no much sense in doing so: `movablecontrol` is a wxwidgets based component, qt has it's own component drag&drop logic",0,0.9827186465263367
876172182,2867,Paul-Licameli,2022-05-18T17:39:51Z,"i do not understand your response. i think you did not understand my objection. changes in the realtimeeffectlist  a ui neutral internal entity should be published with our ui neutral publisher class, as is also done for changes of the tracklist. then this new ui works more indirectly: one drag and drop changes the realtimreffectlist object, then it publishes its message, then the other control reacts. but then it is also possible for other things that need to be kept consistent with the real-time effect list to react also. i do not want to use qt signals and slots outside of a ui layer of code built on a toolkit neutral layer.",-1,0.8283470273017883
878047364,2867,Paul-Licameli,2022-05-20T11:30:15Z,"you repeated ""message""",0,0.9949235320091248
878048128,2867,Paul-Licameli,2022-05-20T11:31:18Z,"""number"" would be a better word than ""amount"" (for a count-noun, not a mass-noun)",0,0.9861676096916199
878076191,2867,Paul-Licameli,2022-05-20T12:07:29Z,"maybe `std::variant` is the more proper thing when the alternatives are not open-ended but instead all enumerated here :shrug: to my mind, `std::any` is more appropriate where there is open-endedness (if, say, realtimeeffectlistmessage was the root of a class hierarchy) or simply make it a numerical field that is ignored for the other message types.",0,0.8875402808189392
878089468,2867,Paul-Licameli,2022-05-20T12:25:23Z,"you need to update the text of labels and buttons for changes of language -- and deriving from `prefslistener` is how that is done. it is not sufficient to update the labels when the theme changes -- and i don't understand why it is necessary then either, but maybe i don't know. ah, but is it that the dismissing of the preferences dialog coincidentally sends theme change and prefslistener messages together, always? so maybe this appears to work when you test change of language, but still i don't think it is done properly. and who knows, we might invent a different ui for language change some day that doesn't have this coincidence.",0,0.9537681937217712
878090547,2867,Paul-Licameli,2022-05-20T12:26:45Z,see what was done in commit 20ace31,0,0.9945783615112305
878106163,2867,Paul-Licameli,2022-05-20T12:45:51Z,please squash this and other compilation fixes into earlier commits,0,0.9952496290206909
878108968,2867,Paul-Licameli,2022-05-20T12:49:15Z,"this breaks the macos build. only the pointer-valued overload of `any_cast` is available, with our minimum targeted version.",0,0.9804101586341858
878353711,2867,vsverchinsky,2022-05-20T16:53:20Z,"i didn't think it was a coincidence, as i understand making a change to a single parameter in a settings group (""interface"" or ""effects"") updates values for all parameters in that group",0,0.9494962692260742
879295413,2867,Paul-Licameli,2022-05-23T10:30:44Z,i18n-hint comment does not match the string which has three format directives.,0,0.9797180891036987
879297182,2867,Paul-Licameli,2022-05-23T10:32:44Z,should you add 1 to from and to? users may understand 1-based indices better.,0,0.9930413961410522
879318802,2867,Paul-Licameli,2022-05-23T10:58:45Z,"the changes for undo and redo look good, though incomplete. replacement of one effect with another is not yet implemented and will also push an undo state. changing on/off states will use `modifystate` not `pushstate`. changing settings after clicking ok the settings dialog should also push an undo state. the details of the short and long user visible messages for undo and redo may disagree with the specifictaion, but maybe the specification will be corrected. none of what i just wrote here will block this pull request.",1,0.7655551433563232
879324057,2867,Paul-Licameli,2022-05-23T11:05:16Z,this pair of files is still in `src/widgets` and i would rather just put it under `src` pending other folder reorganizations later.,0,0.9926519989967346
879354145,2867,Paul-Licameli,2022-05-23T11:37:56Z,"this still subscribes to selection change efents, but we have agreed that is should instead be focus changes. also i suggest that the effects window might subscribe itself rather than relying on `projectwindow` to make the changes.",0,0.9947786331176758
879361713,2867,Paul-Licameli,2022-05-23T11:47:20Z,"""drophintlineheight""",0,0.9932936429977417
879373586,2867,Paul-Licameli,2022-05-23T12:01:02Z,"i see that this call pops a menu and returns a plugin id which is ignored. so it's still to do: substitute one effect for another in the list, and also push an undo item. this pr might be merged with this known incompleteness. (should have a todo comment)",0,0.992111086845398
879386393,2867,Paul-Licameli,2022-05-23T12:16:09Z,when the button is pressed to change the track whose effect list is shown -- then the track focus should also be changed to that track.,0,0.9931032657623291
879585955,2867,Paul-Licameli,2022-05-23T15:22:49Z,"i tested this, and undo/redo did not have the desired effect, and i figured out why. `mtrack` is a shared pointer, so there isn't a danger of a dangling pointer. however, it must be reassigned when the undo state is pushed or popped, so that it points at a track in the current version of the track list. see `track::getid()` for an identifier of a track across undo/redo states. this window needs to store that id, then find that id again with each undo and redo. it may also be necessary to `refresh()` after `settrack()`.",0,0.9823019504547119
879613557,2867,Paul-Licameli,2022-05-23T15:44:07Z,"here and in `reloadeffectlist`, please check that the track is a wavetrack before getting the `realtimeeffectlist`, just to avoid creation-on-demand of a useless, empty list in case the track is of non-wave type.",0,0.9917365908622742
879754655,2867,vsverchinsky,2022-05-23T18:21:24Z,"hm, seems like i've lost part of my changes during commit history rewrite",0,0.9322044849395752
879918652,2867,vsverchinsky,2022-05-23T22:43:21Z,thanks!,1,0.8631753921508789
879936195,2867,vsverchinsky,2022-05-23T23:26:30Z,"but turns out this is not neccessary. `projectwindow` gets notification from `trackfocus` about changed focus, and given that focus now points to a new track instance `realtimeeffectpanel` updates anyway",0,0.9930580854415894
879938092,2867,vsverchinsky,2022-05-23T23:31:33Z,"shouldn't be the case as if we do not show ""effects"" button for other types of tracks",0,0.9813793897628784
880259917,2867,Paul-Licameli,2022-05-24T09:10:29Z,but changing track focus using the up and down arrow keys is another way to change the contents of the sidebar.,0,0.9931921362876892
880273742,2867,vsverchinsky,2022-05-24T09:23:58Z,"didn't think of that, thanks. check is already there",1,0.9890407919883728
880280498,2867,Paul-Licameli,2022-05-24T09:30:19Z,"should it also call through to the base classs updateprefs? i think yes in general, but it might call through to a pure virtual. which might be given a default do nothing implementation. (did you know that a pure virtual can have a definition but also remain pure? yes it can, so subclasses must define it to be constructible, while qualified calls to the function are also allowed.)",0,0.9922654032707214
880285622,2867,Paul-Licameli,2022-05-24T09:35:18Z,"ditto. preference changes might be written to send messages like theme changes, but it was implemented this way with virtual functions before observer existed. that rewrite would eliminate the problem of missed call throughs but would be the bigger work now.",0,0.9189125895500183
880317073,2867,Paul-Licameli,2022-05-24T10:06:53Z,"""an individual""",0,0.9928300976753235
880326434,2867,Paul-Licameli,2022-05-24T10:17:04Z,"i understand you need to repaint a track if effects are inserted or removed in its stack, because the button may need to change its appearance when the effect list becomes empty or becomes nonempty. i do not see why you need to refresh the whole panel when there are changes in the global list of effects. no harm would be done, but a needless repainting.",0,0.9203011989593506
880340197,2867,Paul-Licameli,2022-05-24T10:32:48Z,"you also took this header file out of `src/widgets` actually i don't mind this file being in that folder, because it is more general-purpose and reusable. i only wanted `realtimeeffectpanel.h` to move out of it. but this file can stay in `src` too",0,0.9410816431045532
880341996,2867,Paul-Licameli,2022-05-24T10:34:54Z,"will that line un-collapse the effects panel if it was hidden, whenever i use the up and down arrow keys? maybe not desirable if so.",0,0.9418088793754578
880350123,2867,Paul-Licameli,2022-05-24T10:44:34Z,still misspelled,0,0.908955454826355
880352516,2867,Paul-Licameli,2022-05-24T10:47:31Z,were,0,0.9879379868507385
880378065,2867,Paul-Licameli,2022-05-24T11:18:13Z,"i don't understand why you changed mproject to a `wxweakref` but still assume it is non-null anyway. is there any reason to think the project will ever be destroyed before the associated effects window? did your experiments suggest that is so? see `projectmanager::onclosewindow` where there is some care about the sequence of destruction of things. but note the projectwindow is destroyed there (which should destroy its descendants), just before the last line which destroys the project object. so i think there is no need at all for wxweakref for safety.",0,0.9413213729858398
880382503,2867,Paul-Licameli,2022-05-24T11:23:37Z,"see `realtimeeffectlist::handlexmlendtag` for some answer to your question. yes, there is a check on success of `geteffect` at the time the project is reopened, which we can assume, i think, follows all plugin initializations at startup. and i think there is then no way to insert an effect from a plug-in that does not exist. but can a plug-in ever be un-loaded while the session continues? i don't think that ever happens. if it did, perhaps then more uses of observer and subscriptions might let the realtimeeffectlists update themselves, and they would further propagate `publish`-ed messages to these windows.",0,0.9906248450279236
880386351,2867,Paul-Licameli,2022-05-24T11:28:05Z,ditto,0,0.9754701256752014
880413080,2867,vsverchinsky,2022-05-24T11:57:42Z,"right, it does not make sense `wxwindow::destroy` does not destroy window immediately, but i'm not sure about exact order of things happening after that.",0,0.9746562242507935
880420187,2867,Paul-Licameli,2022-05-24T12:05:54Z,"""wxwidgets delays actual deletion of the window until all events have been processed, since otherwise there is the danger that events will be sent to a non-existent window."" [a link] so maybe your precaution does make sense in event handlers, but it was not fully realized without adding the null checks",0,0.9930853843688965
880423269,2867,vsverchinsky,2022-05-24T12:09:22Z,"but it happens silently, without any warnings, isn't it? if there was a warning, user could have decided to close the project, install plugin and reopen this project again. also, it's not necessary to remove `realtimeeffectstate` if plugin which it refers to is missing. there might be something that indicates a faulty plugin in the stack. but this is more ui/ux question i guess.",0,0.9833210706710815
596395393,759,bitigchi,2021-03-17T21:28:29Z,"""%s hakknda"" olmal",0,0.8199841380119324
596396976,759,bitigchi,2021-03-17T21:31:26Z,"trkede ""website"" diye bir kullanm yok, ""web sitesi"" doru.",0,0.9211996793746948
596397559,759,bitigchi,2021-03-17T21:32:33Z,"ses balamnda ""k"" daha yaygn olarak kullanlyor.",0,0.8424463272094727
596398428,759,bitigchi,2021-03-17T21:34:16Z,"gui  szcn ksaltmas olduu iin byk harfle yazlyor, bu yzden arayz byk harfle yazmaya gerek yok. ""grafik arabirim"" olarak evrilebilir.",0,0.9116964936256409
596398705,759,bitigchi,2021-03-17T21:34:48Z,yap,0,0.9626085758209229
596398963,759,bitigchi,2021-03-17T21:35:17Z,bit,0,0.887111246585846
596399675,759,bitigchi,2021-03-17T21:36:34Z,"bir nceki eviri doru, yeni eviri tmyle hatal.",0,0.8207630515098572
596400189,759,bitigchi,2021-03-17T21:37:22Z,taramak daha dzgn bir eviri.,0,0.8737090229988098
596402279,759,bitigchi,2021-03-17T21:41:15Z,viki,0,0.8793007135391235
596402752,759,bitigchi,2021-03-17T21:42:15Z,"eviri mantk hatal, eski eviri doru.",0,0.883557140827179
596403203,759,bitigchi,2021-03-17T21:43:12Z,eski eviri doru.,0,0.9165588617324829
596403914,759,bitigchi,2021-03-17T21:44:37Z,mmkn olduunca soru edat kullanlmal.,0,0.9050615429878235
596405013,759,bitigchi,2021-03-17T21:46:26Z,olmak hatal eviri.,0,0.7883989810943604
596406714,759,bitigchi,2021-03-17T21:49:41Z,ileti varken mesaj kullanlmamal...,0,0.9172742366790771
596407163,759,bitigchi,2021-03-17T21:50:30Z,sesi olmal,0,0.9268335103988647
596407786,759,bitigchi,2021-03-17T21:51:45Z,hacim ne alaka? ses dzeyinden sz ediyor burada.,0,0.8417412638664246
596408185,759,bitigchi,2021-03-17T21:52:31Z,hacim?,0,0.9897868633270264
596408395,759,bitigchi,2021-03-17T21:52:56Z,hacim?,0,0.9897868633270264
596668573,759,bitigchi,2021-03-18T09:05:53Z,yzde iaretinden sonra boluk yok,0,0.843204140663147
596669805,759,bitigchi,2021-03-18T09:07:26Z,ofseti,0,0.9811558723449707
596671123,759,bitigchi,2021-03-18T09:09:12Z,lin yerine do veya dorusal,0,0.7506266236305237
596671493,759,bitigchi,2021-03-18T09:09:45Z,veri uraya yazld:,0,0.9842841625213623
596672297,759,bitigchi,2021-03-18T09:10:49Z,: eksik,0,0.9225944876670837
596672877,759,bitigchi,2021-03-18T09:11:42Z,davulu. altta da ayn terim iin tambur denmi.,0,0.8449937701225281
596673389,759,bitigchi,2021-03-18T09:12:24Z,trnak iaretinden sonra ek gelirse bolukla ayrlmaz,0,0.7796594500541687
596674064,759,bitigchi,2021-03-18T09:13:22Z,zayf vuruun midi perdesi,0,0.7492009401321411
596677821,759,bitigchi,2021-03-18T09:18:20Z,"baz yerlerde para, baz yerlerde iz kullanlm. hangisi?",0,0.971051812171936
596678334,759,bitigchi,2021-03-18T09:18:58Z,aada ubuk varken ou yerde bar olarak evrilmeden braklm,0,0.7617809176445007
596679401,759,bitigchi,2021-03-18T09:20:28Z,szge varken neden filtre? ayn ey ve biri trke,0,0.9157736301422119
596680346,759,bitigchi,2021-03-18T09:21:45Z,-sxz eki neden ayr? ift kanall varken neden stereo?,0,0.9681465029716492
596681199,759,bitigchi,2021-03-18T09:22:56Z,"evirirken deikenlere kesme iaretiyle ek getirilmez, deikenin byk nl uyumuna uyaca garantisi yok.",0,0.8010202050209045
596682016,759,bitigchi,2021-03-18T09:23:58Z,dzeyin nesi yanl?,0,0.9835816621780396
596683487,759,bitigchi,2021-03-18T09:25:52Z,"... varsa sren bir eylemi belirtir. ""vurular bulunuyor...""",0,0.585522472858429
596685050,759,bitigchi,2021-03-18T09:27:49Z,vuru varken ritim ne alaka? ritim rhythm yerine kullanlyor zaten,0,0.9542824029922485
596686345,759,bitigchi,2021-03-18T09:29:29Z,% burada yzde iaretini deil de bir deikeni belirtiyor olsa gerek. baa yazlmas hatal.,0,0.9132584929466248
596687952,759,bitigchi,2021-03-18T09:31:35Z,sonunda as olduu iin baka bir ifade izliyor olsa gerek. unun gibi bala/bitir: daha yerinde olabilir. programdan kontrol edilmeli.,0,0.8597524166107178
596689332,759,bitigchi,2021-03-18T09:33:25Z,"karartma anlalr deil. sesi aarak gir, dieri iin sesi azaltarak k vb. gibi terimler kullanlmal.",0,0.8305554389953613
596689764,759,bitigchi,2021-03-18T09:34:01Z,solma? karartma? hangisi?,0,0.9634754657745361
596690121,759,bitigchi,2021-03-18T09:34:32Z,aada belirttiim gibi ama/azaltma en iyi karlk fade iin duruma gre,0,0.724766194820404
596690765,759,bitigchi,2021-03-18T09:35:23Z,"gnu genel kamu lisans, ikinci srmn koullar altnda yaymlanmtr.",0,0.8747169971466064
596691979,759,bitigchi,2021-03-18T09:37:01Z,binlerce oktav,0,0.9837821125984192
596692490,759,bitigchi,2021-03-18T09:37:38Z,santihertz,0,0.9710153937339783
596693522,759,bitigchi,2021-03-18T09:39:03Z,"command dmesi olduu gibi braklmal, klavyelerin zerinden aynen byle yazyor.",0,0.7826057076454163
596694248,759,bitigchi,2021-03-18T09:40:02Z,ift kanall'nn nesi yanl?,0,0.9781172275543213
596695029,759,bitigchi,2021-03-18T09:41:05Z,"bu balamda trkede tire kullanlmaz, byle bir kural yok. ""oklu grnm""",0,0.8453771471977234
596695915,759,bitigchi,2021-03-18T09:42:16Z,format kullanlmaya balansa da biim hala ok yaygn evirilerde. deitirilmesi iin bir neden yok,0,0.8239990472793579
596696329,759,bitigchi,2021-03-18T09:42:51Z,"art eviri hatal. ""rnek biim deitiriliyor""",0,0.78006911277771
596696871,759,bitigchi,2021-03-18T09:43:38Z,doru olan eviriyi neden deitiriyorsunuz?,0,0.9643763899803162
596697689,759,bitigchi,2021-03-18T09:44:47Z,""" bin"" olarak evrilmeli (bolua dikkat). trkede 10k diye bir kullanm yok.",0,0.9521806836128235
596698065,759,bitigchi,2021-03-18T09:45:19Z,yanl tire kullanm...,0,0.8995890021324158
596698653,759,bitigchi,2021-03-18T09:45:59Z,yanl tire kullanm,0,0.8592314720153809
596699351,759,bitigchi,2021-03-18T09:46:54Z,kanal neden silindi?,0,0.990092933177948
596699857,759,bitigchi,2021-03-18T09:47:31Z,mzik ne alaka?,0,0.9854589700698853
596837159,759,bitigchi,2021-03-18T12:51:23Z,"ksayol dmeleri genelde ncelikli olarak trke karakter olmayan harflere atanr eriilebilirlii iyi olsun diye. her klavye dzeninde trke harf olmayabilir. , , , ,  gibi karakterleri kullanmamak gerek.",0,0.7432332634925842
596837746,759,bitigchi,2021-03-18T12:51:54Z,"s-expr trkesi sembolik ifade, bu ekilde kullanlmal",0,0.9269208908081055
596839239,759,bitigchi,2021-03-18T12:53:14Z,"""%s (%s, %s, %s, %s ve %s ierir)""",1,0.5162320733070374
596840893,759,bitigchi,2021-03-18T12:54:59Z,"yeni eviri hatal, eskisi doru.",0,0.8020008206367493
596841458,759,bitigchi,2021-03-18T12:55:44Z,"""%s"", audacity yerine gelmeli, hatal eviri",1,0.6004297137260437
596842102,759,bitigchi,2021-03-18T12:56:39Z,"geni zaman olmal, ""ierir""",0,0.9619700908660889
596843187,759,bitigchi,2021-03-18T12:58:04Z,"""hata ayklama yaps"" (derleme: compilation)",0,0.9918870329856873
596846233,759,bitigchi,2021-03-18T13:02:09Z,yayn srm/yaps daha doru. srm derlemesi anlam bakmndan doru; ancak kavramlar karyor.,0,0.9277926087379456
596848144,759,bitigchi,2021-03-18T13:04:51Z,"yeni eviri hatal, eskisi doru. scrub'a gidin bir anlam ifade etmiyor. aramak da szlk anlam olarak doru olsa da kavram olarak hatal.",0,0.7744686603546143
596849423,759,bitigchi,2021-03-18T13:06:28Z,audacity'yi yine de balatmak istiyor musunuz? evirirken kavramlar evirmeye sondan balamak daha doru. zne burada audacity.,0,0.8615801334381104
596850423,759,bitigchi,2021-03-18T13:07:46Z," ekinden nce boluk gelmez, trnak iaretine yanak kullanlr.",0,0.800501823425293
596850960,759,bitigchi,2021-03-18T13:08:26Z,trke karaktere atanan ksayol,0,0.923760712146759
596851576,759,bitigchi,2021-03-18T13:09:17Z,ses balatma hatas (belirtisiz kullanm),0,0.9630683064460754
596853227,759,bitigchi,2021-03-18T13:11:27Z,"dzey yerine seviye kullanm eviriye pek fazla bir ey katmyor, aksine trke kkenli szck kullanmn azaltyor. ltfen trke szcklerin kullanmn yaygnlatralm. dier rnekler iin de geerli.",0,0.8804000020027161
596853969,759,bitigchi,2021-03-18T13:12:24Z,hala yerine hl kullanabilirsiniz.,0,0.8618467450141907
596854728,759,bitigchi,2021-03-18T13:13:28Z,ltfen aygt yerine cihaz kullanmayn.,0,0.8375949263572693
596855743,759,bitigchi,2021-03-18T13:14:51Z,"dosyadaki tm ""hacim"" szcklerini aratp ""ses dzeyi"" olarak deitirin ltfen.",0,0.8460485935211182
596856187,759,bitigchi,2021-03-18T13:15:23Z,u k destekler:,0,0.985870361328125
596856582,759,bitigchi,2021-03-18T13:15:48Z,u girii destekler:,0,0.9901581406593323
596857269,759,bitigchi,2021-03-18T13:16:40Z,at,0,0.8990716338157654
596858133,759,bitigchi,2021-03-18T13:17:41Z,"""\""evet\"" seenei, seilen projeleri annda kalc olarak siler.""",0,0.9618552327156067
596858639,759,bitigchi,2021-03-18T13:18:21Z,"yeni eviri hatal, eskisi doru",0,0.8432251811027527
596859625,759,bitigchi,2021-03-18T13:19:30Z,tutarsz byk harf kullanm,0,0.9308716058731079
596860036,759,bitigchi,2021-03-18T13:20:00Z,-yu gereksiz,0,0.9221336245536804
596860362,759,bitigchi,2021-03-18T13:20:28Z,-yu gereksiz,0,0.9221336245536804
596860932,759,bitigchi,2021-03-18T13:21:13Z,parametresiz,0,0.9920610189437866
596862012,759,bitigchi,2021-03-18T13:22:37Z,anlalamad bu balamda doru. batch iin toplu i olarak kullanlr genelde. tannmad dorudan eviri oluyor.,0,0.6885815262794495
596862533,759,bitigchi,2021-03-18T13:23:15Z,trke karakterde ksayol,0,0.9695455431938171
596862828,759,bitigchi,2021-03-18T13:23:40Z,trke karakterde ksayol,0,0.9695455431938171
596863186,759,bitigchi,2021-03-18T13:24:05Z,trke karakterde ksayol,0,0.9695455431938171
596863527,759,bitigchi,2021-03-18T13:24:32Z,trke karakterde ksayol,0,0.9695455431938171
959061547,3432,Paul-Licameli,2022-08-31T01:31:07Z,dont need second #,0,0.9856319427490234
959061901,3432,Paul-Licameli,2022-08-31T01:32:03Z,"i prefer private only before wxbase, otherwise allowing transitive dependencies",0,0.9904706478118896
959062976,3432,Paul-Licameli,2022-08-31T01:34:59Z,sent,0,0.9007260799407959
959063782,3432,Paul-Licameli,2022-08-31T01:37:09Z,synchronously,0,0.9905000329017639
959064213,3432,Paul-Licameli,2022-08-31T01:38:21Z,completedhandler,0,0.9711396098136902
959290855,3432,crsib,2022-08-31T08:13:28Z,"yeah, i keep copying it :-(",-1,0.9962984919548035
959468199,3432,Paul-Licameli,2022-08-31T11:24:34Z,"a singleton object instead of a namespace for all these functions, but it is stateless, for now at least. will that need to change? will there ever be more than one serviceconfig?",0,0.9887235164642334
959469004,3432,Paul-Licameli,2022-08-31T11:25:30Z,or to be cuter [code block],0,0.9906071424484253
959470426,3432,Paul-Licameli,2022-08-31T11:27:17Z,"i like seeing `string_view` and wish we could have c++20 soon, so we can also use `std::span` to pass ranges of constant data, instead of `const std::vector &`, without some irrelevant allocator type as a template parameter.",1,0.7215451598167419
959470973,3432,Paul-Licameli,2022-08-31T11:27:57Z,"i have build lib-cloud-audiocom and i want to understand all that is in it, and i begin here at the bottom of the dependency graph of files.",0,0.9871238470077515
959480176,3432,Paul-Licameli,2022-08-31T11:39:02Z,incorrect comment,-1,0.7953888773918152
959484535,3432,Paul-Licameli,2022-08-31T11:44:16Z,perhaps overload 3 might express it more clearly: [a link],0,0.9878854751586914
959492329,3432,Paul-Licameli,2022-08-31T11:53:48Z,"that comment above makes me nervous. `observer.h` says `intended for single-threaded use only`. should you use `callafter` wherever you publish, and change the comment to say, ""messages are received in the main thread in idle time"" ?",-1,0.9590865969657898
959493388,3432,crsib,2022-08-31T11:54:59Z,"no, i'd rather stop using observer.",0,0.9813796877861023
959494211,3432,Paul-Licameli,2022-08-31T11:55:53Z,"or, should there be mutual exclusion around all `publish` calls? what might stil happen is that a subscription is destroyed concurrently with a publication. that might not have bad consequences, but i would have to reexamine observer.h to be sure of that.",0,0.9787342548370361
959517551,3432,Paul-Licameli,2022-08-31T12:22:53Z,what is this lock guard guarding? is it the static `refreshtoken` ? i also need to be convinced that you don't need a `std::recursive_mutex`.,0,0.9942447543144226
959581678,3432,Paul-Licameli,2022-08-31T13:23:48Z,"i thought so... it is possible, though unlikely, that the two-argument overload of `authorizerefreshtoken` holds the mutex, and calls the other overload, which calls this function, which sets the lambda as the callback -- and this lambda may be called at once before `setrequestfinishedcallback` exists, making a self-deadlock. but `recursive_mutex` would eliminate the possibility.",0,0.9870703816413879
959607746,3432,Paul-Licameli,2022-08-31T13:45:54Z,shadowing of the static `refreshtoken`,0,0.9937117099761963
959630146,3432,Paul-Licameli,2022-08-31T14:04:44Z,"if it is stipulated in the header file as a precondition that all functions that may use this global are to be called in the main thread only then there is no need for mutexes to guard it and you can avoid the recursive mutex. i think that is true from inspection of the entire pr, but not obvious. the functions would be `validateauth`, `hasrefreshtoken`, `unlinkaccount`",0,0.9891858696937561
959651506,3432,Paul-Licameli,2022-08-31T14:22:43Z,this is equivalent to simply `!getaccesstoken().empty()`,0,0.9949807524681091
959663393,3432,Paul-Licameli,2022-08-31T14:32:12Z,do you want to defend against a string the defines one of the arguments more than once?,0,0.9721770882606506
959671306,3432,Paul-Licameli,2022-08-31T14:38:54Z,`unexpectedresponse`,0,0.9845439791679382
959678525,3432,Paul-Licameli,2022-08-31T14:44:50Z,i think this is more like a future than a promise?,0,0.9715880751609802
959679362,3432,Paul-Licameli,2022-08-31T14:45:35Z,"if this is generally like `std::async`, then call the return object a future",0,0.9940225481987
959685049,3432,Paul-Licameli,2022-08-31T14:50:05Z,incorrect comment,-1,0.7953888773918152
959687055,3432,Paul-Licameli,2022-08-31T14:51:45Z,"four types recognized here, but only three in the enumeration in serviceconfig.h? i notice now, that enum is only for the return of `audioformat getpreferredaudioformat` and it's always the same. did you forget to define an `enumsetting` to save it as a preference?",0,0.9896547794342041
959692088,3432,Paul-Licameli,2022-08-31T14:56:00Z,"`move` doesn't help with `wxstring`, but no harm.",0,0.9671052694320679
959695952,3432,Paul-Licameli,2022-08-31T14:59:07Z,above four members can be `const`,0,0.9935414791107178
959766579,3432,Paul-Licameli,2022-08-31T16:03:00Z,"what should happen in case this ""promise"" (or future) is destroyed before completion, without any calls to `abort` or `discardresult` ? it could be that `uploadoperation` still occupies some resources unnecessarily because `maborted` isn't true. should `uploadpromise` call `abort()` in its detructor if not completed? what are you crazy? that would be a pure virtual function call! the base class can't do that...",-1,0.9916210174560547
959772546,3432,Paul-Licameli,2022-08-31T16:08:59Z,"... so instead, the destructor of the concrete class could guarantee that one of completion, abort, or discard has happened, and then the lambdas should capture weak, not strong, references to self. i think this would make better raii guarantees on the main thread. the ""leak"" in case there is no explicit abort on the main thread isn't until program exit, but it could mean the other thread works longer than needed before stopping.",0,0.98044753074646
959773507,3432,Paul-Licameli,2022-08-31T16:10:01Z,"what does ""s3"" abbreviate?",0,0.9906361699104309
959775627,3432,crsib,2022-08-31T16:12:08Z,"well, it kinda means s3 (or simple storage service, but i doubt anyone calls it that). it's a somewhat standard protocol for object storages. [a link]",0,0.985413670539856
959783108,3432,crsib,2022-08-31T16:19:43Z,"this will complicate the code. abort is not synchronous and i don't see much reason to change that (although it is achievable). passing weak pointers will additionally increase complexity of the implementation. right now promise (or future, or operation) outlives the dialog at most until lubcurl invokes any of it's callbacks. making abort synchronous would basically just delay the dialog closing for that specific time. i do not, however, like the idea for blocking ui thread for such reasons.",0,0.8121271729469299
959783533,3432,Paul-Licameli,2022-08-31T16:20:06Z,"i checked to see what would happen if a nonexisted file was given. `addfile` throws a `simplemessageboxexception`. but we get here on a worker thread, right? is it safe to do that? there will be a `callafter` that pops up the dialog, no problem, but is there a `catch` above us here? if not, should there be a `guardedcall`? do we need to guard any other calls into `lib-network-manager`?",0,0.9877859354019165
959786529,3432,crsib,2022-08-31T16:22:52Z,the file existence is checked on the main thread first. but i will improve safety here anyway.,0,0.9937904477119446
959786813,3432,Paul-Licameli,2022-08-31T16:23:12Z,"you don't like `observer` for other reasons, or you were thinking of the same thread safety question? i got as far as finishing a review of `uploadservice` where i see you define another message type but do not use `observer`. i must review `userservice` and that will complete a review of this commit. still leaving several other commits.",0,0.9855936169624329
959789106,3432,crsib,2022-08-31T16:25:33Z,"however, i've thought of solution that will make both of us happier! :-)",1,0.9950450658798218
959789571,3432,Paul-Licameli,2022-08-31T16:26:04Z,"did i misunderstand the intended context of use of this, then? is there going to be a non-modal dialog in audacity giving an interface that lets the user abort the operation? or will that be on a web page only?",0,0.9407529830932617
959791151,3432,Paul-Licameli,2022-08-31T16:27:38Z,"it's good for a class at a lower level not to make too-strong assumptions, or else, to make those assumptions explicit in comments in the header.",0,0.9845461845397949
959792885,3432,crsib,2022-08-31T16:29:36Z,"there is a modal dialog in audacity that calls abort when closing, if the promise was not fulfilled.",0,0.9941018223762512
959795660,3432,crsib,2022-08-31T16:32:34Z,"this is private class. the file existence is checked by a public ""factory"" class before the object of this class is created. there is a subtle chance that the file will be deleted while we are waiting to get here, so i will improve the exception guarantees at this specific point.",0,0.9933371543884277
959796069,3432,crsib,2022-08-31T16:33:01Z,"this class is not even listed in a header, to be fair.",0,0.9592429995536804
959806839,3432,Paul-Licameli,2022-08-31T16:44:41Z,"this is the safe, main-thread publishing done my userservice.",0,0.9942498207092285
959807533,3432,Paul-Licameli,2022-08-31T16:45:23Z,but this is the unsafe subscription to oauthservice which will be rewritten. correct?,0,0.9933388829231262
959815581,3432,Paul-Licameli,2022-08-31T16:54:02Z,perhaps the string literals given to `setheader` should be named constants to avoid repetition of them within this new library.,0,0.9864387512207031
960497941,3432,Paul-Licameli,2022-09-01T10:47:43Z,you understand that `setname` affects audible screen reader output?,0,0.9947233200073242
960510189,3432,crsib,2022-09-01T11:02:32Z,"yes, that is the reason for setname here",0,0.9943215847015381
960515841,3432,Paul-Licameli,2022-09-01T11:06:30Z,this commit reminds me that i turn off wavpack in my local build because for some reason i never got it to work. `wavpack/wavpack.h` can't be found.,0,0.9878801703453064
960518007,3432,Paul-Licameli,2022-09-01T11:07:40Z,if i choose `system` not `local` for `audacity_use_wavpack` it doesn't even configure.,0,0.9903154969215393
960519798,3432,crsib,2022-09-01T11:09:44Z,i'm not sure why it should. do you have a system version of wavpack installed? i was sure that we have overcame this problem by dropping your conan cache.,0,0.9335989952087402
960530001,3432,Paul-Licameli,2022-09-01T11:20:52Z,"let it stand for alpha, but i don't like these `extern`s and i hope you don't either. it makes the dialog dependent on src/export files but the dependency is not made explicit in an `include` directive. those export files are header-less because they are supposed to be highest-level things in the dependency graph, and candidates for easy removal as modules, if we can ever return to the extraction refactorings. i'm sure you or i will think up something in the future to rewrite the necessary parts of this file as a registry that the exporters can plug into. making possible tinier builds of audacity that only know wav exporting for instance.",0,0.6417290568351746
960532075,3432,crsib,2022-09-01T11:23:21Z,"i don't like it, nor do i think that it is feasible to rewrite the whole export framework. it is highly coupled with the ui and provides pretty much no sane way to configure the exporting plugin.",-1,0.9769290089607239
960538335,3432,Paul-Licameli,2022-09-01T11:30:42Z,"here it is... that preference that i noted before, is not a preference. it's always wav. no memory of a user choice. must that be fixed for release?",0,0.9229416847229004
960539989,3432,crsib,2022-09-01T11:32:24Z,"i should be always wavpack (if available), i will tipple check that. there are no plans to give the user control of exporting right now, so this is not a bug.",0,0.9896590113639832
960540355,3432,crsib,2022-09-01T11:32:55Z,"and it is part of service *configuration*, it is not a preference.",0,0.9935966730117798
960540530,3432,Paul-Licameli,2022-09-01T11:33:09Z,you want a busy-wait when numerator equals denominator?,0,0.9921420812606812
960542837,3432,crsib,2022-09-01T11:35:47Z,this is the behavior from the original progress bar.,0,0.991145670413971
960552488,3432,Paul-Licameli,2022-09-01T11:47:29Z,is this the right power of 10?,0,0.9908083081245422
960555306,3432,crsib,2022-09-01T11:50:23Z,"this value is unrelated to the original progress dialog. i can use virtually any number greater that 1. 10000 is probably an overkill, but it doesn't affect the result much. rescaling is needed because wxgauge does not allow 64 bit values.",0,0.9869192242622375
960560219,3432,Paul-Licameli,2022-09-01T11:55:53Z,i'm not competent in this language yet,-1,0.8940447568893433
960563642,3432,Paul-Licameli,2022-09-01T11:57:13Z,what was the reasoning to put this in `src/cloud` but the rest in `src/cloud/audiocom`?,0,0.9929735660552979
960604442,3432,crsib,2022-09-01T12:40:19Z,for the miniscule chance of adding other services :-) can be easily moved into audiocom,1,0.8663151860237122
960625019,3432,crsib,2022-09-01T13:00:19Z,"i have reviewed the usages, it can be moved to main thread for now.",0,0.9930163621902466
960646100,3432,crsib,2022-09-01T13:19:56Z,nope,0,0.9711623191833496
960770078,3432,crsib,2022-09-01T15:04:44Z,"only the first two. i want to be able to reset the handlers, so the associated resources can be released as well",0,0.9932308197021484
960910612,3432,crsib,2022-09-01T17:12:05Z,"i have revised it and see no problem here: even if the exporter calls `poll` multiple times with `numerator == denominator`, which is not the case - the only side effect is yielding every time the exporter calls poll. and i would say that 50 msec is like 5 times more than we need. 20 fps is noticeable laggy. ideally, export plugin should use a background thread, so the events are processed by the main thread normally.",0,0.972969114780426
961015127,3432,Paul-Licameli,2022-09-01T19:14:51Z,im not asking for a change.,0,0.7802611589431763
961019587,3432,Paul-Licameli,2022-09-01T19:17:48Z,"by the way, its minus-cule not mini-scule but everybody gets it wrong unless they like typography and know that majuscule is a thing too...",0,0.9522303938865662
961158407,3432,Paul-Licameli,2022-09-01T22:45:37Z,this line is new since the last push. is it correct?,0,0.9951615929603577
961161532,3432,Paul-Licameli,2022-09-01T22:53:00Z,new too,0,0.9731351733207703
961163113,3432,Paul-Licameli,2022-09-01T22:56:44Z,also new... okay i trust this is a pattern done for a good reason,0,0.586280345916748
961167520,3432,Paul-Licameli,2022-09-01T23:07:26Z,lock the callbacks mutex first,0,0.9924746155738831
961172709,3432,Paul-Licameli,2022-09-01T23:20:26Z,it's still true in the latest push that the return value of this function never changes. is it your intent to check availability of wavpack? i think i know how to do that. wait for me to push a pr onto your pr.,0,0.994606077671051
961764150,3432,Paul-Licameli,2022-09-02T14:48:51Z,exportplugin,0,0.9939854741096497
961764378,3432,Paul-Licameli,2022-09-02T14:49:05Z,exportplugin,0,0.9939854741096497
685508915,1193,Paul-Licameli,2021-08-09T20:45:58Z,unnecessary # include,0,0.9775623083114624
685509729,1193,Paul-Licameli,2021-08-09T20:47:23Z,"add authorship comment at the head of this and the corresponding .h file, as you have elsewhere with the other new files.",0,0.9951647520065308
685511232,1193,Paul-Licameli,2021-08-09T20:49:49Z,"comment what this is for, and explain that the default implementation does nothing.",0,0.9903637766838074
685519651,1193,Paul-Licameli,2021-08-09T21:03:49Z,"maybe delete this using directive for an inherited constructor, now that spectrumview has its own constructor that overloads it.",0,0.9879435300827026
685520142,1193,Paul-Licameli,2021-08-09T21:04:35Z,one-argument constructors should usually be `explicit` unless you really want implied conversions.,0,0.9816035032272339
685524078,1193,Paul-Licameli,2021-08-09T21:11:16Z,"you didn't copy mstartt, mendt. maybe spectraldata should supply its own copy to make this less error prone?",0,0.9748417735099792
685526202,1193,Paul-Licameli,2021-08-09T21:15:00Z,this change should also be conditional on experimental_brush_tool be sure all such appearance changes in the ui don't happen when the experimental is off.,0,0.9931509494781494
685527766,1193,Paul-Licameli,2021-08-09T21:17:39Z,"this one line deserves a tiny commit of its own because it is a bug fix in existing code, not properly part of your project.",0,0.9476794004440308
685529331,1193,Paul-Licameli,2021-08-09T21:20:33Z,you can leave one less changed file :-),0,0.9943562150001526
685534104,1193,Paul-Licameli,2021-08-09T21:29:03Z,"comment a bit about the purpose of this time. it's really mapping from time (as discrete sample count) to a set of bins, right? then maybe (1) a better name and (2) the set need not contain wide integers, because there will not be so many frequency bin values.",0,0.9831770062446594
685536473,1193,Paul-Licameli,2021-08-09T21:33:16Z,"so start is minimum of all sample times so far entered, end is max? comment that.",0,0.9929443001747131
685544382,1193,Paul-Licameli,2021-08-09T21:48:46Z,this static isn't used,0,0.9905975461006165
685547666,1193,Paul-Licameli,2021-08-09T21:55:06Z,this function fails to compile with experimental_brush_tool off. maybe you can simply wrap this whole file in an #ifdef to turn it off. likewise for the header.,0,0.9914255142211914
685548259,1193,Paul-Licameli,2021-08-09T21:56:21Z,explicit,0,0.9793804287910461
685549977,1193,Paul-Licameli,2021-08-09T21:59:56Z,"this header file is actually not needed! it is included only in one .cpp file, and that file influences the behavior of the program completely by means of registrations at static initialization time. so the class definitions of this .h can simply move to the header-less .cpp file. see all the files under src/menus -- they are headerless, but similarly manage to cause their items to appear in the toolbar menus.",0,0.9860972762107849
685550816,1193,Paul-Licameli,2021-08-09T22:01:40Z,"and once you do that, you could even put the whole file inside `namespace { ... }` which could have the tiny advantage of making fewer symbols in the linkage tables. maybe not important.",0,0.9903995394706726
685551119,1193,Paul-Licameli,2021-08-09T22:02:19Z,swap the last two lines so it compiles without the experimental,0,0.9919752478599548
685554134,1193,Paul-Licameli,2021-08-09T22:08:59Z,can these have in-line initializers?,0,0.9942324757575989
685555352,1193,Paul-Licameli,2021-08-09T22:11:45Z,"i prefer in-line initializers in the class, or member initializers before the function body, instead of assignments in the body, where possible. it makes it a bit easier to compare the constructor and the class and be sure everything is initialized. in fact, when a class has const or reference data members, those are the only ways you can initialize them, and it's good when possible to make such data members to help the reader reason about the class, knowing the members are immutable. so are any of these immutable? i think mproject can have type `audacityproject *const`",0,0.9454554915428162
685555845,1193,Paul-Licameli,2021-08-09T22:12:49Z,even making this one initialized here with nullptr would be nice.,0,0.9836946725845337
685560062,1193,Paul-Licameli,2021-08-09T22:22:25Z,"i think this event handler got here because you imitated the history dialog. but you don't use maudioiobusy anywhere. and yet, you should! we should disallow commands like the apply button that might change the content of wave tracks while you are also playing or recording. that is consistent with the rest of audacity.",0,0.9535245895385742
685560824,1193,Paul-Licameli,2021-08-09T22:24:11Z,this other bit of event handling copied from the undo history dialog is less useful. that dialog really needs to detect changes of undo history so it can update what it shows. this dialog has no such need.,0,0.982102632522583
685563080,1193,Paul-Licameli,2021-08-09T22:29:10Z,"finally you may wonder if you really need this bit of copied event handling from history window. you do! because one thing that might change in preferences is the language. we have made sure that all non-modal dialogs re-create themselves so that user-visible strings are translated into the newly chosen language. it is right to do here. of course you won't see translation if you try it now, becase your new intenationalized strings (those in the `xo` macro) are not yet entered in the catalogs that human translators have yet to fill in.",0,0.8593342900276184
685563727,1193,Paul-Licameli,2021-08-09T22:30:48Z,not actually constructed anywhere? make these private? or... see below,0,0.9919613003730774
685564259,1193,Paul-Licameli,2021-08-09T22:32:10Z,"so i understand this is the sole entry point to the code in this file, used by the dialog. separation of dialog code from the state it manages is a very good idea! maybe spectraldatamanager should be a namespace, and this the one function declared in it, and all the rest can be hidden in the corresponding .cpp file.",1,0.9906430840492249
685591097,1193,Paul-Licameli,2021-08-09T23:41:00Z,"your name, not mine!",0,0.9436460137367249
685591394,1193,Paul-Licameli,2021-08-09T23:41:43Z,your name! and this one did not historically split from trackpanel.cpp.,1,0.7835157513618469
685594177,1193,Paul-Licameli,2021-08-09T23:49:04Z,"i find a dependency cycle of spectrumview and brushhandle, but no other files in that cycle. i think brushhandle includes spectrumview only because it needs spectraldata. they both do, so you can make separate new files just for that structure, and the cycle is broken. it is a common lower-level dependency of both. better: avoid a header including a header. make `class spectraldata;` just an incomplete type definition here, and include spectraldata.h only in brushhandle.cpp. maybe you will try that and find a compilation failure -- because the compiler tries to generate an in-lin destructor of brushhandle, which requires a dtor of `shared_ptr `, which requires the dtor of spectraldata, which is only forward-declared. and so you fix that by explicitly declaring the destructor and making it non-inline. maybe you will need the same for copy and assignments, or instead you can also fix that by `= delete;` - ing them.",0,0.9747430086135864
685595369,1193,Paul-Licameli,2021-08-09T23:52:20Z,"i recommend this rule: in a .cpp file, the first `#include` directive should always be for the corresponding .h file. putting it before any others causes that header file to be properly self-contained -- you can be sure it is not depending on some other header being included first to make it compilable. instead you are forced to make all necessary nested include's or make forward declarations of incomplete types. maybe you know this rule -- you followed it in all other examples of new .cpp files, but just forgot it once here.",0,0.9101150035858154
685596259,1193,Paul-Licameli,2021-08-09T23:55:02Z,"there are several things leftover in this file because you followed the example of selecthandle, but they are not used. all of the time-snapping things are probably among those. `connect` and all the timer handling are also unneeded, i think. i don't know if that is all of them. please take another look and clean up unnecessary things.",0,0.9524645805358887
685598894,1193,Paul-Licameli,2021-08-10T00:02:19Z,"as i mention elsewhere, spectraldata should be in its own .cpp/.h file pair so that a dependency cycle between brushhandle and spectrumview can be broken. when a .cpp file exists, you might also make more complicated functions like this non-inline.",0,0.994070827960968
685600247,1193,Paul-Licameli,2021-08-10T00:06:38Z,"now to begin some suggestions about more difficult matters: i finally deduced from reading other code that the values of ll_sc correspond to whatever time value is at the mouse x position. but you know that spectrum transformers will be used, and there will be a natural ""hop"" size of 1/4 of whatever fixed fft window length you are using. so it may be disadvantageous to collect frequency bins for too many time coordinates that don't fall at hop widths. maybe all the ll_sc values ought to be rounded so that they differ by multiples of the hop size. maybe you can simply round every ll_sc value as it comes into this class. or maybe let the first value, whatever that is, be unrounded, so the user's first pick can be more precise, but afterwards all values should be rounded so their difference with the initial value is a multiple of the hop.",0,0.9592391848564148
685603807,1193,Paul-Licameli,2021-08-10T00:17:16Z,you never call with maysnap true. so why not simplify this function and remove freq_snap_distance?,0,0.9942322373390198
685604258,1193,Paul-Licameli,2021-08-10T00:18:49Z,some unused functions above,0,0.9944663643836975
685607203,1193,Paul-Licameli,2021-08-10T00:27:57Z,"i thought escape might have to do more work to be sure the spectral highlight goes away with the esc key, but experiment tells me, no!",0,0.9624583721160889
685607405,1193,Paul-Licameli,2021-08-10T00:28:34Z,*according to,0,0.98740154504776
685607892,1193,Paul-Licameli,2021-08-10T00:30:02Z,these two might be const members of brushhandle,0,0.9891153573989868
685617635,1193,Paul-Licameli,2021-08-10T01:03:12Z,"i'm puzzled why the add function affects only the current state, but the subtract function rewrites all past states. maybe if you rounded times to discrete hops of 512 (or whatever window size / 4 is), as i suggested elsewhere, then you would find it easier to erase what you added just in the most recent state.",-1,0.7632846236228943
685618642,1193,Paul-Licameli,2021-08-10T01:07:00Z,"i think most of these lines are deletable copies from selecthandle? but maybe the click should call handletimefreqdata once -- if you follow the suggestion elsewhere that the first pick (at least in the life of the spectraldata object, not necessarily the first pick in the life of each click-drag-release) should be at the exact time coordinate at the mouse-down point, estabilishing the time origin for rounding to hops.",0,0.9872996211051941
687604343,1193,Paul-Licameli,2021-08-12T10:54:38Z,"maybe the first push_back should happen instead when you click, so every call to drag, including the first one, can enlarge the selection.",0,0.9782072901725769
687607234,1193,Paul-Licameli,2021-08-12T10:59:27Z,what is the reason for the clipping of coordinates here? i think this is a wrong solution for the absense of array bounds checking somewhere else in the program.,0,0.9727190136909485
687678842,1193,Paul-Licameli,2021-08-12T12:48:04Z,"each time you call this function, a spectrumtransformer is created and destoyed. if you round sample times to hop sizes, you might be computing the same ffts repeatedly. maybe the spectrumtransformer object could have a longer lifetime, and a cache of fft windows? this may be a problem for me to think about and implement to improve my class.",0,0.9823150634765625
687680957,1193,Paul-Licameli,2021-08-12T12:50:53Z,this is an algorithm for plotting an unfillled circle. but shouldn't there be a filled circle? the numerical tricks used for fast plotting may be less important here than correct calculation of the time and frequency bins that must be added. something like: [code block],0,0.9890543222427368
687681494,1193,Paul-Licameli,2021-08-12T12:51:27Z,four calls to positiontofrequency might be reduced to two. see how arguments do and don't change.,0,0.9839507341384888
687696979,1193,Paul-Licameli,2021-08-12T13:11:17Z,maybe too: do clamping of values to the acceptable range within this function (std::clamp is a useful little c++17 function). no bin value needs to be less than 0 or more than the nyquist bin (window size / 2). maybe that is the better replacement for the clamping of x and y values done in the drag method of brushhandle.,0,0.9901989698410034
688241187,1193,Paul-Licameli,2021-08-13T04:51:43Z,"i see a problem. you always pass true as the first argument to the base class constructor, which means output is required, the inverse fourier transform is done, and overlap-add, and pasting of data into the track that was supplied to process(). all of this is unnecessary when you are only computing frequency snapping. could this be another reason for the slowness?",0,0.8662037253379822
688241396,1193,Paul-Licameli,2021-08-13T04:52:28Z,"i think i understand things better now, and it's the right thing to do after all.",1,0.9092223048210144
688243028,1193,Paul-Licameli,2021-08-13T04:58:08Z,how will this change if all sample counts are rounded to hop sizes? will it mean that the inner for-loop needs only one pass?,0,0.9919834733009338
688243963,1193,Paul-Licameli,2021-08-13T05:01:16Z,"you zeroed out a certain bin, but also one bin up and down in each direction. you may have got into trouble because you lack a bounds check on the bins, so you compensated elsewhere in the program such as by limiting the coordinates in the brush tool. but better to fix it all here. and yet, why are you going one bin up and down like this? is this an unnecessary correction of the other problem, that you were ""drawing"" unfilled circles instead of filled ones?",0,0.9360232949256897
688244888,1193,Paul-Licameli,2021-08-13T05:04:27Z,"i see the ""magic number"" 2048 repeated in this file. is the sameness of those numbers a coincidence, unimportant to the design -- or is it essential? if it's essential, it is better to give this constant a name, and repeat the name in two places, not the literal number. i think the hop size of 1/4 the window size may need to be used in more places outside this file -- so that hop size should be public in the header as well, as a named constant.",0,0.9846963882446289
688245481,1193,Paul-Licameli,2021-08-13T05:06:28Z,as mentioned before -- be careful here too about bounds checking. don't fetch the array at nonexistent subscripts.,0,0.9864896535873413
688904970,1193,Edwardhk,2021-08-14T09:08:28Z,this line is removed in latest commit,0,0.9949843883514404
688915572,1193,Edwardhk,2021-08-14T10:53:46Z,added abstracted method for copying.,0,0.9951226115226746
692040865,1193,Paul-Licameli,2021-08-19T11:54:36Z,question: should this rounding happen before or after the update of mstartt and mendt?,0,0.9915395379066467
693363907,1193,Paul-Licameli,2021-08-21T14:54:58Z,"if this is all in spectrumview.cpp, then i understand this commit does not yet fix drawing problems.",0,0.9889127016067505
693363961,1193,Paul-Licameli,2021-08-21T14:55:31Z,"why not 512, which is 1/4 window size? why do you think you need more closely spaced hops?",0,0.9899073839187622
693364210,1193,Paul-Licameli,2021-08-21T14:58:01Z,"you can simplify this if-else block just to the one statement after the else. that is because operator [] of std::map may mutate the map. if the data type has a default constructor, then it guarantees the subscripted element is present, creating it on demand in default-constructed state if it was not.",0,0.9933857321739197
693365302,1193,Paul-Licameli,2021-08-21T15:09:00Z,i checked again ho mfreqlowerbound and mfrequpperbound are set up when you construct the brush handle. you still exclude the lowest and hightest frequency bins from editing. is that still needed after better bounds checking and removing the +/- 1 hack?,0,0.9940443634986877
693366036,1193,Paul-Licameli,2021-08-21T15:15:36Z,why are you excluding certain extreme values of x and y coordinates? is that also something made unnecesary by bounds checkin somewhere else?,0,0.9913721084594727
693366427,1193,Paul-Licameli,2021-08-21T15:19:08Z,"you round sample counts down to find the hop, but maybe round to nearest would work better, correcting the x coordinate less in the worst case. so add 1/2 of hop zie to the long long position, before dividing. similarly, round the y to the nearest frequency bin, not downward.",0,0.9918754696846008
693366902,1193,Paul-Licameli,2021-08-21T15:23:18Z,"i think mmostrecentx, mmostrecenty, mautoscrolling, and the timerhandler class are all legacies of selecthandle that you don't need. there are still unnecessary things to remove from brushhandle.cpp.",0,0.9815741181373596
693367138,1193,Paul-Licameli,2021-08-21T15:25:40Z,perhaps these variable names should be h1 and b1 to suggest the different coordinate space.,0,0.9845989942550659
693367383,1193,Paul-Licameli,2021-08-21T15:27:25Z,"and maybe h0, b0 and maybe the twice used x -> h and y -> b transformations could each be a little lambda",0,0.9912061095237732
693367777,1193,Paul-Licameli,2021-08-21T15:30:36Z,"""line drawing"" steps are unchanged. only the coordinate space is different. that's what i expected. (but maybe you will change variable names. also dh, db)",0,0.9864541888237
693368265,1193,Paul-Licameli,2021-08-21T15:33:54Z,i think you need to change this function now so it expects hop and bin values but it is still now expecting sample count and frequency values.,0,0.9880934357643127
693371560,1193,Edwardhk,2021-08-21T16:04:27Z,"this is before our discussion on the rendering fix in spectrogram, large hop size yields brush stroke that's not looking good. since we have found potential fix for that, will change it to 1/4 of the `mwindowsize`",0,0.9264156222343445
693372818,1193,Edwardhk,2021-08-21T16:15:28Z,"yes, since dragging out of the track (to non-visible frequency) will generate wrong result for connecting coordinates.",0,0.9779155850410461
693379100,1193,Edwardhk,2021-08-21T17:15:25Z,`mmostrecentx` and `mmostrecenty` is used for drawing the outline of the brush tool. will remove the `timerhandler` and `mautoscrolling`,0,0.9946159720420837
693418988,1193,Paul-Licameli,2021-08-22T00:30:27Z,is this entire commit only for a debugging feature that you don't use in the final product?,0,0.9891848564147949
693419129,1193,Paul-Licameli,2021-08-22T00:32:03Z,"did you mix up the intended definitions of db and dh, sb and sh?",0,0.9895086288452148
693419434,1193,Paul-Licameli,2021-08-22T00:36:06Z,"maybe the code is correct, but the substitution of h for x and b for y in variable names isn't consistent, and is sometimes reversed, so it is hard to review it.",0,0.945823073387146
693419498,1193,Edwardhk,2021-08-22T00:36:49Z,"you are right, these lines should be removed from pr",0,0.982120931148529
693422901,1193,Paul-Licameli,2021-08-22T01:19:22Z,should that say `spectrumsize -1` ?,0,0.9902958273887634
693438775,1193,Edwardhk,2021-08-22T04:24:39Z,"sorry you are right about this, have been corrected to stay consistent.",-1,0.9920096397399902
1245285984,4853,Paul-Licameli,2023-06-28T14:15:08Z,when you need an abstract interface with just one interesting virtual function -- just make an alias for a `std::function `,0,0.9899811148643494
1245287778,4853,Paul-Licameli,2023-06-28T14:16:26Z,"can the listener and publisher be new attached objects on the project, so that no intrusion in projectmanager is necessary?",0,0.9941668510437012
1245293847,4853,Paul-Licameli,2023-06-28T14:20:51Z,i think the listener and publisher classes should just be fused into one.,0,0.9802964925765991
1245685077,4853,saintmatthieu,2023-06-28T19:46:11Z,"sounds like a use case for an attachment, indeed : these blokes are just here to live, no one manipulates them ... the attachment should still be defined in `src`, though, the only possible get-together place for `projecttimesignature` and `tracklist` without modifying the dependency graph.",0,0.9853493571281433
1245685661,4853,saintmatthieu,2023-06-28T19:46:52Z,"but that'd mean moving the implementation of the publisher down in `src`, meaning more code to re-implement when migrating to qt.",0,0.9879274964332581
900120288,2224,crsib,2022-06-17T13:32:19Z,"please update to gpl2-or-later. or even better, please add `/* spdx-license-identifier: gpl-2.0-or-later */` to the top of both export and import files",0,0.9950675964355469
900122535,2224,crsib,2022-06-17T13:34:41Z,"this `#ifdef` since audacity was ported to use cmake based build. it is save, but it could be dropped.",0,0.9946091175079346
900145911,2224,crsib,2022-06-17T13:59:08Z,please add space before `(`,0,0.9954212307929993
900157180,2224,crsib,2022-06-17T14:07:42Z,please rewrite using `boolsetting`,0,0.9952619075775146
900157235,2224,crsib,2022-06-17T14:07:47Z,ditto,0,0.9754701256752014
900159935,2224,crsib,2022-06-17T14:10:54Z,you can tie to boolsetting,0,0.9951484799385071
900160496,2224,crsib,2022-06-17T14:11:28Z,and this code becomes no longer needed,0,0.9946398138999939
900161441,2224,crsib,2022-06-17T14:12:32Z,please move all the setting objects to the anonymous namespace above. this way you can reuse them!,0,0.9929127097129822
900163544,2224,crsib,2022-06-17T14:14:49Z,you can write `const auto hybridmode = hybridmodesetting.toggle();`,0,0.9946731925010681
900163850,2224,crsib,2022-06-17T14:15:07Z,and this code will go away as well!,0,0.9782142639160156
900165351,2224,crsib,2022-06-17T14:16:40Z,"but you still need to flush the config, so this line remains!",0,0.9942982792854309
900166661,2224,crsib,2022-06-17T14:18:00Z,let's use c++ way [code block],0,0.9950810670852661
900167540,2224,crsib,2022-06-17T14:18:55Z,"please initialise values here, i.e. `wxcheckbox* mhybridmode { nullptr };`",0,0.9958536624908447
900171542,2224,crsib,2022-06-17T14:23:21Z,the correct code is `progressresult::failed`,0,0.994340181350708
900171856,2224,crsib,2022-06-17T14:23:45Z,you can just use `= {}` to zero initialize the structure,0,0.9936996698379517
900173231,2224,crsib,2022-06-17T14:25:15Z,please use setting object you've extracted to the anonymous namespace before,0,0.9954087138175964
900175952,2224,crsib,2022-06-17T14:28:04Z,missing check for `isopened`,0,0.9741344451904297
900177859,2224,crsib,2022-06-17T14:30:10Z,please remove `this` and use `nullptr`.,0,0.9954043626785278
900190813,2224,crsib,2022-06-17T14:44:52Z,please use `nullptr` to close the context - after this line please write: [code block] this way the context will be closed using raii and won't leak. on top of that - it will allow to simplify the code,0,0.9940861463546753
900199075,2224,crsib,2022-06-17T14:53:47Z,`constexpr size_t` please,0,0.9950335025787354
900202771,2224,crsib,2022-06-17T14:57:25Z,this call will go away,0,0.9882330298423767
900204089,2224,crsib,2022-06-17T14:58:54Z,`const auto` instead of `uint32_t` (or `const size_t`),0,0.9926631450653076
900204703,2224,Subhra264,2022-06-17T14:59:35Z,done,0,0.8682363629341125
900206553,2224,crsib,2022-06-17T15:01:02Z,for consitency: `exporting selected audio as wavpack`,0,0.9957537651062012
900206863,2224,crsib,2022-06-17T15:01:24Z,for consistency: `exporting the audio as wavpack`,0,0.995512068271637
900211786,2224,crsib,2022-06-17T15:07:17Z,"`getbuffer` reurns `const char*` already, and i see no reason to remove const here: you do not modify the buffer and `const t*` means that you could not modify the data, the pointer itself is modifiable.",0,0.9932875037193298
900277760,2224,crsib,2022-06-17T15:50:23Z,"wavpack works even with float32 data, so `int16sample` sounds like a pessimiztion to me. i think we should allow user to choose between `16 bit`, `24 bit` and `32 bit float`, similar to exportpcm.",0,0.9467484951019287
900285527,2224,crsib,2022-06-17T16:00:11Z,"(i believe, that audacity will return you an array of 32 ints, if you request sample24 as an output format for the mixer. am i right, -licameli?)",0,0.990655243396759
900286019,2224,crsib,2022-06-17T16:00:47Z,this cycle should be adopted to the different sample formats,0,0.9947484135627747
900287276,2224,crsib,2022-06-17T16:02:20Z,"this can be `return progressresult::failed` now, as memory managment is handled by c++ now",0,0.9949173927307129
900289410,2224,crsib,2022-06-17T16:04:59Z,"`return progressresult::failed`? and i think that `basicui::showerrordialog` should be used to notify the user about the error in places where codec has failed. (please, see exportpcm for example)",0,0.99357670545578
900290066,2224,crsib,2022-06-17T16:05:54Z,both conversions are redundant,0,0.9742857217788696
900290152,2224,crsib,2022-06-17T16:06:00Z,ditto,0,0.9754701256752014
900290412,2224,crsib,2022-06-17T16:06:22Z,"please, use `static_cast`. we do not allow c-casts in audacity no more",0,0.9872701168060303
900291363,2224,crsib,2022-06-17T16:07:42Z,sounds like that we should return progressresult::failed (and see above about error messages),0,0.9915202260017395
900291650,2224,crsib,2022-06-17T16:08:05Z,no longer needed!,0,0.7668503522872925
900291893,2224,crsib,2022-06-17T16:08:24Z,`failed`,0,0.9508921504020691
900292361,2224,crsib,2022-06-17T16:09:04Z,`static_cast`,0,0.9950950145721436
900296054,2224,crsib,2022-06-17T16:13:44Z,unused!,0,0.9827383160591125
900296205,2224,crsib,2022-06-17T16:13:58Z,`return false;`,0,0.9898089170455933
900305300,2224,crsib,2022-06-17T16:26:53Z,"this function can be rewritten with less nesting involved! [code block] also, this allows to remove `error` from the writeid structure!",0,0.9531883001327515
902412129,2224,crsib,2022-06-21T09:54:36Z,`reinterpret_cast` please!,0,0.9624525904655457
902414023,2224,crsib,2022-06-21T09:56:31Z,"this can be simplified as `wavpackbuffer[j*numchannels + i] = *mixed++;`, not critical",0,0.9944901466369629
902417415,2224,crsib,2022-06-21T10:00:11Z,"for simplicity we can cache that block in memory, but this will do too. very good!",1,0.9941505789756775
902417968,2224,crsib,2022-06-21T10:00:45Z,we generally prefer to have an empty new line at the end of the file,0,0.9926855564117432
902420526,2224,crsib,2022-06-21T10:03:25Z,"hmm, i'm not sure why this is needed. and i think we need to flush settings here",0,0.8886750340461731
902475187,2224,crsib,2022-06-21T11:03:31Z,"we can drop ifdef here, similar to export",0,0.9954162836074829
902476604,2224,crsib,2022-06-21T11:04:44Z,not really needed,0,0.929262101650238
902482123,2224,crsib,2022-06-21T11:09:49Z,this can be moved up! [code block],0,0.9512469172477722
902484090,2224,crsib,2022-06-21T11:12:14Z,"it is advisable to use references whenever we have non-null guarantees. it is not critical here, because check for `nullptr` is made right on top of it, but simplifies reading the code quite a bit.",0,0.9822684526443481
902488217,2224,crsib,2022-06-21T11:17:12Z,i think it would be better to call `getmaxblocksize()` on the first channel. it will return the number of samples audacity uses for a single block.,0,0.985942542552948
902488672,2224,crsib,2022-06-21T11:17:44Z,i preffer to use `const` as much is possible!,0,0.9924296736717224
902533050,2224,crsib,2022-06-21T12:03:07Z,"few thoughts: * even though no dithering is expected here, appending sample by sample can become a bottlneck here * 32 bit depth does not gurantee float samples, this should be checked seprately so it looks like we have 3 cases here: 1. 24-bit or in fp mode: no conversion is needed at all. the loop can be as simple as: [code block] 2. 16-bit: create a temp buffer of `int16_t`, copy stripped data there, append to the channel in a way similar to the fisrt case 3. 32-bit: create a temp buffer of floats, convert int32 data into there (dividing by int min/max), copy data channels",0,0.9625678062438965
902534531,2224,crsib,2022-06-21T12:04:45Z,this breaks handling of cancelled case,0,0.8080070614814758
902539439,2224,crsib,2022-06-21T12:10:15Z,we do not allow such allocations in most of the cases. this case can be written as [code block],0,0.9940958023071289
902539664,2224,crsib,2022-06-21T12:10:27Z,ditto,0,0.9754701256752014
902547525,2224,crsib,2022-06-21T12:18:54Z,the choice of separator looks a bit odd to me. why not forward slash or '\n'?,-1,0.6515868902206421
904753835,2224,Subhra264,2022-06-23T08:52:13Z,"in the `exportwavpack.cpp` file, i think there were some issues with float 32 bit export. earlier, i just passed 32 bit int values for float sample export. so, i think while importing it was getting imported as 32 bit int (before adding special cases for float sample import as you suggested). though it was ok while importing in audacity ( wtih the previous code before applying your suggestions for import), i tried to play the 32 bit exported wavpack file using the vlc media player and it sounded like corrupted. now, when i converted the `mixed` data into `float` and then into `int32_t` while exporting as 32 bit float, both vlc media and audacity (after applying your suggestions) opened and played the 32 bit float files correctly.",0,0.9504715204238892
904764235,2224,crsib,2022-06-23T08:57:56Z,"this branch should have additional condition, something like ``` if (mformat == int24sample || (wavpackgetmode(mwavpackcontext) & mode_float) == mode_float)",0,0.995366096496582
904767000,2224,crsib,2022-06-23T09:00:28Z,please use `std::numeric_limits ::max()`,0,0.9950987696647644
904767949,2224,crsib,2022-06-23T09:01:24Z,"we can move it to the top, and reuse it's value in decoding cycle! please mark `const` as well",0,0.9950920343399048
904772293,2224,crsib,2022-06-23T09:05:26Z,"i think you should set `config->float_norm_exp: = 127;` to enable fp mode in wavpack. in any case - you should consult `wavpackgetmode` to check, if you need to convert the values. `1u << 31` - `std::numeric_limits ::max()` please.",0,0.9903941750526428
904773150,2224,crsib,2022-06-23T09:06:20Z,"(value `127` is an exponent bias for ieee754 32-bit float values. we have 8 bits for exponents, so the bias is `2^7 - 1`)",0,0.9931635856628418
905997789,2224,crsib,2022-06-24T12:04:56Z,"minor, but i expect a compiler warning here. let's add `static_cast ` here. sorry i've missed that before...",-1,0.9940031170845032
906003619,2224,crsib,2022-06-24T12:13:25Z,"not that important here, but is is best to avoid memory allocations in such loops. allocations can be quite costly.",0,0.95875084400177
1444013109,2224,wthrajat,2024-01-07T14:09:54Z,i am curious to know why :d,1,0.9897945523262024
1210105253,4746,saintmatthieu,2023-05-30T11:01:31Z,`const auto sequence =`,0,0.9890879392623901
1210105384,4746,saintmatthieu,2023-05-30T11:01:38Z,`const auto sequence =`,0,0.9890879392623901
1210109821,4746,saintmatthieu,2023-05-30T11:05:56Z,am i correct in understanding that this commit doesn't change any behaviour?,0,0.9891707301139832
1210135481,4746,saintmatthieu,2023-05-30T11:29:04Z,`sharedpointer ()` ?,0,0.9944169521331787
1221277527,4746,saintmatthieu,2023-06-07T09:40:38Z,looks like both branches of this `if` do the exact same...,0,0.9900978803634644
1221323418,4746,saintmatthieu,2023-06-07T10:12:52Z,`const auto &input` (below too),0,0.9952732920646667
1221335343,4746,saintmatthieu,2023-06-07T10:20:45Z,why not using `const std::optional `? reading usages with `-1` is puzzling.,0,0.7812346816062927
1221364940,4746,saintmatthieu,2023-06-07T10:40:32Z,"could be const, right?",0,0.9854987859725952
1221375158,4746,saintmatthieu,2023-06-07T10:50:16Z,shouldn't _all_ tracks be leaders now?,0,0.9890428185462952
1221387152,4746,saintmatthieu,2023-06-07T10:58:18Z,i don't understand why we have to make this check here. it seems to me that this implementation would result in `tracklist::nchannels(rightchanneltrack) != rightchanneltrack.nchannels()`.,0,0.8280983567237854
1221391691,4746,saintmatthieu,2023-06-07T11:02:09Z,"so until we have the real deal, the leader will be the one iterating over all channels. nice.",1,0.5314338207244873
1221422271,4746,Paul-Licameli,2023-06-07T11:31:03Z,"no, track objects are not leaders only yet. that is a farther refactoring goal.",0,0.9866580367088318
1221426186,4746,Paul-Licameli,2023-06-07T11:33:50Z,"that is intended. a non-leader track will count only itself and later channels and give access through the wide sample sequence interface to those channels only. (i wrote that in general terms anticipating future more than stereo tracks). i expect track painting code will use the widesamplesequence abstraction too, and will require objects that only view one side.",0,0.9922818541526794
1223988858,4746,saintmatthieu,2023-06-09T08:11:24Z,"`leftchanneltrackofstereotrack.nchannels()` must equal 2, and it will, that's fine. `rightchanneltrackofstereotrack.nchannels()` now equals 1. what code needs to do such check? unless there really is a need for it, i'd at least assert false for the time where we still have the concept of leaders.",0,0.9878159165382385
1223994448,4746,saintmatthieu,2023-06-09T08:16:34Z,looks unused.,0,0.955072820186615
1223997733,4746,saintmatthieu,2023-06-09T08:19:49Z,here as well: why not `optional `,0,0.9939019680023193
1224034200,4746,saintmatthieu,2023-06-09T08:54:10Z,"referring to [a link]: trying to figure out whether `sequence` is expected to be a leader or not. given `channel < 0`, if it is a leader, it will return as many instances as the track has channels. if not, it will return only one instance. then i suppose that clients of this function must take care not to call it with `channel = -1` and iterate over all tracks, else there would be more than one instance for the right channel of a stereo track. disclaimer: i probably still miss some context around this function.",0,0.965472936630249
1224062590,4746,saintmatthieu,2023-06-09T09:21:22Z,"side note : now debugging splitting a stereo track to mono, as this is an ""multichannel"" effect. it hit `assert(!partner->mpgroupdata);` in track.cpp, line 216. might be related to the work you did on having tracks share mute, gain and other properties. i guess this assert could be removed, but it will require your attention.",0,0.9559157490730286
1224088317,4746,saintmatthieu,2023-06-09T09:35:15Z,"oops: always false if `channel = -1`, due to the implicit conversion from signed to unsigned.",-1,0.9384061694145203
1224113671,4746,saintmatthieu,2023-06-09T10:01:45Z,"looks like this function, when used by `pertrackeffect`, takes care that `sequence` is always a leader. i wonder if this actually always must be true. if it must, please assert. i'm giving up on reviewing that part, at least for now, i can't grasp all possible situations.",0,0.8922163248062134
1224121854,4746,saintmatthieu,2023-06-09T10:10:47Z,please assert in this lambda that `input.psequence` is a leader.,0,0.9950673580169678
1224124063,4746,saintmatthieu,2023-06-09T10:13:04Z,const,0,0.8837863802909851
1224132088,4746,saintmatthieu,2023-06-09T10:21:49Z,"just realized that `mix.cpp` also uses this function, i reckon for the real-time effects. in this context `channel == -1`, but it's only called with leader sequences. so looks correct in that case too.",0,0.9751105904579163
1224135099,4746,saintmatthieu,2023-06-09T10:25:14Z,"it's unfortunate that ""width"" here is used for bit depth when we're introducing ""wide"" sequences.",-1,0.962653398513794
1224189285,4746,Paul-Licameli,2023-06-09T11:31:57Z,"i can't do that. nothing in `widesamplesequence` mentions the notion of ""leader"" any more. nor do i want to add some virtual functions to it just so i could make the assertion.",0,0.9639805555343628
1224194862,4746,saintmatthieu,2023-06-09T11:39:28Z,why not getting the envelope values once and then iterate over the channels to apply it on the entries in `msamplequeue` ?,0,0.9916942715644836
1224197445,4746,saintmatthieu,2023-06-09T11:42:43Z,"same here, i think `getenvelopevalues` can be factored out of the loop.",0,0.9928817749023438
1224201296,4746,saintmatthieu,2023-06-09T11:47:33Z,would be nice to access const references `mt0` and `mt1` .,0,0.9759454131126404
1224218506,4746,saintmatthieu,2023-06-09T12:06:31Z,"the conceptual difference in `waveclip` between ""play"" and ""sequence"" start times is the former accounts for trimming, the other not. i find this naming fairly sensible. now `track` has `virtual double getstarttime() const = 0`, `sampletrack` has this `getsequencestarttime`. `wavetrack` implements `getstarttime` by calling `getplaystarttime` on its clips. as a reader used to the `waveclip` convention, i first thought it was a bug for `mixersource` to call `seq->getsequencestarttime()` to decide where to start getting the samples from. this pr looks like a good opportunity to rename these two.",0,0.966835618019104
1224224775,4746,saintmatthieu,2023-06-09T12:13:38Z,i still haven't figured out the need for queuing in this class. isn't the caching provided by `sampletrackcache` sufficient?,0,0.9623480439186096
1224377381,4746,saintmatthieu,2023-06-09T14:25:27Z,"alternatively, `std::max_element` over clips.",0,0.9922851324081421
1224384776,4746,saintmatthieu,2023-06-09T14:32:02Z,right.,0,0.9789980053901672
1224428951,4746,Paul-Licameli,2023-06-09T15:03:36Z,"sorry, i want to overrule that opinion. i expect a transitional period in which tracks are not all leaders but painting is reimplemented in terms of another abstraction that will make use of this. ultimately there will be no remaining notion of leader at all.",-1,0.9558338522911072
1224430152,4746,Paul-Licameli,2023-06-09T15:04:41Z,good catch.,1,0.9776482582092285
1224449729,4746,Paul-Licameli,2023-06-09T15:23:29Z,"are you saying the naming may cause confusion with the different terms in waveclip? i will change the name simply to `getstarttime` and `getendtime` as in track. i got compilation errors when i did it that way at first, but i can fix that error another way without inventing other names.",0,0.9897214770317078
1224716577,4746,saintmatthieu,2023-06-09T20:02:00Z,sounds good.,1,0.857205867767334
1225830847,4746,Paul-Licameli,2023-06-11T14:28:29Z,i disagree. the sequence object is here cast to a wavetrack and the track interface is still really needed.,0,0.7715623378753662
1225831307,4746,Paul-Licameli,2023-06-11T14:29:17Z,likewise i disagree here.,-1,0.7210878133773804
1225831618,4746,Paul-Licameli,2023-06-11T14:31:18Z,"correct, the commit ""update msamplepos in just two places, at function exits"" is not intended to change behavior. the transformation of `mixersource` needs to be careful, and i'm showing small steps of transformation in these commits. and still i made a mistake which now has its fix-up commit.",-1,0.5172568559646606
1225832150,4746,Paul-Licameli,2023-06-11T14:35:22Z,"you would mean `widesamplesequence` now with changes of names, but that would not compile. anyway, this line (changed in the first commit) is ultimately changed again, at ""mixersource uses sampletrackcache ""widely"" and doesn't use track...""",0,0.990688681602478
1225845950,4746,Paul-Licameli,2023-06-11T15:26:35Z,"adding very little to clarity in my opinion, when the scope of the variable is so small.",0,0.8232204914093018
1225855449,4746,Paul-Licameli,2023-06-11T16:00:08Z,"true, some further possible simplification after the loop splitting.",0,0.9905097484588623
1225857031,4746,Paul-Licameli,2023-06-11T16:07:51Z,"but that also makes the assumption that envelope values do not depend on the channel. that is not true now in all possible tracks that you can construct by joining mono channels, but as in other parts of this pull request, i will allow myself in these transformations to disregard such cases.",0,0.9942336678504944
1225861074,4746,Paul-Licameli,2023-06-11T16:29:27Z,i agree,0,0.9744842648506165
1225863099,4746,Paul-Licameli,2023-06-11T16:37:27Z,"this code was older than my sampletrackcache, and that cache was also reused in spectrogram drawing. the extra layer of queue is still useful to handle the mismatch of the number of samples fetched from the track, and the number of samples really produced, because of resampling. i assume there is nothing for me to change in response because we will remove that cache anyway.",0,0.9916712045669556
1225863126,4746,Paul-Licameli,2023-06-11T16:37:46Z,i don't care too much,-1,0.4807148575782776
1225864814,4746,Paul-Licameli,2023-06-11T16:47:10Z,"see commits 9f7d6c31b2d9fb2d4a9d01801673606830d9bab1 and c0f7aecfdb16c4cbd8cd240665a2fa7b5376d231, now merged.",0,0.9916297793388367
1225865212,4746,Paul-Licameli,2023-06-11T16:49:30Z,"as i said, i can't assert that. but as you will see in the next round of review, the condition must be ensured by `pertrackeffect.cpp` to correct a bug in an earlier version of this branch, which caused assertion violations when generating a stereo chirp.",0,0.9929081201553345
1225866023,4746,Paul-Licameli,2023-06-11T16:54:15Z,"it seems too much to me, when only a few small positive values are needed.",-1,0.8718339204788208
1226246230,4746,saintmatthieu,2023-06-12T08:04:17Z,right. i must have missed the cast somehow.,0,0.9646539092063904
1226246601,4746,saintmatthieu,2023-06-12T08:04:38Z,right. i must have missed the cast somehow.,0,0.9646539092063904
1226294227,4746,saintmatthieu,2023-06-12T08:37:08Z,"right, this is just a question for my understanding in the prospect of the caching refactoring, not a request for change. i see where it comes from now, given the layer of resampling, thanks for the explanation. when you say ""remove that cache"", you are talking about the `sampletrackcache`, right? if so, this caching for resampling is still a problem to time stretching, since it requests 65536 samples at once. this isn't as bad as the megabyte currently queried by `sampletrackcache`, but still this will likely be a performance bottleneck. how to solve this? reducing its size? i suppose the queue must have size at least as large as the largest playback buffer size possible, which might be tricky to find out and most of the time still unnecessary large. the `stretchedwidesamplesequence` must solve the same problem : for a given requested output length, it doesn't know in advance how many samples must be pulled from its source. this makes me wonder if a good approach would be yet another, resampling decorator. then `mixersource` would need only one simpler method as opposed to currently two complex ones (`mixsamerate` and `mixvariablerates`). the processing chain would then go `mixersource > (resamplingsequence) > stretchingsequence > wavetrack`, with `resamplingsequence` injected only if needed. (`stretchingsequence` could also do the caching as proposed in my draft, or we'd pass it a `cachingsequence`, whichever.)",1,0.8581492304801941
1226314568,4746,saintmatthieu,2023-06-12T08:52:42Z,"another interesting aspect to the resampling decorator: it could be freely injected at some other stage of the processing chain than the one proposed. i guess it's best to have it after stretching, yet who knows, there may be surprises along the way.",0,0.9543592929840088
1226398728,4746,saintmatthieu,2023-06-12T09:55:56Z,"in that case it is not so much about clarity but rather easing optimization on the compiler. not sure that in such cases it really _does_ make it easier on the compiler, but for us programmers it's a very easy thing to do.",0,0.9790894389152527
1226408163,4746,saintmatthieu,2023-06-12T10:03:22Z,"i still can't grasp the use of `rightchanneltrackofstereotrack.nchannels()` always being equal to 1, even in terms of painting. but all right, i can live with that for now.",0,0.645024836063385
1235306842,4746,saintmatthieu,2023-06-20T13:53:27Z,"`trackrange` are selected leaders, so why is it necessary to use `findleader` and not just `find` ?",0,0.9920750856399536
1235326417,4746,saintmatthieu,2023-06-20T14:07:09Z,the current behavior in audacity is that all selected tracks will disappear and be replaced by one track with the rendered audio. now this is removing only the first of selected leaders (causing the other leaders to move up in the ui) and appends the rendered track to the bottom. i don't expect this behavior change to be wanted.,0,0.9840649962425232
1235329514,4746,saintmatthieu,2023-06-20T14:09:22Z,"before ""mix and render"": ![a link] after: ![a link]",1,0.6012985110282898
1235352954,4746,Paul-Licameli,2023-06-20T14:25:47Z,"because, operator ++ behaves differently, iterating leaders only and not channels. this change makes `insertionpoint` correct. without it, just making a new empty stereo track, and mixing-and-rendering, corrupts the track list and causes the crash.",0,0.9900197982788086
1235366946,4746,Paul-Licameli,2023-06-20T14:35:34Z,"you are right. failure to remove right channels was part of this bug, but now it works correctly only when there is one selected track. so please review the new, second fixup.",0,0.9398431777954102
1520464592,6068,patrickvi2,2024-03-11T21:41:49Z,"this is a valid value in expected range. if you already support c++23 in your tool-chain, you might better use `std::expected` as return-type, otherwise a `std::optional` or at least a negative value to be able to sort out non-valid input.",0,0.9936630725860596
1520471662,6068,patrickvi2,2024-03-11T21:50:41Z,"maybe check, if it is save to assume `float` is 32bit on all machines. but i think, it is....",0,0.9888285994529724
1520476658,6068,patrickvi2,2024-03-11T21:57:07Z,you might want to add an early return for factor is not fullfilling expectations (`factor <= 0`),0,0.9934855103492737
1520489828,6068,patrickvi2,2024-03-11T22:14:44Z,why?,0,0.9622438549995422
1520504166,6068,patrickvi2,2024-03-11T22:35:31Z,"as you use `factor` for calculating the bounds of your iterators, it's maybe a good idea to check `factor` is in expected range.",0,0.9901636242866516
1520506147,6068,patrickvi2,2024-03-11T22:38:38Z,shouldn't it be `1.f / env`?,0,0.9928855299949646
1520509149,6068,patrickvi2,2024-03-11T22:42:58Z,"as `env` can still be close to infinity small, the resulting weight might get a huge number introducing noise and artifacts. i could imagine, that either limiting `1/env` or the weight would result in less audible artifacts.",0,0.9746232032775879
1520941304,6068,saintmatthieu,2024-03-12T06:55:42Z,"i didn't know `expected`, that's interesting, thank you. unfortunately we still c++17, and even our ci toolchain for macos doesn't support the full c++17 std lib, e.g. ` `. i don't know the exact version numbers, but the oldest macos version we release audacity for cannot deal with the most recent c++ versions. also, we are relatively lenient in terms of safety: we document functions with `` conditions, assert these preconditions, but generally don't otherwise deal with error handling. you won't find this pattern often, where the return value is checked for error. seems to work for us :person_shrugging: on the other hand, unit-testing is encouraged, and i have been lazy doing this time...",1,0.964634358882904
1520944888,6068,saintmatthieu,2024-03-12T06:59:55Z,"i will assert at the beginning of `formantshifter::process` like i should have, given the pre-condition stated in that methods documentation. concerning this particular method, given its narrow scope, it usually is tolerated without.",0,0.9943897128105164
1521158295,6068,saintmatthieu,2024-03-12T09:45:26Z,"a remnant of me copying chunks from the [a link] to get started. it's not a great protection, because, as you commented someplace else, the weights can still end up being huge. i expect this can happen if for some reason the input signal has a frequency region of near-zero values. i'm about to push a protection that i think makes sense: the purpose of formant preservation is to boost or attenuate spectral regions by some reasonable amount of decibels. this commit will limit the amplification to +20db, which is plenty for our purpose and then avoid crazy amplification.",0,0.8259280920028687
1521160597,6068,saintmatthieu,2024-03-12T09:47:04Z,"since `env` has type `float`, i expect `1` to be typecast to float, too. but sure, it doesn't hurt adding the `.f`.",0,0.9917367100715637
1521161890,6068,saintmatthieu,2024-03-12T09:47:57Z,"agreed, limiting the weights it will be.",0,0.9924440979957581
1521166433,6068,saintmatthieu,2024-03-12T09:50:49Z,-licameli would you be so kind to review that i pasted here your discord message in a relevant way?,0,0.5946852564811707
1521563419,6068,crsib,2024-03-12T14:23:47Z,i am confused. why `lib-utility` instead of `lib-math`?,-1,0.9377732872962952
1521578196,6068,saintmatthieu,2024-03-12T14:32:08Z,"`lib-math` depends on `lib-soxr`. i'm reluctant to let the time-and-pitch depend on this mainly because it compiles pffft functions which are also found in `lib-fft`, another dependency of time-and-pitch.",0,0.739447832107544
1521770782,6068,crsib,2024-03-12T16:22:24Z,"i think this should be moved into a separate directory, and with `requirements.txt`",0,0.9876573085784912
1521779139,6068,crsib,2024-03-12T16:27:01Z,do you plan to have different implementation?,0,0.9927009344100952
1521779928,6068,crsib,2024-03-12T16:27:33Z,why is this a part of a logger (which is a logger otherwise)?,0,0.9888984560966492
1521783069,6068,crsib,2024-03-12T16:29:40Z,"i believe you only use it for tests. it's way too intrusive, tbh",-1,0.9908520579338074
1521787959,6068,crsib,2024-03-12T16:32:52Z,you use `formantshifterlogger` directly here. this happens because `getfftsizeoverride` must not be a part of it. i think that you should have an empty logger for production and use formantshifterlogger only for tests. configurability must not be a part of logger.,0,0.9925833940505981
1521797733,6068,crsib,2024-03-12T16:39:00Z,you do not utilize the interface again. was there any need for it then?,0,0.9915522336959839
1521820034,6068,crsib,2024-03-12T16:54:29Z,"we spent a lot of time and effort to optimize it, it is weird to see it go.",-1,0.9893613457679749
1521821576,6068,crsib,2024-03-12T16:55:33Z,"paul has introduced the class for aligned vectors, hasn't he?",0,0.9927994012832642
1521823952,6068,crsib,2024-03-12T16:57:10Z,"you go from simd to scalar algorithm, and i don't see any good reason for that",0,0.9585205912590027
1521826809,6068,crsib,2024-03-12T16:59:05Z,and why is it a problem? it doesn't introduce a circular dependency.,0,0.9626645445823669
1521828029,6068,crsib,2024-03-12T16:59:55Z,"and probably, it should be called fastlog2 or whatever.",0,0.9847418069839478
1521830890,6068,crsib,2024-03-12T17:01:59Z,"i don't like it, but i don't have a strong opinion, either",-1,0.9834100604057312
1521840769,6068,crsib,2024-03-12T17:09:34Z,i don't understand this point. why do we need it deterministic? how much do we care about this determinism? provided that `srand` modifies the global state i wonder if something like [a link] should be used instead.,0,0.5228180289268494
1521842931,6068,crsib,2024-03-12T17:11:13Z,"i understand that this is a new code, but i will stress that it is located in a known hot point",0,0.9823340177536011
1521843527,6068,crsib,2024-03-12T17:11:40Z,why this include is in the header?,0,0.9918245673179626
1521882356,6068,saintmatthieu,2024-03-12T17:38:57Z,"not a circular dependency, but how can you be confident that it's the `lib-fft` symbols that will be used?",0,0.9875730872154236
1521885659,6068,saintmatthieu,2024-03-12T17:41:30Z,what is `requirements.txt` ?,0,0.9952351450920105
1521890120,6068,saintmatthieu,2024-03-12T17:45:10Z,no. it ended up being a way for me to expose only relevant methods to `formantshifter` and the rest (`newsamplescoming` and override getters) to whoever integrates logger and shifter together (`staffpadtimeandpitch`).,0,0.9895827770233154
1521891351,6068,crsib,2024-03-12T17:46:09Z,your script has non-trivial dependencies. `requirements.txt` is a standard python to define such dependencies.,0,0.9945868253707886
1521893360,6068,saintmatthieu,2024-03-12T17:47:43Z,"because it's often related by usage: these allow overriding otherwise unexposed parameters, the effect of which one might not only need to hear but also to visualize, which then really implies the logger.",0,0.9902358651161194
1521896421,6068,saintmatthieu,2024-03-12T17:50:11Z,it's convenient. what problem do you see with it?,0,0.9554353952407837
1521897679,6068,crsib,2024-03-12T17:51:16Z,i rest my case; such configuration must not be a part of the logger.,0,0.9806627631187439
1521898934,6068,crsib,2024-03-12T17:52:19Z,"provided that you need a custom config in audacity itself, why not use the ""setting""?",0,0.9931269884109497
1521901490,6068,crsib,2024-03-12T17:54:25Z,it is a hack that hardcodes some random path into the build for no reason.,-1,0.8611807227134705
1521902915,6068,saintmatthieu,2024-03-12T17:55:27Z,"this removal is only the removal of an earlier commit in this very pr ; the older code is left untouched. bad things happen if i use `vo::rotate` because it expects aligned float pointers, and `pspec + imagingbeginbin` isn't necessarily aligned.",0,0.9005915522575378
1521904382,6068,saintmatthieu,2024-03-12T17:56:35Z,"not necessary here, due to [a link].",0,0.9927335977554321
1521906543,6068,saintmatthieu,2024-03-12T17:58:19Z,static-asserting in the header file?,0,0.9935395121574402
1521908741,6068,crsib,2024-03-12T18:00:08Z,writing unit tests in a header file.,0,0.9909479022026062
1521935294,6068,saintmatthieu,2024-03-12T18:15:50Z,"sounds good, i'll try.",1,0.8972635865211487
1521941525,6068,saintmatthieu,2024-03-12T18:21:05Z,"yes, but i cannot think of a more optimized alternative, and there are extenuating circumstances: * only gets executed for clips that are pitch-shifted downwards, * for a number of bins that is at most a quarter of the fft size, when down-shifted by an octave, and less for lesser shift amounts.",0,0.9854294061660767
1521942551,6068,saintmatthieu,2024-03-12T18:22:01Z,that's a remnant of me using something more sophisticated. can be removed i think.,0,0.9861393570899963
1521942994,6068,crsib,2024-03-12T18:22:26Z,consider me convinced:-),1,0.9867728352546692
1522825132,6068,saintmatthieu,2024-03-13T09:19:29Z,you mean as defined in `prefs.h`? i'd still need a write mechanism.,0,0.9903449416160583
1522827382,6068,crsib,2024-03-13T09:20:52Z,can you explain please?,0,0.986355721950531
1522862383,6068,saintmatthieu,2024-03-13T09:35:12Z,"sure: if e.g. a method like `std::optional getfftsizeoverride()` finds `overridefftsizeexponent.txt` in `logdir` that has a valid int value, it will use this rather than the production value. i can hear the result change on the fly by editing that file during playback. even if i used the prefs, i'd need this functionality, and it should not be exposed to the user. (and in this regard it's actually not bad that `logdir` has some random string in the production build, as it makes it near impossible for the user to inadvertently have that file at that path and get a non-production parameter.)",0,0.9609009623527527
1522953750,6068,crsib,2024-03-13T10:26:29Z,"well, you've just made it worse. during the playback, do you randomly try to open a file? i wouldn't call that a good idea at all. open/read/close are syscalls. they are not cheap, and they can cause havoc in some scenarios. do we want such an approach to support debug scenarios tied strictly to one machine? i say we don't. linux package maintainers will disagree. you make the build result depend on the file system structure of the computer used to build it. --- i'm very much confused by this approach. probably, it doesn't cause any noticeable difference for you, but i am very much against it. please create a separate config for the pitch-shifter. if you want to stick to reading files for now, please make access to the files conditionally compiled. i also prefer you use an executable/data path as a root for those files. in the future, if we want to expose these settings to users, it would be a very quick and easy operation.",-1,0.9906705617904663
1523018012,6068,saintmatthieu,2024-03-13T11:06:36Z,"for a/b comparison before and after some algorithmic tweaks, for example. i might want to make sure that my modifications do affect the signal, so i render it once before and once after. if the process weren't deterministic i couldn't tell.",0,0.9851491451263428
1523054062,6068,saintmatthieu,2024-03-13T11:29:55Z,"i don't understand how that matters: it's intended for development and functional only for local builds. but i don't mind using an app-data directory. i was lazy but it has advantages. i didn't have this in mind. i want to reduce conditional compilation to a maximum to avoid code becoming outdated, but if it's only just around the file opening that's completely fine.",0,0.4301583766937256
1523064406,6068,crsib,2024-03-13T11:37:11Z,"you push it to production builds, and that matters. you push the code only needed for the feature tuning into the production build. expensive code.",0,0.9860516786575317
1523263739,6068,Paul-Licameli,2024-03-13T13:29:14Z,what compilation warning was fixed by the first commit?,0,0.9929872155189514
1523269395,6068,saintmatthieu,2024-03-13T13:32:27Z,loss of precision warning (size_t vs int or the other way round),0,0.9391289949417114
1523315705,6068,Paul-Licameli,2024-03-13T14:00:06Z,"this page recommends `add_compile_definitions` instead [a link] you use this macro in `formantshifterlogger.cpp`. i would choose a different name for the macro, like this_directory, just so we aren't confusing compile-time preprocessor symbols with cmake configure-time variables. this commit fails to compile. [code block]",0,0.9882422089576721
1523325347,6068,Paul-Licameli,2024-03-13T14:06:00Z,perhaps a `complexfloat` alias will be convenient,0,0.9906308054924011
1523516686,6068,Paul-Licameli,2024-03-13T15:47:53Z,this unnecessary temporary vector construction makes me wish we had `std::span` instead. maybe instead let `printpythonvector` take a range of iterators as two arguments.,-1,0.7701005935668945
1523692769,6068,crsib,2024-03-13T17:53:06Z,this code only works on windows,0,0.9939354062080383
1524301125,6068,saintmatthieu,2024-03-14T06:29:30Z,"that's all right, i only need it there, and if someone needs it elsewhere, she can generalize it.",0,0.9630466103553772
1524313426,6068,saintmatthieu,2024-03-14T06:46:53Z,"update: after some clean-up there now is an alternative, dummy implementation that's injected for production.",0,0.9883884787559509
1528987470,6068,crsib,2024-03-18T17:35:30Z,"it seems that you use the mutex for making parts of the timeandpitchinterface to be thread safe. i don't understand, why this mutex is not in the timeandpitchinterface implementation in this case.",0,0.9796368479728699
1529796668,6068,saintmatthieu,2024-03-19T06:27:08Z,"in `clipsegment.cpp`, you can see that we add two callbacks for pitch shift change and formant preservation toggling. these callbacks are issued from the main thread, meanwhile the processing is on the audio thread. since we have the guarantee that the `staffpadtimeandpitch` ctor is completely executed before these callbacks are registered, it would be safe to internalize the mutex, but the safety is more straightforward to implement and for reviewers to verify this way. the drawback with this approach is that we lock the mutex at frame rate also if there is no time stretching. i still haven't got to the bottom of whether this is a bad thing, and i was thinking maybe you could enlighten me. in our case there'd only be contention when the user changes pitch during playback.",0,0.9742118716239929
1530019461,6068,crsib,2024-03-19T09:34:18Z,"considering that it caught my attention, i would disagree that it is better approach from the reviewer point of view :-)",1,0.7806616425514221
1211374578,4668,crsib,2023-05-31T09:36:06Z,"ideally (not critical now, though) we should ditch `m` prefix. this members are no longer private :-)",1,0.7413251399993896
1211374928,4668,crsib,2023-05-31T09:36:19Z,`final`?,0,0.9919310212135315
1211380216,4668,crsib,2023-05-31T09:40:21Z,i wonder if it is safe,0,0.8434871435165405
1211387303,4668,crsib,2023-05-31T09:45:07Z,"no range checks are performed. i understand that it was the case in the original code, but some safety here won't hurt :-)",1,0.9783545136451721
1211392468,4668,crsib,2023-05-31T09:49:13Z,"we must describe what happens if the format index is not in `[0, getformatcount())`. should we return the default format? this generally happens in this commit but not for every plugin. should we return empty format info, which will break the assumption that there is always at least one file extension? should we throw? in any case, it needs to be decided and then uniformly followed.",0,0.9908943176269531
1222854726,4668,crsib,2023-06-08T10:40:56Z,lol,1,0.8464275002479553
1229181080,4668,crsib,2023-06-14T07:58:08Z,do we really (like really) want to make the function non idempotent? i don't quite understand why,0,0.7302480936050415
1229186391,4668,crsib,2023-06-14T08:02:15Z,there are 9 places where such code is used in this commit. should we give it a name?,0,0.9943782687187195
1229187850,4668,crsib,2023-06-14T08:03:29Z,i would've called it something like `progressdialogprogresslistener`or similar. not generic for sure :-),0,0.5136844515800476
1229197430,4668,crsib,2023-06-14T08:11:07Z,i believe that readabily would benefit from moving `exportresult` out of the `exportprogresslistener` scope,0,0.9894493222236633
1229201969,4668,crsib,2023-06-14T08:14:38Z,looks like a typo to me.,0,0.9546921849250793
1229252669,4668,crsib,2023-06-14T08:52:27Z,i think it worth documenting this flags,0,0.9776686429977417
1229688447,4668,crsib,2023-06-14T14:12:00Z,"usually it doesn't return nullptr. for example `return wxdynamiccast(wxwindow::findwindowbyid( miid, mpdlg), wxbitmapbutton);`",0,0.9942744374275208
1230682943,4668,crsib,2023-06-15T08:59:28Z,early continue to reduce nesting?,0,0.990459680557251
1230888995,4668,crsib,2023-06-15T11:46:37Z,i wonder if we should find a way to populate this list from the module cmakelists.txt,0,0.9632841944694519
1234995560,4668,crsib,2023-06-20T09:26:25Z,should the exceptions inherit audacityexception? (or even messageboxexception),0,0.9915046095848083
1235008549,4668,crsib,2023-06-20T09:37:23Z,"i wonder if this is useful at all :-) `ffmpeg for audacity` doesn't ship executables for a long time, `lame for audacity` is long deprecated",1,0.9872344136238098
1235012905,4668,crsib,2023-06-20T09:41:05Z,should it be `mcontext`?,0,0.9916837215423584
1235087928,4668,crsib,2023-06-20T10:50:24Z,should it be `lib-tags-interface`?,0,0.9939823746681213
1235093037,4668,crsib,2023-06-20T10:54:44Z,"static_cast or ""constructor"" cast?",0,0.9930718541145325
1235145368,4668,crsib,2023-06-20T11:44:32Z,why is this list empty?,0,0.9740952253341675
1235145582,4668,crsib,2023-06-20T11:44:46Z,ditto,0,0.9754701256752014
1235189634,4668,crsib,2023-06-20T12:25:21Z,should this be xo? should there be an i18n-hint?,0,0.9944766163825989
1235204240,4668,crsib,2023-06-20T12:37:46Z,it doesn't look exactly clean... nothing better really comes to mind now,0,0.5025911331176758
1235223662,4668,crsib,2023-06-20T12:53:21Z,early `continue`?,0,0.9926745295524597
1235227009,4668,crsib,2023-06-20T12:55:56Z,should this be moved out of the function into the anon namespace?,0,0.9944700002670288
1239492586,4668,vsverchinsky,2023-06-23T07:52:31Z,i can do that in a separate commit,0,0.9936502575874329
1243308114,4668,vsverchinsky,2023-06-27T08:03:03Z,"each implementation has non-empty list of extensions, so formally - yes, it's safe [code block]",0,0.9905940294265747
1243338684,4668,vsverchinsky,2023-06-27T08:27:42Z,"isn't relevant any more, sorry for confusion :)",-1,0.9949479103088379
1243339672,4668,vsverchinsky,2023-06-27T08:28:27Z,"isn't relevant too, sorry again :)",-1,0.9949383735656738
1243343210,4668,vsverchinsky,2023-06-27T08:31:10Z,this is done in the later commit,0,0.9949063062667847
1243349786,4668,vsverchinsky,2023-06-27T08:36:16Z,thanks!,1,0.8631753921508789
1254218624,4668,vsverchinsky,2023-07-06T10:01:11Z,"it could be, but when i reviewed the implementation of `messageboxexception`'s delayed handler i found out that this doesn't map well to the current behaviour, which i tried to preserve as much as possible. `exportexception` replaces (not literally ofcourse) `basicui::showmessagebox` which doesn't have counterpart in `audacityexception` hierarchy",0,0.9803060293197632
1268210948,4668,vsverchinsky,2023-07-19T15:03:23Z,there is a check now,0,0.9939996004104614
1268214186,4668,vsverchinsky,2023-07-19T15:05:50Z,"added a comments to this function about desired behaviour, also `formatinfo`'s and `exportplugin`s are now accessed via container-like `exportpluginmanager` class",0,0.9943857192993164
1268215587,4668,vsverchinsky,2023-07-19T15:06:53Z,"yes, indeed, this is fixed in the later commit, but the error is still hidden somewhere in the commit history",0,0.9874301552772522
1268216243,4668,vsverchinsky,2023-07-19T15:07:06Z,added in the later commit,0,0.9941672086715698
1268216816,4668,vsverchinsky,2023-07-19T15:07:16Z,done,0,0.8682363629341125
1268220396,4668,vsverchinsky,2023-07-19T15:09:57Z,done,0,0.8682363629341125
1268220552,4668,vsverchinsky,2023-07-19T15:10:06Z,done,0,0.8682363629341125
1268224428,4668,vsverchinsky,2023-07-19T15:12:56Z,afaik ogg/vorbis does not imply any predefined sample rate constraints.,0,0.990154504776001
1268225659,4668,vsverchinsky,2023-07-19T15:13:52Z,done,0,0.8682363629341125
1268226268,4668,vsverchinsky,2023-07-19T15:14:17Z,replaced with ranged for,0,0.9928333759307861
1268226586,4668,vsverchinsky,2023-07-19T15:14:33Z,done in later commit,0,0.9915609955787659
1269785368,4668,crsib,2023-07-20T17:49:57Z,i'd like to see a proper check here as well.,0,0.9827739000320435
1270509369,4668,crsib,2023-07-21T10:15:08Z,why not `b`?,0,0.988058865070343
1270541588,4668,crsib,2023-07-21T10:52:58Z,but is it really a preferred option? i think joint stereo reduces the quality.,0,0.9657427072525024
1270563482,4668,LWinterberg,2023-07-21T11:19:23Z,"i'm fairly confident that it doesn't. joint stereo does a per-frame m/s encoding, rather than l/r encoding where the channels are similar, and where they aren't, it switches back to l/r encoding. lame makes this decision for every mpeg frame. lame also has options to force m/s encoding (`-m f` instead of `-m j`), which i hope we don't use.",0,0.9395042657852173
1270568961,4668,crsib,2023-07-21T11:26:16Z,"yeah, judging by [a link] and lame source code you are correct",-1,0.987981379032135
1270589994,4668,DavidBailes,2023-07-21T11:51:39Z,and here: [a link],0,0.9945573806762695
1196560264,4701,saintmatthieu,2023-05-17T13:52:39Z,"i don't know the consequences of this, but that'd be the easiest fix for me :d so tentatively proposing it.",1,0.9822601675987244
1196649252,4701,saintmatthieu,2023-05-17T14:53:33Z,does that mean users with macos < 10.15 wouldn't be able to run newer audacity releases ?,0,0.9920899868011475
1196748810,4701,crsib,2023-05-17T16:02:39Z,"this will break macos. we cannot have a target greater than 10.13. also, raising a target requires a lot of thought and discussion. we have plenty users on older macos versions",-1,0.5900139212608337
1198869563,4701,saintmatthieu,2023-05-19T11:45:41Z,"that's all right, i gave up on using (experimental/)filesystem to fix this.",0,0.96304851770401
1205986617,4701,Paul-Licameli,2023-05-25T20:43:54Z,"i repeat my previous suggestion: add the .h files to this list please. it may not be necessary to build, but i will make the headers known to the ide file browsers as part of the project, and that is more convenient.",0,0.9862181544303894
1206358241,4701,saintmatthieu,2023-05-26T07:43:26Z,"i agree, just forgot.",0,0.9708161950111389
1209133382,4701,crsib,2023-05-29T09:42:56Z,`final` would be much appreciated.,1,0.707615077495575
1209136334,4701,crsib,2023-05-29T09:46:30Z,why the function is not `const`?,0,0.9839584827423096
1209141059,4701,crsib,2023-05-29T09:50:49Z,maybe? [code block],0,0.989342212677002
1209141440,4701,crsib,2023-05-29T09:51:10Z,more descriptive names would be much appreciated,0,0.6381786465644836
1209144143,4701,crsib,2023-05-29T09:53:48Z,generally we don't use such prefixes,0,0.9888535737991333
1209149956,4701,crsib,2023-05-29T09:58:19Z,"generally, we always use camelcase for methods.",0,0.9921678900718689
1209166622,4701,crsib,2023-05-29T10:18:24Z,"i don't think that we should reformat a 3d party library. i would prefer to have it as is while it is included as a part of audacity, so updating the library will generate sane diffs",0,0.9324329495429993
1209168024,4701,crsib,2023-05-29T10:20:08Z,"it is advisable to always have a new line at the end of file. at least it would remove annoying red mark from the reviews :-) if you use vscode, please install the editorconfig extesnsion, it will handle this issue for you.",1,0.9843236804008484
1209170410,4701,crsib,2023-05-29T10:23:34Z,"i wonder if we want this to be globally visible to all tests. also, please at least prefix new files with [code block] and, ideally, with a longer comment with author and file name",0,0.9667070508003235
1209173188,4701,crsib,2023-05-29T10:26:56Z,i would much prefer relying on working directory here,0,0.9814099073410034
1209177074,4701,crsib,2023-05-29T10:32:26Z,"let's avoid using legacy cmake. `target_compile_definitions` is a cleaner way to achieve the result. however, i would prefer a different approach, without the hardcoding of the path. for example, `add_unit_test` can be extended to accept the working directory of the test.",0,0.9915739893913269
1209179472,4701,crsib,2023-05-29T10:36:04Z,do we need this factory method here at all though?,0,0.991931140422821
1209185809,4701,crsib,2023-05-29T10:45:05Z,should we check that ratio has really changed?,0,0.989933431148529
1209190216,4701,crsib,2023-05-29T10:50:04Z,i think `static_cast ` is redundant here,0,0.9850999712944031
1209192167,4701,crsib,2023-05-29T10:52:44Z,i wonder if we should make this value to be configurable,0,0.9487239718437195
1209197247,4701,crsib,2023-05-29T11:00:17Z,"hmm, it looks a bit odd that this function does not return the number of samples that were written to the output. if it is expected, that the tail is always zero-filled - it should be stated in the docs.",-1,0.5766745805740356
1209203294,4701,crsib,2023-05-29T11:08:22Z,"i think that output buffers should be allocated only once. allocation is not free, especially in multithreaded environments, and provided that you ask for a few kilobytes it won't be noticeable.",0,0.9802678823471069
1209204948,4701,crsib,2023-05-29T11:10:17Z,this looks like a ub to me. getsamples provides no way for a caller to know if the output was modified at all.,0,0.9784760475158691
1209210328,4701,crsib,2023-05-29T11:17:09Z,"given that audiosource is never copied in staffpadtimeandpitch, i think that `numpulledframes = 0ull` is sufficient here",0,0.9926666617393494
1209212449,4701,crsib,2023-05-29T11:20:31Z,`target_compile_options` and only on windows please,0,0.9954500794410706
1209213698,4701,crsib,2023-05-29T11:22:16Z,"but i would rather define something like ""use_experimental_filesystem"" only on macos to avoid the potential compilation breakdown when some newer compiler decides to drop this headers from the stdlib",0,0.9865670800209045
1209216180,4701,crsib,2023-05-29T11:24:43Z,"or this way, yes :-)",0,0.9777542948722839
1209218703,4701,crsib,2023-05-29T11:26:42Z,"well, the problem is resolved now :-)",1,0.9149205088615417
1209220268,4701,crsib,2023-05-29T11:28:19Z,i'm not sure i understand this condition.,-1,0.8292987942695618
1209747004,4701,saintmatthieu,2023-05-30T06:09:08Z,`channelvectors` ?,0,0.993902325630188
1209881509,4701,saintmatthieu,2023-05-30T08:07:02Z,"mmh, yeah. i'm most at peace editing files that are formatted, 'cos sometimes i don't realize i'm auto-formatting and end up having to triage my changes, which is really painful. but i suppose these are not files i'll be editing often.",-1,0.5552440881729126
1209891806,4701,saintmatthieu,2023-05-30T08:13:50Z,not sure i understand. you'd place `wavfileio`'s definition directly in `staffpadtimeandpitchtest.cpp` ? :thumbs_up: for the prefix.,1,0.9106549024581909
1209898054,4701,saintmatthieu,2023-05-30T08:17:53Z,why? that could be a pain to whoever wants to run this test. (it was to me.),-1,0.9705162644386292
1209918348,4701,saintmatthieu,2023-05-30T08:30:35Z,as in a launch configuration? i only found a solution for vs : [a link],0,0.9936625957489014
1209931680,4701,saintmatthieu,2023-05-30T08:39:08Z,staffpad's `timeandpitch` allows configuring it. i personally don't see what's the big deal so i wouldn't. it determines the capacity of some ring buffer.,0,0.9857912063598633
1209942515,4701,saintmatthieu,2023-05-30T08:45:49Z,"come to think of it, if `maxblocksize` equalled the number of samples typically queried by `mixersource` at once (i've seen 2400 in my debugging, but haven't looked for where it comes from), some looping could be avoided. will look into this.",0,0.9881007671356201
1209949937,4701,crsib,2023-05-30T08:50:22Z,"there are different cases. for real-time processing, we may want to have this value lower; for rendering or destructive processing - a higher value might be helpful. right now, audacity largely ignores any latency settings, using some random context-dependent hardcoded values, but this surely will change.",0,0.9755914211273193
1209953125,4701,crsib,2023-05-30T08:52:26Z,i'd place it near the mocks :-) that's it - in `tests` directory.,1,0.8949382305145264
1209974295,4701,saintmatthieu,2023-05-30T09:06:39Z,"all righty: `playbackpolicy::buffertimes::batchsize`, together with the sample rate, leads to those 2400. i also did some debugging using the unit test querying the same number of samples at a time than `maxblocksize`. yes, there'd be a little less looping, but that wouldn't spare any significant calculation. i could wire up those two when i integrate the time stretcher, but i think the added code complexity isn't worth it.",0,0.9754132032394409
1209976521,4701,saintmatthieu,2023-05-30T09:08:31Z,"oj, sorry, you're also reviewing commit by commit ... this gets changed in a later commit.",-1,0.9648396372795105
1209981142,4701,crsib,2023-05-30T09:11:50Z,"consider we have finally done asio or any low latency api right. in this case, something like 128 samples won't be unrealistic, but time stretcher will just become another place we must fix. this is something that needs to be addressed soon. `buffertimes` manages to ignore user settings and hardware requirements simultaneously. it was a reason for a p1 bug on alsa, which is not quite fully fixed now.",0,0.9721236824989319
1209981964,4701,crsib,2023-05-30T09:12:32Z,"yeah, my fault xd",1,0.9261852502822876
1209982814,4701,saintmatthieu,2023-05-30T09:13:15Z,what's ub?,0,0.9941640496253967
1209983585,4701,crsib,2023-05-30T09:13:54Z,undefined behavior,0,0.9835431575775146
1210003549,4701,saintmatthieu,2023-05-30T09:30:19Z,just added the following comment (not pushed yet): [code block],0,0.9954878687858582
1210017835,4701,saintmatthieu,2023-05-30T09:42:07Z,"aha, now i get you. you mean `tests` under root. with pleasure.",1,0.9619388580322266
1210044126,4701,saintmatthieu,2023-05-30T10:03:49Z,"doesn't work for me unfortunately. i tried this (in audacitytesting.cmake) ![a link], as well as `set(working_directory ${cmake_source_dir})` in that same function. working directory is still `$(projectdir)`.",-1,0.6047902703285217
1210068756,4701,saintmatthieu,2023-05-30T10:26:48Z,to be clear : `maxblocksize` won't change the algorithmic latency at all. we really only are talking about making the batch size with the internal ring buffer size to maybe avoid some loop iterations. the output should be bit-exact regardless of the batch size.,0,0.9906912446022034
1210070876,4701,crsib,2023-05-30T10:28:48Z,"but the ring buffer size will change, that's the point :-)",1,0.7987024188041687
1210071039,4701,saintmatthieu,2023-05-30T10:28:57Z,"i just verified : batch size 512 or 1234 yield bit-exact output. however, i tried 128 as well, and there the output not only differs but it isn't stretched properly anymore ... - [x] look into this",0,0.9901255369186401
1210078574,4701,saintmatthieu,2023-05-30T10:36:15Z,"i mixed up batch and maxblocksize in my previous comment. just verified that `maxblocksize` 1024 or 512 yield bit-exact results. 128, on the other hand, also yields a different result, though.",0,0.9905349612236023
1210176804,4701,saintmatthieu,2023-05-30T12:08:14Z,so your concern is unnecessarily large memory allocation?,0,0.954057514667511
1210181047,4701,crsib,2023-05-30T12:12:17Z,"no. why? i don't quite get why to hardcode this value, while it doesn't match anything in the system :-) simply having setmaxblocksize()/getmaxblocksize() won't hurt, even if it won't be used for the first time :-)",1,0.8578241467475891
1210181656,4701,saintmatthieu,2023-05-30T12:12:49Z,"i agree that the code as is could leave some data unchanged, possibly garbage, at the tail of `output`, and a `memset` to zero may be useful. but i don't get the undefined behavior part.",0,0.9738177061080933
1210187046,4701,crsib,2023-05-30T12:17:56Z,the caller has absolutely no way of knowing the call's results and will likely pass the buffer for further processing. i think that number of samples written should be returned in any case.,0,0.9832882285118103
1210188531,4701,saintmatthieu,2023-05-30T12:19:15Z,"that's not even correct, actually. i don't see how this function cannot set all required samples. the `break` you highlighted does not break the outer loop.",0,0.9840772151947021
1210236782,4701,saintmatthieu,2023-05-30T12:59:39Z,"i disagree that it won't hurt. audacity's code is complex enough as it is, if there isn't a good reason for clients of this class to change that, then we shouldn't offer a way of changing it.",0,0.5403127074241638
1210306373,4701,saintmatthieu,2023-05-30T13:50:08Z,"oops, that was for experimenting, i should revert that. - [x] revert",-1,0.9718073606491089
1210512064,4701,saintmatthieu,2023-05-30T16:11:21Z,i found the 128 batch size / block size problem and pushed a fix.,0,0.990288257598877
1212088380,4701,crsib,2023-05-31T17:52:13Z,should we return `true` here? if i remember correctly - this will force `settimeandpitch` to reboot anyway. chances are i am wrong :-),0,0.94634610414505
1212089456,4701,crsib,2023-05-31T17:53:13Z,"so we are not making it configurable for now? that's fine, but i don't think that fixing it will take any time",0,0.9625771045684814
1212737492,4701,saintmatthieu,2023-06-01T07:47:03Z,"crap, you're right. thanks for staying vigilant.",-1,0.9915829300880432
1212789918,4701,saintmatthieu,2023-06-01T08:30:10Z,"i apologize for having wasted your time, but i just pushed [a link], which removes the possibility of changing time or pitch ratios on the fly. the rationale behind is in the commit message.",-1,0.9651761054992676
1296529480,5042,Paul-Licameli,2023-08-16T23:24:22Z,access,0,0.9923402070999146
1296530631,5042,Paul-Licameli,2023-08-16T23:26:41Z,rules,0,0.9839377999305725
1297096614,5042,Paul-Licameli,2023-08-17T11:37:40Z,"please comment that the new setting functions will succeed with out-of-bounds requests, only changing what is in bounds.",0,0.992501974105835
1297100361,5042,Paul-Licameli,2023-08-17T11:41:32Z,"is this description really what we want? to be really strictly conservative of program behavior, in the case of not time stretching, it's possible two clips were separated by a tiny gap of one or two sample intervals, but the paint brush might affect both. and maybe nobody in the history of audacity actually ever did this.",0,0.9122580885887146
1297103487,5042,Paul-Licameli,2023-08-17T11:44:42Z,`backward` seems surprising as the default value. but you never call it with the default.,0,0.8163508772850037
1297105451,5042,Paul-Licameli,2023-08-17T11:46:43Z,"ditto, default argument",0,0.9929648637771606
1297114599,5042,Paul-Licameli,2023-08-17T11:56:16Z,"this function is used in two places, and this change, while avoiding that pop-up when you click between clips, also will change the hit test to return a handle in the case that it did not do so before. does clicking and dragging in the empty space between clips make any vacuous undo/redo items?",0,0.9920998215675354
1297116710,5042,Paul-Licameli,2023-08-17T11:58:25Z,"aha, i tried the build. yes it does! so instead the hit testing function should also be changed to return null when there is no clip.",1,0.9783021211624146
1297121368,5042,Paul-Licameli,2023-08-17T12:02:48Z,"actually... that's an old defect, which you might fix. i just tried released audacity. when the magnification does show samples, but you click and drag outside of a clip, still you do get a bogus undo/redo item.",0,0.8700099587440491
1297170255,5042,Paul-Licameli,2023-08-17T12:44:34Z,"actually an old problem, and i was confused about something. `hittest` only happens with the * tool button. with the pencil tool button, you can click anywhere and it has always been like that.",0,0.816173791885376
1297171680,5042,Paul-Licameli,2023-08-17T12:45:49Z,`samplehandle::hitanywhere` is also used in waveformview.cpp in this case.,0,0.9942955374717712
1304416629,5042,Paul-Licameli,2023-08-24T14:21:44Z,i think that's not the right issue number,0,0.9364919662475586
1308414953,5042,Paul-Licameli,2023-08-29T08:32:01Z,omitting,0,0.963917076587677
1308692145,5042,Paul-Licameli,2023-08-29T11:45:28Z,"you need more comments to clarify: when direction is backward, the buffer of given samples is not reversed, and `t` rounds to the time of the clip sample corresponding to the past-the-end position.",0,0.994474470615387
1308693059,5042,Paul-Licameli,2023-08-29T11:46:10Z,clarify that the resulting samples are not reversed when direction is backward.,0,0.9922882318496704
1312832951,5042,saintmatthieu,2023-09-01T09:59:54Z,"now that clips can be stretched, we have to choose between constant time or constant sample-count brush radius. the approach i took is the latter. but then, samples of a clip 10 seconds away should not be taken into account. so i went for the simple rule that they have to touch each other, or nothing happens. i also reckon we won't run into trouble because of this subtle change of behaviour.",0,0.9102255702018738
1312833470,5042,saintmatthieu,2023-09-01T10:00:28Z,"right, makes no particular sense - removed it (and moved this method to `private`).",0,0.9798730611801147
1313133479,5042,saintmatthieu,2023-09-01T14:45:43Z,"each time `samplehandle::release` is called (when letting go of the mouse with pencil tool activated), a history item is pushed. the easiest solution to this i can think of would be to create a `bool msamplemoved`, whose value is set to true whenever a sample is modified, checked when releasing, and then set to false again. that'd be something totally new, and not completely trivial to review.",0,0.985293984413147
1313140314,5042,saintmatthieu,2023-09-01T14:51:53Z,moved those to `private` and made comments a bit more precise.,0,0.9920709729194641
1324857818,5042,Paul-Licameli,2023-09-13T17:39:32Z,"""excluding""",0,0.9834421277046204
1324870922,5042,Paul-Licameli,2023-09-13T17:52:48Z,"as always, i see `as_size_t` and think, what's the proof of satsifaction of the assertion? here, ""it's easy to prove that the expression is bounded by numfloats"". so just say that in a comment.",0,0.9908478260040283
1324872490,5042,Paul-Licameli,2023-09-13T17:53:42Z,likewise,0,0.9617113471031189
1324882822,5042,Paul-Licameli,2023-09-13T18:00:59Z,"please comment in the header that the function may rewrite only a subrange of `[buffer, buffer + nfloats)`, leaving unchanged the buffer positions not corresponding to part of the clip play region.",0,0.9951068162918091
1324885498,5042,Paul-Licameli,2023-09-13T18:03:43Z,"please comment that `[buffer, buffer + 2 * numsizesamples + 1)` is assumed to be a valid span of addresses, and likewise that only a subrange may be overwritten. in other words zero-filling is not promised for the rest.",0,0.9945619702339172
1324897974,5042,Paul-Licameli,2023-09-13T18:16:01Z,"""effective""",1,0.9647319912910461
1324906769,5042,Paul-Licameli,2023-09-13T18:24:20Z,`waveclip::snaptosample` analogous to the `widesamplesequence` member function might be nice,0,0.9510055780410767
1324923391,5042,Paul-Licameli,2023-09-13T18:39:30Z,"i might simplify all that with `#include ` and `template using bufferchartype = std::conditional_t >, constsampleptr, sampleptr>;`",0,0.9914222359657288
1324929089,5042,Paul-Licameli,2023-09-13T18:45:30Z,"i think the template argument can be omitted, nicely deduced from arguments",0,0.9536681175231934
1324929248,5042,Paul-Licameli,2023-09-13T18:45:38Z,here too,0,0.9838451147079468
1325747821,5042,Paul-Licameli,2023-09-14T10:31:17Z,`getsamples` (not a new function) should also comment that `start` is relative to play start `getfloatattime` should comment that `t` is relative to play start,0,0.9944708347320557
1325772934,5042,Paul-Licameli,2023-09-14T10:55:02Z,explain the strange use of `1e6`,0,0.9338987469673157
1325774284,5042,Paul-Licameli,2023-09-14T10:56:15Z,rounding to the nearest millionth of a sample? why?,0,0.9858078956604004
1325780274,5042,Paul-Licameli,2023-09-14T11:01:54Z,"in the case that `max` above clipped a negative value to 0, should the buffer instead get some zeroes at `buffer + alreadyread` (if writing), and should the first member of the return be a later position? maybe not but i'm trying to understand the usage",0,0.9832834005355835
1325782291,5042,Paul-Licameli,2023-09-14T11:03:48Z,some comment why this is a safe `as_size_t`?,0,0.9948803186416626
1325784212,5042,Paul-Licameli,2023-09-14T11:05:36Z,similar question whether this is the right thing when `min` above did some work,0,0.9616097211837769
1325789221,5042,Paul-Licameli,2023-09-14T11:10:28Z,"this loop may concatenate samples from clips of different stretch ratios into one buffer, and then we forget about the stretches and operate on the buffer. understand that i objected to this for plot spectrum (weightings of windows in the combined result might be wrong) and for mixer board (rms calculations may be wrong again for mis-weighting, but i let that problem go). but here, doing microscopic repairs with your pencil or the even less-known paintbrush tool, it is defensible.",0,0.9855723977088928
1325796298,5042,Paul-Licameli,2023-09-14T11:17:27Z,i think `>=` makes me surer of loop termination just looking at this function.,0,0.9417357444763184
1325796813,5042,Paul-Licameli,2023-09-14T11:17:57Z,again `>=` would look better to me,0,0.9835714101791382
1325801032,5042,Paul-Licameli,2023-09-14T11:21:49Z,"here and elsewhere you use this or `getnextclip`, there is a sorting of the clips each time. probably unimportant in practice for performance.",0,0.9827645421028137
1325802214,5042,Paul-Licameli,2023-09-14T11:22:56Z,"next, not adjacent; and i understand why",0,0.9900908470153809
1325823537,5042,Paul-Licameli,2023-09-14T11:42:50Z,"i think the ""so quantize time"" part no longer makes sense",0,0.9569547772407532
1325831405,5042,Paul-Licameli,2023-09-14T11:50:15Z,"this old comment should instead say, set a range of samples around the mouse event",0,0.9884294271469116
1325836833,5042,Paul-Licameli,2023-09-14T11:55:14Z,does it ever divide by 0?,0,0.9857959747314453
1325838042,5042,Paul-Licameli,2023-09-14T11:56:18Z,"here too, shorten the confusing comment",0,0.9090394377708435
1327461060,5042,saintmatthieu,2023-09-15T15:28:51Z,ok.,0,0.980760931968689
1328488900,5042,saintmatthieu,2023-09-18T09:52:50Z,"it might easily be confused for `wavetrack::snaptosample`, though. this manipulation is safe here in this `roundtonearestclipsample` function, i'd leave it as it is if there aren't other needs elsewhere for it.",0,0.9880321025848389
1328605437,5042,saintmatthieu,2023-09-18T11:47:58Z,"i can't remember. just did a quick test with regular rounding, works too. i'll use a simple rounding, and next time should comment.",0,0.9723913073539734
1328615416,5042,saintmatthieu,2023-09-18T11:57:34Z,"i'm not sure i understand your question. `alreadyread` means `[buffer, buffer + alreadyread)` are indices that already have been dealt with. `startsamp` tells which first sample index of the clip matches `buffer + alreadyread`.",0,0.6224928498268127
1328623579,5042,saintmatthieu,2023-09-18T12:05:42Z,will comment.,0,0.9752042889595032
1328659124,5042,saintmatthieu,2023-09-18T12:36:42Z,"if `min` did some work, then `startorendtime` was past the end of the clip. it may be confusing to have this buffer offsetting amidst this more complex code. all the offset is doing is moving the read-write pointer according to the number of samples already read/written. it should not be concerned with the number of samples remaining to read from the clip.",0,0.9764907360076904
1328661572,5042,saintmatthieu,2023-09-18T12:38:48Z,ok (for both),0,0.9909047484397888
1328669474,5042,saintmatthieu,2023-09-18T12:45:42Z,"good question. the code before didn't check, but i cannot guarantee that my changes do not change that particular thing. adding a check upstream.",1,0.9365044236183167
1329971569,5042,Paul-Licameli,2023-09-19T11:31:28Z,"actually, your informal proof here is wrong. what if `t` happens to be a very negative value? so to be safe you should write `const auto numleadingzeros = limitsamplebuffersize(numfloats, effectivestart - maybenegativestart);`",0,0.9069574475288391
1329971950,5042,Paul-Licameli,2023-09-19T11:31:52Z,see latest in the conversation,0,0.9736020565032959
1329974376,5042,Paul-Licameli,2023-09-19T11:34:16Z,you mean `clang-format` here and again below,0,0.994516909122467
1329975656,5042,Paul-Licameli,2023-09-19T11:35:35Z,"""addresses""",0,0.989084780216217
1330144731,5042,saintmatthieu,2023-09-19T13:38:45Z,"no, i meant `clan-format` xd",0,0.9941177368164062
1330157801,5042,saintmatthieu,2023-09-19T13:46:01Z,"by substitution, `effectivestart - maybenegativestart == std::max(samplecount { 0 }, maybenegativestart) - maybenegativestart`, and `maybenegativestart = timetosamples(t)`. so if `t < 0`, then `effectivestart - maybenegativestart == - maybenegativestart`, that is, a positive value. for `t` to be negative is actually not a corner case, here, and the code has proven to work well as far as my testing went, which is another evidence that it is correct.",0,0.9865086674690247
1331399387,5042,Paul-Licameli,2023-09-20T10:13:05Z,keep the comment of old line 221,0,0.9934957027435303
643608503,830,Paul-Licameli,2021-06-02T02:32:09Z,"for this command, you take away the checkbox for grayscale, because there is now a more-than-binary choice. you should put back a a choice control so that this command can still set the visuals. see examples of the use of tiechocie in the src/commands directory for how to do it.",0,0.9943462014198303
644088942,830,Paul-Licameli,2021-06-02T15:40:46Z,"in c++11 and later, it's preferable not to use typedef but instead: ` using colorscheme = int; ` however -- i'd rather not use this line at all...",0,0.9622824788093567
644098990,830,Paul-Licameli,2021-06-02T15:52:03Z,... and instead write ` enum colorscheme : unsigned { ` i find it preferable to make static type distinctions where you can to aid compile time checking.,0,0.9910764694213867
644109224,830,Paul-Licameli,2021-06-02T16:04:14Z,"you should say that somehow with a compile time assertion ` static_assert(spectrogramsettings::csnumcolorscheme == colorschemes, ""broken correspondence ""); ` but don't put that line in this file. avoid another #include and instead put in in spectrogramsettings.cpp",0,0.9950022101402283
644113807,830,Paul-Licameli,2021-06-02T16:10:12Z,why changed from 512? i'm not saying it's wrong.,0,0.8924665451049805
644117930,830,Paul-Licameli,2021-06-02T16:15:19Z,add `` for doxygen but where is this file used? i can't find it.,0,0.9914286732673645
644119238,830,Paul-Licameli,2021-06-02T16:17:01Z,note that this change will also break any macro scripts in existence that happen to use this checkbox parameter. but i think that is unimportant. do nothing about that.,0,0.9847652912139893
644128901,830,Paul-Licameli,2021-06-02T16:29:34Z,see examples of use of the class (template) `enumsetting`. use a global `enumsetting ` object it can be a static -- it isn't needed outside of this file. still the purpose of use is to eliminate repetition of the string literal path and also the default value passed to read(). replacing coincident literals with a declared name is a good thing.,0,0.868244469165802
644147080,830,Paul-Licameli,2021-06-02T16:45:39Z,"you are no longer using this preference. but (unlike with the case of macros, a more rarely used expert feature) we do not want to ignore the problem of compatibility of old user preferences, in case someone already preferred grayscale. so where you do use an `enumsetting`, you should also supply this old path as the optional constructor argument. you should also then override the migrate() method, because the default implementation won't do the right thing. the old possible values of 0 and 1 will not map identically to the new enumerators. rather 0 should go to color (new), which we want to make the default colored spectrogram, but 1 should go to inverse grayscale, which is the ""old"" grayscale, in case someone did save that preference. so see `enumsettingbase::migrate()` and adapt it. then test this by choosing grayscale as built in head, then run your build. see audacity.cfg for where the preferences are stored. observe the relevant lines inside it. [a link]",0,0.9841341376304626
644190366,830,Paul-Licameli,2021-06-02T17:46:14Z,"audacity's designers are deciding which exact english strings should be shown to the user, and internationalized. meanwhile, you should also rewrite this table using the two-argument constructor for `enumvaluesymbol`. for instance ` { l""default"", xo(""color (new)"") } ` the first string, which is not internationalized, can be stable across audacity versions, identifying the choice in saved preferences, while the user-visible name might be changed.",0,0.9931702613830566
644198505,830,Paul-Licameli,2021-06-02T17:57:38Z,no problems in this file,0,0.9629985094070435
644198735,830,Paul-Licameli,2021-06-02T17:57:59Z,no problems in this file,0,0.9629985094070435
644202396,830,Paul-Licameli,2021-06-02T18:02:05Z,you mean `acolor::colorschemes`,0,0.9943513870239258
644203621,830,Paul-Licameli,2021-06-02T18:04:05Z,"also, make a non-static assertion about that correspondence, like ` wxassert(result.size() == csnumcolorscheme); `",0,0.9944037199020386
644712456,830,dofuuz,2021-06-03T11:27:12Z,the change you suggested breaks template type deduction and cause compile errors. (at least at vs2017) i won't apply this.,0,0.8830903768539429
644714228,830,dofuuz,2021-06-03T11:30:12Z,"to save memory and gain some speed. it might be trivial. anyway, this does not affect visual quality.",0,0.9843422770500183
644729299,830,Paul-Licameli,2021-06-03T11:56:13Z,ok ignore that suggestion,0,0.9580013155937195
644775052,830,dofuuz,2021-06-03T13:05:41Z,spectrogram has per-track setting. can it really be static? i'm confused.,-1,0.7518482208251953
644783998,830,dofuuz,2021-06-03T13:17:45Z,"added the static_assert in spectrogramsettings.cpp, along with `wxassert(csnumcolorscheme == result.size());`. i coudln't find better place to put it.",0,0.9933185577392578
644797427,830,dofuuz,2021-06-03T13:34:40Z,both of them.,0,0.9613637328147888
644803931,830,dofuuz,2021-06-03T13:42:50Z,done,0,0.8682363629341125
644806098,830,dofuuz,2021-06-03T13:45:25Z,added 'spectro. color scheme' to 'set track visuals' macro command.,0,0.9942836165428162
644809347,830,dofuuz,2021-06-03T13:49:22Z,it's included from acolor.cpp. it contains rgb value of new spectrogram colormap.,0,0.9934044480323792
644895071,830,Paul-Licameli,2021-06-03T15:30:29Z,ok leave it so,0,0.9927050471305847
644898960,830,Paul-Licameli,2021-06-03T15:35:23Z,"now i see, you added the #include in the first commit. i thought it would be in the same commit that added acolorresources.h. this means the first commit can't compile. i prefer that each commit in a commit history should compile. after more complete review, i would like the new commits to be squashed, but it is also good to leave the first refactoring commit separated, and fixed so it compiles.",0,0.9435470700263977
644903112,830,Paul-Licameli,2021-06-03T15:38:54Z,"the old code here is in fact using a global setting. the system of spectrogram settings leaves something to be desired -- a track can have independent settings, or it can take its settings from defaults, but it can't default individual settings separately. don't try to understand and fix all of that -- just understand that where you rewrite usages of a global setting (which are what gprefs contains), then it is preferable to use an enumsetting object instead.",0,0.9907979965209961
645649380,830,dofuuz,2021-06-04T15:10:42Z,done.,0,0.9897913336753845
645649593,830,dofuuz,2021-06-04T15:10:59Z,done.,0,0.9897913336753845
645662958,830,dofuuz,2021-06-04T15:29:12Z,applied with preference migration :winking_face:,1,0.9902042150497437
648791916,830,Paul-Licameli,2021-06-10T01:46:19Z,"thank you for these changes. but now, we are in the period of ""string freeze."" that means the message catalog locale/audacity.pot, in which all the xo (and xc) strings are extracted, is in a final form, allowing translators to finish their work. one of our designers reviewed this project, and specified changes to the user-visible strings. so you must: 1) change the xo strings above to the xc strings below. (but leave the wxt strings as they are.) 2) find these strings in lib-strings/locale/unusedstrings.h; be sure you have copied them exactly; and delete them from that file. 3) rebase this branch onto more recent master. (and while doing that, do an interactive rebase, and make sure all commits in the sequence compile. i believe the first one does not. and maybe do some fixups to shorten the list of commits.) 4) test (using one of the completed languages, such as dutch) that translation works. (you change language using the interface page of preferences.) 5) force-push your rebased branch. [code block]",1,0.943851113319397
648793239,830,Paul-Licameli,2021-06-10T01:50:23Z,"also for string freeze, the string above must be exactly as the designer specified in unusedstrings.h. cut and paste this string from there (with the comment too, pasted to the line before the line with the string): [code block]",0,0.9950272440910339
648793806,830,Paul-Licameli,2021-06-10T01:52:07Z,"also for string freeze, it's too late now to add new user-visible strings -- or else they won't translate from english. so change this to reuse the same string as in the preferences dialog: `xc(""sche&me"", ""spectrum prefs"")`",0,0.9945045113563538
649815422,830,dofuuz,2021-06-11T09:02:24Z,done,0,0.8682363629341125
648541598,966,Paul-Licameli,2021-06-09T17:55:59Z,"i suggest a comment string consistent with others recently added to this file: ""build networking features into audacity"" ""build support for sending errors to sentry"" that is, ""build...""",0,0.99326092004776
648553185,966,Paul-Licameli,2021-06-09T18:10:33Z,dependency on project.h should not be needed,0,0.9928576946258545
648553599,966,Paul-Licameli,2021-06-09T18:11:10Z,project.h again should not be needed,0,0.9924915432929993
648554417,966,Paul-Licameli,2021-06-09T18:12:26Z,"updatemanager doesn't really use project except to find its parent window. better then, that you simply construct it with a window. (passed by reference not pointer if null is not permittted.)",0,0.99308842420578
648556159,966,Paul-Licameli,2021-06-09T18:15:03Z,"as explained, you should simply pass a window to the constructor. but even if you really needed the project for other reasons, i would also say: reinterpret_cast is the cast of last resort which should not be used here. and don't use c-style pointer casts either in new code. this should be a simple up-casting operation, for which no explicit cast is needed. but you need wx/frame.h to make that compile (the compiler needs to see the inheritance relation).",0,0.9920952916145325
648557688,966,Paul-Licameli,2021-06-09T18:17:30Z,"this is where you should find the project's frame, and just pass that instead. this is happening only when the application initializes, and the project is the empty untitled project that is always made then. study of updatemanager tells me it really only wants a window. that should be more obvious just from reading this make_unique call.",0,0.992694616317749
648565608,966,crsib,2021-06-09T18:29:26Z,"this is odd, as i've pointed it out previously and it was fixed",-1,0.8453795313835144
648567356,966,Paul-Licameli,2021-06-09T18:31:08Z,"now i understand differently and i'm changing the suggestions of the previous review. the key is to reason about lifetimes of objects. the updatemanager lives as long as the unique audacityapp object. (so perhaps it doesn't even need this unique_ptr. it might just be a static variable, if there is no problem destroying it after the audacityapp object.) it has a timer and checks for updates periodically (twice a day). that might repeat of audacity is left open a long time. but, project windows may be opened and closed in that long time, and audacity might even be in a state where there are no windows (it can be done on macos, which still leaves a menu bar at top of screen and allows you to switch in and out of the audacity application.) this has implications.",0,0.9422771334648132
648569063,966,crsib,2021-06-09T18:32:41Z,no c-cast please.,0,0.9246855974197388
648570267,966,Paul-Licameli,2021-06-09T18:33:51Z,"this plain c pointer is dangerous. it might become a dangling pointer, because the updatemanager outlives the window. wxweakref would be safer, but you would still need to check whether it is null whenever you use it. but better to eliminate this pointer entirely.",-1,0.6631669402122498
648570556,966,crsib,2021-06-09T18:34:08Z,we should probably rename `tracking` to `updateschecking` or whatever. tracking has a lot of negativity attached to it.,-1,0.9120916128158569
648570938,966,crsib,2021-06-09T18:34:30Z,`const` please,0,0.9930135607719421
648574280,966,crsib,2021-06-09T18:37:33Z,i feel like `showexceptiondialog` is a better choice for error messages. this applies to the cases below as well,0,0.9787895083427429
648577471,966,Paul-Licameli,2021-06-09T18:40:24Z,"you use mparent just so that a modal dialog has some parent window. but a modal dialog is allowed to have a null parent. the dialog has a stack-like lifetime and is destroyed before that audacitymessagebox call is completed. (a modeless dialog can also have a null parent, but you must then do extra work to be sure it is destroyed at some time.) i see that this code is rewritten in later commits, but the same remarks apply: ` mparent->callafter([this] { updatepopupdialog dlg(mparent, this); const int code = dlg.showmodal(); ` so i say: don't remember the mparent pointer. instead, find a window just when you need it to show the modal dialog. and if you can't, just use null. use findprojectframe( getactiveproject() ). include , so the compiler knows wxframe is-a wxwindow, rather than using a pointer cast.",0,0.9908746480941772
648579401,966,Paul-Licameli,2021-06-09T18:42:18Z,where? at the other closed pr? the comment and commit history here are confusing.,0,0.6781953573226929
648581014,966,crsib,2021-06-09T18:43:56Z,"also, wxframe is a subclass of wxwindow, so no cast is required here at all.",0,0.9940069913864136
649088802,966,gera-gas,2021-06-10T11:19:23Z,"renamed on ""build updates checking features into audacity"".",0,0.9946488738059998
649532804,966,gera-gas,2021-06-10T21:07:07Z,"-licameli in case, when audacity have no project windows (macos case), i guess `findprojectframe( getactiveproject() )` returned `nullptr` and i can't executing next actions below (may be i wrong). [code block]",0,0.9892380237579346
649539479,966,Paul-Licameli,2021-06-10T21:18:48Z,then write `wxtheapp->callafter(...`,0,0.995042085647583
649564857,966,Paul-Licameli,2021-06-10T22:09:28Z,"as i also explained to vitaly: see the file futurestrings.h. cut the strings from there. paste them into your source code. make sure you have copied them exactly, and also cut and pasted any i18n-hint comments that were immediately before the string. the deletions from futurestrings.h should also be committed to your branch.",0,0.9934414625167847
649565292,966,Paul-Licameli,2021-06-10T22:10:24Z,this was the only example in futurestrings.h that did have an i18n-hint comment.,0,0.9932277798652649
649566555,966,Paul-Licameli,2021-06-10T22:13:09Z,"this use of xo will not find a translation at runtime, because the string is not what is in futurestrings.h or in locale/audacity.pot. you should write instead: [code block]",0,0.9947456121444702
649567115,966,Paul-Licameli,2021-06-10T22:14:20Z,"the strings in futurestrings.h for this file all use xc (with two arguments), not xo. it is important to use both arguments for correct lookup.",0,0.9935442209243774
649567711,966,Paul-Licameli,2021-06-10T22:15:44Z,"the convention for naming member functions in audacity is camelcase, but also capitalizing the first letter.",0,0.9924960136413574
649570409,966,Paul-Licameli,2021-06-10T22:22:07Z,"do not assert (parent). it may be null, on mac when there is no open window, and that is not because of any logical error in the program or failure to observe pre- and post-conditions. as we discussed elsewhere, it is safe to make modal dialogs like the exception dialogs below with no parent. so you do not need the early return.",0,0.9925496578216553
649571442,966,Paul-Licameli,2021-06-10T22:24:32Z,"as we also discussed, replace the first `parent` with wxtheapp in case parent is null. instead of capturing parent in the lambda, you can repeat `findprojectframe(getactiveproject());` inside it, and that may be safer. there may be a small change that parent is destroyed between executing callafter now, and calling the lambda later, leaving a dangling pointer.",0,0.9937576055526733
649581991,966,Paul-Licameli,2021-06-10T22:51:53Z,"an easier way: `return std::tie(mversion, mrelease, mrevision) < std::tie(other.mversion, other.mrelease, other.mrevision);`",0,0.9931197166442871
649582667,966,Paul-Licameli,2021-06-10T22:53:50Z,you can use std::tie here too,0,0.9948133230209351
649582964,966,Paul-Licameli,2021-06-10T22:54:27Z,supports,0,0.9907141923904419
649933469,966,gera-gas,2021-06-11T12:22:38Z,"-licameli just i little bit confused, could you clarifying this moment please. okay, we have two method naming styles, lets nameing it as: * uppercamelcase - `somemethodname()` * lowercamelcase - `somemethodname()` how we should naming: 1 - local methods? (uppercc or lowercc) 2 - static methods? (uppercc or lowercc)",-1,0.7012806534767151
653185296,966,Paul-Licameli,2021-06-17T02:45:39Z,we prefer uppercamelcase always. sometimes there are exceptions -- such as when you make a container class and must name members begin() and end() so that they work right of : in the range-for statement.,0,0.9934126734733582
653204067,966,Paul-Licameli,2021-06-17T03:48:05Z,"this is good: the boolsetting is defined in just one place as a global, and used in different files, avoiding repeating the string literal and the default value. but should it be defined here or in the other place, updatemanager.cpp? i would prefer the other place. settings objects that influence the behavior of some component should live with it. preference dialog pages, which give a user interface for changing the setting, should refer to it by including a header file. the variable is ""model"" and the preference page is ""view.""",1,0.5763875842094421
653204384,966,Paul-Licameli,2021-06-17T03:49:09Z,"note that you use the boolsetting to mean, updates should be checked.",0,0.994301438331604
653205021,966,Paul-Licameli,2021-06-17T03:51:27Z,"you are also using the bool setting to mean: the user asked not to be shown the box again. was that the design? i think it was, i just want to make sure.",0,0.9925265312194824
653205294,966,Paul-Licameli,2021-06-17T03:52:21Z,"""for"" better than ""to"" in this name",0,0.9831914305686951
653206460,966,Paul-Licameli,2021-06-17T03:56:20Z,"you changed a pointer to a reference, meaning null is not allowed -- i like that. you changed updatemanager to versionpatch which is just the information needed here. i like that too.",1,0.9202427268028259
653208593,966,Paul-Licameli,2021-06-17T04:04:05Z,"a very minor matter: i would indent the closing lines of this and the other lambdas less. `});` is the closing brace of something like a control structure, if not exactly a control structure. so this would be like the well recognized k&r style of indents.",0,0.9892622828483582
653210396,966,Paul-Licameli,2021-06-17T04:10:39Z,do not use static here! (can explain to me why?),-1,0.9137969017028809
653212695,966,Paul-Licameli,2021-06-17T04:18:39Z,"""safenew"" follows the correct convention here, but perhaps you don't understand it. i'll explain: i want to discourage naked new in the program, using smart pointers instead. but you can't use smart pointers with objects of classes derived from wxwindow, because they have their own special memory management done by wxwidgets. if a window has a non-null parent, then this new without a corresponding delete is not really a memory leak. so in cases like this, i wxassert that the parent is not null (easily proved within this file), and use safenew which is just a macro for new. and then, a simple text scan of the program for ""new"" exactly doesn't find this. it was useful for me to check that other naked news are not being introduced in the program.",0,0.9650458693504333
653213732,966,Paul-Licameli,2021-06-17T04:21:27Z,"actually this isn't all quite correct: here is a smart pointer for wxwindow objects. but the point is, you can't use std::unique_ptr or std::shared_ptr. [a link]",0,0.9907438158988953
653215498,966,Paul-Licameli,2021-06-17T04:27:26Z,this line isn't needed,0,0.9925220608711243
653215744,966,Paul-Licameli,2021-06-17T04:28:12Z,i can see easily from in-line initializers below that nothing is left uninitialized. good!,1,0.9818966388702393
653217760,966,Paul-Licameli,2021-06-17T04:34:33Z,not needed,0,0.9915127158164978
653217825,966,Paul-Licameli,2021-06-17T04:34:44Z,not needed,0,0.9915127158164978
653218500,966,Paul-Licameli,2021-06-17T04:36:51Z,"you followed the rule that each .h file is the first `#include` in the corresponding .cpp file, so that the header file must `#include` or declare all that is necessary to parse it. i like that.",1,0.9442452788352966
653218813,966,Paul-Licameli,2021-06-17T04:37:59Z,"""parses"" (and two other repetitions)",0,0.994668185710907
653218891,966,Paul-Licameli,2021-06-17T04:38:16Z,"""does not allow""",0,0.9834659099578857
653220910,966,Paul-Licameli,2021-06-17T04:44:36Z,it's good to remember some doxygen in new classes. i would simply: [code block],0,0.5104230642318726
653223474,966,Paul-Licameli,2021-06-17T04:52:24Z,"are two spaces left after periods, sometimes? you might easily strip leading spaces from each sentence before you push onto the array. see wxstring::trim",0,0.9918122291564941
653225438,966,Paul-Licameli,2021-06-17T04:58:26Z,"there is a simple finite state machine implied in this function and the previous. i can figure out that an operating system tag is expected to be followed by a version tag (is it optional?), then a link tag. but please comment that.",0,0.9951930046081543
653225842,966,Paul-Licameli,2021-06-17T04:59:42Z,"""trimmed""",0,0.9713843464851379
653228021,966,Paul-Licameli,2021-06-17T05:06:01Z,"if i wanted to be really strict about raii for cleanup of the side effects, making no assumptions here that parsestring won't throw, then i would write, using a class from memoryx.h: `valuerestorer setter{ mversionpatch, versionpatch };` instead of the two assignments.",0,0.9887264370918274
653228486,966,Paul-Licameli,2021-06-17T05:07:20Z,"""that handles managing of updates""",0,0.9942398071289062
653228845,966,Paul-Licameli,2021-06-17T05:08:27Z,do we still need comments about multiple windows after the other corrections for object lifetimes?,0,0.9924373030662537
653232926,966,Paul-Licameli,2021-06-17T05:20:16Z,"not very important, i would prefer to simplify with a static intsetting object... but 32 bits may not be enough and it might be one of the 32 bit windows builds we still do. maybe i should define longsetting?",0,0.9441891312599182
653233394,966,Paul-Licameli,2021-06-17T05:21:28Z,rename the member to mupdatecheckinginterval,0,0.9944095015525818
653236232,966,Paul-Licameli,2021-06-17T05:29:31Z,"in this and the other lambdas, you use nullptr for parents of dialogs. you might safely use `findprojectframe(getactiveproject())` instead. it would be sure to center the dialog on the main project window that the user is looking at. this may be an unimportant, small advantage.",0,0.9837362170219421
653396618,966,crsib,2021-06-17T09:33:27Z,"it is because anton then uses `!(*this < other)`. although it can be written in one line as well, that is true",0,0.9934387803077698
653490847,966,gera-gas,2021-06-17T11:51:21Z,"yes, its was designed.",0,0.9903742074966431
653492065,966,gera-gas,2021-06-17T11:53:07Z,"yes, if it possible `longlongsettings`",0,0.9913389682769775
653893020,966,gera-gas,2021-06-17T19:58:06Z,when i tested with `wxtheapp` using it was centered too. just i want avoid from project is not created (on macos when menu shown only) by `wxtheapp` using.,0,0.990202784538269
875686102,2941,Paul-Licameli,2022-05-18T09:37:41Z,"you might make this simpler than the corresponding code in spectrumprefs. there, i needed a non-empty lambda capture. here, you don't. so just declare instead [code block]",0,0.9938753247261047
875692838,2941,Paul-Licameli,2022-05-18T09:44:41Z,"if you change `wxt(""device"")` (the internal, non-localized string), then for users who customized the layout of toolbars (preferring it in the bottom dock for instance), their preference won't be respected when they upgrade to the new version. a minor bother but perhaps avoidable.",0,0.9681689739227295
875694633,2941,Paul-Licameli,2022-05-18T09:46:36Z,"this looks like duplication from controltoolbar.cpp. instead, let's lower the repeated function into toolbar as an overload of makebutton.",0,0.9937273263931274
875697142,2941,LWinterberg,2022-05-18T09:49:21Z,"given that the ui looks like roadkill on upgrade, i think we may need to just reset toolbar preferences altogether. see #2919",0,0.8984748721122742
875735583,2941,Paul-Licameli,2022-05-18T10:31:50Z,"i see more imitation of controltoolbar.cpp here. do you understand what this is doing? for controltoolbar, it looks up `name` in the commandmanager to determine the keystroke shortcut, if any, that is associated with that name, and then formats the hover text for the button to include that shortcut key in the description. here, no key will be found because ""open audio setup"" is not the name of any command. but then, perhaps it should be registered as a named command so it can indeed be bound to a keystroke if the user chooses in preferences -- even if we do not decide to give it a key binding by default. would be interested i'm sure in keystroke accessibility of the new menu under the cogwheel.",0,0.9803521633148193
875744154,2941,Paul-Licameli,2022-05-18T10:42:51Z,`verbatim(prompt.translation())` should simplify just to `prompt`,0,0.9942876696586609
875747326,2941,Paul-Licameli,2022-05-18T10:46:40Z,this should be `verbatim(inputsource)`,0,0.9956686496734619
879899672,2941,Paul-Licameli,2022-05-23T22:01:44Z,"no, kit, your name here!",0,0.9932928085327148
879901163,2941,Paul-Licameli,2022-05-23T22:04:45Z,"when you make a new .cpp/.h file pair, the .cpp should include the .h before any other inclusion, to be sure the .h file is really self-contained. and you did that! was it accident or were you aware of this rule?",0,0.9747501015663147
879903694,2941,Paul-Licameli,2022-05-23T22:10:09Z,maybe you copied and pasted. i like to keep the #include directives and forward declarations minimal. i think you can eliminate: class wxcommandevent; class wxboxsizer; class wxsize; class wxpoint; class wxmenu; class wxstring; class abutton; class audacityproject;,0,0.9922096729278564
879903999,2941,Paul-Licameli,2022-05-23T22:10:50Z,`explicit` ?,0,0.9892055988311768
879906339,2941,Paul-Licameli,2022-05-23T22:15:56Z,i18n (internationalization) hint comments are significant. they get extracted into translation catalog template files and read by human experts in foreign languages. don't just copy-past this from devicetoolbar.cpp. adapt it meaningfully.,0,0.9801139235496521
879911722,2941,Paul-Licameli,2022-05-23T22:27:43Z,"add `#include ` you can eliminate #include #include #include #include #include #include #include #include #include #include #include #include ""../trackpanel.h"" #include ""acolor.h"" #include ""imagemanipulation.h"" #include ""prefs.h"" #include ""project.h"" #include ""../shuttlegui.h"" #include ""../widgets/grabber.h"" #include ""../widgets/audacitymessagebox.h"" #include ""../widgets/grabber.h"" #include ""../widgets/windowaccessible.h""",0,0.9895365238189697
879913545,2941,Paul-Licameli,2022-05-23T22:31:46Z,"don't assign, when you can use a member initializer. but don't use a member initializer, when you can use an in-class initializer!",0,0.9476501941680908
879916132,2941,Paul-Licameli,2022-05-23T22:37:48Z,duplicated comment is unclear here,0,0.9725621342658997
896272675,2941,Paul-Licameli,2022-06-14T00:28:09Z,there is no such parameter!,0,0.9928922653198242
896274269,2941,Paul-Licameli,2022-06-14T00:32:46Z,a separate commit just to move this function into toolbar.cpp might be nice too.,0,0.9811661839485168
896276542,2941,Paul-Licameli,2022-06-14T00:39:31Z,"one commit adds this file (but does much else besides), another corrects the comment. i prefer to see a squashed sequence of commits that doesn't leave a record of mistakes and corrections.",0,0.96637362241745
896291545,2941,Paul-Licameli,2022-06-14T01:21:49Z,actually though... you don't really use this overload in the final commit,0,0.983984649181366
896672816,2941,Paul-Licameli,2022-06-14T10:55:08Z,"new uses of `getactiveproject` should be avoided! it dependes on a global variable to identify the project. but this toolbar was constructed with a reference to the project, which was passed to the bass class toolbar. give toolbar a const accessor to return audacityproject& and use that.",0,0.9925077557563782
896673697,2941,Paul-Licameli,2022-06-14T10:56:09Z,"actually, it's a protected member, so just use `mproject` directly.",0,0.9943482279777527
897867728,2941,ksoze95,2022-06-15T11:34:04Z,done.,0,0.9897913336753845
897868288,2941,ksoze95,2022-06-15T11:34:45Z,commit squashed.,-1,0.9520320892333984
897869380,2941,ksoze95,2022-06-15T11:35:50Z,removed incorrect doxygen param comment.,0,0.9759352207183838
1130864771,4384,Paul-Licameli,2023-03-09T11:34:30Z,`const` function?,0,0.992792010307312
1130885278,4384,Paul-Licameli,2023-03-09T11:49:02Z,correctness of this change assumes `setmask` was nowhere used -- and that is true,0,0.9930976033210754
1130920702,4384,Paul-Licameli,2023-03-09T12:12:51Z,"the `{}` here and elsewhere initializes `mmask` but that member is nowhere used, so simplify",0,0.9937328696250916
1130950461,4384,Paul-Licameli,2023-03-09T12:23:18Z,did you neglect `--si.channels;` after the loop?,0,0.994279146194458
1130954230,4384,Paul-Licameli,2023-03-09T12:25:51Z,... and so you did in the second commit. just squash it.,0,0.9551109671592712
1131057718,4384,Paul-Licameli,2023-03-09T13:49:55Z,"move (or just delete) the banner comments too, for the moved classes",0,0.9924830794334412
1131064937,4384,Paul-Licameli,2023-03-09T13:55:53Z,the commit comment can also mention exportplugin,0,0.9959845542907715
1131728486,4384,Paul-Licameli,2023-03-09T23:09:35Z,"not obvious in this large commit -- this is not just copied and pasted, but also the type of the third argument changes. please mention that in the commit comment.",0,0.9927387833595276
1131731849,4384,Paul-Licameli,2023-03-09T23:13:12Z,"oh but i see now -- same type, just another alias. so never mind.",0,0.8512623906135559
1131759896,4384,Paul-Licameli,2023-03-09T23:39:42Z,"should be ""complementary""",0,0.993621289730072
1131760604,4384,Paul-Licameli,2023-03-09T23:40:32Z,"as a matter of form i'd prefer that there is also a .cpp including this so we are sure the header has all its compilation dependencies, and the destructor should have a non-inline definition there.",0,0.9912691116333008
1132274550,4384,Paul-Licameli,2023-03-10T11:47:55Z,should i worry about the safety of that `->`? should there be a shared or weak pointer? or should there be comments in the base class header explaining the assumptions that derived classes may make about lifetimes of `importfilehandle`?,0,0.9930478930473328
1132297399,4384,Paul-Licameli,2023-03-10T12:15:40Z,"in the old logic, there was a distinction between stopping and cancelling. in case of stopping, there was no error reported, even if `totalsamplesread < mnumsamples`. in the new logic, this changes.",0,0.9917820692062378
1132310725,4384,Paul-Licameli,2023-03-10T12:31:04Z,"progress dialogs had a stop button distinct from cancel in the previous version, but with this commit they don't. is this change intended?",0,0.9922696352005005
1132326126,4384,Paul-Licameli,2023-03-10T12:45:04Z,this is an unusual way to write it. funny c++ fact: if you change it to `auto haserror = {false};` then instead the type is deduced as `std::initializer_list ` and compilation fails because that is not convertible too bool.,0,0.7380539178848267
1132348331,4384,Paul-Licameli,2023-03-10T13:04:47Z,"might want a check against division by zero, as with other progress updates",0,0.9900277256965637
1132363273,4384,Paul-Licameli,2023-03-10T13:17:54Z,another denominator to check for 0,0,0.9934746623039246
1132378199,4384,Paul-Licameli,2023-03-10T13:30:14Z,mazzoni,0,0.9614687561988831
1132383812,4384,Paul-Licameli,2023-03-10T13:34:53Z,"i thought this was unnecessary for the build, but now i see it's needed for `audacity_file_suffix_event` that is one place where i omitted to change wxevents to observer messages, but then this is a case of wxwidgets dialogs communicating to each other.",0,0.990300178527832
1132393250,4384,Paul-Licameli,2023-03-10T13:42:25Z,"and one more denominator. maybe `onimportprogress` should take numerator and denominator as two arguments, and you can write the check for zero division in one place only.",0,0.9937363862991333
1132515399,4384,Paul-Licameli,2023-03-10T15:21:42Z,"the cancel() overrides are all alike, with one exception. i suggest - make `mcancelled` protected and provide a default `cancel()` implementation - make `mcancelled` atomic, anticipating background threads",0,0.9940822720527649
1132526465,4384,Paul-Licameli,2023-03-10T15:29:08Z,"i think this virtual function will be called from background threads, correct? then the base class will need to specify that in header file comments, and this override will need some rework. perhaps, it will just update some atomic variable for the numerator of the fraction. the main thread, running the progress dialog (modally?), could intercept idle or periodic timer events to check that number and update display. the dialog's event handler for cancel button press would update the atomic boolean that the background thread reads in `cancel()`.",0,0.9902862906455994
1132554176,4384,Paul-Licameli,2023-03-10T15:54:01Z,it would be good to make a stringsetting now and not repeat the literal path string,0,0.9912586808204651
1132563096,4384,Paul-Licameli,2023-03-10T16:02:14Z,"with this deletion, ifilterindex becomes unused. i expected then that timer record would achieve this side effect otherwise, by a call to configure the exporter, but i don't see it.",0,0.9924355149269104
1132575872,4384,Paul-Licameli,2023-03-10T16:14:16Z,i think there is a proof though that this assignment was always overridden anyway? because `getfilename` was on the execution path after that and made it 0?,0,0.9898738861083984
1132576848,4384,Paul-Licameli,2023-03-10T16:15:12Z,"if that is correct, then `m_iautoexportfilterindex` is a useless member of `timerrecorddialog`.",0,0.9902583360671997
1132577488,4384,Paul-Licameli,2023-03-10T16:15:50Z,"and if that is removed, then `exporter::getautoexportfilterindex()` will be called nowhere.",0,0.9937288761138916
1132586813,4384,Paul-Licameli,2023-03-10T16:24:40Z,i think this has `setfullname` where the old version had `setname` in `exporter::getfilename()`. why the change?,0,0.9915170669555664
1132609897,4384,Paul-Licameli,2023-03-10T16:43:23Z,why not `filedialogwrapper` as in the original?,0,0.9904845952987671
1132618119,4384,Paul-Licameli,2023-03-10T16:51:12Z,`export` is a misleading name. this function only chooses a path before export really happens.,0,0.7032113075256348
1132619319,4384,Paul-Licameli,2023-03-10T16:52:24Z,i think this should be `continue` to conserve the old logic,0,0.983064591884613
1132619815,4384,Paul-Licameli,2023-03-10T16:52:53Z,`continue` here too,0,0.9945074915885925
1132620252,4384,Paul-Licameli,2023-03-10T16:53:17Z,and one more `continue`,0,0.9879909157752991
1132620464,4384,Paul-Licameli,2023-03-10T16:53:30Z,`continue` here too,0,0.9945074915885925
1136928360,4384,Paul-Licameli,2023-03-15T11:48:38Z,"do you understand the difference between `sampletrack` and `wavetrack`? the first is an abstract base class of the second. (and `writablesampletrack` is between them.) i think these utilities would be better defined in terms of the more general interface. we don't yet have other concrete subclasses of `sampletrack` but it may be useful later. `sampletrack` does not expose the notion of a clip within the track, but i don't see that you require knowledge of subdivision into clips.",0,0.9902125000953674
1136929331,4384,Paul-Licameli,2023-03-15T11:49:37Z,"i don't understand the comment. what ""same result?""",0,0.6170606017112732
1136933864,4384,Paul-Licameli,2023-03-15T11:54:07Z,`track` which is the base of `sampletrack` does expose selectedness. but it is `playabletrack` that defines mute and solo and it is not a base of `sampletrack`. yet you still might apply `filter` to the track range to get a range of `sampletrack`. maybe `playabletrack` should instead become a mix-on property of tracks that you discover with a `dynamic_cast`? that's a bigger idea i should think about for future.,0,0.9875063896179199
1136934859,4384,Paul-Licameli,2023-03-15T11:55:05Z,feel free to ignore all the suggestions about `sampletrack` for a draft. but remember the idea.,0,0.9804480075836182
1136966083,4384,Paul-Licameli,2023-03-15T12:18:01Z,no preservation of the other old comments from jkc? (james),0,0.9930817484855652
1137006232,4384,Paul-Licameli,2023-03-15T12:47:53Z,"if you change lines like this, also take the opportunity to eliminate one more repeated string literal path with a `boolsetting` object.",0,0.9938387274742126
1137020938,4384,Paul-Licameli,2023-03-15T12:56:42Z,"there is still special treatment of a subclass here, which i hope you clean up in a later commit i have not yet reviewed. probably it's ok to keep treating `cl` as a special part of the framework, but for `ffmpeg` there should instead be some other new virtual function of the export plugin object to make this decision.",0,0.9907377362251282
1137528486,4384,Paul-Licameli,2023-03-15T17:49:57Z,"another opportunity to use `boolsetting`. but be careful: this one is used as an argument to `tiecheckbox`. when that happens, you also need to use `invalidate` in the `commit()` member function of the preference panel. i intend to remove that need for `invalidate`, but it requires first using a named setting object in every call of the `tie...` functions, in preferences, and also in export dialogs, and also in soundactivatedrecord.cpp",0,0.9839838743209839
1138584984,4384,Paul-Licameli,2023-03-16T12:33:15Z,did you mean to pass `selectedonly` for the third argument?,0,0.9933991432189941
1138587212,4384,Paul-Licameli,2023-03-16T12:34:59Z,"you lifted this ui out of the testing logic,but now it duplicates a string literal in two places. is there a good file in which to put a single occurrence of the literal?",0,0.9922041893005371
1138598539,4384,Paul-Licameli,2023-03-16T12:43:27Z,"this new function shows the file dialog after the setting of export range, but previous to this commit, the two things were in the opposite order (as they remain for timer recording). so there may be an unintended, though unimportant, change in behavior. such as giving the warning dialog before any file selection. better to change no behavior unless really meaning to.",0,0.9902601838111877
1138774330,4384,vsverchinsky,2023-03-16T14:31:15Z,was moved to anonymous namespace,0,0.9948981404304504
1138777550,4384,vsverchinsky,2023-03-16T14:32:57Z,thanks!,1,0.8631753921508789
1138871957,4384,vsverchinsky,2023-03-16T15:21:19Z,aren't comments for `importprogresslistener` explain this?,0,0.994078516960144
1139175071,4384,vsverchinsky,2023-03-16T18:06:08Z,"i think that the major distinction between them is that the data that has been been read by the time stop button was pressed is preserved, but mpg123 importer seem to be an exception. will update this commit so that this behavior is preserved.",0,0.9874863624572754
1139180237,4384,vsverchinsky,2023-03-16T18:10:12Z,"moved them to `importpluginhandleex`, though i don't want to convert it's type to atomic in advance",0,0.9944275617599487
1139182776,4384,vsverchinsky,2023-03-16T18:12:18Z,"probably, but similarly i don't want to do it in advance",0,0.9419271349906921
1139221339,4384,vsverchinsky,2023-03-16T18:41:56Z,"this should not change the behavior, considering that currently `exportfiledialog::show` is always called with project name without extension, but in context of `exportfiledialog` i think it make more sense to allow user to specify full file name.",0,0.986741840839386
1139251072,4384,vsverchinsky,2023-03-16T19:11:25Z,"what happens now is that track range is evaluated multiple times in different places, but within same ""export flow"", i think this approach is error prone. instead, track range should become a member variable of `exporter` or another state-object and passed as argument where it's required (for mixing, validation etc.)",0,0.9349232316017151
1139294496,4384,vsverchinsky,2023-03-16T20:00:02Z,"yes, thanks!",1,0.9540684819221497
1139300015,4384,vsverchinsky,2023-03-16T20:06:15Z,"no, but if i understand correctly this really shouldn't happen.",0,0.8968155384063721
1139301755,4384,vsverchinsky,2023-03-16T20:07:50Z,the behavior is restored in one of the later commits,0,0.9915822148323059
1143091948,4384,Paul-Licameli,2023-03-21T09:28:32Z,"at the commit ""move `exportmixerdialog` invocation and mix-related warnings"", this line is deleted, and i don't see where it moves.",0,0.9912545680999756
1143122169,4384,Paul-Licameli,2023-03-21T09:51:54Z,"i'm pleased to see this function unified with `process`. it was an ugly violation of open-closed to see this as part of the exporter interface. fix the spelling in the commit comment: ""became""",-1,0.6470789909362793
1143156447,4384,Paul-Licameli,2023-03-21T10:18:17Z,`explicit`,0,0.9844794869422913
1164193200,4384,Paul-Licameli,2023-04-12T14:08:41Z,"i could use my new utility like this, avoiding repetition, and requiring no rewriting in case there is ever a need to add more variant alternatives that the generic lambda handles: [code block] similarly in other places where you use `get_if`",0,0.9936249256134033
949911011,3396,Paul-Licameli,2022-08-19T07:59:05Z,"this commit is not strictly needed for statelessness. you must have found a case where this appeared to fix persistency of settings in the configuration file. the analogous code for vst2, which you originally adapted to vst3, still uses base64 encoding and to change that would have some small risk of breaking compatibility of someone's settings configuration or macros if they migrate to 3.2. what was the original reason base64 encoding was used at all? i'm not certain but i think it was a way of converting binary data into something that could be stored in a config file with proper escapes and no loss of data. is that right, and is it a reason why you still might want to figure out some other way to keep base64 encoding working?",0,0.9904442429542542
949914369,3396,Paul-Licameli,2022-08-19T08:03:15Z,extra character in `#include`,0,0.994835376739502
949926652,3396,Paul-Licameli,2022-08-19T08:18:25Z,"the meanings of `fetchsettings` and `storesettings` got reversed, and are now inconsistent with terminology in audiounits. there, `fetchsettings` is fetching state *from* an audiounit handle *into* an effectsettings package of data. `storesettings` does the opposite.",0,0.9814821481704712
949929867,3396,Paul-Licameli,2022-08-19T08:21:27Z,unused local variable,0,0.9908918738365173
949954417,3396,Paul-Licameli,2022-08-19T08:43:00Z,"copy construction was eliminated, so perhaps you may also declare the copy with explicit `= delete`",0,0.9952974915504456
949967763,3396,Paul-Licameli,2022-08-19T08:52:20Z,"the elimination of `storesettings` leaves the argument `settings` unused in this function, at least so i see at the fifth commit in the sequence. so this ""breaks"" that function, but i presume you fix it in later commits i have not yet reviewed. i understand from other commit comments that you put back a local wrapper object in the function for this purpose. strictly then this commit sequence isn't preserving intended behavior all the way through but i won't insist on that now.",0,0.991350531578064
949975230,3396,Paul-Licameli,2022-08-19T09:00:29Z,"last things to say about the fifth commit. when i transformed other effect families, the move to actual statelessness came late. until a late commit, `getsettings` was a non-static member function, ignoring its argument, and really using information in the stateful effect object. all the places where `getsettings` had to be called were figured out first; and only then did i make a change so that the `effectsettings` objects really carried independent information around and were not dummies. you make this change earlier, so `effectsettings` objects really carry data, making it possible that buggy behavior exists in the intermedate steps of this transformation because of inconsistencies about where the correct data really are. i already mentioned the possible wrong behavior of exporting. it's not how i would write a very careful transoformation. in case bugs still exist after everything and i want to bisect to understand where the bug was introduced, the other caution i took with intermediate steps might help me find out where the mistake was really introduced. i'm not insisting now on rewriting this pull request that way.",0,0.9244025945663452
949978761,3396,Paul-Licameli,2022-08-19T09:04:33Z,"i think it is the fifth commit that introduces the build failure on linux. it seems ""always"" is a macro defined somewhere in one of the inclusions. i was able to fix linux builds of my cherry-picks of your branch by moving the definition of `vst3effect::realtimesupport` earlier in the file, before other `#include` directives. another thing i didn't try was just to insert `#undef always` before the function.",0,0.9859948754310608
949988888,3396,Paul-Licameli,2022-08-19T09:15:49Z,"just use literal `44100.0` as a default, as before. don't use `effectbase::mprojectrate`. that is another piece of state in the effect objects i need to eliminate in a future release.",0,0.9941903352737427
950019477,3396,Paul-Licameli,2022-08-19T09:51:35Z,could this instead be `singleinputparametervalue *const mparameterqueues;` so you can remove the `const_cast` below?,0,0.9932416677474976
950031281,3396,Paul-Licameli,2022-08-19T10:05:57Z,should this function clear the map in the settings? -- maybe not if it needs to be done in a worker thread. you don't (yet) use it in any worker thread (at the eighth commit of ten).,0,0.9915751814842224
950032150,3396,Paul-Licameli,2022-08-19T10:07:03Z,at this commit i see accumulation of changes in the map in `performedit` but clearing nowhere.,0,0.97422194480896
950034001,3396,Paul-Licameli,2022-08-19T10:09:22Z,"this is the only place where the processors get changed settings information, and it only happens before playback.",0,0.993701696395874
950035245,3396,Paul-Licameli,2022-08-19T10:10:53Z,"something is needed to replace the deleted lines, of course, so that there can be continuing adjustment of settings during play. so it seems you would need more `consumesettings` but in a worker thread. i don't yet see the complete transformation of the code in later commits, but at this commit it is surely incomplete.",0,0.9898024201393127
950035872,3396,Paul-Licameli,2022-08-19T10:11:42Z,note the `realtimeprocessstart` is the only place where the worker thread should check for changes of state communicated by the main thread. not in `realtimeprocess` or `realtimeprocessend`.,0,0.9928336143493652
950042089,3396,Paul-Licameli,2022-08-19T10:20:07Z,"so i understand that `process` makes `inputparameterchanges` from `vst3wrapper::mparameters`, which in turn, must be assigned by `consumechanges`. a call to that is surely needed, then in `realtimeprocessstart`, and then `mparameters` will be correctly unchanging in case of mulitple calls to `process.`",0,0.9909605383872986
950043312,3396,Paul-Licameli,2022-08-19T10:21:56Z,"maybe the `effectsettings` could contain a map from parameter ids to `optional<>` values, so the consuming thread could ""clear"" the map by reassigning `nullopt` everywhere, but not doing any free-store deallocation.",0,0.9858104586601257
950058973,3396,Paul-Licameli,2022-08-19T10:44:15Z,"moving on the the ninth commit. as i already mentioned, you should avoid either allocating or freeing and that means, not clearing a `std::map` either. so i suggest again, a map from keys to optional values and just reassignment of null opt instead of clearing.",0,0.9925159811973572
950059260,3396,Paul-Licameli,2022-08-19T10:44:43Z,`copysettingscontents` in either direction is always done on the worker thread.,0,0.9943066239356995
950062153,3396,Paul-Licameli,2022-08-19T10:48:58Z,"`pertrackeffect.h` is enough, don't need its subclass",0,0.9923696517944336
950065075,3396,Paul-Licameli,2022-08-19T10:53:06Z,"this commit loses the vector of processors in the effect, but does not restore that array elsewhere in the instance.",0,0.9887680411338806
950069398,3396,Paul-Licameli,2022-08-19T10:59:11Z,"this deleted line has no corresponding one in the new function for the instance. but i see from other functions that you assume latency is available at initialization time and does not change, so you cache the value. ok. but i wonder if varying latency, with varying settings, really is a possible thing we will need to handle later. you know that fixing the handling of latency in realtime play is a problem i need to solve, maybe in a patch release.",0,0.9718382954597473
950071697,3396,Paul-Licameli,2022-08-19T11:02:29Z,the new `processinitialize` no longer calls `consumechanges`. does destructive processing correctly apply the changes to settings made in the dialog? how is that communicated? i must see the tenth commit i suppose.,0,0.9950469732284546
950075262,3396,Paul-Licameli,2022-08-19T11:07:24Z,this logic moves to `realtimeinitialize` while the new `realtimeaddprocessor` does nothing. the `consumechanges` is lost so i am again unsure that the processor really begins in the correct state.,0,0.9652385115623474
950076309,3396,Paul-Licameli,2022-08-19T11:08:56Z,"this was the added `consumechanges` call i was expecting to see -- good, but again, i don't understand why it is right to remove the other calls, and it also needs rewrite to avoid deallocations.",0,0.9345700144767761
950079321,3396,Paul-Licameli,2022-08-19T11:13:18Z,"ninth commit re-introduces use of the `settings` argument, good",0,0.684792160987854
950082042,3396,Paul-Licameli,2022-08-19T11:17:15Z,i expect that this new member of the effect moves to the validator next,0,0.9889367818832397
950084243,3396,Paul-Licameli,2022-08-19T11:20:27Z,"there is a long-distance coincidence of repeated string literals here and in `vst3optionsdialog.cpp`. it would be nice to clean that up, but it's not necessary now",0,0.9782589673995972
950095289,3396,Paul-Licameli,2022-08-19T11:31:21Z,"i saw this new function and thought, is it safe to use only on the main thread? do changes of `mactive` happen only in the main thread? is `mactive` privately used only on the main thread? yes, yes, and yes, which is good. so please just add a comment in the header file that it's for main thread usage only.",1,0.8963066339492798
950102544,3396,Paul-Licameli,2022-08-19T11:39:32Z,i think this should call through to `effectuivalidator::onclose` so the effect doesn't hold on to `mparent` either,0,0.9860803484916687
950103763,3396,Paul-Licameli,2022-08-19T11:41:14Z,this call got lost in the validator. the function is no longer called anywhere.,0,0.9874025583267212
950116259,3396,Paul-Licameli,2022-08-19T11:59:06Z,"my understanding of these lines is that they update both the edit controller and the effect component after you change a preset. the first, presumably, causes graphical updates. the other affects the state of the processor, but this might be happening during processing. are we confident of the thread safety of this? if not -- then `realtimeprocessstart` in the instance would have to complete the change of state of the effect component. would it be correct just to do a complete state change there, not using the pending changes interface?",0,0.9874574542045593
950118597,3396,Paul-Licameli,2022-08-19T12:02:37Z,"this also raises the question of the thread safety of the calls that may precede `updateui` and those are `loadfactorydefaults`, `loadfactorypreset`, `importpresets`, `loaduserpreset`. are they all safe to do while another thread is processing?",0,0.99285888671875
950120513,3396,Paul-Licameli,2022-08-19T12:05:27Z,"the sequence of those two calls is changed in the validator now, and i think that is correct",0,0.9932833909988403
950124824,3396,Paul-Licameli,2022-08-19T12:11:18Z,"this call also got lost in the transformation. i think this means that `componenthandler::perforedit` will never do anything, so changes of dials will not be communicated in realtime to the processor.",0,0.9914008975028992
950133506,3396,vsverchinsky,2022-08-19T12:22:42Z,"mprojectrate value is used to initialize generators, like in another effects, but without explicit sample rate specification",0,0.9916973114013672
950140683,3396,Paul-Licameli,2022-08-19T12:31:59Z,"later commits eliminated these lines, so it doesn't matter. `msetup` is now, properly, part of instance state, not the effect, and is initialized with the correct rate.",0,0.9938124418258667
950156176,3396,vsverchinsky,2022-08-19T12:50:19Z,i haven't yet figured out what exactly causes data corruption. may be it's in base64::encode or base64::decode or may be there are some implicit charset conversion which wasn't taken into account. correct,0,0.9809044003486633
950176460,3396,vsverchinsky,2022-08-19T13:13:50Z,"using storesettings on vst3effect instance could change it's state, which isn't correct behaviour. also considering that there is a single instance and the copy of settings that passed to this function was more likely fetched from same instance it shouldn't harm?",0,0.9885346293449402
950178549,3396,vsverchinsky,2022-08-19T13:15:48Z,"name collision caused by indirect include of x.h, fixed by moving includes to another file",0,0.9846144318580627
950208935,3396,vsverchinsky,2022-08-19T13:47:28Z,"not neccessarily. vst3effect doesn't yet (at this step) support realtime processing and doesn't support parameter changes ""on the fly"". so at this point it's enough to call consumesettings once, just before processing has started. parameterchanges used to be a vector... but as i said in the previous comment, i'll move it to assignsettings. upd: since it's not possible to update settings on the main thread side without a call to ::flush clearing does not do what it supposed to do",0,0.9812871813774109
950286667,3396,vsverchinsky,2022-08-19T14:58:40Z,in case of vst3 plugin should explicitly ask host to restart (via setactive) effect component by sending icomponenthanler::restartcomponent(klatencychanged).,0,0.9951496720314026
950297065,3396,vsverchinsky,2022-08-19T15:10:00Z,1. there is only one instance of vst3wrapper which owned by vst3instance (no per-track sub effect initialization) 2. there is only one point where actual parameter change transfer before processing could occur - effectinstance::realtimeprocessstart 3. in case of destructive processing instance state updated via icomponent::setstate with settings stored by vst3uivalidator::validateui,0,0.9917411804199219
950298482,3396,vsverchinsky,2022-08-19T15:11:30Z,and also it creates a helper effect instance,0,0.9948467016220093
950307073,3396,vsverchinsky,2022-08-19T15:20:58Z,"the only exception in the interface of this class is a process function, otherwise it's not thread-safe",0,0.9898656010627747
950317602,3396,vsverchinsky,2022-08-19T15:30:06Z,"yep, thanks, fixed that",1,0.9571802616119385
950317713,3396,vsverchinsky,2022-08-19T15:30:14Z,thanks,1,0.8643599152565002
950333005,3396,vsverchinsky,2022-08-19T15:45:30Z,"it's safe to call setstate/getstate during processing, but this doesn't happen during processing `if(!isactive)` i would object to that since `realtimeprocessstart` is getting called for each block, i guess it's not how it supposed to work. correct thing would be to use setstate once (or when preset has changed), send changes via `icomponenthandler` and then save state at least once (in our case - when ui is closed)",0,0.9873730540275574
950695550,3396,Paul-Licameli,2022-08-20T13:25:55Z,"the point, however, is to make exportpresets work independently of any instance. and you achieve that in the later commit with a temporary wrapper.",0,0.9907393455505371
950870633,3396,Paul-Licameli,2022-08-21T16:30:29Z,"i see you added the build fix, but maybe it would be better done earlier in the commit sequence to keep all commits buildable.",0,0.9898461699485779
950870904,3396,Paul-Licameli,2022-08-21T16:32:25Z,the build fixes might be done earlier in the commit sequence to keep all commits buildable.,0,0.9919244647026062
950872330,3396,Paul-Licameli,2022-08-21T16:44:48Z,"you have simply deleted the clearing of the `std::map` instead of the more complicated suggstion i made to use a map of unchanging size with `std::optional` values in it. there is also a swapping of map contents. i wonder whether this will reall work right. it would be that the old contents swapped away might later be incorrectly swapped in again, if `copysettingscontents` is called again before the main thread sends an updated message. so i think the right thing to do, which might fix some bugs with real time adjustment of dials, is as i suggested. more explicitly: - `makesettings` makes a map from each parameter id to `nullopt` - `performedit` emplaces values - `copysettingscontents` copies each value and assigns `nullopt` to the source (note, std::move from the optional will not make the source null opt) if you are experiencing some bugs with adjustment of sliders, then try this instead.",0,0.9846144318580627
950878067,3396,vsverchinsky,2022-08-21T17:36:38Z,it doesn't build for you?,0,0.9719858169555664
950879068,3396,vsverchinsky,2022-08-21T17:45:40Z,"the more complicated suggestion will not work because: a) `makesettings` can't make such map because to do so it would need to instantiate `ieditcontroller` b) assigning `nullopt` or clearing the map turned out to be pointless, considering that the real purpose is to clear setting on the main thread side (so that subsequent `get` see it empty) and not the intermediate objects, which could be achieved only by using `flush` for now i guess it's not a big problem that main thread remebers latest values of all parameters that have changed i thought that counter prevents that, isn't it?",0,0.9645923376083374
950880369,3396,Paul-Licameli,2022-08-21T17:58:00Z,i don't understand that answer. there is no use of `mactive` but on the main thread. correct? anyway this unresolved point is only about a comment.,0,0.7237517237663269
950883641,3396,Paul-Licameli,2022-08-21T18:29:07Z,i consider this resolved but i leave it open so you read and understand my previous comment.,0,0.9827949404716492
951471204,3396,Paul-Licameli,2022-08-22T13:54:39Z,i didn't really try building on linux. i may be mistaken. all commits were building for me on macos -- but not after the latest rebasing.,0,0.9291550517082214
1593695176,6359,saintmatthieu,2024-05-08T09:07:43Z,"i don't know if this comment is relevant only to the following two out-commented lines or to what follows, too. why keep the dead code?",0,0.9109750390052795
1593709727,6359,saintmatthieu,2024-05-08T09:15:13Z,"looks like even the pointer should be `const`, i.e., `static const channelgroup* const mastergroup;` also, i'd prefer the initialization to take place here as well for clarity, rather than in the source file.",0,0.9894915819168091
1593713909,6359,saintmatthieu,2024-05-08T09:18:29Z,trailing spaces,0,0.9645050168037415
1593714423,6359,saintmatthieu,2024-05-08T09:18:53Z,why not just removing it?,0,0.9814432859420776
1593717912,6359,saintmatthieu,2024-05-08T09:21:44Z,`nullptr` aka `mastergroup` ?,0,0.992056667804718
1593751139,6359,saintmatthieu,2024-05-08T09:45:50Z,"if so i'd prefer `mastergroup` over `nullptr`, in case one looks for all places where it's used.",0,0.9895399212837219
1593771923,6359,saintmatthieu,2024-05-08T10:00:18Z,"why ? isn't this used by `allocatechannelstoprocessors` to ""plug"" an effect's output channels to the number of playback channels. why should this change with the master channel?",0,0.988507866859436
1593796935,6359,saintmatthieu,2024-05-08T10:22:09Z,i think correct english would be `maketrackeffectpane` (even if there's more than one effect).,0,0.9870092272758484
1593844391,6359,saintmatthieu,2024-05-08T11:00:50Z,"this crashes when playing a midi file on an empty project, because `mplaybacksequences` and, consequently, `mprocessingbuffers`, are then empty.",0,0.9717668294906616
1593868140,6359,saintmatthieu,2024-05-08T11:22:48Z,"maybe a solution: the size of `mmasterbuffers` equals the number of playback channels, maybe it could be used instead. also, afaics these buffers always have the same size, so a simple `mmasterbuffers[0].size()` would be more expressive and sufficient.",0,0.9850425720214844
1593869133,6359,saintmatthieu,2024-05-08T11:23:41Z,or `mplaybackbuffers`.,0,0.9929973483085632
1593870392,6359,saintmatthieu,2024-05-08T11:24:54Z,noise,0,0.8246247172355652
1593870645,6359,saintmatthieu,2024-05-08T11:25:08Z,trailing spaces,0,0.9645050168037415
1593916589,6359,saintmatthieu,2024-05-08T12:01:31Z,"i don't see any side effect if `pscope == nullptr`, so shouldn't the `if (pscope)` be on this line?",0,0.9886062741279602
1593918862,6359,vsverchinsky,2024-05-08T12:03:35Z,the comment isn't specifically about master channel. when we allocate two mono effects to one stereo track there is at least one problem with ui : you can't see the output of the second channel. i think configuring effects to process samples in native track format and rate could have benefit of reducing cpu load in case if playback sample rate is higher compared to playback rate. but that may be conceptually wrong.,0,0.9539592266082764
1593973495,6359,saintmatthieu,2024-05-08T12:46:50Z,"regarding the cpu, i don't know, it looks like there is no negotiation at the moment: the framework dictates the sampling rate to the effect instances, which i guess is much simpler. also, i think resampling is inevitable, so i'm not sure we want to try and minimize it. my point is that this todo should probably be tempered with some doubt, e.g., ""consider initializing (...) because (...)""",0,0.9092623591423035
1595345368,6359,Paul-Licameli,2024-05-09T11:50:37Z,""" or for the master when group is null""",0,0.9939957857131958
1595415050,6359,Paul-Licameli,2024-05-09T13:00:54Z,"comment ""mplaybackbuffers correspond many-to-one with mplaybacksequences"" above this line is no longer correct",0,0.9916704893112183
1595424913,6359,Paul-Licameli,2024-05-09T13:09:54Z,"i would add a comment that this `resize` is expected not to allocate memory in the worker thread, because sufficient size should have been reserved in `allocatebuffers`. perhaps, test capacity before and after and `assert` no change.",0,0.9926361441612244
1595463844,6359,Paul-Licameli,2024-05-09T13:36:36Z,"i don't think the mixer can be properly eliminated in the case that it does resampling of a track whose rate does not match the device output rate, or there is a time track. there will be some state in the resampler dependent on previous input. however, note that the mixer stands as a producer in relation to this function which is its consumer. perhaps, if it really matters, another thread could mix in advance. but all that effort at overlapping computation may be unnecessary because this thread really spends most of its time idle anyway, going faster than the ultimate real-time consumption of its output. or then again maybe it might matter in future because we want to have ever more capacity for complicated calculations like more effects, more stretching, more pitch shifting. or again, maybe you were thinking of power consumption, not performance.",0,0.9685280323028564
1595470151,6359,Paul-Licameli,2024-05-09T13:41:42Z,"i notice that as part of this pr you have moved the logic to silence tracks (which might be driven by unpredictable presses of the mute buttons by the user) from the low-latency thread to this high-throughput thread. was that for simplification of the former, so that it does less work? or some other reason? does this comment mean you have not yet restored the microfading feature? (i have not yet read enough to answer that for myself) i think i like this change because as i recollect, the microfading had a dependency on the buffer size given to `audacityaudiocallback` which can depend on operating system or larency settings. that should not be: the duration of the fade in or out should be independent of that.",1,0.6539367437362671
1596345141,6359,saintmatthieu,2024-05-10T06:58:34Z,i don't know what earlier check is meant here. could it be that this comment is also outdated?,0,0.9308570027351379
1596347972,6359,saintmatthieu,2024-05-10T07:01:39Z,"a little bit higher, line 2712 on this commit, is the line `float *outputfloats = outputbuffer;`, which only seems to be an alias to the same thing, maybe a remnant of older code. would you remove it if you get the chance?",0,0.9919227361679077
1596367013,6359,saintmatthieu,2024-05-10T07:21:42Z,"there might be a mini bug here: if adding a real-time effect during playback increased latency such that `samplesavailable` becomes 0, what would be played for that frame would be the samples of the previous `mplayoutbuffers`, possibly leading to a repeated playout of the last few ms. solution might be to return `false`, such that the `audiothread` doesn't read the content of `mplayoutbuffers` ? it would be worse if a real-time effect had variable latency, but i don't think there's a use case for that.",0,0.9671934247016907
1596381971,6359,saintmatthieu,2024-05-10T07:33:33Z,that would apply to the next `if(samplesavailable == 0)` too.,0,0.9942049384117126
1596408085,6359,saintmatthieu,2024-05-10T08:00:00Z,"i have doubts about the correctness of the handling of latency for the master channel. the `discardable` value returned by a real-time effect is the number of leading samples that can be discarded. for the track effects, this is indeed what is done: [code block] for the master track, however, no leading samples are discarded, and then [code block] which means trailing samples are discarded instead. it was already that way in the previous commit but i missed it. if i'm correct, the consequence of this mistake would be that, if the master channel has an effect that adds delay, an artefact due to zeroed audio would be heard at the beginning of playback.",0,0.6891471743583679
1596413595,6359,saintmatthieu,2024-05-10T08:04:50Z,"i also don't see the necessity of `masteroffsets`. i don't think there can be left-overs from one `processplaybackslices` to the next, as it would mean this method would produce more audio samples than asked for, and i don't see it to be the case.",0,0.990620493888855
1596710560,6359,Paul-Licameli,2024-05-10T12:47:14Z,unused,0,0.96555495262146
1596727030,6359,Paul-Licameli,2024-05-10T13:03:33Z,comment refers to variables that no longer exist,0,0.9873907566070557
1596798315,6359,Paul-Licameli,2024-05-10T14:04:37Z,"delete ""of""",0,0.9842102527618408
1596800992,6359,Paul-Licameli,2024-05-10T14:06:58Z,i am reminded that the handling of latency is still not satisfactory. i had ideas for fixing it that i have not found time to implement.,-1,0.4990476667881012
1596816243,6359,dozzzzer,2024-05-10T14:19:51Z,"the problem does exist indeed. in the attached video, you can hear an audible crackle at the beginning of the playback with a non-zero latency effect (tdr limiter) added to the stack: [a link]",0,0.986244261264801
1596831605,6359,Paul-Licameli,2024-05-10T14:28:19Z,is that really todo? i think you have conserved the micro-fade logic on the consumer side in `filloutputbuffers`,0,0.993440568447113
1596831831,6359,saintmatthieu,2024-05-10T14:28:30Z,thanks .,0,0.5633893609046936
1596835118,6359,saintmatthieu,2024-05-10T14:31:15Z,"iiuc that one handles the changes in the volume slider, which are global. this is for the track-specific mute/unmute.",0,0.9927884936332703
1596845035,6359,Paul-Licameli,2024-05-10T14:39:34Z,"the comment refers to what now happens inside `callbackcheckcompletion`. amend the comment to make that more explicit. and it's now ""below"" not ""above"".",0,0.9947752952575684
1596868341,6359,Paul-Licameli,2024-05-10T14:59:50Z,doing latencies really right is a known bit of technical debt. i have had ideas. i didn't find time to elaborate and share them yet.,-1,0.5373624563217163
1598563569,6359,vsverchinsky,2024-05-13T14:21:50Z,"i though that mixer could be ""advanced"" without doing any actual work",0,0.984421968460083
1598576216,6359,vsverchinsky,2024-05-13T14:26:23Z,the reason is that we can't do master effects processing on low-latency thread and that processing should happen after all the tracks have been mixed into playback channels.,0,0.9880498051643372
1598578087,6359,vsverchinsky,2024-05-13T14:27:35Z,"micro-fading isn't completely restored, it doesn't happen when you move gain, pan sliders or press solo/mute buttons.",0,0.9595823884010315
1598588136,6359,vsverchinsky,2024-05-13T14:33:55Z,"i think the answer to your question is in `fillplaybuffers`. if for some reason `samplesavailable` will be zeroed, then there will be more processing passes until `getneeded() == 0`. otherwise if i `return false` as you suggest then extra buffer exchange step will be initiated for same frame, which i think is less preferrable. may be we should test how it works now with latency values that are much larger than our regular buffer sizes",0,0.9842926859855652
1600928970,6359,saintmatthieu,2024-05-15T04:36:48Z,"what are these new lines fixing ? it looks like we are now ensuring that no new memory is allocated in that function. this comes at the risk, though, that we provide less than `frames` samples, if for some reason the capacity of the buffer is insufficient. wouldn't that be worse ? i wonder if this change is motivated by the initial playback click that we hear in 's video above. i suspect this not to be due to buffer allocation, but simply because he is playing a sine wave without any sort of smoothing envelope, and it's then completely normal to hear this click.",0,0.9493700265884399
1601118035,6359,vsverchinsky,2024-05-15T07:39:04Z,"yes memory allocations are not better. the disadvantage of this code is that it's not capable to handle very large latencies (usually > 250ms). no, i did that in response to paul's comment above",0,0.978792130947113
1610160924,6359,vsverchinsky,2024-05-22T14:59:45Z,please avoid unnecessary formatting changes if you don't change the line itself - it complicates the search through commit history and review process,0,0.9811413288116455
1610170103,6359,vsverchinsky,2024-05-22T15:04:28Z,there is a `finally` block already that does cleanup job,0,0.9935573935508728
702501679,1614,Paul-Licameli,2021-09-06T00:38:56Z,only changing note track affordance text colors?,0,0.9946790933609009
702501884,1614,Paul-Licameli,2021-09-06T00:40:06Z,"add header comments as in other headers describing the purpose of the file, and use and comments for doxygen.",0,0.9954603314399719
702504278,1614,Paul-Licameli,2021-09-06T00:53:45Z,"i am uneasy with this entire commit. you have figured out tracklistevent, which is emitted by tracklist. why must wavetrack emit an event? where you need this event, can't you bind to the tracklist instead and use the existing event types?",-1,0.9786737561225891
702504439,1614,Paul-Licameli,2021-09-06T00:54:36Z,this is where the new event type is bound. why not bind to the tracklist?,0,0.9945269227027893
702504699,1614,Paul-Licameli,2021-09-06T00:56:10Z,this is the handler of the event. could instead mtextedithelper bind directly to the track list? would that solve any problems about lifetime?,0,0.9951635599136353
702507284,1614,Paul-Licameli,2021-09-06T01:09:58Z,"unbind() is also unnecessary when the event ""sink"" object in the bind() call also inherits wxevthandler. then when it is destroyed, the ""source"" wxevthandler is also notified to clean up its list of observers. (i'm not certain, but it may in fact be enough for the sink to inherit wxtrackable, a base class of wxevthandler.) can the text edit helper inherit wxevthandler and bind itself to the tracklist? then it can destroy itself in response to the event.",0,0.992382824420929
702511353,1614,Paul-Licameli,2021-09-06T01:29:44Z,"perhaps ""texteditpolicy"". this looks like the ""policy"" pattern, also called ""strategy,"" where an object supplies a set of callbacks to a reusable framework.",0,0.9888178110122681
702512587,1614,Paul-Licameli,2021-09-06T01:35:30Z,"this logic was duplicated from labeltrackview and labeltexthandle. but why duplicate, when we might really reuse? can it be given a better name like ""texteditingcell"" and could it first be split out and used in labeltrackview?",0,0.9928783774375916
702527347,1614,Paul-Licameli,2021-09-06T02:38:08Z,"i recommend: combine this header with textedithelper.h, because the classes cooperate closely. neither is useful without the other. then, define the destructor of texteditdelegate as non-inline. if a class has virtual functions, it is better that at least one of them is defined non-inline, and the destructor can be the one if all the others are pure virtuals. (actually pure virtual functions cal also be given definitions, but that's another story.) it is better because then it can be decided at compile time, in what single place, the virtual function table of this base class will be compiled. whereas otherwise, the compiler must duplicate the virtual function table definition, and the linker needs to remove all but one duplicate. so avoid the bit of extra work for the linker.",0,0.9488343000411987
703034109,1614,vsverchinsky,2021-09-06T18:17:10Z,in new commit history this commit contains also wave track colors changes,0,0.99366295337677
703034600,1614,vsverchinsky,2021-09-06T18:19:04Z,`waveclipaffordancecontrols` now inherits `wxevthandler` and this fixes issue with event processing and objects lifetime,0,0.9863724112510681
703035792,1614,vsverchinsky,2021-09-06T18:23:43Z,"no, it's not a policy. it could be a `texteditlistener` or replaced with wxevent dispatch",0,0.9938818216323853
703036621,1614,vsverchinsky,2021-09-06T18:27:24Z,it's not a cell because it does not define trackpanel separation as other cells do. there is another pr which addresses an issue with code duplication,0,0.9902313351631165
704844424,1614,Paul-Licameli,2021-09-08T23:31:33Z,"i see the purpose of this change and the commit that introduces it is to fix a ""slicing problem"" in assignuihandleptr, where an object of derived type may be assigned to an object of base type, losing information. yes? i don't know why i didn't see this earlier in review! i suggest this additional change (add it to the label refactoring branch maybe): in assignuihandleptr, in the else-branch, add [code block] you may also need [code block]",0,0.7497580647468567
704846185,1614,Paul-Licameli,2021-09-08T23:36:36Z,"this change is good, but incomplete! similar code with the same slicing error is still not corrected in notetrackaffordancecontrols.",0,0.5057322978973389
704850892,1614,Paul-Licameli,2021-09-08T23:49:57Z,can you state in comments any intended invariant relations among these values? is it meant to be invariant that `minitialcursorpos <= mcurrentcursorpos` ?,0,0.9950372576713562
704851346,1614,Paul-Licameli,2021-09-08T23:51:16Z,"should you comment before this function, [code block] or swap the values before the assignment to make the condition hold?",0,0.9953006505966187
704854663,1614,Paul-Licameli,2021-09-09T00:01:08Z,please use `override` not `virtual`.,0,0.9946605563163757
704863745,1614,Paul-Licameli,2021-09-09T00:28:52Z,should this be index <= 0?,0,0.9915568828582764
704868225,1614,Paul-Licameli,2021-09-09T00:42:27Z,"i don't know if it is important, but i think this if-block needs to move down, outside one more } , to correct the analogy with labeltexthandle::handletextclick: do it whether bounding box contains the position, or not.",0,0.9866752028465271
704870171,1614,Paul-Licameli,2021-09-09T00:49:02Z,"my preference is to put cleanup lines like the above three inside [code block] and put the declaration of cleanup higher, just after the first setclippingregion(). this is ad-hoc raii. `finally` generates a class that performs the lambda in its destructor, and binds an instance to `cleanup`. this makes it easier to be confident that a long function isn't making a mistake somewhere, with an early exit that forgets to restore the context. or, in case of exceptions.",0,0.9909928441047668
704872072,1614,Paul-Licameli,2021-09-09T00:54:03Z,is this condition correct in case of right-to-left layout?,0,0.9934201836585999
704872192,1614,Paul-Licameli,2021-09-09T00:54:29Z,ditto ?,0,0.9641594886779785
704872404,1614,Paul-Licameli,2021-09-09T00:55:09Z,i think moffset needs comments about what it really is. i'm not sure i understand it.,0,0.8840007185935974
704873937,1614,Paul-Licameli,2021-09-09T00:59:58Z,"are the above two lines right? isn't current >= initial always? is what you really want to do: get char positions for initial and current, as left and right, but then swap in case of rtl layout? because, swap is needed in that case and that case only? did you really try all of this out with arabic? putting breakpoints at every test of layout, and making sure all are hit?",0,0.9881299734115601
704878292,1614,Paul-Licameli,2021-09-09T01:13:57Z,"i see you made this command by analogy with settracknamecommand in commontrackcontrols.cpp, and like that command class, it isn't meant to be registered with commandmanager. it is commented there, that the same effect can be achieved with other commands available to macro programming. is that so for change of clip name? no. so i suggest: the existing setclipcommand class needs to be extended with another parameter for setting the name, by means of macro programming. i know that wasn't part of the specification of this project, but it is something that should be done for completeness: exposing all changes of properties we can to macro programmers too. this could be a separate pr. i opened issue #1644",0,0.9643439054489136
704880162,1614,Paul-Licameli,2021-09-09T01:19:50Z,is this your first experience writing some shuttlegui code?,0,0.9883162379264832
704881009,1614,Paul-Licameli,2021-09-09T01:22:32Z,"whenever you add xos or xxos, make sure jouni agrees with the exact words. there are a few others in this pr.",0,0.9940504431724548
704888853,1614,Paul-Licameli,2021-09-09T01:46:30Z,"this function, and the two following, may cause. return key, while the mouse is in a wave track, to edit a clip name. was that part of the design? i think the more correct way to do call-through: call through to the affordance, but then check event.getskipped(). if it is true, meaning the affordance did not take its first-chance to capture the key, then call through to the base class in case it wants to capture. take the bitwise or of the return from the two capturekey calls, as the return value of the function. it may not make a difference now, because nothing really happens in the base class methods, but don't assume that will remain so. make similar fixes in the next two functions.",0,0.9881792068481445
704891903,1614,Paul-Licameli,2021-09-09T01:55:27Z,"tab key navigation didn't work when i tried it, but the simple missing piece, is a change of wavetrackaffordancecontrols::capturekey so it does not skip the event for tab key.",0,0.9898219108581543
704893435,1614,Paul-Licameli,2021-09-09T01:59:45Z,"do we also want to implement leftward navigation among clips for shift + tab, as is done for labels?",0,0.9933364391326904
704909404,1614,Paul-Licameli,2021-09-09T02:47:48Z,make_shared ?,0,0.9945583343505859
704910475,1614,Paul-Licameli,2021-09-09T02:50:43Z,that's a strange line... i think it does nothing,-1,0.9264618158340454
704912047,1614,Paul-Licameli,2021-09-09T02:55:17Z,"""used to send""",0,0.9922695159912109
704913021,1614,Paul-Licameli,2021-09-09T02:58:08Z,override,0,0.9805362224578857
704913065,1614,Paul-Licameli,2021-09-09T02:58:15Z,override,0,0.9805362224578857
704916277,1614,Paul-Licameli,2021-09-09T03:07:42Z,"now i understand why textedithelper has a weak pointer to its delegate. if it were shared, we would have a cycle of shared pointers which is a bad thing. the helper is owned by its delegate and not the opposite. perhaps comments in those text edit classes should clarify this point of lifetime management?",0,0.9293566346168518
704918290,1614,Paul-Licameli,2021-09-09T03:13:39Z,"you can simplify. double click can or the return value with cancelled and then you don't need mdoubleclickflag. see the much repeated comment ""do not start a drag"" in the source tree for other examples.",0,0.9927918910980225
704920185,1614,Paul-Licameli,2021-09-09T03:20:03Z,"now that you bind to the track list, the function ontrackchanged will take its effect whenever any track changes it selected state. is that the intention, or should it check only for changes of the relevant wave track?",0,0.994779109954834
707258524,1614,vsverchinsky,2021-09-13T11:49:11Z,not neccessary that `minitialcursorpos <= mcurrentcursorpos` it depends on direction in which selection is moving: from left to right or right to left. variables have the same meaning as they do in labeltrackview,0,0.9913756251335144
707265720,1614,vsverchinsky,2021-09-13T11:59:33Z,"yes, it should, thanks!",1,0.9751213192939758
707280334,1614,vsverchinsky,2021-09-13T12:20:45Z,"agreed, thanks!",1,0.968579888343811
707298324,1614,vsverchinsky,2021-09-13T12:45:04Z,"yep, don't work as expected with rtl layout and ltr language",0,0.9725860357284546
707301008,1614,vsverchinsky,2021-09-13T12:48:37Z,will add a comment,0,0.9919449687004089
707304955,1614,vsverchinsky,2021-09-13T12:53:29Z,"not always, depends on direction of cursor movement",0,0.9805237054824829
707308108,1614,vsverchinsky,2021-09-13T12:57:22Z,sort of,0,0.9326028823852539
707573266,1614,vsverchinsky,2021-09-13T18:16:02Z,"yes, though editing will be invoked only if there is a ""selected"" clip on that track.",0,0.9931824803352356
707643942,1614,vsverchinsky,2021-09-13T20:06:03Z,"yes, it's intentional, thought was not specified by design document, so i made the behaviour similar to the behaviour in the label track, whenever it was possible (that was specified)",0,0.9910147786140442
707650674,1614,Paul-Licameli,2021-09-13T20:16:54Z,"but i thought mcurrentcursorpos and minitialcursorpos are logical positions in a string of characters, not x coordinates on a screen. if they are not that, what are they?",0,0.9842705130577087
707653147,1614,vsverchinsky,2021-09-13T20:20:55Z,"they do, but it's not neccessary that owner of the textedithelper and texteditdelegate are the same object, and in the latter case it's better to keep it in a separate file",0,0.9911881685256958
707653554,1614,vsverchinsky,2021-09-13T20:21:33Z,thanks! fixed,1,0.990587592124939
707665590,1614,vsverchinsky,2021-09-13T20:40:48Z,i'm not sure that undoing clipping region in the case of exception would be a safe operation,0,0.5606629252433777
707667225,1614,vsverchinsky,2021-09-13T20:43:24Z,"fixed, tabbing works for me on windows, but didn't test it on other platforms. also added a shift+tab, thanks",1,0.9698495268821716
707669540,1614,vsverchinsky,2021-09-13T20:47:19Z,thanks!,1,0.8631753921508789
707738557,1614,vsverchinsky,2021-09-13T22:06:47Z,"yes, they are a positions in a string. minitialcursorpos is not moving and initialized when interaction is started, then, when user moves cursor either with mouse (holding a left button), or with shift+arrow left/right mcurrentcursorpos is used to track the ""current"" cusror position",0,0.9936888217926025
708389265,1614,Paul-Licameli,2021-09-14T15:28:51Z,"i still like non-inline virtual destructors (really, virtual anything should never be inlined, because it will usually never be inlined).",0,0.9092509150505066
708389952,1614,Paul-Licameli,2021-09-14T15:29:31Z,this suggestion wasn't implemented yet,0,0.9878724813461304
708393961,1614,Paul-Licameli,2021-09-14T15:33:45Z,i think you meant to replace the line before this new line. not to add a new line. but the code is correct! just not simplified,1,0.5019751787185669
708400978,1614,Paul-Licameli,2021-09-14T15:41:16Z,"nice use of a template to capture the common logic of the forward and backward cases! instead of `comp comp` i would write `pred pred` because that argument is a unary predicate, not a binary comparator. but that's only variable names.",1,0.9901522994041443
708484066,1614,vsverchinsky,2021-09-14T17:26:00Z,fixed with wxdcclipper,0,0.994579553604126
709689352,1679,Paul-Licameli,2021-09-16T01:43:11Z,this is correct use of positiontotime and timetoposition. you understatnd that you don't just mutliply dx by some scaling factor. the assumption of uniform samples per pixel should not be made. future projects might change that.,0,0.9789342284202576
709689657,1679,Paul-Licameli,2021-09-16T01:44:15Z,the cancel procedure is good. the release is still empty. it will require pushing an undo history item.,0,0.638110876083374
709689995,1679,Paul-Licameli,2021-09-16T01:45:20Z,"std::weak_ptr instead of some subclass raises the danger of the slicing problem, which you correct in a later commit. but look at all those old bad examples before it that i wrote! these should be corrected too.",-1,0.8105167150497437
709690480,1679,Paul-Licameli,2021-09-16T01:46:49Z,"i observe that this second commit in the draft pr does not build. in the final pr, that should be corrected, and i would like this internals commit to be first in the sequence. or it might be a pr by itself.",0,0.9917873740196228
711424012,1679,Paul-Licameli,2021-09-18T02:04:01Z,the unusual case where a call to one of the *sequence* functions is needed not *play*. comment it.,0,0.9752010107040405
711424770,1679,Paul-Licameli,2021-09-18T02:10:29Z,"i would slightly prefer not removing the anonymous namespace over can, making symbol tables just a little smaller. this would require forward-declaring incomplete types in namespace { ... } in the .h file.",0,0.9858579635620117
711429022,1679,Paul-Licameli,2021-09-18T02:46:19Z,"this change is correct, but discuss with whether new information about the size of the hidden parts of the clip should also be passed to nyquist. understand what happens here: c++ composes a string that is passed to the lisp interpreter, and that sets up variables that are available to programming in lisp.",0,0.9948260188102722
711430317,1679,Paul-Licameli,2021-09-18T02:57:33Z,"as i review the necessary changes in effects, this occurs to me. what is expected if effects are applied to clips with hidden parts? if you do nothing else, then the hidden parts remain unchanged. perhaps that is expected behavior. or perhaps in the case of the reverse effect, it would be surprising behavior. im not sure whether you should do anything extra. this is one of the few places where there was a call to setoffset. other effects did not use it.",0,0.9481399059295654
711431051,1679,Paul-Licameli,2021-09-18T03:04:53Z,"as with nyquist, so perhaps too for macro programming: give more information about the size of the hidden parts of the wave for sophisticated users. only information: no interface for changing it.",0,0.9911676645278931
711431522,1679,Paul-Licameli,2021-09-18T03:09:12Z,notice this comment. the non-overlapping condition for clips can be violated with macro programming! not our responsibility to fix that yet i think.,0,0.9176270365715027
711431653,1679,Paul-Licameli,2021-09-18T03:10:06Z,another unusual setoffset call.,0,0.7152971029281616
711614236,1679,Paul-Licameli,2021-09-18T16:56:22Z,"i notice that this is a protected method. i notice also that wavetrack is a final class, so the distinction of protected and private is not useful. maybe the class should be simplified, only to have public and private methods.",0,0.9848203063011169
711615101,1679,Paul-Licameli,2021-09-18T17:02:56Z,"i see that wavetrack::getnumsamples becomes two public methods, each used in only one other place, and those other uses are correct. i like the renaming changes here and in waveclip -- *sample* versus *play* names -- and they force you to recompile many places and consider carefully which renaming is the correct one. i am more confident in your work when i see that you did this. should the name changes be permanent? i say, yes. much less has changed in the interface of wavetrack.h, than for waveclip.h. it is a little surprising -- so to review carefully i must also look at what else is in wavetrack.h that did not change, and be convinced that it is correct not to change them. i notice that wavetrack::getstarttime() and getendtime() did not change names. but as you know, that is because they are overrides of methods of track.h, which declares virtual getstarttime() and getendtime() but doesn't comment what they are supposed to mean. so, i understand this exception to renaming -- you don't want to make the name changes in the other overrides. still that means i must review all uses of getstarttime and getendtime to be sure.",1,0.8842188119888306
711616146,1679,Paul-Licameli,2021-09-18T17:12:16Z,"comments above this function, and above the next function, still mention the old method names `getstarttime, getendtime`. update the comments.",0,0.9945665597915649
711616567,1679,Paul-Licameli,2021-09-18T17:15:56Z,"i'm doing that review, and i notice many getstarttime and getendtime calls in effects, which i just assume correct -- that destructively applied affects will only apply to the un-hidden parts of tracks. as i said, that might be surprising in some cases and a debatable point of design, but i will interpret the design for now as not demanding it. i notice getoffset() and setoffset() are two other virtual functions in the base class track that were not renamed, so i must also review uses of those to be sure of completeness.",0,0.9738389849662781
711618037,1679,Paul-Licameli,2021-09-18T17:29:31Z,the comment preceding this function also needs update to mention new method names,0,0.9957055449485779
711628434,1679,Paul-Licameli,2021-09-18T19:06:18Z,"now i have done that review. i think that the legacy in class track needs a clean-up. it's not clear what the distinction of ""start time"" versus ""offset"" is supposed to mean, or what purpose the moffset member variable serves. i think there should be a clean-up project to eliminate the ""offset"" functions. this is not to be part of the present pull request. it is for one of us to write in the stabilization period and for the other one to review.",0,0.9565874338150024
711630192,1679,Paul-Licameli,2021-09-18T19:21:58Z,"please insert this new member function immediately before wavetrack::paste(). that may make the commit more easily reviewable because there will be more common lines, and less in the diff view.",0,0.9948528409004211
711631737,1679,Paul-Licameli,2021-09-18T19:36:48Z,"buried in all these changes is one very interesting thing here: the need for a more strict definition of correspondence of clips. a detail like this deserves comments, both in the code here, and also in the git commit comments. i'd like to encourage you to write more comments, of both kinds, about such changes of behavior.",0,0.501502513885498
711640153,1679,Paul-Licameli,2021-09-18T20:59:42Z,"the function `wavetrack::trim` has another interesting non-trivial change of behavior, like the test for correspondence, which is worthy of a comment. instead of deleting material, as before, now we hide the material in the smart clip but do not forget it. i looked for where this function is used. one place is in effectsoundtouch -- but it always applies to a newly generated temporary track. the other implements the trim editing command, in editmenus.cpp. there is a comment there, no longer appropriate, which should be changed: [code block]",0,0.9361497759819031
711661039,1679,Paul-Licameli,2021-09-19T00:41:00Z,a definite mistake here. waveclip::setoffset used to affect the envelope and the sequence. but waveclip::setplaystarttime now affects only the sequence.,-1,0.5748506784439087
711661446,1679,Paul-Licameli,2021-09-19T00:46:59Z,"if this function instead called through to waveclip::setsequencestarttime(), which does change the envelope offset, then the bug last mentioned would be fixed.",0,0.9922458529472351
711677507,1679,Paul-Licameli,2021-09-19T03:49:00Z,previously,0,0.9808183908462524
711677766,1679,Paul-Licameli,2021-09-19T03:51:25Z,"i thought there might be a bug with cut lines, but i read all again carefully and no longer think so. good job",1,0.9930126070976257
711680311,1679,Paul-Licameli,2021-09-19T04:20:20Z,some doubtful code you dont need now?,0,0.9057978987693787
712049731,1679,vsverchinsky,2021-09-20T10:34:06Z,thanks!,1,0.8631753921508789
713929581,1679,vsverchinsky,2021-09-22T13:14:57Z,"yes, but now i think it's not that important to precisely count only visible cutlines here, since it's used only as an estimation for cache preallocation size and assertion at the end. removing it",0,0.9852677583694458
713929828,1679,vsverchinsky,2021-09-22T13:15:13Z,thanks!,1,0.8631753921508789
714081482,1679,vsverchinsky,2021-09-22T15:49:46Z,updated both commit message and function comment,0,0.990395724773407
717483514,1679,Paul-Licameli,2021-09-28T11:33:03Z,should you change `samplecount(floor(gettrimleft() * getrate()))` to `timetosamples(gettrimleft() * getrate())` for correct rounding?,0,0.9942634701728821
717497362,1679,Paul-Licameli,2021-09-28T11:53:04Z,what does it mean if `mappendbufferlen` and `mtrimright` are not both zero? it could be the case of append-recording onto a clip that was shrunk at the right end. will the hidden part at the right be lost when the recording is complete?,0,0.9927898049354553
717498146,1679,Paul-Licameli,2021-09-28T11:54:03Z,"this is not taking the append buffer into account, as with `getplayendtime()` but neither did removed `getendsample()`",0,0.9947410821914673
717510254,1679,Paul-Licameli,2021-09-28T12:10:46Z,"also not accounting for buffer length, inconsistently with `getsequenceendtime()` but that was also so in removed `getendsample`",0,0.9931206107139587
717517530,1679,Paul-Licameli,2021-09-28T12:20:35Z,this copies the comment and the logic of `waveclip::withinclip()` but it looks strange. the fix for 2288 changed `<=` to `<`. but should it have changed `>` to `>=` instead?,0,0.8204510807991028
717520251,1679,Paul-Licameli,2021-09-28T12:24:13Z,and this copies `beforeclip()` and the comment said there must be consistency. but this looks like a very old off by one error.,0,0.992715060710907
717522113,1679,Paul-Licameli,2021-09-28T12:26:36Z,"and the fix for 2288 changed '>=' to '>' but here you do correct the coresponding function. maybe you reintroduce the bug 2288, which had its questionable fix.",0,0.9865824580192566
718976522,1679,Paul-Licameli,2021-09-30T00:39:06Z,"""constrained""",0,0.8779621720314026
718983023,1679,Paul-Licameli,2021-09-30T00:59:17Z,thank you for fixing my embarrassing slicing mistakes!,-1,0.9326496124267578
718988546,1679,Paul-Licameli,2021-09-30T01:17:34Z,thanks for that,1,0.8706192374229431
719056462,1679,Paul-Licameli,2021-09-30T04:52:53Z,remove unused function in comment,0,0.9943974018096924
719057123,1679,Paul-Licameli,2021-09-30T04:54:43Z,comment that these set the trimming to a given absolute time (if that is in bounds),0,0.9937738180160522
719057343,1679,Paul-Licameli,2021-09-30T04:55:24Z,comment that these four get and set the non-negative length of hidden material at each end,0,0.9933106899261475
719057769,1679,Paul-Licameli,2021-09-30T04:56:54Z,comment that offset is relative to playable start,0,0.9930731654167175
719276659,1679,Paul-Licameli,2021-09-30T10:34:00Z,"move this function, perhaps, so it is just after waveclip::clear, so the diff of the two versions is a bit smaller, more corresponding unchanged lines.",0,0.9829463958740234
719330841,1679,Paul-Licameli,2021-09-30T11:55:34Z,"there were three cases above: pasting exactly at the play start time; exactly at play end; or other. i think that in the first of these cases, the two lines above are incorrect. because clearsequence() has removed some intial segment of samples, you need to paste at sample 0. and i think you need to reassign msequenceoffset correctly in this case. am i mistaken?",0,0.9873232245445251
720180220,1679,Paul-Licameli,2021-10-01T11:50:41Z,a comment should clarify the offset is relative to play start,0,0.9935775399208069
720210256,1679,Paul-Licameli,2021-10-01T12:41:06Z,comment should carify that cut lines are not counted,0,0.9909945130348206
720545421,1679,vsverchinsky,2021-10-01T21:17:19Z,"yes, it should, thanks!",1,0.9751213192939758
721247902,1679,Paul-Licameli,2021-10-04T10:48:01Z,"i don't understand the four lines above. this function isn't doing what the name suggests -- just inserting silence -- but it may also discard the trimmed samples. maybe there is a reason for that, can you explain? should there be a different function for that purpose? but is it also a bug in that case, that the trim-left and trim-right values in the clip are not reset to 0?",0,0.8097444772720337
721250971,1679,Paul-Licameli,2021-10-04T10:52:49Z,"i think most paths to waveclip::insertsilence involve newly created empty tracks, so it doesn't matter, but an exception is that wavetrack::join calls waveclip::appendsilence which calls this. did you insert those lines only to handle this special case?",0,0.9892332553863525
721264560,1679,Paul-Licameli,2021-10-04T11:14:33Z,"i think trimleft was intended, not settrimleft: else, clearing the middle of a clip, which already had some left trimming, will give wrong results for the right hand new clip. am i correct?",0,0.9876863956451416
721273839,1679,Paul-Licameli,2021-10-04T11:29:05Z,"i was wondering about these unexplained deleted lines... but i think we can prove that they never happened because of the lines in wavetrack::handleclear(): [code block] so, okay",0,0.9471663236618042
721308689,1679,Paul-Licameli,2021-10-04T12:20:03Z,should this be getplaystartsample()?,0,0.9949988126754761
722095867,1679,vsverchinsky,2021-10-05T10:16:13Z,"there is also another comment saying: ` one and only one of the following is true for a given t (unless the clip has zero length -- then beforeclip() and afterclip() can both be true). within() is true if the time is substantially within the clip`. i think this is more about the definition of 'within'. changing the implementation will require a more careful review of the usage of each function. and i think that changing '<=' to '<' was anyway correct, because 'getplayendsample()' is the index of the sample following the last one, so 'within' includes the last sample, but does not include the first sample.",0,0.9880069494247437
722101163,1679,vsverchinsky,2021-10-05T10:23:11Z,thanks!,1,0.8631753921508789
722164908,1679,vsverchinsky,2021-10-05T11:55:56Z,"if i understand you correctly, then i think that the answer to the first question is: `samplecount s0 = timetosequencesamples(t0);` `s0` should be 0 for given `t0` after `clearsequence(getsequencestarttime(), t0);` but i doubt that pasting in front of the clip is possible at all, taking into account implementation of the `withinplayregion`",0,0.9915236234664917
722196916,1679,vsverchinsky,2021-10-05T12:37:56Z,"the reason was that i considered `insersilence(t0, length, envelope)` to be equivalent to `paste(t0, silenceclip)`. and `paste` discards the hidden part of the destination clip in case if the clip is prepended or appended. and i thought that this was the safest approach in these cases, but maybe you are right and hidden data should not be discarded (`paste` should not discard too) and `wavetrack::join` should handle this case instead.",0,0.9908878803253174
722209467,1679,vsverchinsky,2021-10-05T12:52:54Z,"yes, thanks!",1,0.9540684819221497
722214341,1679,vsverchinsky,2021-10-05T12:58:29Z,"hm, yes, and this makes possible the case with prepending data in `paste`. thanks!",1,0.9794910550117493
1437585004,5818,Paul-Licameli,2023-12-28T11:44:31Z,"i would make a type distinction between points and vectors. then type checking will not allow meaningless operations. two vectors can be added or subtracted to make a vector. a vector can be scaled by a number. addition of a point to a point or scaling of a point does not make sense. subtracting a point from a point does make sense, but the result is not a point, but a vector.",0,0.9774203896522522
1437585747,5818,Paul-Licameli,2023-12-28T11:45:54Z,why are the two operations above useful? they are not usual operations you want with vectors.,0,0.9850656390190125
1437585932,5818,Paul-Licameli,2023-12-28T11:46:22Z,comment [code block],0,0.9945206642150879
1437586828,5818,crsib,2023-12-28T11:48:03Z,"so essentially, the points are meaningless; vectors can be used all over the place :-)",0,0.8429544568061829
1437586844,5818,Paul-Licameli,2023-12-28T11:48:06Z,"again, two questionable, non-member operations",0,0.5121891498565674
1437587379,5818,crsib,2023-12-28T11:49:11Z,welcome to the world of graphics :-) probably this operation is not used though,1,0.9917436242103577
1437587603,5818,crsib,2023-12-28T11:49:41Z,this depends on scaletype,0,0.9893360137939453
1437587715,5818,Paul-Licameli,2023-12-28T11:49:53Z,that's wrong. distance between points is norm of the difference.,0,0.8613603711128235
1437588094,5818,Paul-Licameli,2023-12-28T11:50:35Z,norm is a function of a vector.,0,0.9815735220909119
1437588204,5818,crsib,2023-12-28T11:50:49Z,this one is an unfortunate mistake,-1,0.9944032430648804
1437589149,5818,Paul-Licameli,2023-12-28T11:52:55Z,"i would put point, rect, and size in lib-screen-geometry which can be just about the geometry with no mention of color. that's a leaf library not even using lib-utility. yes, lib-screen-geometry still has extraneous constants about the particular audacity 3 layout, as we discussed before. let me figure out how to clean that up.",0,0.9859819412231445
1437590575,5818,Paul-Licameli,2023-12-28T11:55:36Z,`lowest` or `min`?,0,0.988373875617981
1437592092,5818,Paul-Licameli,2023-12-28T11:58:41Z,"so the convention is that x coordinates increase rightwards, y coordinates downwards. it's the usual graphics convention, but worth explicit comment near the top of the class definition.",0,0.9947633743286133
1437592435,5818,crsib,2023-12-28T11:59:21Z,"the ""problem"" with this specific pr is that it is two years old and predates many of the libraries. i haven't re-reviewed much myself, but most, if not all, of the lib-graphics are likely not strictly needed for the purposes of the pull request. i am not sure that we want it for 3.5 or for audacity 3 at all; this was never discussed . please note that the pr is not even on the board.",0,0.7830193042755127
1437592674,5818,Paul-Licameli,2023-12-28T11:59:54Z,are the bottom and right coordinates included or excluded?,0,0.994355320930481
1437592875,5818,Paul-Licameli,2023-12-28T12:00:22Z,"a box could be valid but empty, if bottom and right are excluded.",0,0.9902858138084412
1437593156,5818,Paul-Licameli,2023-12-28T12:00:59Z,"inclusive, or exclusive of p2?",0,0.9929285645484924
1437593496,5818,Paul-Licameli,2023-12-28T12:01:45Z,bottomright describes a point excluded from the given rectangle.,0,0.9901747703552246
1437597170,5818,Paul-Licameli,2023-12-28T12:08:27Z,"there are only numbers in this class, so i think you don't need moves",0,0.9888012409210205
1437597532,5818,Paul-Licameli,2023-12-28T12:09:09Z,meant to include the point always?,0,0.9931064248085022
1437597726,5818,Paul-Licameli,2023-12-28T12:09:30Z,"i might name it with a noun, `expansion`",0,0.9905923008918762
1437598272,5818,Paul-Licameli,2023-12-28T12:10:33Z,there is an assumption that the rectangle is valid -- not negative area,0,0.9934820532798767
1437599089,5818,crsib,2023-12-28T12:12:16Z,i have a strong opinion that function and methods must be verbs. i will push hard towards it.,0,0.8182086944580078
1437600073,5818,Paul-Licameli,2023-12-28T12:14:16Z,i think `>=` and `<=` are correct. `p12` and `p22` are excluded points of the rectangles.,0,0.98456209897995
1437601001,5818,Paul-Licameli,2023-12-28T12:16:14Z,"this calculation is correct, but making the change above may return a different rectangle when the resulting area is zero.",0,0.9926316738128662
1437602213,5818,Paul-Licameli,2023-12-28T12:18:23Z,"also if you use {} for zero-area rectangles, canonicalizing origin to zero -- then should this do nothing for such rectangles? or is that the caller's problem to check?",0,0.9941678047180176
1437602342,5818,Paul-Licameli,2023-12-28T12:18:35Z,or `expansion`,0,0.9943451881408691
1437602774,5818,Paul-Licameli,2023-12-28T12:19:10Z,ditto,0,0.9754701256752014
1437603291,5818,Paul-Licameli,2023-12-28T12:20:06Z,"ah, here it is: bottom and right are indeed meant to be included. that is not like top + height or bottom + width of a rectangle.",0,0.9871926307678223
1437604848,5818,Paul-Licameli,2023-12-28T12:23:06Z,wrongly returns false when the true bottom or right edge of the rectangle coincides with the included boundary. fix with `- 1` twice,0,0.9352598190307617
1437608200,5818,Paul-Licameli,2023-12-28T12:28:57Z,"it is possible that a box contains both r1 and r2, but does not contain `intersect(r1, r2)` if they are disjoint, because you canonicalize the empty rectangle to all zeroes. that seems weird, not corresponding to set-theoretic identities. maybe the function should always return true for empty rectangles, regardless where the top left corner is.",-1,0.9594280123710632
1437609924,5818,Paul-Licameli,2023-12-28T12:32:18Z,i think `value >= datatype{}` would optimize away anyway for unsigned types,0,0.9881425499916077
1437610821,5818,Paul-Licameli,2023-12-28T12:34:01Z,i would call it `axisalignedboundingbox`,0,0.9933075904846191
1568640166,5818,vsverchinsky,2024-04-17T10:45:18Z,[code block] is that expected?,0,0.9956104159355164
1568693520,5818,Paul-Licameli,2024-04-17T11:31:07Z,i dont like adding to memoryx.h. these might be in a new small header in lib math,-1,0.9373731017112732
1568700578,5818,Paul-Licameli,2024-04-17T11:37:17Z,"i just merged a pr commit-experimental-branches and proposed another, maintain-experimental-branches. i want to eliminate experimental.cmake. see the second pr. if you are not certain to commit to using the experiment, instead define a bool constant in namespace experimental. use if constexpr not ifdef to control new code. that makes the compiler still check that it can build, when it does not build.",0,0.9837876558303833
1568812983,5818,vsverchinsky,2024-04-17T13:04:53Z,shouldn't it be `it->key.firstsample + cacheelementwidth < left`?,0,0.9940892457962036
1568849143,5818,vsverchinsky,2024-04-17T13:29:27Z,is that range typically short? will binary search benifit here?,0,0.9920507073402405
1568880785,5818,vsverchinsky,2024-04-17T13:49:33Z,isn't it always the only option here?,0,0.9808336496353149
1569067022,5818,crsib,2024-04-17T15:42:33Z,"if this pr passes qa, i think the proper solution would be to remove the old code altogether.",0,0.9880715608596802
1569079865,5818,crsib,2024-04-17T15:51:45Z,an excellent point! let me just kill this method lol,1,0.9946823716163635
1569105282,5818,crsib,2024-04-17T16:10:25Z,sure,0,0.9422702193260193
1569141830,5818,crsib,2024-04-17T16:36:21Z,"i have never seen this function as a hot spot. generally, with the current implementation, the cache can hold up to `width * 4 / 256`, which limits the cache size to under 64 items on the 4k display. i think the difference between linear and logarithmic time is negligible in this case.",0,0.9684000015258789
709077541,1623,Paul-Licameli,2021-09-15T11:04:28Z,"this change of cmakelists.txt should be in the previous commit ""use lib-ffmpeg-support""",0,0.9955403208732605
709078421,1623,Paul-Licameli,2021-09-15T11:05:53Z,"should that be `libavformat*.so.*` ? previous code had two *. but maybe not, i see the old getlibavformatname did not have a version number there.",0,0.9891274571418762
709083170,1623,Paul-Licameli,2021-09-15T11:13:28Z,these string literals for file globs are repeated in this file. better to remove repetition.,0,0.9868687987327576
712828024,1623,crsib,2021-09-21T08:42:12Z,"i strongly disagree with this change. ffmpeg behavior may differ if `den=0`. for example, it means that the decoder is responsible for setting up time bases based on stream content. but i agree that it is probably better to initialize the fields explicitly, regardless that this is a dto for the c structure,",-1,0.8153067231178284
712830453,1623,crsib,2021-09-21T08:45:26Z,"i think i would just explicitly delete the move constructor/assignment here, as well as in most of the other places",0,0.9876882433891296
712831354,1623,crsib,2021-09-21T08:46:31Z,"it generally makes no sense as this is an abstract class and is leftover from the moment, when i was ""generating"" wrappers",0,0.9160153269767761
712836389,1623,crsib,2021-09-21T08:52:53Z,"this was causing me issues on windows, but looks like that was a different bug! thank you for noticing!",1,0.9926134347915649
712837544,1623,crsib,2021-09-21T08:54:23Z,"good catch, thank you!",1,0.9949259757995605
712923170,1623,Paul-Licameli,2021-09-21T10:52:09Z,well defined values should be there i think if this struct is ever default constructed. you decide which values.,0,0.990196168422699
712993001,1623,Paul-Licameli,2021-09-21T12:33:46Z,"okay, it looked to me as if some resource reclamation done in the previous code was lost in this rewrite. but it should be asked, does the documentation you cite apply to all versions of ffmpeg that we will support, or only to the latest? if only the latest, then there may be some work to do to get it right for both. maybe then one .inl file won't be enough to compile the correct overrides for avcodeccontextwrapperimpl",0,0.9821027517318726
712997586,1623,crsib,2021-09-21T12:39:19Z,i took the best of both worlds in the end :-) if `avcodec_free_context` is unavailable - i close the codec. the corresponding code will be pushed soon,1,0.9939302206039429
713737842,1623,crsib,2021-09-22T08:58:52Z,i will move it down to the case where av_free is used. there is no need for this call when av_packet_free is used for sure,0,0.994419276714325
713743668,1623,crsib,2021-09-22T09:05:56Z,ooopsie indeed :( thank you!,-1,0.9956372380256653
713744705,1623,crsib,2021-09-22T09:07:14Z,"not really related to this pr, but let's pick it anyway",0,0.9395855069160461
713747171,1623,crsib,2021-09-22T09:10:13Z,"well, it would be destroyed last anyway, as the member is first. but const - that is what i like a lot :)",1,0.9902268648147583
713747795,1623,crsib,2021-09-22T09:10:59Z,"not in scope of pr, but good.",1,0.7790811061859131
713767124,1623,crsib,2021-09-22T09:35:12Z,"now that i've started thinking of it - both variants are incorrect. right-shift is ub in c++ :( yours is more correct, though. i will rewrite it using a similar approach to our regular sample format conversions, without dithering (this can be fixed later!)",-1,0.9956511855125427
713767675,1623,crsib,2021-09-22T09:35:55Z,"i think it should be (value - 0x80) as well, i'll fix it that way",0,0.9909756779670715
713793971,1623,crsib,2021-09-22T10:10:03Z,"this looks like a more correct implementation. however, ffmpeg itself doesn't bother about flushing at all. we did it only once (and i was trying to keep as much of the original behavior as possible). i think codecs with av_codec_cap_delay are not common at all and the best implementation should check for it. very quick search and i found only ape decoder to set this flag, but i think we do not support ape.",0,0.9519284963607788
713794680,1623,crsib,2021-09-22T10:11:04Z,"yes, but new api is not available in 2.2.2 and if we end up with ffmpeg version without avcodec_decode_audio4 - it can be implemented using new api",0,0.9947913885116577
713795549,1623,crsib,2021-09-22T10:12:23Z,"a fix to offsetpacket was required after this change. i'm not sure if this code is really safe, though",0,0.9365214705467224
714253785,1623,Paul-Licameli,2021-09-22T19:39:51Z,"[a link] strictly speaking, right shift of signed and negative values has implementation defined behavior, which is not the much worse category of ub.",0,0.9672594666481018
714254435,1623,Paul-Licameli,2021-09-22T19:40:52Z,it was late night when i wrote these code changes. something needed doing here but i didnt get it all right.,-1,0.5210726857185364
714255232,1623,Paul-Licameli,2021-09-22T19:42:03Z,"but note the important thing that the handle should have been constructed only after the possible reloading of libraries, right?",0,0.9918999671936035
714256194,1623,crsib,2021-09-22T19:43:35Z,"yeah, same for me when i was writing the original code :-) thank you a lot for pointing it out, this was a really stupid error, not exposed in my testing",1,0.9903602600097656
714415337,1623,Paul-Licameli,2021-09-23T01:26:54Z,"setting of codec_id, codec_type, and codec_tag did not survive the rewrite. did you decide they were unimportant steps or is this an omission?",0,0.9905213117599487
714418177,1623,Paul-Licameli,2021-09-23T01:37:37Z,"here too, setting of codec_tag was commented out. omission or is it unnecessary?",0,0.9939739108085632
714420140,1623,Paul-Licameli,2021-09-23T01:45:00Z,again assignment to codec_id is lost. instead we construct codec. sure of this? does codec get reassigned before it is ever used?,0,0.9911032915115356
714425561,1623,Paul-Licameli,2021-09-23T02:04:27Z,should the local codecid be reassigned here instead?,0,0.9935290217399597
714425921,1623,Paul-Licameli,2021-09-23T02:05:59Z,"since codec_id in the structure was not reassigned, should this be the local codecid instead?",0,0.9926233291625977
714426262,1623,Paul-Licameli,2021-09-23T02:07:16Z,(or translate the audacity_ value to library value?),0,0.9950591325759888
714427779,1623,Paul-Licameli,2021-09-23T02:13:07Z,av_error_max_string_size was 64 actually. shrug.,0,0.8648192882537842
714428167,1623,Paul-Licameli,2021-09-23T02:14:35Z,maybe use local codecid here too,0,0.990888237953186
714430795,1623,Paul-Licameli,2021-09-23T02:24:42Z,"why is the error code negated? averror was a no-op macro, it didn't negate. i wondered if this return value is passed to ffmpeg because this is a callback function? but further examination tells me no.",0,0.9785845875740051
714438578,1623,Paul-Licameli,2021-09-23T02:53:55Z,"you deleted all the resets. the lifetime of side structures therefore continues until the end of the lifetime of the exportffmpeg object. did you check that this lifetime isn't longer than when this function is called? are you sure the exportffmpeg object isn't reused and might expect a clean state when it is? i tried to determine that from the code, and it's not trivial to prove it. so maybe leave the harmless release() lines.",0,0.9916369318962097
714643103,1623,crsib,2021-09-23T09:55:44Z,"hmm, codec_tag might be important, as it may choose a different codec. i will bring it back. the other two are set by avcodec_open2. i will double check",0,0.9630705118179321
714646233,1623,crsib,2021-09-23T10:00:08Z,i don't really see why logger should live shorted than ffmpeg. if it does - we will be losing potentially useful information from the log.,0,0.8624100089073181
714650097,1623,crsib,2021-09-23T10:05:41Z,"this is a bug in the python generator (well, not a bug, it is ignorant about some libc constants). i will fix it in ffmpegtypes.h",0,0.9534249305725098
714664926,1623,crsib,2021-09-23T10:28:58Z,double checked - we retrieve the default tag for the codec and output format. if the tag is not set - ffmpeg will call av_codec_get_tag internally for encoders where it is relevant,0,0.9949045181274414
714668046,1623,crsib,2021-09-23T10:33:38Z,this one i will return though!,0,0.950208306312561
714688622,1623,crsib,2021-09-23T11:05:59Z,and it helped to find and fix a different bug!,1,0.9456597566604614
714688846,1623,crsib,2021-09-23T11:06:22Z,codec_id should not be assigned,0,0.9927049279212952
714689595,1623,crsib,2021-09-23T11:07:32Z,we can for sure,0,0.9766319394111633
715213224,1623,Paul-Licameli,2021-09-23T23:07:20Z,sorry but... you should remove my comment now! you fixed the use of tags.,-1,0.994640588760376
715215203,1623,Paul-Licameli,2021-09-23T23:12:28Z,these two new lines have no side effect and just repeat the getchannels call. did you intend something else?,0,0.9942876696586609
715215893,1623,Paul-Licameli,2021-09-23T23:14:21Z,i see you are correcting possibly wrong assumptions about endian-ness in the old code.,0,0.984548807144165
715223485,1623,Paul-Licameli,2021-09-23T23:35:28Z,"i notice this function, too, is ""deprecated"" [a link]",0,0.9865127801895142
715226238,1623,Paul-Licameli,2021-09-23T23:42:52Z,suggest one more comment documenting the assuptions made elsewhere: [code block],0,0.9953286647796631
715231489,1623,Paul-Licameli,2021-09-23T23:58:59Z,one more doubt! is this one more place where you should use the local variable `codecid` and not the id stored in the context object?,-1,0.8217703700065613
715442474,1623,crsib,2021-09-24T09:01:46Z,"missed it, sorry!",-1,0.9961034059524536
715443040,1623,crsib,2021-09-24T09:02:35Z,"debugging leftovers, fixed. conditional breakpoints are too slow for practical use :(",-1,0.9953782558441162
715444608,1623,crsib,2021-09-24T09:04:50Z,"the original code was copying random memory most of the time (as the tag was an empty string by default, so 0 and 3 random bytes were copied). so endian-ness wasn't the worst problem anyway :)",1,0.9331901669502258
715445991,1623,crsib,2021-09-24T09:07:00Z,"yes, but send/receive family is not supported in 2.2.2. when encode_audio/decode_audio will be removed - we will have to add 2 implementations.",0,0.9944866299629211
646424848,952,Paul-Licameli,2021-06-07T09:33:39Z,interactive rebase might eliminate this commit as a fixup on a previous one,0,0.9918033480644226
646425373,952,Paul-Licameli,2021-06-07T09:34:22Z,"raw string literals are good. a concatenation of raw string literals, with comments explaining this big regex, would be even more helpful to a reader.",1,0.9812545776367188
646428043,952,Paul-Licameli,2021-06-07T09:38:07Z,i make no comments on this commit,0,0.988081693649292
646432897,952,Paul-Licameli,2021-06-07T09:44:33Z,"suggest consistency of wording with the option before it: ""build support for sending errors to sentry""",0,0.9945841431617737
646446647,952,Paul-Licameli,2021-06-07T10:02:54Z,"i'm not requiring a fix for this now: this lonely header file will have to move to a library at some point, to enable the refactoring, so that everything dealing with the sqlite db can be separated from audacity. lib-sentry-reporting would be the obvious place for it, and then `${_opt}has_sentry_reporting` would need testing in lib-sentry-reporting/cmakelists.txt, and the library would build differently so that add_exception_context would be a no-op. (it might even be a proper, inline function instead of a macro.)",0,0.9671259522438049
646453468,952,Paul-Licameli,2021-06-07T10:12:52Z,"i'm trying to build the new code, without success yet i tried `cmake -gxcode -daudacity_has_sentry_reporting=yes -daudacity_has_networking=yes -dsentry_dsn_key=yes -dsentry_host=yes _dsentry_project=yes ..`",0,0.9696273803710938
646456045,952,Paul-Licameli,2021-06-07T10:16:45Z,"the comment above are organized by doxygen into one detailed comment on the class, with no brief comment i usually write ` //! a brief description ` ` /*! and longer comments */ `",0,0.9905267953872681
646457833,952,Paul-Licameli,2021-06-07T10:19:35Z,"perhaps better to call it moveparameters, the object isn't consuming something",0,0.9808146953582764
646465974,952,Paul-Licameli,2021-06-07T10:31:51Z,should the constructor be private? is it enough to have one global or could there be a need for thread_local ?,0,0.994300365447998
646469209,952,Paul-Licameli,2021-06-07T10:36:47Z,"do you mean ""runtime_error"" i don't see the *'s in the code",0,0.9921364784240723
646471293,952,Paul-Licameli,2021-06-07T10:40:06Z,"spelling (twice) you are explaining why this destructor must be non-inline, and i think it's not just gcc that would require this",0,0.9821764230728149
646475341,952,Paul-Licameli,2021-06-07T10:46:32Z,is this used anywhere?,0,0.9940593242645264
646476025,952,Paul-Licameli,2021-06-07T10:47:36Z,can you explain the parameters? i think they are an http code and a response,0,0.9941776990890503
646478590,952,Paul-Licameli,2021-06-07T10:51:25Z,should you pass close and log to showerrorreportdialog?,0,0.9928075075149536
646481023,952,Paul-Licameli,2021-06-07T10:55:08Z,where a completionhandler is given,0,0.9947181344032288
646481237,952,Paul-Licameli,2021-06-07T10:55:18Z,the only place i think,0,0.954529881477356
646482478,952,Paul-Licameli,2021-06-07T10:57:18Z,"you added a function to this file, but i had deleted this file in a branch i rewrite my branch so i don't delete the file, but i restrict inclusion of it to just one place. this needs to be hidden behind the basicui facade at some point, so lib-exceptions and others can avoid dependency on wxcore.",0,0.9933086633682251
646483041,952,Paul-Licameli,2021-06-07T10:58:02Z,see other remark about doxygen,0,0.9913102388381958
646486632,952,Paul-Licameli,2021-06-07T11:03:54Z,"this will cause the exception dialog whenever there is any audacityexception. i think we may not want it for every exception, and might need to construct exception objects with an option not to use this dialog. for instance exceptions in onpaste in editmenus.cpp. you can get them if you select two wave tracks, copy, then select a wave and a label track, and try to paste. nothing goes wrong with external devices. rather the exception provides a way to write the complicated paste operation and allow backing out of some deeply nested place when the operation can't complete just for logical reasons that are discovered late. it relies on a catch handler in audacityapp::onexceptioninmainloop and the undo manager to restore document state.",0,0.9679481983184814
646487520,952,Paul-Licameli,2021-06-07T11:05:18Z,other examples of simplemessageboxexception in wavetrack.cpp.,0,0.9921200275421143
646488224,952,Paul-Licameli,2021-06-07T11:06:30Z,this might fire every time somebody simply has a loose cable connection... would the collected data be valuable?,0,0.954617440700531
646489151,952,Paul-Licameli,2021-06-07T11:08:01Z,so i see many straightforward substitutions of one function for another. a question is whether this is substitution is complete enough.,0,0.9884254932403564
646489910,952,Paul-Licameli,2021-06-07T11:09:19Z,"this whole commit is also straightforward, but not obviously complete from reading diffs alone.",0,0.9912223815917969
646496841,952,Paul-Licameli,2021-06-07T11:18:51Z,"i suggest: anonymizedstring is a new class that wraps a const std::string. it calls the function in its constructor. it has operator const std::string& . it has a method called `move()` that returns std::string&& . so objects of that type guarantee anonymization at construction, and are immutable except to move out of them again. then message::create and all these other functions are changed to take anonymizedstring as argument. why would i do this? two reasons. one, i genrally don't like ""naked"" wxstring or other string classes overused in function signatures. i would rather always have strings in different wrapper classes when they serve different purposes, and the non-interconversion of those wrapper types eliminates programming errors. second reason, it makes it more obvious to anyone reviewing classes message and exception, just from the header files, that they deal in anonymized data: it's not implementation detail inside those functions, that anonymization happens. rather the reviewer is directed to the anonymizedstring class and can see it must happen before you enter these functions.",0,0.9648614525794983
646497440,952,Paul-Licameli,2021-06-07T11:19:50Z,did you omit part this comment?,0,0.9918143153190613
646498449,952,Paul-Licameli,2021-06-07T11:21:30Z,spelling,0,0.9833834767341614
646649323,952,crsib,2021-06-07T14:37:30Z,"in the next commit, i will add `audacity_header_only_library` . it does not set any graph nodes yet.",0,0.9956082701683044
646653046,952,crsib,2021-06-07T14:41:39Z,"it is internationally not thread_local, with the synchronized state.",0,0.989832878112793
646653884,952,crsib,2021-06-07T14:42:32Z,i really thought that doxygen supports markdown.,0,0.9447962641716003
646669461,952,crsib,2021-06-07T14:59:20Z,"for clang and cl it is sufficient to write `report::~report() = default;` however, i can't find which behavior is correct in c++ standard. i will remove the comment",0,0.9938446283340454
646683568,952,crsib,2021-06-07T15:11:31Z,"i will remove `handled`, adddata still seems useful to me",0,0.9588809609413147
646684647,952,crsib,2021-06-07T15:12:48Z,"`close` defines the behavior of the help button. for sentry dialog - there is no default option, so close is always assumed to be `false`",0,0.9914608001708984
646687312,952,crsib,2021-06-07T15:15:13Z,there is only one way to find out :-),0,0.9704537391662598
646688338,952,crsib,2021-06-07T15:15:54Z,i've grepped showerrordialog and replaced all the places i felt made sense.,0,0.9887233972549438
646689590,952,crsib,2021-06-07T15:16:44Z,"and i no longer remember, what i've planned to write anyway. i will clean it up",0,0.9175721406936646
646691147,952,Paul-Licameli,2021-06-07T15:17:50Z,"of course i see the synchronization, so it's not thread_local, but i'm wondering whether it might need to be. maybe (very very improbably) there are exceptions on two threads at once and you don't want to combine their data into one report.",0,0.9030686020851135
646692014,952,Paul-Licameli,2021-06-07T15:18:22Z,"you are right, it appears as italics in the html pages.",0,0.9898698925971985
646693284,952,crsib,2021-06-07T15:19:15Z,"well, they are just strings here. but i like your second point",0,0.7982244491577148
646698120,952,Paul-Licameli,2021-06-07T15:23:41Z,and the log argument is meant to show the user more details. also not relevant?,0,0.9947275519371033
646700941,952,crsib,2021-06-07T15:27:02Z,we always show the details always with the report. but i guess if `log` is not empty - it makes sense to include it with the report itself. i will add it,0,0.9901402592658997
646748818,952,Paul-Licameli,2021-06-07T16:23:06Z,"a string is not just a string if you wrap it in a well designed class, with a constructor that establishes an important invariant property (like some kind of well-formedness), and methods that preserve this invariant (such as by making the contents immutable or only available to move out). a function taking that wrapped class is saying in its contract, not its implementation, that it takes as a precondition the prior satisfaction of this invariant. successful construction of an object of the class amounts to a proof of the precondition. maybe i am only restating my second point here, but i find it very useful to think in such terms.",0,0.7930965423583984
646750382,952,Paul-Licameli,2021-06-07T16:25:19Z,"i use `` `` and `` in my doxygen comments sometimes. programming by contract, even if only informally stated in comments, is useful discipline.",0,0.75590980052948
646955792,952,Paul-Licameli,2021-06-07T21:34:05Z,where is target defined? the function argument is name,0,0.9947552680969238
646965216,952,Paul-Licameli,2021-06-07T21:51:18Z,*imitate,0,0.9705926179885864
646966461,952,Paul-Licameli,2021-06-07T21:53:49Z,"breaking with the camelcase naming convention is acceptable for string-like and container-like classes, following c++ standard library conventions instead. so perhaps also add empty(), clear(), swap() ... as they prove needful.",0,0.9938071370124817
646967580,952,Paul-Licameli,2021-06-07T21:55:48Z,"bravo! you exceeded my expectations. i wasn't insisting on the suggested configuration-time switch for approval of the pr, but now here it is.",1,0.9942104816436768
646969421,952,Paul-Licameli,2021-06-07T21:59:37Z,"a class comment please, explaining that initialization strips paths, and then nothing changes the contents except assignments and moves from the same class.",0,0.9917412996292114
646969821,952,Paul-Licameli,2021-06-07T22:00:24Z,"nonexplicit constructors, which i think are good for the purpose.",0,0.8479627370834351
646971872,952,Paul-Licameli,2021-06-07T22:04:46Z,maybe move parametervalue,0,0.9884451627731323
646977476,952,Paul-Licameli,2021-06-07T22:17:26Z,that comment is right only if the argument is `exceptiontype::internal` ?,0,0.9937219023704529
646977704,952,Paul-Licameli,2021-06-07T22:17:56Z,ditto,0,0.9754701256752014
646978089,952,Paul-Licameli,2021-06-07T22:18:57Z,i hadn't thought to make this distinction. good!,1,0.9949418902397156
646978919,952,Paul-Licameli,2021-06-07T22:21:02Z,but now i wonder if we always want this to be internal too. what if you are just trying to write to a folder that is write-protected or a drive that is out of space? you decide. write a comment if you don't change it.,0,0.9632296562194824
646981548,952,Paul-Licameli,2021-06-07T22:26:59Z,and that's all of our message box throws reexamined! very good.,1,0.9920768737792969
646983370,952,Paul-Licameli,2021-06-07T22:30:46Z,"now i see target was defined in the context of the sole use of this new cmake function, but i think you should not rely on that, use name",0,0.9902600646018982
647320145,952,crsib,2021-06-08T10:38:43Z,"we had peculiar sqlite errors in this case in 3.0. let's leave it for now and see, how it turns out.",0,0.9827914834022522
647464350,952,Paul-Licameli,2021-06-08T13:53:30Z,too,0,0.7399529814720154
647469662,952,Paul-Licameli,2021-06-08T13:58:53Z,still misspelled,0,0.908955454826355
915749282,3183,Paul-Licameli,2022-07-07T11:08:18Z,"it looked very weird that the wrapper class, which should have nothing to do with user interface, requires a pointer to a window. i see you did this only because `audacitymessagebox` uses that pointer in two places to report errors. (at least it is only two places, at the third commit.) so i say, just pass nullptr. the message box will still appear, as it always does, as a window with its own frame, but wxwidgets will not consider it to have a parent and might simply position it a bit differently. then keep mparent out of this wrapper.",-1,0.9614699482917786
915761299,3183,Paul-Licameli,2022-07-07T11:23:57Z,"i notice there is an assignment of this member in the constructor of vsteffect that is no longer necessary. i suggest, you make a new preliminary commit, and rebase your branch onto that: first rewrite the constructor of vsteffect to eliminate as many assignments to members, as possible. instead, use in-class initializations where possible, otherwise member initializers in the constructor.",0,0.9924336671829224
915767166,3183,Paul-Licameli,2022-07-07T11:31:27Z,"this changes behavior from `getsymbol`. it will cause the wrong thing to happen, in case audacity 3.1 saved an xml file and 3.2 reloads it. there will be an unnecesary dialog asking to continue. instead, lower the `mname` member into the wrapper so `getsymbol` can be defined in just the same way.",0,0.991978645324707
915768831,3183,Paul-Licameli,2022-07-07T11:33:32Z,you wrote the functions to set chunks so that you avoided duplications: the old functions invoke the `b` functions for common steps. do likewise for setting the parameter. make the return from this function boolean if necessary to enable that rewrite.,0,0.9947745203971863
916099076,3183,pietro68,2022-07-07T17:03:10Z,"ok, done",0,0.9714605808258057
916099215,3183,pietro68,2022-07-07T17:03:20Z,"ok, done",0,0.9714605808258057
916099329,3183,pietro68,2022-07-07T17:03:29Z,"ok, done",0,0.9714605808258057
916110739,3183,pietro68,2022-07-07T17:18:00Z,"i do not understand: i already wrote ::callsetparameterb. do you mean, i should have it return a boolean and check the value where called? the reason to write the ""b"" versions of callsetchunk, callsetparameter, callsetprogram was this: they are needed by other methods in the wrapper, but the original versions also loop on mslaves, and i guess (please confirm) that the wrapper should not be aware of them. the ""b"" versions are basically copies of the originals, with the loop on mslaves removed.",0,0.9021648168563843
916317844,3183,Paul-Licameli,2022-07-07T22:11:14Z,"this first commit is good. do you know that you could even write [code block] the in-class initializer doesn't have to be a constant expression, and it can refer to earlier declared members. that would more exactly preserve the meaning of the assignment [code block]",1,0.6994603872299194
916321444,3183,Paul-Licameli,2022-07-07T22:19:11Z,"now that mname is in the wrapper, i suggest: - make this function non-inline - simply call it `getsymbol` - redefine `vsteffect::getsymbol` (a virtual function override) as the call-through to `vsteffectwrapper::getsymbol`",0,0.9945358037948608
916323541,3183,Paul-Licameli,2022-07-07T22:23:53Z,"i mean, i see repetition of the use of `effcanbeautomated`. a small rewrite eliminates that repetition. `callsetparameter` can be defined in terms of `callsetparameterb` meaning that it is not coincidental that the same constant is reused. the ""b"" function does not always set the parameter, and by returning a boolean, it tells the other function whether to continue setting parameters in slaves.",0,0.9913820624351501
916329295,3183,Paul-Licameli,2022-07-07T22:37:45Z,"this call isn't needed because `mvstversion` was assigned in `vsteffect::load` and is a member now of the `vsteffectwrapper` base, and i presume the answer returned by the plug-in to this query will never change. in fact, it may be that we discover, as we take this transformation further, that most of the things assigned in `load` will need to move down into the wrapper, and so perhaps the entire function will also move into it.",0,0.992120623588562
916330894,3183,Paul-Licameli,2022-07-07T22:41:47Z,"it may help, in the commit comment, to explain that `storesettings` adapts the logic in `loadparameters` and `loadsettings` but using in-memory settings instead of a config file as the source of values.",0,0.9930101037025452
916338607,3183,Paul-Licameli,2022-07-07T23:01:36Z,"this visit of parameters has these differences from `vsteffect::loadsettings`: - the bracketing dispatches of `effbeginsetprogram` and `effendsetprogram` are not done - the bounds check on `value` between +/- 1 is not done is it important to preserve the bounds check? i honestly don't know. preserve it, as real code or as commented out, and experiment may later decide if we really need it. `loadsettings` as i now see, and as you probably saw too, was doing `callsetparameter` on self and then again on slaves: which was unnecessary, because the `callsetparameter` call on self was already recursive. the begin and end of set program were only done on master. was it right or wrong not to do it to on slaves? i don't know. but let's assume, it can be done on every handle for every instance, and the calls should therefore be part of `storesettings` here. in practice, multiple slaves will happen only when you use the old non-modal dialog from the effects menu, which will eventually not be part of 3.2 anyway. but we may in future want to reimplement something like it for a master bus of effects.",0,0.9711059331893921
916340026,3183,Paul-Licameli,2022-07-07T23:05:03Z,"comment in the commit that `fetchsettings` adapts `savesettings` and `saveparameters` but storing in-memory in effectsettings, not in a config file.",0,0.9946421384811401
916343718,3183,Paul-Licameli,2022-07-07T23:14:30Z,the commit that introduces this function should also call `refreshparameters()` which is a step done in the existing functions that load user and factory presets and that import. maybe you did this in a later commit i haven't reviewed yet? but you can do it in this early commit to make the function complete.,0,0.995019793510437
916345036,3183,Paul-Licameli,2022-07-07T23:18:04Z,"this `makesettings` is good. to be very fussy about the correct logical sequence of commits, i would say do this one before defining `transferdatatowindow`, just so that the lines [code block] ... are sure not to return false because `msettings` has not yet been initialized.",1,0.8998889327049255
916347411,3183,Paul-Licameli,2022-07-07T23:24:27Z,"now i have looked at the whole pr and i see this wasn't done. the task breakdown said ""define transferdatatowindow (to become updateui of a validator later), calling storesettings; remove parts of loadsettings that duplicate this"" so, to make that step complete, add the `refreshparameters()` call and also remove the call in three places, all in the same commit.",0,0.9908906817436218
916350442,3183,Paul-Licameli,2022-07-07T23:32:32Z,the commit that inserts calls to `fetchsettings` should also do it in `loadfactorypreset`,0,0.9953433275222778
916355700,3183,Paul-Licameli,2022-07-07T23:47:16Z,"this new definition of `loadsettings` should set up all members of `vstsettings`, not just the parameter map. clear the chunk and set the id, version, etc. from the wrapper.",0,0.9950277209281921
916405214,3183,Paul-Licameli,2022-07-08T02:05:50Z,"in the last commit, which adds two calls to `storesettings`, check the return value and return early if it is false. in `saveparameters`, do that before any other steps changing the config file.",0,0.994714081287384
916407324,3183,Paul-Licameli,2022-07-08T02:11:26Z,"in the commit that adds these lines, ""rewrite saveparameters not using the handles"" -- you store values from vstsettings and not from maeffect, which is what i meant. hiding all mention of maeffect in this function isn't what i meant. it's not wrong to factor out `supportschunk`, but not what i meant. but the last commit in the sequence (after this) should also, as i said, do `storesettings` first, anyway, which includes the check that the values in the two agree.",0,0.98777174949646
916408488,3183,Paul-Licameli,2022-07-08T02:14:56Z,"the commit adding these two functions, ""rewrite loadparameters not using the handles"", is just hiding mention of maeffect in loadparameters while not removing dependency on its state. it's not what i meant. however, i must read and understand all that you commented in ""rewritten loadsettings / savesettings"". actually eliminating use of maeffect might not be possible, as i think you are saying: instead, this handle is really needed as a ""scratch"" as with audiounits.",0,0.9821082353591919
916411654,3183,Paul-Licameli,2022-07-08T02:24:16Z,"the commit that rewrites this function can also make it and `storecommandparameters` const, and that will allow you to remove `doloaduserpreset` and a `const_cast`",0,0.9950569868087769
916418631,3183,Paul-Licameli,2022-07-08T02:43:59Z,"okay, commit 6.2, the most difficult one: i'm not convinced by what you write in the commit comment, about the need to keep the old functions. and, the new loadsettings/savesettings are not using the same ""parm_%d"" convention to name the keys (sometimes), which means it might break compatibility with old config files. `storecommandparameters` is used only by `loadparameters`. if it takes the ""chunk"" alternative, then it is using the maeffect handle, as a ""scratch"" from which it then fetches settings. that's ok. if that function does not take the early exit path loaing a chunk -- then instead a string value for key ""parameters"" is loaded, and reinterpreted as a config file of key-value pairs. i don't see why this could not be given to the new `loadsettings` directly. in which case, you do not rely on a ""scratch"" handle and so should not use `fetchsettings`. `fetchcommandparameters` is used only by `saveparameters`. that function first calls `storesettings` to change the scratch handle state, and then maybe exits early if chunks are supported. but if they are not, then again, i don't understand why the direct translation of settings to key-value pairs in `eap` can't be done.",0,0.8679611086845398
916763464,3183,pietro68,2022-07-08T12:21:19Z,"i understand now, thanks, done",1,0.9476485848426819
916767330,3183,pietro68,2022-07-08T12:26:32Z,"what you suggest would look better - done, although i had to use a static cast: `unsigned mblocksize{ static_cast (muserblocksize) };`",0,0.9889938235282898
916790670,3183,pietro68,2022-07-08T12:57:18Z,"ok, done",0,0.9714605808258057
916831023,3183,pietro68,2022-07-08T13:44:08Z,"alright, done. and yes, probably a good part if not all of ::load will need to move to the wrapper.",0,0.9705923199653625
916887560,3183,pietro68,2022-07-08T14:44:38Z,"ok, done",0,0.9714605808258057
916889788,3183,pietro68,2022-07-08T14:47:01Z,"ok, done",0,0.9714605808258057
916955039,3183,pietro68,2022-07-08T16:03:22Z,"you are right, i forgot this. now done.",0,0.8866895437240601
916959621,3183,pietro68,2022-07-08T16:09:23Z,"good point, done",1,0.9711862802505493
916968935,3183,pietro68,2022-07-08T16:22:12Z,"good catch, now done",1,0.952171802520752
916990498,3183,pietro68,2022-07-08T16:52:54Z,"this is what i added now, i hope it is what you meant? [code block]",0,0.9607546329498291
916996251,3183,pietro68,2022-07-08T17:01:29Z,"that's right, done.",0,0.9701728224754333
917764524,3183,pietro68,2022-07-11T10:10:06Z,"i added the bounds checking and the `effbeginsetprogram` / `effendsetprogram` bracketing. i need a plugin which does not support chunks to test this, but since `loadsettings` did this, it looks ok if storesettings also does it.",0,0.987136721611023
917804033,3183,Paul-Licameli,2022-07-11T10:59:55Z,maybe mblocksize should just be size_t. or you can use the = syntax not {} . there is a difference. {} disallows narrowing conversions.,0,0.9878197908401489
917806052,3183,Paul-Licameli,2022-07-11T11:02:31Z,yes,0,0.9686408638954163
917862764,3183,pietro68,2022-07-11T12:17:16Z,"if it is allowed to reference maeffect for that case, then i am happy to revert `supportschunk` - done.",0,0.6677389144897461
917887478,3183,pietro68,2022-07-11T12:45:43Z,"ok, done",0,0.9714605808258057
917995134,3183,pietro68,2022-07-11T14:20:55Z,"i interpret your comment like so: in `loadparameters`, instead of calling `storecommandparameters` and then `fetchsettings`, just call `loadsettings`. then there would be no need for `storecommandparameters` to exist. but the thing is: the new `loadsettings` only translates to settings the `commandparameters` that it is given, without writing them to the handle. i thought this was the semantics of `loadsettings` we agreed on - is it not? it should be only a translator, not a translator + a setter. because i found the existing `loadsettings` not to conform to these agreed semantics (it was also writing to the handle), i renamed it to `storecommandparameters` and wrote a new `loadsettings` which does the translation only. but i could also revert it all, i.e. just have the original `loadsettings` which translates and sets to the handle, and then i could use it as you suggest. no problem for me, the code would also be simpler. i would only have the concern that the semantics of `loadsettings` would then vary across effect families.",0,0.9779132008552551
918652553,3183,pietro68,2022-07-12T07:44:53Z,i opted to make mblocksize a size_t,0,0.9941893815994263
918792844,3183,pietro68,2022-07-12T10:09:58Z,"let's try to see it from this angle: what `loadparameters` has to do, is to read some stuff from the config, set it to a plugin handle (done in the call to `callsetchunkb`) and fetch the settings from the plugin handle. this handle is `maeffect`, a member of the wrapper. methods of `vsteffect` do not operate on `maeffect` directly, but through methods of `vsteffectwrapper`. is this wrong?",0,0.9780941605567932
919877320,3183,Paul-Licameli,2022-07-13T09:48:42Z,just remove that commented line,0,0.9940826296806335
920883287,3183,pietro68,2022-07-14T08:15:52Z,done,0,0.8682363629341125
921430728,3183,Paul-Licameli,2022-07-14T17:56:35Z,i don't see it,0,0.7418217062950134
1593647921,6395,vsverchinsky,2024-05-08T08:38:50Z,may be `lib-src` is better place for this library?,0,0.9925657510757446
1593694089,6395,vsverchinsky,2024-05-08T09:06:51Z,"`std::move` is redundant here, better pass `settings` parameter by reference",0,0.9928948283195496
1593707116,6395,vsverchinsky,2024-05-08T09:13:08Z,"`msettings` is not initialized at this point. while in that particular case nothing bad will happen because `compressorsettings` is trivially constructible, i'd still suggested to move initialization into constructor's body.",0,0.989495575428009
1593812943,6395,vsverchinsky,2024-05-08T10:35:05Z,"i don't understand why should `limitersettings` inherit `compressorsettings`. i really do not see any benefits from doing so, but i see downsides in many `if(...) else { ... }` and typechecks. i'd suggested to eliminate `limitersettings` type, but instead introduce: [code block]",0,0.7417100667953491
1593991818,6395,saintmatthieu,2024-05-08T12:59:58Z,"i've been considering, yes, but i'll probably be modifying the code in some follow-up work. is that a good reason?",0,0.9829535484313965
1593995870,6395,saintmatthieu,2024-05-08T13:03:02Z,"well spot, thanks.",1,0.8254674077033997
1594050276,6395,saintmatthieu,2024-05-08T13:37:57Z,i'm not sure that this would work - not that i wouldn't like it to! i think it's because of this guy: ![a link] the `effectsettingsaccess` class initially creates a default-constructed struct. creating a new type is the only way i found of circumventing that.,-1,0.989066481590271
1594062208,6395,saintmatthieu,2024-05-08T13:45:40Z,"is it? the given `settings` object is originally a right value. if i passed by reference in the end there'd be a call to the copy ctor, wouldn't there?",0,0.9941020607948303
1601159167,6395,vsverchinsky,2024-05-15T08:09:43Z,not the case with pod-types i guess. it will simply create an extra copy.,0,0.9807494282722473
1601175735,6395,vsverchinsky,2024-05-15T08:21:47Z,"hm, didn't think of it. `effectwithsettings<>::makesettings` is virtual and can be overriden, will that help?",0,0.9212413430213928
1601181422,6395,vsverchinsky,2024-05-15T08:24:37Z,"up to you. i think it's not a big deal if you modify code added to `lib-src`, i recall there are already such cases",0,0.97153240442276
1601359271,6395,vsverchinsky,2024-05-15T10:13:38Z,"`instance` will outlive editor, so that should be safe",0,0.9885702729225159
1601410190,6395,vsverchinsky,2024-05-15T10:53:09Z,is it possibly depend on ring buffer size (which is usually 0.25ms)?,0,0.9911147356033325
1601499471,6395,vsverchinsky,2024-05-15T11:55:19Z,`wxpoint2ddouble` makes graph move smoother?,0,0.9890572428703308
1601550024,6395,vsverchinsky,2024-05-15T12:27:43Z,"i guess it will be better to always call `realtimeprocess`, but instead effects could implement `bypass` mode, so that effects could accumulate samples if it's required for processing. for vst's that should be done trivially. wdyt?",0,0.9816267490386963
1601854858,6395,vsverchinsky,2024-05-15T15:28:25Z,"`compressorinstance` could remember it's state after init/suspend/resume/finalize, `ontimer` then could check that state. i have no doubt that observers will do the thing, i'm just a bit sceptical about effect instance being a publisher.",0,0.9774496555328369
1603588276,6395,saintmatthieu,2024-05-16T15:21:50Z,"and if it didn't, would there be harm in a dangling subscription ?",0,0.9806883335113525
1603593513,6395,saintmatthieu,2024-05-16T15:24:31Z,the size of the low-latency playback thread buffer you mean? yes.,0,0.993707537651062
1603599988,6395,saintmatthieu,2024-05-16T15:27:43Z,"no, it's more for anti-aliasing. will comment.",0,0.9874853491783142
1603602988,6395,saintmatthieu,2024-05-16T15:29:18Z,we'd then have to review all implementations and make sure none of the actually does the processing when bypassed. so i think this is safer.,0,0.9874498844146729
1603610211,6395,saintmatthieu,2024-05-16T15:33:41Z,"the sample rate may change between playback states, and all this time the panel may stay open, so the sample rate update is a must. i tried other things before, and the observer-publisher pattern seemed like the simplest in the end (although there is no fundamental difference between injecting a callback lambda, i think).",0,0.9909083247184753
1603623214,6395,vsverchinsky,2024-05-16T15:42:26Z,"no, it stores pointer in `weak_ptr`, should be safe anyway",0,0.9917746186256409
901409170,3088,crsib,2022-06-20T08:45:30Z,probably it should go to `#if defined(__wxgtk__)` as well,0,0.9928216338157654
901410017,3088,crsib,2022-06-20T08:46:24Z,"i think we could leave ""settings folder"" here. what do you think, -licameli?",0,0.9605132341384888
901416594,3088,crsib,2022-06-20T08:53:03Z,according to the docs it seems that this code could be rewritten with simply `wxstring configdir(wxstandardpaths::get().getuserdatadir())` or at least `audacity_name` should be used,0,0.9925183057785034
901438113,3088,ruro,2022-06-20T09:14:47Z,will do.,0,0.9465230703353882
901438355,3088,ruro,2022-06-20T09:15:01Z,okay.,0,0.9765366315841675
901440646,3088,ruro,2022-06-20T09:17:19Z,"~i am not sure, if i follow? `getuserdatadir()` will return `~/.local/share`, not `~/.config`.~ +1 on using `audacity_name` instead of a hardcoded string. disregard the last comment. i missed that this block is only executed when `__wxgtk__` is not defined.",0,0.6935963034629822
901498948,3088,crsib,2022-06-20T10:19:06Z,"docs are confusing: `only use this method if you have a single configuration file to put in this directory, otherwise [a link] is more appropriate as the latter adds appinfo to the path, unlike this function.` [a link]",0,0.7683519721031189
901522143,3088,ruro,2022-06-20T10:41:30Z,"i agree, that the docs are confusing. i am currently rewriting the implementation based on your `enum dirtarget` idea. actually the `wxwidgets` `getuserwhateverdir` methods don't map to corresponding `xdg_whatever_home` directories, so i decided to just implement the correct xdg base directory logic for unix and keep the windows case exactly as it currently is. more info later. btw, are we sure that `__wxgtk__` is the correct preprocessor macro to distinguish unix? i just kept it from the original pr, but i am not 100% sure.",0,0.7484651207923889
901534970,3088,crsib,2022-06-20T10:57:23Z,"we use it for now, at least, so it's good to go!",1,0.9819437265396118
902326158,3088,crsib,2022-06-21T08:34:40Z,looks like glib is included unconditionally.,0,0.9820795059204102
902327870,3088,crsib,2022-06-21T08:35:42Z,let's use c-assert. we are moving away from wxassert,0,0.9928383231163025
902329583,3088,crsib,2022-06-21T08:36:47Z,i think it is better to return `gdatadir` or at least to throw `audacityexception` of some kind. not `abort` for sure.,0,0.9798765182495117
902332129,3088,crsib,2022-06-21T08:39:12Z,ditto,0,0.9754701256752014
902332204,3088,crsib,2022-06-21T08:39:17Z,"you return non const reference from gtargetdir, but here c++ deduce the type as `filepath`. is is desired?",0,0.9943707585334778
902334256,3088,crsib,2022-06-21T08:41:15Z,"looks like you want overwrite the value, so you need `auto& dir = gtargetdir(target);`",0,0.9930415153503418
904788911,3088,crsib,2022-06-23T09:21:45Z,i think we can do something like [code block] this will simplify code below,0,0.9813855886459351
904792220,3088,crsib,2022-06-23T09:25:04Z,i think we can have an array here by adding `count` to `dirtarget`: [code block],0,0.9910955429077148
904793001,3088,crsib,2022-06-23T09:25:46Z,"(sorry for the formatting, github aint a good text editor xd)",1,0.9421707391738892
904801847,3088,crsib,2022-06-23T09:34:44Z,"can be done as [code block] this way we force the compiler to do all the checks necessary. given that the enum is private, there is not much need left for any runtime checks.",0,0.9939927458763123
904805504,3088,crsib,2022-06-23T09:38:19Z,let's name it `getusertargetdir` for consistency please!,0,0.9933158755302429
904807442,3088,crsib,2022-06-23T09:39:34Z,this becomes `auto& dir = directories[size_t(target)];`,0,0.9939193725585938
904807703,3088,crsib,2022-06-23T09:39:44Z,this goes away,0,0.9863727688789368
904808535,3088,crsib,2022-06-23T09:40:15Z,`if (olduserdatadirexists())...`,0,0.993889570236206
904813259,3088,crsib,2022-06-23T09:43:44Z,let's make all 4 functions to be const!,0,0.9941633343696594
904917770,3088,ruro,2022-06-23T11:42:20Z,"actually, i think i'll just extract all the xdg-specific logic into a separate function and then just inline these 2 functions into it.",0,0.9887092709541321
904918596,3088,ruro,2022-06-23T11:43:24Z,"makes sense. would `_targetcount` be an acceptable name? i would like to somehow distinguish that `count` is a sentinel, not a valid target.",0,0.9865940809249878
904920953,3088,ruro,2022-06-23T11:46:17Z,how about [code block] also i think the `xdgconfig` array should be `const`.,0,0.9943928718566895
904921947,3088,crsib,2022-06-23T11:47:30Z,"std::pair would do too, but i prefer descriptive names :-)",1,0.7076430320739746
904922159,3088,crsib,2022-06-23T11:47:47Z,works for me,0,0.9870917797088623
904923013,3088,ruro,2022-06-23T11:48:55Z,"what do you mean? this is a namespace, not a class.",0,0.9884452819824219
904927834,3088,crsib,2022-06-23T11:54:45Z,"oh shoot, ignore me than",-1,0.8084659576416016
905026935,3088,Paul-Licameli,2022-06-23T13:31:49Z,+1 for the conservatism,0,0.5818194150924683
905114419,3088,crsib,2022-06-23T14:46:37Z,looks good!,1,0.9835501909255981
1461901926,5874,Paul-Licameli,2024-01-22T13:58:37Z,"do not delete this header from cmakelists.txt. the build works, but the file was not deleted, and so should be made known to the ides as part of the project.",0,0.9945935606956482
1470123671,5874,vsverchinsky,2024-01-29T19:50:39Z,the header file is still not there,0,0.9863089323043823
1470127493,5874,vsverchinsky,2024-01-29T19:53:50Z,"one would assume that entity named `on*` refers to an action, isn't `musicfileimportprefs` good enough?",0,0.9932094216346741
1470131066,5874,vsverchinsky,2024-01-29T19:56:45Z,i thought we use capital letters for enumerations elsewhere...,0,0.9883440732955933
1470132880,5874,vsverchinsky,2024-01-29T19:58:16Z,"i'd expected `bool` as a return type, `on*` fits better here",0,0.9915406107902527
1470159082,5874,vsverchinsky,2024-01-29T20:19:24Z,"method does not need an access to the internal state of the instance, so it can be lifted out from the class definition",0,0.9918498992919922
1470194945,5874,vsverchinsky,2024-01-29T20:51:30Z,"`projectinterface` could be simplified a bit: `synchronizeproject` can accept as arguments what it now reads from getters (except `getuserprefs`). i guess that `projectinterface` is actually a project synchronization delegate (callback), right?",0,0.9921802282333374
1470206802,5874,vsverchinsky,2024-01-29T21:01:47Z,"please, use `std::unique_ptr&`",0,0.9944344162940979
1470917449,5874,vsverchinsky,2024-01-30T10:00:55Z,why not `std::shared_ptr `?,0,0.9920886754989624
1470928420,5874,vsverchinsky,2024-01-30T10:06:06Z,`analyzedaudioclip` seem to represent a delegate object too,0,0.9930325746536255
1470959874,5874,vsverchinsky,2024-01-30T10:22:28Z,reference?,0,0.9921230673789978
1470975585,5874,vsverchinsky,2024-01-30T10:32:42Z,"i think that the previous loop can be combined with that one, eliminating the need for `loopindices` variable",0,0.9853179454803467
1471018288,5874,vsverchinsky,2024-01-30T11:02:22Z,"this structure wraps parameters that are later passed to a `getprojectsyncinfo`, this makes me think that it should be eliminated",0,0.9933061003684998
1471137982,5874,vsverchinsky,2024-01-30T12:35:43Z,i'd liked to see this renamed to `ontimesignaturerecoginized` or similar,0,0.9732037782669067
1471145262,5874,vsverchinsky,2024-01-30T12:41:51Z,the second argument doesn't seem to be useful in real world,0,0.967329204082489
1471154457,5874,vsverchinsky,2024-01-30T12:49:28Z,"not a clip, but rather a delegate",0,0.9852853417396545
1471160760,5874,vsverchinsky,2024-01-30T12:54:55Z,"i guess call to this function is important outcome of the `synchronizeproject` function call in some cases, but it was not tested, otherwise i don't see much benefits from control inversion here in it.",0,0.9810980558395386
1471328090,5874,vsverchinsky,2024-01-30T14:29:58Z,"i think that transformation could be simplified to `std::vector(sortednames.begin(), sortednames.end())`",0,0.9862672090530396
1471686596,5874,vsverchinsky,2024-01-30T17:42:23Z,is it really safe? i see that there could be `userexception` thrown at the same scope where `audacitymirproject` is created,0,0.991641640663147
1471697582,5874,vsverchinsky,2024-01-30T17:50:16Z,"not sure if it's the case in the real world, but there is a code path where `clipmiraudioreader` could be created but `import` returns `false`. could be easily fixed with `unique_ptr`",0,0.9696941375732422
1472584159,5874,saintmatthieu,2024-01-31T10:02:09Z,yes.,0,0.9851860404014587
1472591231,5874,saintmatthieu,2024-01-31T10:07:46Z,what's would be the benefit?,0,0.9890391826629639
1472600277,5874,saintmatthieu,2024-01-31T10:15:01Z,i don't quite understand. could you pseudo-code what you mean?,0,0.5938708186149597
1472607035,5874,saintmatthieu,2024-01-31T10:19:59Z,"`std::shared_ptr&`, but sure.",0,0.9905632734298706
1472609002,5874,saintmatthieu,2024-01-31T10:21:37Z,no good reason.,0,0.5755204558372498
1472640955,5874,saintmatthieu,2024-01-31T10:45:04Z,"sure, but this step-by-step approach is less intricate.",0,0.982107937335968
1472647083,5874,saintmatthieu,2024-01-31T10:50:15Z,"there are advantages to using a struct as opposed to many arguments, e.g. like smaller diff when modifying them, especially when there exists test code.",0,0.9910498857498169
1472655374,5874,saintmatthieu,2024-01-31T10:57:07Z,"mmh, it's not only about the recognition of the time signature, but also the interaction with the user, which i finds makes the `on` naming a bit tricky ... `setviewtobeatsandmeasures` itself isn't quite correct, actually. `reconfiguremusicgrid` is probably better.",0,0.8726412057876587
1472660052,5874,saintmatthieu,2024-01-31T11:01:05Z,"in practice, you mean? cases are seldom, true, but they exist. future improvements could make this happen more often.",0,0.9862775206565857
1472662583,5874,saintmatthieu,2024-01-31T11:03:15Z,what name do you propose?,0,0.9917833805084229
1472666395,5874,saintmatthieu,2024-01-31T11:06:42Z,"tested it is, in musicinformationretrievaltests.cpp, and plenty of places, too. search `clipsweresynchronized` in that source file.",0,0.9896395206451416
1472669375,5874,saintmatthieu,2024-01-31T11:09:30Z,"yep, nice.",1,0.7981544733047485
1472671143,5874,saintmatthieu,2024-01-31T11:11:09Z,what is it that could throw?,0,0.9885280132293701
1472678101,5874,saintmatthieu,2024-01-31T11:17:31Z,"it would be created but then destroyed when this lambda exits if `!success`. what is your concern? i haven't managed moving a vector of unique pointers around without invoking the unique_ptr copy ctor, yielding an error. a couple of lines below, `if (!resultingreaders.empty()` should probably be changed to `if (success && !resultingreaders.empty())`, though.",0,0.9908632040023804
1472715182,5874,vsverchinsky,2024-01-31T11:52:37Z,"[code block] it also looks like that there is an invariant `projectwasempty == !projecttempo.has_value()`, so one of these arguments may be reduntant",0,0.9944287538528442
1472733153,5874,vsverchinsky,2024-01-31T12:09:07Z,"don't remember where i've learned it from for the first time, but googling shows that it originates to scott meyers's article (""how non-member functions improve encapsulation""). i think it's a good rule",1,0.980613112449646
1472737735,5874,vsverchinsky,2024-01-31T12:13:11Z,`reportprogress` in `runtempodetection`,0,0.9944466352462769
1472740772,5874,vsverchinsky,2024-01-31T12:16:06Z,"context search shows me that `synchronizecalled` isn't never checked though, that's what i meant, but yes, you are right, `clipsweresynchronized` should be enough",0,0.9928638339042664
1472741928,5874,vsverchinsky,2024-01-31T12:17:12Z,e.g. `clipsyncdelegate`,0,0.9948021173477173
1472751694,5874,vsverchinsky,2024-01-31T12:26:22Z,"that still sounds odd to me, considering that you can call `synchronizeproject` not being in the context where musical grid is actually present. this call is just a way to provide a result for the intermediate step.",-1,0.7450838685035706
1472754971,5874,vsverchinsky,2024-01-31T12:29:15Z,"ah, sorry, i meant the third argument - `reconftype`",-1,0.9123796224594116
1472762007,5874,vsverchinsky,2024-01-31T12:35:42Z,"my concern is that `presultingreader` is a raw pointer type. there seem to be a case where `import` creates a `clipmiraudioreader`, but then returns false, and object leaks because it's not yet wrapped with any type of smart pointer. but you've already said that you'll change the type of the argument to `shared_ptr&` in `import`, that should solve the problem",0,0.9463441967964172
1472872503,5874,saintmatthieu,2024-01-31T14:05:03Z,"ok, i see the exception. should be fine: if the user cancels the analysis, then there won't be time to modify the project, and the ctor should return early.",0,0.9859905242919922
1472874506,5874,saintmatthieu,2024-01-31T14:06:33Z,:thumbs_down:,0,0.5241621136665344
1472875628,5874,saintmatthieu,2024-01-31T14:07:24Z,right. i just pushed a commit that cleans this up a little.,0,0.9902558922767639
1472890524,5874,saintmatthieu,2024-01-31T14:17:26Z,"i see. there's one subtlety: we must evaluate `project.viewisbeatsandmeasures()` after the prompt. we don't know what view the project will be in when this function exits. and since we need the `projectinterface` for that, we might as well use it to get the project tempo, too.",0,0.9818529486656189
1475791656,5874,vsverchinsky,2024-02-02T09:30:18Z,could be `std::move`,0,0.9933362007141113
1475810008,5874,saintmatthieu,2024-02-02T09:45:46Z,yep. will squash that in before merge.,0,0.9781143665313721
852313290,2831,Paul-Licameli,2022-04-18T18:23:43Z,"i don't like the closed-endedness -- the violation of the ""o"", open-closed principle, of solid: ""a design should be open to extension but closed to modification"" in other words, if we ever add a new effect that falls into one of these categories, then it won't be self-contained in one new implementation file, but instead this file will need modification to make the menu sorting continue to work as desired. and we are also depending on long-distance coincidences of string literal values, between this file and each of the many effect implementation files, which is . so i suggest: - a new enumeration effectcategory, defined in effect.h - a table mapping effectcategory to enumvaluesymbol (which pairs an identifier and translatablestring), defined in effect.cpp and accessible by a static member function - menulist is instead `std::vector >>` and gets translatablestring from that table - a virtual function of effect called geteffectcategory, appropriately overridden in all the effects that matter - some of these effects are not built-ins, but nyquist plug-ins. so nyquisteffect needs an override of geteffectcategory that doesn't just return a constant, but computes an answer too. - add a case in nyquisteffect::parse to recognize a new special lisp comment `$category`, which does reverse-lookup of the table of categories, by the identifier (not by the translatablestring), to find the enum value - modify the plug-ins/*.ny files as needed to identify their categories - ping when you do this, to review the changes at least in nyquist.cpp, and recommend how to update documentation of nyquist - preferredeffectsmenu does not return a static value, but computes its answer instead, by iterating the plug-ins and querying geteffectcategory - maybe it can cache that computed answer, but invalidation of the cache would need to be done by the plugin manager dialog, or if the user changes the language preference; see class preferencelistener do all of this, and i will be less dissatisfied... but then the set of categories and the sorting of the categories themselves will still be closed-ended, and in a further future i might want to seek a fix for that too involving a registration of categories.",-1,0.9392774701118469
852327654,2831,vsverchinsky,2022-04-18T18:45:31Z,"1. effectcategory is very likely to be extended/changed. 2. not each effect has should have effect category assigned, effects can be added or removed from that list. 3. menulist can be changed at any time, without modification of the effects source code, it's a resource object. considering that, i don't agree that my implementation violates ""o"". ideally, there could be an external file describing the stucture of that menu, which can be changed without any code modification.",0,0.9797682166099548
852340112,2831,LWinterberg,2022-04-18T19:05:13Z,"rename the `invert` effect to `invert polarity`, please.",0,0.9750396013259888
852376649,2831,Paul-Licameli,2022-04-18T20:05:01Z,why?,0,0.9622438549995422
852380784,2831,LWinterberg,2022-04-18T20:11:55Z,"ah, sorry, you copied my typo here. it should be ""volume and compression"" with a big c",-1,0.9901843070983887
852381687,2831,LWinterberg,2022-04-18T20:13:24Z,same with these guys: * spectral tools * spectral delete * spectral edit multi tool * spectral edit parametric eq * spectral edit shelves,0,0.9885634183883667
852381778,2831,Paul-Licameli,2022-04-18T20:13:34Z,"if it is agreed to make that name change, the correct change in invert.cpp is: [code block] because in case anyone uses the invert effect in a macro, this will avoid breaking that macro when they migrate to a newer version of audacity. only the localized name of the effect will be changed, not the english identifier that macro programmers use.",0,0.993661642074585
852385995,2831,vsverchinsky,2022-04-18T20:20:36Z,"as paul said in his comment above these are ""identifiers"", not names, but ""spectral tools"" is a group name and i'll fix that",0,0.9918115139007568
852390003,2831,Paul-Licameli,2022-04-18T20:27:12Z,"i veto this change request as part of the same issue. make this change request a different, minor issue. changing the name while preserving macro compatibility turns out not to be as easy for nyquist effects as it would be for invert. it needs more thought.",0,0.9719067811965942
852724079,2831,Paul-Licameli,2022-04-19T08:06:54Z,"your implementation violates open ended ness for reasons i described. you must change pluginmenus.cpp if in future a new categorized effect is added, rather than having all necessary new code self contained in the effects implementation. i do not accept this.",-1,0.9127103090286255
852731315,2831,Paul-Licameli,2022-04-19T08:14:56Z,"how does that make me wrong? it is something i admitted: that even if you do my steps, it is not a complete fix for the problem of closed ended ness. still the steps i described are necessary if not sufficient. do you mean there should be another enumeration value for effects of undefined category? that is easy enough. effects can be added or removed from the list. do you mean as future development, or do you mean that the composition of the lists can be changed at runtime? do you mean that as a future development, we change our decision about the categorization of an individual effect? but it is much more proper, if some source code must change, that is the source code of that effect only rather than pluginmenus.cpp.",0,0.6862055063247681
852750824,2831,Paul-Licameli,2022-04-19T08:30:20Z,"""menulist can be changed at any time, without modification of the effects source code, it's a resource object. does resource object mean that the categorization of individual effects should not be hard oder in them, but somehow specified in an external file, like the configuration, and the user would have some way to change its contents, and the program would do effect sorting according to an interpretation of that file? but this implementation does none of that."" so i do t understand what you mean by resource object.",0,0.987505316734314
852751669,2831,Paul-Licameli,2022-04-19T08:30:57Z,sorry i edited your original comment by mistake. i didn't mean to delete it. but i think i quoted all of it in my replies.,-1,0.9893163442611694
852804072,2831,Paul-Licameli,2022-04-19T09:19:59Z,"""maybe it can cache that computed answer, but invalidation of the cache would need to be done by the plugin manager dialog, or if the user changes the language preference; see class preferencelistener"" to clarify i mention this really to suggest you don't bother with it: do recalculate the list each time you need to repopulate the effects menus.",0,0.9928948283195496
852805792,2831,vsverchinsky,2022-04-19T09:21:48Z,"""a design should be open to extension but closed to modification"" please, let do not pollute interfaces with more constants that has some meaning for about 30 effects, it has nothing to do with oc. why should prebundled effect, which isn't present in that menu, should be categorized as ""undefined""? or why should any other external effect have category which will never be used? during development ofcourse, and this is in fact points to the possibility to violate oc in future. yes, we can add or remove effects to/from that list, even now there are prebundled effects that are not present in that list, the set of groups can change as well. question: there are groups like ""distortion and modulation"", ""eq and filters"", should there be 4 emum values or only 2? what if effect provides both distortion and eq? it's not a problem from the implementation point of view, and it's not a bad idea in general, but there is no use for it right now. there is a set of effects that should be put in a certaing menu groups, there is no need to ""categorize"" all effects. menulists can be put into separate cpp file (like allthemeresources), or even external xml (json, txt,...) file. not sure that we need to provide a way for user to change that list, but surely we can do that. in fact we can extend format with rules and filters and provide a way to make this menus very customizable, and your idea with effects category will make it more flexible for the user.",0,0.8313111662864685
852821213,2831,Paul-Licameli,2022-04-19T09:38:19Z,"that doesn't answer my question. what ""interface"" is polluted? effect itself? well it's going through lots of necessary changes this release. but it is quite simple to make effects un-categorized with a default implementation of the virtual function, and so most effects will need no modification for this. only the few that are categorized. this really isn't different in principle than ishiddenfrommenus. we are failing to understand ""oc"" to mean the same thing. if there is a new effect, its categorization should be determined by the code of that effect alone. the file that makes effect menus should be generalized, and should not make special mentions of any individual effects. the interface offered by abstract effect is extended now to be sufficient for the needs of the plugin menus. do you see there is special weird stuff in pluginmenus about noise reduction and the nyquist prompt? true. but that is bad legacy, not good precedent. as i said, i am admitting to incompleteness of this solution for open endedness, but i do not accept your argument that therefore, let this pr stand and make no attempt to fix it. effects should have some virtual function reporting their category as some kind of value, and pluginmenus.cpp should use that value and not have a hard-coded list of effect names. start by making that value an enumeration. though this enumeration of categories is closed ended, the set of effects in any one category is not closed ended. let me see the redraft. then we can discuss the further step of changing the value type from enumeration to some other dynamically determined set of cateogires.",0,0.5547954440116882
853011371,2831,vsverchinsky,2022-04-19T12:36:12Z,"what question then? using enum for entity like effect category is very likely to violate oc (until we agree that it will never change). so i don't see why your impementation violating oc is preferrable over my implementation which ""violates oc"" (which is not, because you don't have to change effect to change menu ordering, and you don't have to change anything in the menu to add a new effect, though you may want to change that too, but the problem here is that you cannot answer to the question ""how should i change that menu?"") effect placement in the menu should be determined by the menu. it can use properties of the effect to do that and using effect id for that purpose isn't worse than using any other property of the effect. effect id and effect category are both properties of the same entity, there is no difference between them in sence that they both could to be used as a filter parameters. this task does not specify that we should assign category to each effect, and build menu so that all effects grouped by these categories. this task requires to put **certain** effects into certain submenus, that's why there are references to the individual effects in the menu description, you cannot solve such task using generalization.",0,0.9394564032554626
853025569,2831,SteveDaulton,2022-04-19T12:51:33Z,"as paul wrote: ""why?"". what other kinds of waveform inversion are there? yes there is such a thing as ""spectral inversion"" (which audacity does not have), but if that's the distinction that you want to make then i don't think that ""invert polarity"" does it as well as ""invert waveform"". regardless of which wording is decided, please avoid changing the command name unless absolutely necessary as doing so will break custom macros that use the command. as paul wrote: ""only the localized name of the effect"" should be changed.",0,0.9799822568893433
853030700,2831,Paul-Licameli,2022-04-19T12:55:23Z,"one more time: i admit the incompleteness of my suggestions, but still say it is a better organization than this first attempt. if you are actually arguing to go beyond my suggestions and figure out open-endedness of categories, not just the members of categories -- great, do so! if not, still i want some of the extra effort done now. but the rest of what you say is unpersuasive to me. saying you only satisfy the issue in a looks-like-it-works way in the black box view is not acceptable. the decision to categorize an individual effect one way or another way should be encoded in the implementation of that effect. that is the open-ended solution in regard to the enlargement of the set of effects. ideally effects should be plug-ins, not baked into the executable. in fact this is realized in the case of nyquist effects, though we don't do this yet for effects in c++. at least for nyquist effects, a nyquist programmer should have the ability to put a new effect into the sub-menu of their choice, just by writing appropriate code in the .ny file, without needing special cooperation from a re-compiled audacity executable.",-1,0.8739586472511292
853191676,2831,vsverchinsky,2022-04-19T15:10:23Z,"i say that they are orthogonal to each other. what exactly does not work here? it's opposite to what is specified in the task: author/publisher effect, sorted alphabetically by name",0,0.9900029897689819
853221417,2831,Paul-Licameli,2022-04-19T15:39:20Z,"i don't understand what is orthogonal to what. nothing. but what i say from point of view of architecture is, it's not enough that it merely looks like it works. it shoudl be properly designed for extension. then should respecify the issue. we can specify the interface of nyquist programming as we can't for the other protocols. we can and should make the effort to give nyquist programmers the ability to categorize effects as they choose.",0,0.7886216044425964
853225955,2831,Paul-Licameli,2022-04-19T15:43:46Z,i think would agree with the last point.,0,0.9636952877044678
891806765,2831,Paul-Licameli,2022-06-08T00:14:05Z,indentation?,0,0.9903632998466492
891826510,2831,Paul-Licameli,2022-06-08T01:05:44Z,"maybe another type alias `effectsmenugroup` for the element, and reuse that below",0,0.9883328080177307
891827416,2831,Paul-Licameli,2022-06-08T01:08:19Z,add a null check on `textcontent`,0,0.9950791597366333
892085765,2831,Paul-Licameli,2022-06-08T08:42:08Z,unused variable and type alias,0,0.9920364022254944
892088094,2831,Paul-Licameli,2022-06-08T08:44:22Z,"the first commit, introducing this enum and much else, is a very pleasing refactoring.",1,0.8965422511100769
892096362,2831,Paul-Licameli,2022-06-08T08:52:00Z,someone sould make the repeated '3.0.3' in this script an argument or take it from an environment variable and make it more current. not for this pr. all it does it make a comment in the generated .pot file out of date.,0,0.9789485335350037
892099188,2831,Paul-Licameli,2022-06-08T08:54:36Z,"i understand this simple rule extracts all xml content as strings to translate, but only the strings really need it, as strings not already part of the program.",0,0.9870906472206116
892106965,2831,Paul-Licameli,2022-06-08T09:01:52Z,"i tested comment extraction and it works: add to the .xml file [code block] before the ""volume and compression"" line, ran the script, confirmed that it was extracted. it seems i don't need ""i18n"". the option to xgettext may be unnecessary. include at least one example of a comment in the final version.",0,0.9693770408630371
892109489,2831,Paul-Licameli,2022-06-08T09:04:27Z,"which capitalization convention should we use? this is not like ""volume and compression"". should it have ""tempo""?",0,0.9906699657440186
892109798,2831,Paul-Licameli,2022-06-08T09:04:48Z,caps,0,0.7964485883712769
892110493,2831,Paul-Licameli,2022-06-08T09:05:34Z,caps again. up-casing all important words is what effect names have done. so i think it's right and these new names must be made consistent with it.,0,0.9725531339645386
892111053,2831,Paul-Licameli,2022-06-08T09:06:07Z,caps,0,0.7964485883712769
892111409,2831,Paul-Licameli,2022-06-08T09:06:30Z,"maybe these few effect names must be fixed, here and in the .ny files",0,0.985903263092041
892120146,2831,Paul-Licameli,2022-06-08T09:15:02Z,this function nicely encapsulates the decisions about default grouping and sorting of effects. to define some different policy in a later version should change only what happens in here. maybe a static variable can hold the results of the parse so that the .xml file need not be read more than once each session. but didn't we agree to sort effect names in each group by their translations? easily added here. did we also want to sort the groups by their translations? re-sorting of names in the statically duration results might be repeated in case the user changes languages and the menus must be rebuilt.,0,0.9743592739105225
892121650,2831,Paul-Licameli,2022-06-08T09:16:28Z,"maybe we only want to sort each list by translation, but keep the names ordered as in the resource file. whatever the decision, it is easy to change it just here.",0,0.9865656495094299
892130874,2831,Paul-Licameli,2022-06-08T09:25:32Z,"for me on mac, the sorting doesn't work. the file is at /users/paullicameli/github/audacity2/build/bin/debug/audacity.app/contents/res/effects_menu_defaults.xml the program looks for a file at /users/paullicameli/github/audacity2/build/bin/debug/audacity.app/contents/macos/res/effects_menu_defaults.xml",0,0.9934210181236267
892134314,2831,Paul-Licameli,2022-06-08T09:28:59Z,i moved the .xml to the expected place in the tree and was then able to test the changes and verify that switching grouping criteria in effects preferences does as expected.,0,0.9927640557289124
892136177,2831,Paul-Licameli,2022-06-08T09:30:50Z,"the default sorting of generators and analyzers was surprising to as we now know. whatever is right way the criteria should be changed here, it will be an easy change.",0,0.9708920121192932
893703864,2831,Paul-Licameli,2022-06-09T16:09:10Z,i see the new changes with `defaultfilter` and how `isdefaultplugin` changed. no objections.,0,0.9856197834014893
1318768364,5139,Paul-Licameli,2023-09-07T15:17:33Z,"i see a new member variable in this dialog, which is non-modal and so may live a long time between button clicks. that makes me want to examine its uses and see if instead local variables are used, or if that's not easy, then to be sure that the vector is cleared at appropriate times when the data are no longer needed.",0,0.9667506217956543
1318826550,5139,saintmatthieu,2023-09-07T16:03:34Z,"not easy: the audio is acquired in `getaudio`, and read in another method: `recalc`. see `onclosebutton()`. this pr does not change the times when memory is acquired or released.",0,0.9707613587379456
1318938323,5139,Paul-Licameli,2023-09-07T17:46:22Z,"restating my lost comment: this line is why i don't like the change. `as_size_t` has an assertion that the value of the sample count is really in the range of a `size_t`. i wasn't following the `` comment convention yet those years ago. it should be a `` now. and that means, there is burden of proof of satisfaction of the precondition at the point of the call. but i don't know what the proof is here, and i don't think there is any sufficient information to prove it. the point of commit 48aaca450b113a971a487f768c3e941accf9395a was to shift the burden of that proof instead to the places where `audiosegmentsampleview` is constructed. and note too, in that commit, the places where i added ` stretched samples in [t0, t1) can be counted in a `size_t` ` as an informal precondition, moving the burden of proof farther up. and in the next commit after that, which is ba920717e826d4a0d6b5d81436d90f6a2e8f69df, i made those try-catches of `bad_alloc` in case the precondition was not satisfied.",-1,0.5056178569793701
1318940597,5139,Paul-Licameli,2023-09-07T17:48:43Z,so i don't approve of the reversal of all of that caution that i put into an earlier commit. and i must finish my examination of this pull request to see where you use the constructor and what proof of satisfaction of the precondition is possible.,0,0.5389954447746277
1318963691,5139,Paul-Licameli,2023-09-07T18:13:00Z,"i'm not persuaded by this either. after a closer look, i think this: - only a local variable in `recalc` is necessary. - `getaudio` can return the value instead of changing a member variable. - `recalc` can call `getaudio`. both existing calls to `getaudio` can be eliminated with this change. - `drawplot` and `plotpaint` only use the number `getnumsamples(mchannelgroupsampleviews)` so instead, just store that number as a member variable each time `recalc` is called.",0,0.9377195835113525
1319189602,5139,Paul-Licameli,2023-09-07T22:55:20Z,is this calculation right? i think its 23.3 minutes,0,0.9831070899963379
1319195002,5139,Paul-Licameli,2023-09-07T23:03:00Z,do you preserve non-throwing?,0,0.9941180944442749
1319195882,5139,Paul-Licameli,2023-09-07T23:04:55Z,ok yes,0,0.9863651990890503
1319197109,5139,Paul-Licameli,2023-09-07T23:07:54Z,that should not be deleted i think,0,0.9710739850997925
1319201142,5139,Paul-Licameli,2023-09-07T23:17:19Z,"i think you are correct that you make the lifetime of sample data just the same as in the previous version. which means, the previous version didnt handle memory as efficiently as it might have and so we can improve on it now. with closer study you can find that the analyst object has all the derived data necessary to draw the plot, and the size of that is proportional only to the analysis window size (or number of frequency bins) and independent of the length of the selection, which could be large.",0,0.9288149476051331
1319206399,5139,Paul-Licameli,2023-09-07T23:30:06Z,"even numbers that do fit in a size_t can be excessive and run out of memory. there is still a bound of 64m samples and multiply that by four to get bytes. will there always be a quarter gig free? so maybe a try-catch of `bad_alloc` could happen around the allocation, like what i lately did to bullet-proof the mixer board.",0,0.9620563387870789
1319209931,5139,Paul-Licameli,2023-09-07T23:38:35Z,"this bothers me, for the same reasons that mixer board changes did, and why i cautioned about correct rms calculation in contrast.cpp. samples from neighboring clips with different stretches are treated as just one long sequence of samples as if they had the same real-time rate, ignoring stretches. is that right? for contrast i argued it was wrong: rms should be calculated for clips separately, then combined into an overall rms with the proper weighting of different clips, taking stretches into account at that point. for mixer board, it was all right if only peak values are needed, but as i have also mentioned, mixer board also does an rms calculation that can be wrong now, but fixing it is future work that needs a totally different approach anyway to get the true post-fader levels out of the audio engine. what wrong calculation could be happening here? ...",-1,0.914775550365448
1319212546,5139,Paul-Licameli,2023-09-07T23:44:56Z,"... answering that would take you into the guts of spectrumanalyst, where as i recall, values derived from many different fft windows are combined into a single window that is later plotted. as we have lately discussed, it is not wrong to take fft of pre-stretched data and assign it to the same frequency bins as for the as-rendered sound that we dont bother to calculate just yet. however... i think you would find there an assumption that all windows should be weighted equally in the combined result, but that could now be wrong with stretches. what is a test case that might demonstrate this? ...",0,0.9548670053482056
1319475109,5139,saintmatthieu,2023-09-08T07:26:59Z,"i see three stages that matter to our decision here: 1. selection sample read-out (`getaudio`) 2. calculation of spectrum (`recalc`) 3. display of result (`show`) `getaudio` itself calls `recalc`, but `recalc` can also be called independently, if there is a change of analysis parameter (window size, spectrum type, ...). the user may keep the analysis window open and change the track data, which is a nice user experience. so the time-domain audio must be kept in memory for the lifetime of the window, we cannot assume that it won't change and we can re-read it.",0,0.8707596659660339
1319484778,5139,saintmatthieu,2023-09-08T07:34:32Z,"it is correct. unusual is the left operand of the bit-shift being 2, it usually is 1 - which would then yield 23.3. changed to `1 << 27`, in case i make another push.",0,0.9939080476760864
1319559253,5139,saintmatthieu,2023-09-08T08:44:40Z,"### tl, dr: from a result point of view, imo it very marginally matters whether we pre-render or not, because of how rare use cases are where the limitation of either approach becomes a problem. (i assume that we don't put in the effort of weighting according to stretch ratio.) implementation wise, i think this one is easier, isn't it? no need to make an editable copy of the track objects, just use a different, user-friendly api (`getsampleview`). ### detail: yes, the weighting is ignored here, which might yield unexpected results if the selection is made across clips of different stretch ratios. i don't expect this to happen often, and if it does, that the stretching difference is large enough to be noticeable, but in principle, yes, either accurate, preliminary stretch-rendering, or weighting would alleviate this. i said ""accurate"" because, as we know already, the stretching algorithm is not perfect. i've done an experiment, which should serve as material for the spectrum analysis as well as the noise reduction problem. 1. i recorded myself saying ""test"" with an open mic. 2. i stretched the clip moderately, squeezing it by approx. 25%. 3. i duplicated the track for better comparison. 4. i selected a short region of background noise, 5. i rendered the stretching of that region. the project overall: ![a link] the spectrum analysis of the unrendered labeled segment (upper track): ![a link] that of the rendered segment (lower track): ![a link] (a way of superposing the spectra would be nice, like in adobe audition. we don't have this yet, do we?) for the spectrum analysis use case, i don't expect this to happen often either. it's more for the noise reduction case that this might become an issue, but i'll elaborate in that other pr.",0,0.8885282874107361
1319577448,5139,saintmatthieu,2023-09-08T09:00:35Z,"i don't think so. in either versions, before or after, the only thing it does is returning before the warning check that there aren't too many samples. but if `selcount == 0`, it means that there was no selected track in the project, and no sample was read, in which case, of course, no warning anyways.",0,0.9644773006439209
1319594996,5139,saintmatthieu,2023-09-08T09:16:35Z,"yep. `recalc` then also must return a boolean, because the follow-up code that shows the result otherwise crashes. that's not hard, commit upcoming.",0,0.9437685012817383
1319649483,5139,saintmatthieu,2023-09-08T09:59:48Z,"i don't see how it was safer before. i'm looking at this: [code block] if `audiosegmentsampleview::mlength` is `size_t`, overflow could happen in the first statement. if it takes a `samplecount`, overflow could happen in `getnumsamplesinview`. either way the overflow is caught by your try-catch. also, this would only happen in extreme cases : the mixerboard refreshes every 50ms. what stretch ratio do we need to squeeze more than 2^31 samples of audio in such a short amount of time ? possible, yet again there's the try-catch. with `samplecount`, the risk of overflow doesn't matter for this check in the next commit: [code block] but again, i didn't realize you had changed it, and didn't revert it properly as i left your comments untouched. we have a disagreement about whether this pr should go in or not, let's wait until that's settled to see if i have to clean that up.",0,0.9359645843505859
1320562896,5139,LWinterberg,2023-09-09T13:15:18Z,"""audio could not be analyzed. this may be due to a stretched clip. try resetting any stretched clips, or mixing and rendering the tracks before analyzing."" might be better",0,0.987841784954071
1321801227,5139,saintmatthieu,2023-09-11T16:29:29Z,that makes me think that we don't have an straightforward way of unstretching clips ... ticket ?,0,0.9854474067687988
1321818183,5139,Paul-Licameli,2023-09-11T16:44:03Z,you mean resetting the stretch ratio exactly to 1.,0,0.9889935851097107
1323127281,5139,Paul-Licameli,2023-09-12T14:24:17Z,"i think this other old message should be corrected to ""must have"" or maybe totally different words",0,0.970973014831543
1323132629,5139,Paul-Licameli,2023-09-12T14:27:56Z,"i see one use of `getaudio` where the return value is not checked, in `onreplot`, but i think that will work all right. the dialog remains shown but the message is shown and nothing will be analyzed.",0,0.9658397436141968
1323201527,5139,Paul-Licameli,2023-09-12T15:16:00Z,"a clip could be either ""stretched"" or ""compressed"". i'm just asking whether the wording should be more inclusive?",0,0.9923036098480225
1323202548,5139,Paul-Licameli,2023-09-12T15:16:30Z,"or should i say ""shrunk"" to avoid other confusions!",-1,0.5206890106201172
1324169545,5139,LWinterberg,2023-09-13T08:32:24Z,"""must have"" sounds good to me.",1,0.5385358929634094
1324252064,5139,saintmatthieu,2023-09-13T09:37:41Z,"it is a problem at the basis indeed, ""stretch"" meaning ""expand"" in non-technical context. not sure how to solve this :d",1,0.985248863697052
1324255884,5139,saintmatthieu,2023-09-13T09:40:41Z,addressed.,-1,0.8090953826904297
1324260553,5139,saintmatthieu,2023-09-13T09:44:35Z,"i suppose, yes: this pr doesn't change the execution sequence for the case where sequences have different sample rates. that's been working well and failure due to failing `getfloats` take the same path.",0,0.9891708493232727
1327468232,5139,Paul-Licameli,2023-09-15T15:33:59Z,but does this only appear to fix it? is the un-raised window just hiding behind the project window which you can move aside?,0,0.9926887154579163
1327518414,5139,saintmatthieu,2023-09-15T16:13:39Z,"good thinking, but i tested it and it seems like it really fixes it. could confirm ?",1,0.9878446459770203
1328737912,5139,chinakov,2023-09-18T13:36:16Z,"yes, the issue has been fixed.",0,0.9030656218528748
1394655739,5570,vsverchinsky,2023-11-15T19:01:27Z,is this file really needed here?,0,0.9917762279510498
1394665296,5570,vsverchinsky,2023-11-15T19:11:19Z,i'd much prefer it not to be an operator overload,0,0.6323015689849854
1394719512,5570,vsverchinsky,2023-11-15T19:50:05Z,"same here, single `setescapeid(wxid_no)` should do the thing",0,0.9946034550666809
1394721654,5570,vsverchinsky,2023-11-15T19:52:27Z,not used,0,0.9867091178894043
1394732539,5570,vsverchinsky,2023-11-15T20:01:58Z,shouldn't be there a way to change that in preferences dialog?,0,0.9905347228050232
1394736094,5570,vsverchinsky,2023-11-15T20:05:39Z,this file has too many whitespace changes,0,0.8182119131088257
1394736535,5570,vsverchinsky,2023-11-15T20:06:12Z,and `#include` reorderings...,0,0.9950336217880249
1394739954,5570,vsverchinsky,2023-11-15T20:10:05Z,"shouldn't we display detected bpm value in that dialog, to make user well informed about the choice? btw, i get strange results when trying to import ""big bass hit"" from musehub. it sets my project tempo to 542,373",0,0.8877092003822327
1394744351,5570,vsverchinsky,2023-11-15T20:15:09Z,`constexpr auto epsilon = std::numeric_limits ::epsilon() * mstep`?,0,0.9945034980773926
1394902678,5570,saintmatthieu,2023-11-15T22:23:23Z,"yo, me too. i messed up a constant during clean-up, fix in 6c471cd.",0,0.6587006449699402
1395341807,5570,saintmatthieu,2023-11-16T08:42:04Z,i want all chances on this library's side that it stays well formatted. but maybe it's time to check in this .clang-format in the root of the repo - i don't know of an automation that would want to reformat the entire repo.,0,0.9767494797706604
1395343428,5570,saintmatthieu,2023-11-16T08:43:27Z,why not? i find it sensible and it reads great: [code block],1,0.9922245740890503
1395357673,5570,saintmatthieu,2023-11-16T08:55:08Z,"cool, thanks!",1,0.9948582649230957
1395359797,5570,saintmatthieu,2023-11-16T08:56:45Z,"so that means that wxwidgets by default binds esc with clicking a no button ?.. anyway, thank you, it does work.",1,0.9206458330154419
1395362826,5570,saintmatthieu,2023-11-16T08:59:13Z,"we haven't discussed that with design. i would say so, only then i wouldn't know if checking ""don't ask me again"" should modify the value in that other dialog. ?",0,0.986887514591217
1395365728,5570,saintmatthieu,2023-11-16T09:01:39Z,"vscode does that for me on save. i could only stage and commit the changes that are not automatic, but we're better without those trailing whitespaces anyways.",0,0.9895881414413452
1395370500,5570,saintmatthieu,2023-11-16T09:05:33Z,"obviously devs tried to manually keep these in order, and yet it was imperfect. automatic re-ordering is painful for the reviewers when not done regularly, sorry about that, but then everyone could do it automatically and time would be spared.",-1,0.9929925203323364
1395375237,5570,saintmatthieu,2023-11-16T09:09:32Z,... pity that there isn't a `setclosebuttonid(...)` ...,-1,0.9922518134117126
1395379786,5570,saintmatthieu,2023-11-16T09:13:07Z,"i don't think this problem is related to the step size. the comment intends to give a comprehensive explanation, please let me know if there are unclarities.",0,0.9721834063529968
1432675903,5570,Paul-Licameli,2023-12-20T12:50:13Z,i'm doing some after-the-fact review of this because i need the background to understand #5791. i note the first commit in the sequence didn't build (test compilation failed),0,0.9817537665367126
1432676103,5570,Paul-Licameli,2023-12-20T12:50:23Z,not yet used,0,0.9903085827827454
1432683017,5570,Paul-Licameli,2023-12-20T12:57:11Z,second commit failed to configure the build because this file did not exist yet,0,0.9707212448120117
1432683783,5570,Paul-Licameli,2023-12-20T12:57:54Z,no banner,0,0.9672507643699646
1432684352,5570,Paul-Licameli,2023-12-20T12:58:27Z,no banner,0,0.9672507643699646
1432686076,5570,Paul-Licameli,2023-12-20T13:00:07Z,all of this could have used shuttlegui instead,0,0.9909448623657227
1432749778,5570,Paul-Licameli,2023-12-20T13:58:59Z,banners please for this and the .h file,0,0.9929447770118713
1432752464,5570,Paul-Licameli,2023-12-20T14:01:10Z,this associated empty user-visible strings with the identifiers. that's wrong. but what happened in later commits? ...,0,0.7997769713401794
1432849935,5570,Paul-Licameli,2023-12-20T15:19:09Z,"i really don't like it that lib-wave-track and lib-track have all this mention of stretches and tempos, which are extraneous to what should be lesser and more easily understood class responsibilities. it's not for you to clean up now, but along with wave clip refactoring, i want to figure out dependency inversion between lib-wave-track and lib-stretching-sequence.",-1,0.9880965948104858
1432991228,5570,Paul-Licameli,2023-12-20T17:23:35Z,this might use `foreachclip`,0,0.9952462315559387
1432999838,5570,Paul-Licameli,2023-12-20T17:32:17Z,i really dislike this added dependency,-1,0.9953493475914001
1433002947,5570,Paul-Licameli,2023-12-20T17:35:34Z,unnecessary,-1,0.580326497554779
1433003582,5570,Paul-Licameli,2023-12-20T17:36:19Z,unnecessary,-1,0.580326497554779
1433013793,5570,Paul-Licameli,2023-12-20T17:47:56Z,this assumes `newtracks` is not empty and no other subscript it used. maybe the argument should be `const tracklist &`,0,0.9931362867355347
1433016150,5570,Paul-Licameli,2023-12-20T17:50:42Z,what proves the assertion? you really rely on the weaker condition `clips.size() > 0`,0,0.9929004907608032
1433029600,5570,Paul-Licameli,2023-12-20T18:05:59Z,"ok so this commit corrects the previous, using shuttlegui. i wonder if a `populatoritem` could be used and other tricks to make the music information retrieval a non-intrusively defined module. also breaking the dependencies added in projectfilemanager.cpp.",0,0.9888006448745728
1433035410,5570,Paul-Licameli,2023-12-20T18:13:06Z,ideally wavetrack and waveclip should not mention quarter notes!,0,0.9917005896568298
1434794424,5570,saintmatthieu,2023-12-22T07:25:01Z,"maybe breaking down the wavetrack in a part that's only concerned with the horizontal arrangement of clips. this one would not need to see the stretch-related details of the clips, but i guess would essentially be concerned with boundaries. then the other part of wavetrack whose role is that of a clip container, really, which knows the stretching detail. not thought through, not much more than an intuition. will probably shatter against audacity's endless use cases.",0,0.8950625658035278
1434902548,5570,saintmatthieu,2023-12-22T09:51:29Z,"from the context: surely importing one file results in one clip, and importing more than one files, in more than one tracks each with one clip. this could be a post-condition of `importer::import` (currently not stated).",0,0.9918131828308105
1434903268,5570,saintmatthieu,2023-12-22T09:52:25Z,?,0,0.9296892285346985
1514610713,6094,saintmatthieu,2024-03-06T14:47:05Z,"the first `false` is `backup`, which is the negation of `forclipboard` in the creation of `newclip`, but always `false` here. i wonder if that's correct.",0,0.9898634552955627
1514624084,6094,saintmatthieu,2024-03-06T14:54:51Z,the execution of `rightclips();` crashes for me just when generating a mono tone: [code block] `mrightchannel` is null.,0,0.9822417497634888
1514626729,6094,saintmatthieu,2024-03-06T14:55:58Z,... as well as when generating a tone on a stereo track.,0,0.9795755743980408
1514636577,6094,saintmatthieu,2024-03-06T15:00:16Z,... i realise now that this was that way already before this commit.,0,0.8705108165740967
1514748669,6094,Paul-Licameli,2024-03-06T16:03:30Z,"so the change is conservative and if there is a bug related to this, it is not introduced herein.",0,0.9907999634742737
1514749178,6094,Paul-Licameli,2024-03-06T16:03:49Z,i'm debugging this now,0,0.9735262393951416
1519559133,6094,saintmatthieu,2024-03-11T11:21:25Z,how? by mixing left- and right?,0,0.9890235662460327
1519624083,6094,saintmatthieu,2024-03-11T12:18:17Z,i suppose that `pinterval->getclip()` never equals `nullptr` ? in which case this could reduce to `const bool selected = selectedclip == &pinterval->getclip();` - for clarity.,0,0.9922836422920227
1519650833,6094,saintmatthieu,2024-03-11T12:40:19Z,the standard guarantees that the first assignment of this line gets evaluated before the second?,0,0.9942536950111389
1519661853,6094,saintmatthieu,2024-03-11T12:49:00Z,"line 46 of this file has `using waveclipholder = std::shared_ptr ;`. is it too soon to remove this alias? i was puzzled by `auto wavetrack::rightmostornewclip() -> intervalholder`, wondering if it might return the last entry of `mclips` or if some wrapping was still necessary.",0,0.9482440948486328
1519674391,6094,saintmatthieu,2024-03-11T12:57:50Z,"i haven't commented on this in the wide-wave-track pr, but is there something that justifies `wavechannel` inheriting `widesamplesequence` conceptually?",0,0.9903574585914612
1519681959,6094,saintmatthieu,2024-03-11T13:03:12Z,the two `findclip` definitions in the anonymous namespace (at the time of writing lines 1510 and 1527) are now unused.,0,0.9938517808914185
1519682733,6094,saintmatthieu,2024-03-11T13:03:45Z,rename this `findclip` ?,0,0.9950094223022461
1519695443,6094,saintmatthieu,2024-03-11T13:13:12Z,`const`,0,0.9916640520095825
1519723038,6094,saintmatthieu,2024-03-11T13:31:31Z,will `origclip.msequences.size() == 1` after this move?,0,0.9946297407150269
1519734371,6094,saintmatthieu,2024-03-11T13:38:56Z,no need for a `transaction transaction{ *this };` in this implementation?,0,0.9946562051773071
1519760014,6094,Paul-Licameli,2024-03-11T13:53:13Z,"""discardright"" perhaps is a better name",0,0.9388693571090698
1519761971,6094,Paul-Licameli,2024-03-11T13:54:20Z,`getclip` returns a reference and & is address-of. we assume references always refer to an existing object.,0,0.9939805269241333
1519764774,6094,Paul-Licameli,2024-03-11T13:56:05Z,"it's not an assignment, it's an initialization, and surely they are evaluated in sequence.",0,0.9838367104530334
1519778791,6094,Paul-Licameli,2024-03-11T14:05:07Z,"maybe one more cleanup commit is justified, to eliminate dual terminology.",0,0.9674541354179382
1519780761,6094,Paul-Licameli,2024-03-11T14:06:23Z,i should eliminate the inheritance and see whether things still compile. but the abstract base class may be used somewhere.,0,0.9894618391990662
1519781106,6094,Paul-Licameli,2024-03-11T14:06:36Z,noted,0,0.9895713329315186
1519781664,6094,Paul-Licameli,2024-03-11T14:06:56Z,"as i said, a terminology cleanup later",0,0.9928240776062012
1519781839,6094,Paul-Licameli,2024-03-11T14:07:03Z,ok,0,0.9233372807502747
1520071479,6094,Paul-Licameli,2024-03-11T16:50:48Z,"even if this were assignment and not initialization -- the `,` as an expression operator (not as the separator of declarations) also ensures sequencing. the hazard you may be thinking of, is that in evaluation of arguments passed to a function, which are separated by commas -- then, yes, the sequence of evaluation is not specified.",0,0.9901082515716553
1520090100,6094,Paul-Licameli,2024-03-11T17:02:32Z,"not immediately. you see that this function is only called under `waveclip::splitchannels` and before it exits, it calls `makenarrow` (or whatever i rename that to be) and that visits the main clip and recursively the cutlines.",0,0.9883427023887634
1520111581,6094,Paul-Licameli,2024-03-11T17:11:57Z,"intentionally so. see #6107 which proposes a fix for the slow importing in the master branch. that fix will conflict too much with wave-clip-refactoring, so if it is merged, it should be reverted before wave-clip-refactoring is merged to master. i need an alternative fix for performance, and that is to remove the transaction. in fact i suggest #6107 also just remove it. there is strong exception safety for operations on individual sequence objects, meaning in case of exception, the previous state of the objects is restored unchanged. there is only weak exception safety for waveclip objects operating on multiple sequences, unless there is also a transaction, to handle the possibility that one sequence is updated, but an exception happens during the update of the other. each sequence remains self-consistent, but the waveclip might not achieve strong exception safety, or the ""strong invariant"" condition of equal length sequences. recall pr #6089 which you reviewed. i decided i can't easily guarantee that consistency always. it reduced the programming effort to allow append to violate the strong condition temporarily.",0,0.9416146874427795
1520113032,6094,Paul-Licameli,2024-03-11T17:12:38Z,see also the long commit on append in the header file.,0,0.9952440857887268
1521193845,6094,saintmatthieu,2024-03-12T10:10:15Z,of course - i overlooked that it returned a reference.,0,0.9714083075523376
1521200431,6094,saintmatthieu,2024-03-12T10:15:05Z,"i cannot find the standard spec for that, but it looks like you're right - from left to right.",0,0.9873436689376831
1521213261,6094,saintmatthieu,2024-03-12T10:24:37Z,ok. i didn't notice the comment line 830.,0,0.9818618297576904
1521251094,6094,saintmatthieu,2024-03-12T10:53:11Z,"i ran your branch locally to check something else, and this causes a stack overflow, calling again this `createclip` overload instead of the one below.",0,0.990453839302063
1521272157,6094,saintmatthieu,2024-03-12T11:07:10Z,doesn't `[[nodiscard]]` apply here?,0,0.9938905239105225
1521277659,6094,saintmatthieu,2024-03-12T11:11:35Z,rather `t0 clamped to sequence start time`.,0,0.9938766360282898
1521859105,6094,Paul-Licameli,2024-03-12T17:23:41Z,good idea. i'm doing that in a rebasing and squashing.,1,0.9710181355476379
936915749,3229,ksoze95,2022-08-03T16:39:58Z,could this method be made const?,0,0.9932214021682739
937641562,3229,vsverchinsky,2022-08-04T10:51:58Z,"seems so, thanks! i'll fix that",1,0.9945970773696899
937712435,3229,ksoze95,2022-08-04T12:19:14Z,i think both imageroll files could be removed as there are no longer any references to them.,0,0.9893565773963928
937729704,3229,ksoze95,2022-08-04T12:38:32Z,could this be changed to a 'const auto&'?,0,0.9942162036895752
937741750,3229,ksoze95,2022-08-04T12:50:35Z,missing include for reference to wxtheapp,0,0.9733040928840637
937744316,3229,Paul-Licameli,2022-08-04T12:53:09Z,i disagree. understand whether there are good ideas there worth revisiting before you say that. and i have never myself studied these files closely enough to answer that.,-1,0.5239458084106445
937744359,3229,ksoze95,2022-08-04T12:53:12Z,possibly change to 'const auto'. just being pedantic.,0,0.5124989151954651
937746794,3229,Paul-Licameli,2022-08-04T12:55:36Z,"imageroll.h is used by abutton. expandingtoolbar.* are the unused files. i suggest don't remove them, but maybe don't modify them except minimally to keep them compiling?",0,0.9913780689239502
937794322,3229,ksoze95,2022-08-04T13:39:44Z,this line can be removed as index is not referenced.,0,0.9947643280029297
937801681,3229,ksoze95,2022-08-04T13:44:58Z,i think begin/end could be replaced with cbegin/cend.,0,0.9854898452758789
937813371,3229,ksoze95,2022-08-04T13:53:48Z,"how about adding a pre-condition assert check before this line, an assert(seq.size() != 0)? if seq.size() is 0 and forward is false then increment will become a very large number as size_t is an unsigned number.",0,0.9932940006256104
937838048,3229,ksoze95,2022-08-04T14:12:51Z,does this function need to verify that index is valid before calling thetheme.bitmap?,0,0.9942598342895508
938808821,3229,vsverchinsky,2022-08-05T13:23:55Z,"can't be made const, it changes value later",0,0.9920148849487305
938809276,3229,vsverchinsky,2022-08-05T13:24:26Z,"right, thanks!",1,0.9598597884178162
938812912,3229,vsverchinsky,2022-08-05T13:28:22Z,"it can't be zero-sized, though it may contain nullptrs",0,0.9855791330337524
938816151,3229,vsverchinsky,2022-08-05T13:31:43Z,"there is a check inside thetheme.bitmap, but i think it's not really neccessary since all bitmap indices have names in the code",0,0.9870564937591553
938837100,3229,ksoze95,2022-08-05T13:51:12Z,"ah, i missed that.",0,0.8742367625236511
952739555,3229,Paul-Licameli,2022-08-23T14:58:14Z,this change makes a difference for windows that override `getmainwindowofcompositecontrol`. what are such windows?,0,0.9951515197753906
952743064,3229,Paul-Licameli,2022-08-23T15:00:59Z,"combos and list controls i see, but no such are used in the sidebar.",0,0.9922578930854797
952761787,3229,Paul-Licameli,2022-08-23T15:16:42Z,"this deletion requires you insert the `#include` in `expandingtoolbar.cpp` so that the commit ""abutton refactoring"" builds",0,0.9956259727478027
952763705,3229,Paul-Licameli,2022-08-23T15:18:16Z,"comment, please",0,0.9912960529327393
952767607,3229,Paul-Licameli,2022-08-23T15:21:40Z,off by one mistake -- the third argument is not `dx2 - dx1`,0,0.9322977066040039
952771193,3229,Paul-Licameli,2022-08-23T15:24:43Z,"and dx2 - dx1 may be zero or negative, in which case, skip it",0,0.9935303330421448
952778361,3229,Paul-Licameli,2022-08-23T15:30:31Z,"the commit ""realtimeeffectpanel wx*button replaced with abutton"" doesn't build. the next commit repairs that. make both build.",0,0.9943252205848694
952799755,3229,Paul-Licameli,2022-08-23T15:45:55Z,you don't add any overrides in later commits. but this change is harmless.,0,0.9925360679626465
952901248,3229,Paul-Licameli,2022-08-23T17:06:22Z,"see: [a link] i think this change may break that old bug fix, on windows though not on mac. the first window in `seq` is not a `tooldock` but the parent of one. drag all toolbars off the top dock so they float, and test it.",0,0.9935459494590759
952934819,3229,Paul-Licameli,2022-08-23T17:35:04Z,see also #3419,0,0.9939660429954529
953197798,3229,Paul-Licameli,2022-08-23T23:54:35Z,"the changes in commit ""imagerollpanel usage replaced with wxpanelwrapper"" are not necessary for this issue. not harmful either, as they remove and change two unused classes. why did you think you needed this?",0,0.9913980960845947
953204953,3229,Paul-Licameli,2022-08-24T00:13:43Z,"it seems that almost everywhere else the program handles `wxk_escape`, it's the key-down, not char event. does this matter? i don't know. if it works, ok",0,0.8568739891052246
953207044,3229,Paul-Licameli,2022-08-24T00:19:40Z,the power buttons are just `abutton` and not themable. does this matter? are the images really the same in all themes?,0,0.9931262731552124
953208553,3229,Paul-Licameli,2022-08-24T00:23:50Z,"the template `themedbuttonwrapper` is now unused at commit ""realtimeeffectpanel wx*button replaced with abutton"" while the template `themedabuttonwrapper` is only used with abutton as the template argument. i wonder if the templates are really needed then, but maybe you think there will be future uses.",0,0.9924885034561157
953555950,3229,Paul-Licameli,2022-08-24T09:16:50Z,what was the major advantage in this replacement of `wxbutton` with `abutton`? more states that can be associated with changed images? more convenient control of the button state?,0,0.9905722737312317
953582120,3229,Paul-Licameli,2022-08-24T09:41:33Z,perhaps then the name of this function should change to `processdragevent` because it no longer delays the dispatch.,0,0.9884418845176697
953613050,3229,Paul-Licameli,2022-08-24T10:13:54Z,"i was not aware that this interchange of behavior of the two buttons was specified, but it is certainly correctly implemented.",0,0.9787742495536804
953629678,3229,Paul-Licameli,2022-08-24T10:32:28Z,"this long-distance coincidence of literals here and in realtimeeffectspanel.cpp is unfortunate. maybe a named constant. also the mismatch of capitalization would make two strings in the translation catalog. the _ macro does a run-time translation. if the language preference changes, is this name reset? no. that means the screen reader might read it in the wrong language. important? maybe not enough to fix, but comment it.",-1,0.9117661714553833
953650582,3229,Paul-Licameli,2022-08-24T10:57:30Z,"i see that the template that became unused earlier now is reused. i see _ again but the template adds the handler for preference changes that updates the title. the handler for preference change in that template, and also in the `themedbuttonwrapper`, should also update the window name with the title, for the screen reader.",0,0.9929719567298889
953653634,3229,Paul-Licameli,2022-08-24T11:01:19Z,"if language is changed in preferences, this line is not visited to update the name.",0,0.9926736950874329
954859782,3229,vsverchinsky,2022-08-25T11:40:53Z,"right, but `dx2` calculation is wrong",0,0.8164777159690857
954868961,3229,vsverchinsky,2022-08-25T11:51:07Z,"thanks, will fix that",1,0.841853678226471
954909396,3229,vsverchinsky,2022-08-25T12:32:51Z,"-licameli i tested it in current master (without my changes) as you said and both top and bottom panels are focusable, so even if i revert this check in my branch it wouldn't fix the issue. also tried after configuration reset, both docks aren't empty, though they are look empty",0,0.968805193901062
954952040,3229,vsverchinsky,2022-08-25T13:13:35Z,"for same reason we are trying to avoid dependency cycles, because aliases complicates the code",0,0.9822419881820679
954961097,3229,vsverchinsky,2022-08-25T13:21:47Z,key down event delivered to the window that has focus. wxdialog handles wxk_escape same way,0,0.9928159713745117
954965577,3229,vsverchinsky,2022-08-25T13:25:32Z,"it is themable, but stored as a `abutton*`",0,0.9952093958854675
954974419,3229,vsverchinsky,2022-08-25T13:33:00Z,"native buttons are not focusable on mac until such behaviour explicitly enabled in the preferences. native buttons do not support text elision, appearance can't be customized... many reasons actually",0,0.9771896004676819
955032095,3229,vsverchinsky,2022-08-25T14:21:05Z,"as i concerned it works same way everyway, don't see why this case is special",0,0.9351954460144043
955090408,3229,Paul-Licameli,2022-08-25T15:07:57Z,"i don't understand. top or bottom panel is meant to be skipped in the ctrl-f6 cycle if there are no toolbars on the dock. are you saying that there was already a regression in this behavior, in master, for windows? if so, then don't try to fix the regression if your pr is not introducing it. there should instead be an issue which i think should not be fixed for alpha.",0,0.7084553837776184
955090913,3229,Paul-Licameli,2022-08-25T15:08:27Z,"behavior of focusing, and you know, is different across operating systems.",0,0.9728220701217651
955114655,3229,Paul-Licameli,2022-08-25T15:28:29Z,now i see and understand your rewrite.,0,0.9894317388534546
1513202051,5980,saintmatthieu,2024-03-05T17:14:04Z,minor: alphabetical order (below too),0,0.9880766868591309
1513206914,5980,saintmatthieu,2024-03-05T17:17:39Z,this is your way of not duplicating the long list of `wxdataviewctrl` ctor arguments ? :d,1,0.9812682271003723
1513241070,5980,saintmatthieu,2024-03-05T17:42:30Z,doesn't look necessary as it was already set to null a few lines above.,0,0.975205659866333
1513646478,5980,saintmatthieu,2024-03-06T00:10:07Z,most of these could be private.,0,0.9770679473876953
1513648719,5980,saintmatthieu,2024-03-06T00:14:20Z,"trying to understand these: ideally this #if would be false, so that e.g. `class plugindataviewstaterenderer final : public wxdataviewtogglerenderer` could be defined and end of story. but it's not always the case and so you need some custom implementations. are your custom implementations inferior? if not, which not just keeping them and remove the #if ?",0,0.9800887703895569
1513662956,5980,saintmatthieu,2024-03-06T00:37:58Z,"... i coincidentally found out that, in spite of this #if statement yielding true for me, there still is an available definition of `wxdataviewtextrenderer` in dvrenderers.h. so i tried to remove this #if and only keep `class plugindataviewstaterenderer final : public wxdataviewtogglerenderer` and `class plugindataviewtextrenderer final : public wxdataviewtextrenderer` and then run audacity. at first sight i don't see a difference.",0,0.8102914094924927
1513672101,5980,saintmatthieu,2024-03-06T00:53:16Z,"because i'm lazy and try to minimize the amount of code i have to review, i similarly tried to remove this class definition, just using [code block] i'm no narrator expert, but trying it out it still seemed to work. what was the motivation for this class definition?",0,0.5814877152442932
1513682311,5980,saintmatthieu,2024-03-06T01:03:21Z,not used?,0,0.992996871471405
1513682595,5980,saintmatthieu,2024-03-06T01:03:52Z,not used?,0,0.992996871471405
1513683399,5980,saintmatthieu,2024-03-06T01:05:21Z,"`clearall`, `selectall`, `enable` and `disable` not used.",0,0.9935264587402344
1513690869,5980,saintmatthieu,2024-03-06T01:18:01Z,"i don't understand why, but `eiscreating` is the only mode used in this source file.",0,0.9283574223518372
1513693970,5980,saintmatthieu,2024-03-06T01:23:35Z,a constant for this width would be nice.,0,0.9780367016792297
1513707971,5980,saintmatthieu,2024-03-06T01:48:19Z,`pm` is not used,0,0.994342565536499
1513716315,5980,saintmatthieu,2024-03-06T02:02:45Z,"i noticed (and think i remember someone else mentioning this in the ticket, maybe peter) that once this modal shows, the visible plugin items become greyed out: ![a link] i don't know why or how to fix this, but it probably would be around those lines.",-1,0.7716678380966187
1514000156,5980,vsverchinsky,2024-03-06T08:10:18Z,yes :grinning_face_with_sweat:,1,0.9546302556991577
1514046057,5980,vsverchinsky,2024-03-06T08:42:19Z,"ideally, yes. but `wxwidgets` controls are not always have same behavior across platforms. there are three different underlying types depending on target platform: generic on windows (custom implementation that doesn't use high level oss controls), gtk tree view on linux-based platforms, and `nsoutlineview` on macos. they are all react differently on user input, and not exactly as we want it to. `wxdataview*renderer` implementations are also platform-dependent, and class hierarchies they belong to are also different depending on platform. no doubt :rolling_on_the_floor_laughing: i think i answered that question?",0,0.9397913813591003
1514053962,5980,vsverchinsky,2024-03-06T08:46:14Z,"yes, i'll remove that `if` statement, thanks!",1,0.9517409801483154
1514189517,5980,saintmatthieu,2024-03-06T10:08:42Z,ack,0,0.9149930477142334
1514356065,5980,petersampsonaudacity,2024-03-06T12:08:04Z,"yes i recall that was me - but: a) i can't find where i reported it, b) i can't seem to be able to replicate it on the latest branch build for this.",0,0.9799705743789673
1514601801,5980,vsverchinsky,2024-03-06T14:41:57Z,"as matthieu accurately noticed, it seem that rows become grayed out when ""incompatible plugins"" dialog appear. in latest update i provided a hotfix which works for me. also, search when typing should now loop over the table.",0,0.9845296144485474
1514658979,5980,saintmatthieu,2024-03-06T15:11:59Z,:smiling_face_with_tear:,1,0.9111701846122742
1515978219,5980,saintmatthieu,2024-03-07T11:07:25Z,`override`,0,0.9879725575447083
1515996515,5980,saintmatthieu,2024-03-07T11:22:59Z,"either this should be an `override` or it is not used. please review this for other methods as well. that will help the review, and making as many of these `private` as possible on top of that would help even more.",0,0.993443489074707
1521311351,5980,LWinterberg,2024-03-12T11:37:43Z,"one small thing: currently, sorting by ""generator"", the ""type"" menu saying ""audacity effects""/""nyquist effects""/... is confusing, as you really are seeing something that's not an effect. can you rename them to the following instead? * audio unit * ladspa * lv2 * vst * vst3 * nyquist * native (where native is what currently is ""audacity effects"")",0,0.8821758031845093
1521323731,5980,petersampsonaudacity,2024-03-12T11:48:03Z,"good call. but for greater clarity could the ""native"" be expanded to ""**native audacity**"" ?",1,0.9680097699165344
1534045021,5980,saintmatthieu,2024-03-21T14:35:49Z,"with this change it is not guaranteed that `pluginprovidernames` and `mpluginproviderids` have equal size anymore, is it? then it is used in [code block] and i haven't yet understood what the consequences could be.",0,0.9893583059310913
1534063708,5980,saintmatthieu,2024-03-21T14:46:24Z,"all good, i didn't realize that `continue` also skipped the call to `mpluginproviderids.push_back(pluginmanager::getid(provider.get()));`.",0,0.8817170858383179
1205343881,4723,Paul-Licameli,2023-05-25T10:54:41Z,"i'm starting the review in the middle, with the commit ""remove now obsolete api methods"". it makes the most widespread changes, by changing the interface of wavetrack, and i want to understand that first as perhaps what motivates much else. my first comment: waveclip::tosequencesamples becomes unused so could be removed.",0,0.9531428217887878
1205645567,4723,Paul-Licameli,2023-05-25T14:56:50Z,should the comment instead say `scratch`?,0,0.9867701530456543
1205680309,4723,Paul-Licameli,2023-05-25T15:23:43Z,add banner comments at top,0,0.9936591982841492
1205680648,4723,Paul-Licameli,2023-05-25T15:23:59Z,add banner comments,0,0.9921122789382935
1205681130,4723,Paul-Licameli,2023-05-25T15:24:20Z,add some doxygen comments about the purpose of the class,0,0.9938802719116211
1205697376,4723,Paul-Licameli,2023-05-25T15:33:37Z,"very minor, but i think about shrinking the `sizeof` and `alignof` structs when i define them. i might think to permute the members, putting `mmaxblocksize` last. and then forget about it.",0,0.9735659956932068
1205703363,4723,Paul-Licameli,2023-05-25T15:38:38Z,"the sequence of member initializers does not agree with the sequence that the class declares the memebrs. it's legal but will compile to execute in the sequence of the members, not the sequence of the initializers seen here. some compilers warn about that. in this case it doesn't matter because there are no side effects or ordering dependencies among the initializers. but it is good habit always to make the sequences agree.",0,0.9825872778892517
1205706808,4723,Paul-Licameli,2023-05-25T15:41:14Z,"putting `numsamples`, then `format` last might shrink the `sizeof`",0,0.9927026033401489
1205711060,4723,Paul-Licameli,2023-05-25T15:44:48Z,"my preference is to use new uniform initialization syntax for members [code block] which has an advantage of disallowing narrowing conversions. but one must know about a few dangers, where you must use parentheses to disambiguate. such as, constructing a vector and specifying an initial size instead of vector contents.",0,0.9836775064468384
1205718936,4723,Paul-Licameli,2023-05-25T15:51:22Z,"the terminology throws me a bit. ""block"" is already much used in sequence itself with a different meaning, and there can be any number. but ""blocks"" here are just two. i suggest instead, ""slots"".",0,0.5195124745368958
1205734202,4723,Paul-Licameli,2023-05-25T16:04:21Z,"i think this misuses the assertion. if it's part of the contract that the getter function cannot fail, then just give it a void return. if failure is tolerable (and indeed you handle the case next), then don't assert. and i would do the latter, knowing what i do about the history. the `maythrow` arguments ultimately cause exception propagation when true in case there is some sort of disk failure. exceptions lead to a top-level handler in the program that backs out the side effects of a failed operation and restores the last good state out of undo history. see `audacityapp::onexceptioninmainloop`. but in some contexts (painting the screen) false is passed around instead to suppress exceptions, and it's expected to fill sample buffers with zero and give that to painting. failure conditions because of exogenous device problems or corrupted files are contingencies to be handled, and it is not proper to assert that they never happen. as i said, i don't like new assertions that have no accompanying comments anywhere, unless they are in the middle of the function and very easy to deduce as always correct in the context. a new assertion should mean ""this condition was provable at the time the assertion was written."" you should know, and persuade your reviewer too, that assertion failure is logically impossible at the time you add the assertion. i see assertions as a kind of documentation to aid the reader in reasoning about correctness, not just there for their runtime effects in debug builds. now maybe later code modification breaks the proof because it is hard to maintain all the consistency. that's when the runtime effect of assertions is also valuable.",0,0.9560792446136475
1205739360,4723,Paul-Licameli,2023-05-25T16:08:57Z,"this is ""lru"", isn't it? least-recently-used.",-1,0.8254898190498352
1205742544,4723,Paul-Licameli,2023-05-25T16:11:40Z,"maybe `memcpy` instead, or maybe compilers are smart enough to make that optimization",0,0.9861937165260315
1205762304,4723,Paul-Licameli,2023-05-25T16:28:58Z,"i have now read all of this replacement for `sampletrackcache`. that class had many more complications that i wrote long ago and reviewed again just today. did you read and understand all of it? i don't ask to reproduce all of those, yet.. like this cache, that one was meant to work best with a pattern of fetching from successive sample offsets. many small fetches then would not be punished with repeated database queries. unlike this, that one also allowed for efficient, sequentially backward fetches, as might also happen in scrubbing. also unlike this, that one had awareness of the underlying block boundaries within the sequence and adjusted its caching pre-fetch sizes accordingly. but that is lost with the simplifications here. removing the complications of best and ideal block sizes from wavetrack and waveclip interfaces still seems a good idea to me, cleaning up those abstractions, but now that the new cache can cooperate more intimately with sequence, it should still implement similar logic to align its prefetches to the underlying sequence blocks. also unlike this, sampletrackcache maintained two buffers and could satisfy a request partly from each. so suppose two buffers equal to the maximum block size. so suppose only the maximum block size is exposed by wavetrack as a preferred size for sequential fetches, and suppose an effect does just that. (let's neglect time stretching). still the request might not align to the actual blocks, because of the history of cuts and pastes causing some under-sized blocks, or because some starting point was chosen without regard to alignment. but maintaining two buffers would still reduce the number of database queries. a request for the maximum block size might be filled partly by one slot, then partly by the other, but then also the remainder of the other slot is available to satisfy the next request without again invoking the getter function. in other words -- without reproducing all complications of `sampletrackcache`, still i would rewrite the above to loop, filling alternate slots, then copying to the out buffer, until satisfying the total request.",0,0.8809841871261597
1205790883,4723,Paul-Licameli,2023-05-25T16:54:31Z,"as we discussed, a question is whether the cache is invalidated in sufficient places. the cache depends on mnumsamples and mmaxsamples, so it should be invalidated at least when either of those changes. (though also when contents change). i haven't studied the later commits, but even this one is incomplete by that criterion. `mmaxsamples` can change in `converttosampleformat`. (also `handlexmltag`, but that is deserialization of the structure from disk, so in fact just one initialization of the cache at the end of `handlexmlendtag` is sufficient.) `mnumsamples` may change where `appendblock` is called -- surprise!, the third argument is a reference. also in `paste`, `delete`. also `commitchangesifconsistent`, `appendblocksifconsistent` but you covered those.",0,0.9872344136238098
1205795533,4723,Paul-Licameli,2023-05-25T16:59:04Z,or not make this file ... ?,0,0.9894146919250488
1205799209,4723,Paul-Licameli,2023-05-25T17:02:52Z,"... or don't make a separate file? you made this cache separate from sequence and used a std::function callback -- were you thinking of avoiding dependency cycle? yes, it avoids the cycle between two translation units. but now i think it could be quite proper for sequence and its cache to cooperate intimately, each class using the other's interface directly, and one a friend of the other -- and so, put them all just in sequence.* avoidance of dependency cycles is desirable in the graph if `#include`s relating translation units. but it's not necessary at the level of closely cooperating classes, like containers and their iterators.",0,0.9675897359848022
1205801116,4723,Paul-Licameli,2023-05-25T17:04:49Z,surely this functiion served little purpose,0,0.7264388203620911
1205801772,4723,crsib,2023-05-25T17:05:33Z,and the next thing is we spend time splitting classes into different headers/translation units :-),0,0.9883832335472107
1205802581,4723,Paul-Licameli,2023-05-25T17:06:34Z,"finally i reach the commit that deletes the two functions above, and much else. as i already explained, i don't like these deletions from sequence. i think some valuable old logic for alignment of cache fetches is lost. i think these two functions at least should be retained, and they should be private, but the cache of the sequence should be a friend or a nested class.",-1,0.612707257270813
1205807611,4723,Paul-Licameli,2023-05-25T17:12:08Z,"why are there now const and non-const overrides? this suggests the query might mutate the track. i think `getidealblocksize` was erroneously non-const, and you just made a global search and replace?",0,0.9906365275382996
1205818968,4723,Paul-Licameli,2023-05-25T17:25:02Z,"`tosequencesamples` can be removed, as now unused -- and then `getsequencestartsample` is also unused, so delete it too",0,0.9917900562286377
1205826739,4723,Paul-Licameli,2023-05-25T17:33:25Z,"this change is incorrect! removing the use of `getbestblocksize` is all right, but not removing the call to `limitsamplebuffersize`, which makes sure that the last fetch does not exceed the intended range of the sequence.",0,0.5713337659835815
1205829796,4723,Paul-Licameli,2023-05-25T17:36:46Z,"we split lots of old legacy code that combined ui and internals carelessly and was generally written without regard to proper dependency cycle management. this case isn't like that. but are you thinking of some generalized abstract, polymorphic sequence? i think you hinted at that and i don't undertand you yet.",0,0.9644706845283508
1205833573,4723,Paul-Licameli,2023-05-25T17:40:44Z,"also incorrect to remove `limitsamplebuffersize` here, though this is experimental code unreachable in the release build.",0,0.9562957286834717
1205868786,4723,Paul-Licameli,2023-05-25T18:20:30Z,"i don't like this solution to the invalidation problem. distinguishing abstract sequenceinterface, and making this decorator, seems to me, excessive complication for the problem. i would rather, as i said, let the sequence and its cache be closely cooperating classes in one translation unit, and just invalidate the cache in all mutating member functions of sequence. there would be little need to disturb other code outside of sequence. this commit does add a lazy creation-on-demand of the cache when getting from the sequence -- that part is good. putting sufficient invalidations into sequence.cpp so that we can examine it in isolation and be confident of cache correctness -- that is good. still there might be the other problem of ""eviction."" reclaiming the memory resources of the cache when it's not good to occupy them. the old caches were short-lived -- they disappeared after rendering a spectrogram, or after destroying a mixer object. the new caches are internal cursors of sequences, and might be more numerous than before, as they become per-clip and not per-track, and are not local variables in appropriate scopes. sequence (and therefore waveclip, and therefore wavetrack) might therefore benefit by exposing a `clearcaches` function that the application can decide to call in certain contexts. i would at least be sure to empty the caches of the duplicate tracks that are in the undo stack -- both when creating undo states, and also when duplicating tracks out of the undo state. actually that might even require a pure virtual function in track for cache clearing. see `tracklistrestorer` where the duplications happen.",-1,0.8765921592712402
1206367716,4723,saintmatthieu,2023-05-26T07:51:35Z,"missed that, thanks.",1,0.8839835524559021
1469503561,5900,Paul-Licameli,2024-01-29T12:13:23Z,what happens if you swap channels?,0,0.9858223795890808
1469505759,5900,Paul-Licameli,2024-01-29T12:15:30Z,"this commit is strange. as i said i don't like it that lib-wave-track mentions extraneous things like quarter notes and stretch ratios, and now this is one more thing. i might figure out a restructuring in my branch. why can't a track or clip simply publish whenever it changes, and have subscribers attached to it? why must you first set a publishing interface into it?",-1,0.9862619042396545
1469512254,5900,Paul-Licameli,2024-01-29T12:21:13Z,i think this function should be moved into `wavetrackaffordancecontrols.cpp` which is the sole user of it.,0,0.9860844016075134
1469517737,5900,Paul-Licameli,2024-01-29T12:26:13Z,repeated expression could be `textwidth`,0,0.9938740134239197
1469520861,5900,Paul-Licameli,2024-01-29T12:29:08Z,"seeing this commit that again changes what is painted in the affordance area -- i say again: add it to the qa checklist, that it should be tested with a right-to-left language, hebrew or arabic.",0,0.9862418174743652
1469524140,5900,Paul-Licameli,2024-01-29T12:32:08Z,"should you always draw that bitmap, or not in case you reassigned 0 to iconwidth?",0,0.9923607707023621
1469525197,5900,Paul-Licameli,2024-01-29T12:33:02Z,"oh i see the early return did that, but i found it a bit non obvious",0,0.9823850989341736
1469564845,5900,Paul-Licameli,2024-01-29T13:04:59Z,"those classes look nice, but i'd rather you just follow conventional use of shuttlegui for bracketing things.",0,0.8527498841285706
1469748882,5900,saintmatthieu,2024-01-29T15:17:12Z,"this method is called when preparing tracks for playback. during playback, swapping channels isn't possible. after playback, the publisher will have expired, so swapping channels wouldn't have consequence.",0,0.9943631887435913
1469758511,5900,saintmatthieu,2024-01-29T15:22:50Z,"the publisher is updated by the stretching sequence, before playback, and gets destroyed after playback. but i'll try the approach you suggest.",0,0.9933699369430542
1469802041,5900,saintmatthieu,2024-01-29T15:50:32Z,"it helped me when i had to change things around, and i think it would also have helped me when i looked at this source file the first time and was trying to figure out how it all worked.",1,0.6183645129203796
1470947060,5900,Paul-Licameli,2024-01-30T10:14:03Z,"two octaves down, five octaves up -- might comment somewhere that these are the bounds. maybe more prominently in the header file.",0,0.9868554472923279
1470976230,5900,Paul-Licameli,2024-01-30T10:33:13Z,this does not impose the limits on pitch shift that the dialog does.,0,0.9620122313499451
1470979991,5900,Paul-Licameli,2024-01-30T10:36:04Z,it's a little strange that this is a member function of a ui object (representing a certain rectangle of the screen). can't it simply be a non-member function?,-1,0.5544307231903076
1470988759,5900,Paul-Licameli,2024-01-30T10:41:58Z,"i really dislike this entire commit -- adding mutability. let it stand, but i may explain the alternative with another suggested commit.",-1,0.9911912083625793
1470994406,5900,Paul-Licameli,2024-01-30T10:46:10Z,why remove `const`? that's not necessary and having it here is useful information to a maintainer.,0,0.9905140399932861
1471005943,5900,saintmatthieu,2024-01-30T10:53:00Z,"looks good to me - see ""use observer framework"" commit",1,0.7438156604766846
1471008213,5900,Paul-Licameli,2024-01-30T10:54:44Z,"oh, now i see at this commit why the member becomes non-const. consider using the utility `atomicuniquepointer` instead of a mutex.",0,0.9914942979812622
1471009027,5900,saintmatthieu,2024-01-30T10:55:22Z,adding a comment.,0,0.9923937320709229
1471013962,5900,saintmatthieu,2024-01-30T10:59:00Z,looks indeed like it should.,0,0.9595310688018799
1471017220,5900,Paul-Licameli,2024-01-30T11:01:30Z,or just `std::mem_fn`,0,0.9941593408584595
1471019626,5900,Paul-Licameli,2024-01-30T11:03:29Z,it seems you are reinventing the publisher utility and i don't know why.,0,0.747840940952301
1471022902,5900,Paul-Licameli,2024-01-30T11:05:35Z,"i think `mpropagators` never gets size more than 1, so why a vector?",0,0.9853223562240601
1471026000,5900,saintmatthieu,2024-01-30T11:08:26Z,"... there is the call to `findtrack`, though, which is a member method. i haven't understood yet under what conditions it may cause an early return. making that method const, at least, is a no-brainer.",0,0.9795969724655151
1471046003,5900,saintmatthieu,2024-01-30T11:23:21Z,"ok, found something better. coming up...",0,0.9261989593505859
1471057959,5900,saintmatthieu,2024-01-30T11:34:18Z,"i don't think an atomic would be helpful here, since it's not only just the reallocation of the object that must be synchronized. remember that comment in sp: [code block]",0,0.9822995066642761
1471058961,5900,saintmatthieu,2024-01-30T11:35:15Z,"it's outdated now, through the use of `observer`.",0,0.9898959398269653
1471074098,5900,Paul-Licameli,2024-01-30T11:49:30Z,"but there is just too much weirdness and reinvention going on, as i said. what i think you should do: make `clipinterface` inherit `observer::publisher ` (or maybe some distinct struct type `pitchratio` just containing a double). ~~a `using` declaration to make `publish()` public.~~ never mind, i think it's not needed ~~a pure virtual `dopublish(double)`.~~ ~~`wideclip` overrides that to do the work.~~",0,0.5920366644859314
1471080225,5900,saintmatthieu,2024-01-30T11:55:07Z,"you may ignore most of a9752ac3a7431db60b6742de5ae9a5b5281ea104 and 250725b5876d32aa78c9114af86f0dff36d0fe24, as i did in a recent commit put in place almost exactly what you described. see, too, that this change is outdated.",0,0.988402783870697
1471087557,5900,Paul-Licameli,2024-01-30T12:01:46Z,"the constructor of `clipsegment` isn't passed a function that does subscription. it is just passed a reference to `observer::publisher `. that reference can be stored in `staffpadtimeandpitch::parameters`. then `staffpadtimeandpitch` in its constructor simply subscribes to the publisher, passing in that lambda, and holding the `subscription` object which is a sort of smart, weak pointer representing the connection between publisher and subscriber.",0,0.9908343553543091
1471089889,5900,Paul-Licameli,2024-01-30T12:03:29Z,"there are multiple threads involved here, and that means some caution in the use of `observer`. creating and destroying subscriptions, or destroying the publisher before the subscription that it gave out, is safe so long as it is all in the main thread. publishing from other threads will be safe so long as the callback does not itself cause subscriptions to be created or destroyed. i think that applies.",0,0.9871304631233215
1471093707,5900,Paul-Licameli,2024-01-30T12:04:58Z,where is publish called then?,0,0.9929406642913818
1471099637,5900,Paul-Licameli,2024-01-30T12:09:42Z,"i looked through this confusing stuff again, and now i see, ultimately it's in `waveclip::setsemitoneshift` so then, that can simply call the inherited `publish`",0,0.9622538685798645
1471356772,5900,saintmatthieu,2024-01-30T14:44:11Z,"incidentally, here it's the other way round: subscription creation and destruction is done on the audio thread ; publication on the main thread. just took a look at some of the observer implementation, couldn't see thread unsafety (but i haven't strained myself too much). also tried a worst-case scenario, with very fast subscription creation and destructions, concurrently with very fast publications. couldn't get the program to behave incorrectly, which is more evidence that i can take your word for it.",0,0.9685873985290527
1471400021,5900,Paul-Licameli,2024-01-30T15:07:51Z,that inverse pattern should be safe too. is there no way to lift the making and destroying of subscriptions to the main thread? shared and weak pointers manage the shared state in a thread safe way  but provided each thread uses different pointer objects. it is possible to have races in the use of the identical pointer object in two threads. dont do that. observer uses weak pointers.,0,0.9923884272575378
1471400999,5900,Paul-Licameli,2024-01-30T15:08:14Z,the thread safety issue should be commented!,0,0.9872878789901733
1471536711,5900,saintmatthieu,2024-01-30T16:17:22Z,will do.,0,0.9465230703353882
1808822922,7590,LWinterberg,2024-10-21T13:26:15Z,good lord finally,1,0.9917743802070618
1808833126,7590,igorkorsukov,2024-10-21T13:31:40Z,it should probably just be `win`,0,0.9866770505905151
1808833935,7590,kryksyh,2024-10-21T13:32:07Z,"while we are at it, would you mind adding cmakeuserpresets.json? see [a link] for au3 or we could do that within another pr",0,0.99347323179245
1808835820,7590,kryksyh,2024-10-21T13:33:09Z,does this break anything on mac/lin?,0,0.9867807030677795
1808835918,7590,igorkorsukov,2024-10-21T13:33:12Z,"i think there is no need to perform the building and installation itself, it is enough to just configure the project to generate .sln",0,0.980575442314148
1808838401,7590,kryksyh,2024-10-21T13:34:40Z,should we hardcode vs version? i'm using 2022,0,0.9950163960456848
1808841644,7590,igorkorsukov,2024-10-21T13:36:33Z,"developer - i think we need to think of another name, its not clear what it is and where it comes from i think we need to check the name of the cmake generator or something like this: vs_cmake_generator",0,0.9888005256652832
1808841948,7590,kryksyh,2024-10-21T13:36:44Z,do we need it hardcoded here? i believe that it can be detected automatically.,0,0.9934355020523071
1808842616,7590,kryksyh,2024-10-21T13:37:07Z,some files are missing newlines,0,0.9768449068069458
1808846359,7590,igorkorsukov,2024-10-21T13:39:01Z,"i see that this is also used for vscode, then we still need to think about a good name.",0,0.9873442649841309
1808846682,7590,kryksyh,2024-10-21T13:39:11Z,"does vscode not obey ""insert_final_newline"" for .editorconfig?",0,0.9944091439247131
1808851628,7590,kryksyh,2024-10-21T13:41:49Z,"shouldn't we add ""synthwave '84"" theme with glow enabled to the list of recommendations? (jk)",0,0.9871079325675964
1809203492,7590,igorkorsukov,2024-10-21T17:13:56Z,it would probably be better to use something like this.. ${env:qtdir},0,0.9899953603744507
1809204390,7590,igorkorsukov,2024-10-21T17:14:43Z,better to use qtdir,0,0.9909645318984985
1809206333,7590,igorkorsukov,2024-10-21T17:16:18Z,developer.bat - i think it would be better to call it something like `make_sln.bat` or `generate_sln.bat`,0,0.990984320640564
1810137039,7590,igorkorsukov,2024-10-22T07:43:16Z,found that this is an internal name in vsode,0,0.992668092250824
1810148634,7590,igorkorsukov,2024-10-22T07:49:57Z,"as far as i can see, this is (c_cpp_properties.json) an automatically created file, it is better to add it to gitignore.",0,0.9933438301086426
1810223544,7590,igorkorsukov,2024-10-22T08:27:58Z,"probably there should be not a build here, but an install. suggested that we can just do `cmake: install`, and not add a task file.",0,0.9910202622413635
1810226279,7590,igorkorsukov,2024-10-22T08:29:31Z,"it is better to simply write in the instructions (and when trying to configure it, it is indicated) that us need to add qt to the path",0,0.9913839101791382
1810349169,7590,saintmatthieu,2024-10-22T09:27:12Z,"you see, i missed that. will consider it for this pr.",0,0.962894082069397
1810378091,7590,saintmatthieu,2024-10-22T09:42:43Z,"the proposed approach in this pr is to add an audacity-target post-build step to copy the executable to the install directory. if you just build audacity without building install first, it will copy it, it will be alone in its `install/bin`.",0,0.9939091205596924
1810387724,7590,saintmatthieu,2024-10-22T09:48:19Z,"can we ensure a vs generator without specifying the version? i'd gladly remove this flag, but if i do, i don't know what ensures that it will pick a visual studio generator.",0,0.9867126941680908
1810408519,7590,saintmatthieu,2024-10-22T10:01:01Z,"the only solution i've found to that is a bit complicated, but maybe worth using: [code block]",0,0.9681206941604614
1810434420,7590,saintmatthieu,2024-10-22T10:12:46Z,"i just realize that the `msvc` check is sufficient for this part of the configuration (configuring the debugging command correctly). this then leaves the `developer` flag to adding the post-build step to copy the executable to the install directory, which we can still discuss if we want this at all.",0,0.9909147024154663
1810438749,7590,saintmatthieu,2024-10-22T10:14:34Z,probably.,0,0.9442833065986633
1810442011,7590,saintmatthieu,2024-10-22T10:16:22Z,"the `includepath`, adding the qtdir, isn't default and it's something i enjoy. once the file is created, i'm not sure it gets modified. i suggest we give it a try and re-assess if we see that it does and it becomes a nuisance.",0,0.6578311920166016
1810443773,7590,saintmatthieu,2024-10-22T10:17:44Z,"we have this: [code block] are the missing newlines an issue, though?",0,0.9930216670036316
1810444917,7590,saintmatthieu,2024-10-22T10:18:35Z,"we should recommend the uncrustify extension, though. will add.",0,0.9949475526809692
1810446260,7590,igorkorsukov,2024-10-22T10:19:38Z,"if we decide to keep the copy step, let's name the flag something like: `optimized_deploy`",0,0.9933865666389465
1810446665,7590,saintmatthieu,2024-10-22T10:19:57Z,i don't know. does it work well with doki-theme?,0,0.9667843580245972
1810452407,7590,saintmatthieu,2024-10-22T10:23:58Z,of course.,0,0.9627540707588196
1810454891,7590,igorkorsukov,2024-10-22T10:25:31Z,i believe we can add qt to the include path in our cmake files. although it's strange that i didn't need it in my example... maybe because i have qt in the path,0,0.9733595252037048
1810482616,7590,saintmatthieu,2024-10-22T10:44:05Z,"in fact, i think we can get rid of this entry altogether. i expect cmake will query the qtdir env variable by default, and we do expect contributors to have this set.",0,0.9911575317382812
1810504930,7590,saintmatthieu,2024-10-22T10:59:04Z,"mh. for some reason that qml language server doesn't find the executable when i use `${env:qmldir}`. i have proof that my `${env:qmldir}` is set properly, so don't know what's wrong. anyway, the whole path should be made platform-independent - macos probably will the server executable in some other place. also, i haven't been able to configure the language server properly for my very machine. it doesn't manage to resolve the muse qml modules, maybe because it excludes the `_deps` directory? i'm not sure. for now i think i'll remove that extension recommendation as well as these configs. maybe someone else will have more success at some stage.",0,0.7423585653305054
1810516412,7590,saintmatthieu,2024-10-22T11:07:41Z,i agree. it's nostalgia: my previous company had it named that way. i also like the idea of a developer :bat:,1,0.9864845871925354
1810517150,7590,saintmatthieu,2024-10-22T11:07:57Z,generate_sln sounds good.,0,0.56703782081604
1810527189,7590,saintmatthieu,2024-10-22T11:15:50Z,"this works because of the post-build task in the cmakelists that gets the executable copied to the install dir. having `install` as pre-launch task has for consequence that each time you launch after having modified the source code, the install target gets executed and, even if it's not the first time, just the check that everything (except audacity.exe) is up-to-date takes at least a couple of seconds. on the other hand, for fast onboarding, what you suggest would be easier: the user wouldn't have to build the install target manually once. but we can propose two launch tasks: the one you suggest and make it the default one, and for power users, the present one.",0,0.9901927709579468
1810556698,7590,saintmatthieu,2024-10-22T11:36:12Z,"i'm confused. now it's super fast for me even with install. ok for your proposal, then.",-1,0.7415468692779541
1810573543,7590,saintmatthieu,2024-10-22T11:48:53Z,"consequently with [a link], i'll remove.",0,0.9927813410758972
1810576580,7590,saintmatthieu,2024-10-22T11:51:07Z,"sorry, no, it still is needed for visual studio, which doesn't have pre-launch tasks afaik.",-1,0.9689314961433411
1810581591,7590,saintmatthieu,2024-10-22T11:53:58Z,... but then it's not so much a matter of optimizing deployment anymore. `copy_to_install` ? doesn't say everything but it gives a good clue.,0,0.9730087518692017
1810583952,7590,saintmatthieu,2024-10-22T11:55:36Z,"... or maybe we can just add that post-build step just if `msvc`. won't hurt ci anyway, as it uses ninja. then no need for that extra flag.",0,0.9788690209388733
1810596898,7590,igorkorsukov,2024-10-22T12:04:42Z,`developer.bat` -> `generate_sln.bat`,0,0.9917827844619751
1810764230,7590,kryksyh,2024-10-22T13:46:49Z,"i see, we can give it a shot. one thing though, it should be `%programfiles(x86)%` instead of `c:\program files (x86)`",0,0.95872962474823
1810784241,7590,kryksyh,2024-10-22T13:57:26Z,"it's not that important, it's just the way it's done historically. and without a newline, some command line tools can misbehave. for example if you `cat file` the prompt will be printed on the same line as the last line from the file",0,0.9648249745368958
1810789371,7590,igorkorsukov,2024-10-22T14:00:04Z,`copy_to_install` - acceptable for me,0,0.9896005988121033
1810803346,7590,kryksyh,2024-10-22T14:07:41Z,unfortunately not :(,-1,0.9938964247703552
686270150,1377,Paul-Licameli,2021-08-10T19:41:59Z,"this enumeration persists with the attribute name ""linked"" both before and after your changes. so consider the problems of downgrade (3.1 file opened in 3.0.x) and the opposite problem of upgrade. downgrade is all right because any non-zero value in the file will become boolean ""true"" so that preserves whether the track is a left channel of a pair, or not. upgrade is more complicated. as it is written now, stereo tracks saved in 3.0.x always load as ""group"" meaning in the (usual?) case of clips all aligned between tracks, drag bars will appear on the right, because boolean true was saved and is now interpreted as 1. you could swap group and aligned, but that only makes the opposite problem in the (less usual?) case that a file was saved with non-aligned clips, which should show right channel drag bars but will not. the complete solution? make 1 a reserved ""legacy"" value. enlarge track::linkconsistencycheck() so it detects numerically whether clips correspond between channels, and change ""legacy"" to group or aligned. and of course linkconsistencycheck must become a virtual function so track does not depend on wavetrack, and the override for wavetrack must also call-through to the base class method.",0,0.9865671992301941
686275315,1377,Paul-Licameli,2021-08-10T19:50:45Z,"will the linktype enumeration need more values in future versions of audacity? maybe. so consider, what if we are loading a future file, and there is a value not within the existing linktype enumeration of audacity 3.1? the future value must be corrected to one of the known values, or loading the file should abort. if aborting isn't acceptable, what's the best guess we can make now about future designs we haven't done yet? a crazy question maybe, but we have to decide something now. and i would say: assume the unknown value can map to ""aligned"" which is the expected usual case. (what if the guess is wrong? then audacity 3.1 ought to have some way to let the user correct the situation, changing incorrectly ""aligned"" tracks to ""grouped"" with something in the drop-down menu of the track control panel. is that in the scope of this issue? no, so don't act on this suggestion yet. but we should argue it in the next design review.)",0,0.8106690645217896
686333838,1377,vsverchinsky,2021-08-10T21:26:51Z,"it's quite strange solution i would say, why do you expect that file loaded from old project and having corresponding clip borders should be without affordances on the right channel (remember that with affordances both cases are valid)? why not we remove them when clips are aligned at runtime then, or check this condition after merging tracks? seems like it's another question for ux experts. i don't like idea of linkconsistencycheck changing object state at all, now it's just make state somewhat cosistent, i can understand that, but i don't see any reason to prefer 'aligned' over 'grouped'",-1,0.9683115482330322
686344936,1377,vsverchinsky,2021-08-10T21:48:51Z,"i didn't see that enum (or boolean value in the past) beeing used somewhere except wavetrack context actually. and i don't see any sense in linking label tracks for example (maybe we would find use for this in future, but that's a speculation). and note that value is loaded/stored in wavetrack but belongs to the track class. that's why i don't like modifying meaning of existing entities :) but make sense to me, and... 'aligned' is more strict condition compared to 'grouped', and 'grouped' is stricter than 'none', and who knows which type of link we would decide to have in future (maybe we'll remove it all), but droping to 'none' is the safest option here i think. also there is a version check exist for project files",1,0.9656860828399658
686397658,1377,Paul-Licameli,2021-08-10T23:59:00Z,"if a file is loaded from an old project, and all clip borders do correspond, as would be usual -- do you think it is better there are affordances on the right? wouldn't the user instead want them removed? but then, how could they be removed, once they are present? ""why don't we remove them when clips are aligned at runtime then, or check this condition after merging tracks?"" maybe that won't be done automatically, but maybe the choice to do it if possible, should also be given to the user. for instance, what happens if you record a stereo track, split it, do nothing else (or do edits that don't affect clip boundaries), then join channels again? affordances enter the right track, and can never go away again. i think that is a gap in the design. i think the problem of writing the function that will detect that affordances can be removed is a problem that will need to be solved.",0,0.9729604125022888
686399770,1377,Paul-Licameli,2021-08-11T00:05:19Z,"there is a version check, but audacity has very rarely made incompatible changes in version, and i don't know yet that we will decide to do so. maybe you have the better argument, that if there is an unknonwn future value for this field read into version 3.1 -- then the worst assumptions should be made, and it should be corrected to none not aligned. if that is wrong, let the user join mono channels back into stereo. (ah, but again -- should they have a choice to make the stereo tracks aligned not simply grouped?) but the larger point remains: sometihing must be done in 3.1 at load time, to be sure that the value read from the file maps to some valid value of the small enumeration of three values. that isn't done yet here.",0,0.9210638999938965
686402373,1377,Paul-Licameli,2021-08-11T00:12:48Z,"how do you like this idea instead: the enumeration does have four values, not three. the new values are 2 and 3. old files may have the value 1. linkconsistencycheck will correct 1 to 2 or 3. it can simply correct 1 always to group (which is now 2). but if after testing we decide that a more complicated procedure is needed to correct the value -- then we will do that, and we have already prepared by reserving 1 for the old, un-corrected value, distinct from the two new values.",0,0.9812920093536377
686408968,1377,Paul-Licameli,2021-08-11T00:33:36Z,"lines were permuted in this header file, making the diff bigger than necessary and a little more difficult to review.",0,0.9656513929367065
686411812,1377,Paul-Licameli,2021-08-11T00:43:01Z,"i explained that previous work aimed to remove the assumption that the number of channels in a group of tracks is at most two in as many places as possible. these changes suggest, unfortunately, a regression of that work which goes beyond what i expected to happen. you may have a justification. what is it?",0,0.5631916522979736
686417274,1377,Paul-Licameli,2021-08-11T00:59:25Z,"everywhere, groupchannels is eliminated and replaced instead with linkchannels or unlinkchannels. i think this is unnecessary, and again, a regression of the previous work at possible generalization for the future to more than two channels.",0,0.9862858653068542
686419229,1377,Paul-Licameli,2021-08-11T01:05:23Z,haslinkedtrack() replaces getlinked() when used as just a boolean. i explained that i made sure getlinked() was a private function when i rewrote all the old code. haslinkedtrack() should also be private. i checked that the code still compiles if it is.,0,0.993043065071106
686421552,1377,Paul-Licameli,2021-08-11T01:12:45Z,"rather than eliminating groupchannels and replacing it with two functions -- preserve groupchannels. keep the argument for number of channels. the third argument was never non-default -- very well, remove it, but replace with the new argument that specifies whether to align or not, in the case of more than one channel. then write the body of groupchannels on the assumption that the number of channels to be grouped is not necessarily two or less.",0,0.9920257925987244
686423041,1377,Paul-Licameli,2021-08-11T01:17:17Z,note that this was one of only two places where groupchannels might be called with more than two -- importing.,0,0.9917962551116943
686424283,1377,Paul-Licameli,2021-08-11T01:21:19Z,note that this is the second of only two places where groupchannels could be called with more than two channels -- recording. there is in fact not yet support for more-than-stereo tracks. calling groupchannels with more than two made all mono tracks -- an implementation detail that could be changed in the future. but it's the right abstraction to have these places that make possibly more-than-stereo tracks -- and we leave it to the details of the tracklist implementation to decide how to deal with that.,0,0.9878540635108948
686466414,1377,Paul-Licameli,2021-08-11T03:35:38Z,"i see a minor consequence, that if a track ever needs an affordance, but later no longer needs it (as when swapping stereo channels) -- then the affordance control is not deleted until the track is. not very important.",0,0.9780434370040894
686466695,1377,Paul-Licameli,2021-08-11T03:36:47Z,"not necessary for this issue, but good, that you take the unnecessary pointer to an affordance out of the base class trackview and put it only in the subclasses that need it.",0,0.6552155613899231
686472608,1377,Paul-Licameli,2021-08-11T03:57:04Z,this is private. keep it so. tracklist::findleader() is for public use.,0,0.9954108595848083
686473027,1377,Paul-Licameli,2021-08-11T03:58:24Z,"replace ""previous one"" with ""its leader"" and this comment is not objectionable. but i still strongly disagree with the unnecessary disturbance of the places that called groupchannels().",0,0.5713995695114136
686475659,1377,Paul-Licameli,2021-08-11T04:07:31Z,"really, no. i don't like this part. leave as it was: one function, not two functions, with an interface equipped to make channel groups of any size, even though this isn't yet fully implemented. just add an argument for ""alignment"" or not. update function comments to say ""alignment"" has no effect when there is just one channel; and that grouping past two is not necessarily implemented yet, but the interface is presented.",-1,0.9910194277763367
686479785,1377,Paul-Licameli,2021-08-11T04:21:30Z,i do like the name changes making this line read less strangely. that's all for reviewing this pr.,1,0.871516227722168
686724799,1377,vsverchinsky,2021-08-11T11:02:52Z,"they can't be removed ![a link] i think that it's safest assumption (keep things as they were before) well maybe, but that was not declared in the scope of work for this task",0,0.8554933667182922
686745202,1377,vsverchinsky,2021-08-11T11:35:49Z,"i was studying what groupchannel does for multi-channel tracks and came to conclusion that it does almost nothing: beeing called for multi-channel tracks it'll just set channel type to mono (as it was before) and will set the link to false (as it was before). the result of groupchannels is a set of ungrouped channels, which is a bit misleading i think, and will lead to a false conclusions about the behaviour in future (we don't know yet how 5.1 channels would be grouped, for example). maybe that's another reason to have a stereowavetrack type, then grouping and checks for leads will become redundant? but the consequences would have their own downsides surely consider a new declaration: `void groupchannels(track& first, int nchannels, linktype linktype, bool resetchannels = false);` it looks a bit overloaded with parameters, and possibly incompotible states. this method tries to deduce things inside that are obvious from the context where grouping or ungrouping is needed.",0,0.802273690700531
686760802,1377,Paul-Licameli,2021-08-11T11:59:21Z,"i still disapprove what you did. you must consider the implementation and also the interface. there is what groupchannels does now, which does not yet implement multi-channel tracks, because we don't yet have a data representation for them. however there is all the other code using the abstractions provided by track and tracklist, that are programmed to an interface anticipating possible multi-channel implementation in the future. it required a lot of my work in previous years to make that so -- that the assumption of at-most-stereo tracks is made in very few places. that should remain so. please change the interface of groupchannels only to specify alignment or not. changing that function into two functions that can only allow for making either mono and stereo tracks is not a change in behavior now, but it is not an improvement of the interface.",-1,0.9383137226104736
686824303,1377,Paul-Licameli,2021-08-11T13:20:54Z,i do agree that you can simplify away the resetchannels argument which was never non-default.,0,0.9800991415977478
686841180,1377,Paul-Licameli,2021-08-11T13:39:37Z,"i have a suspicion that the scope may enlarge after all to include this after some more testing, but i admit this is trying to read designers' minds right now.",-1,0.555336058139801
686965164,1377,vsverchinsky,2021-08-11T15:56:00Z,"we will need to make changes to groupchannels then (maybe multiple times), and this will affect each piece of the code which calls this method, and make sure that we don't break anything unintentionally: to add a behaviour which will handle grouping for more than two channels, we'll need to interfere the code that does grouping for two channels.",0,0.9916844367980957
692611085,1377,Paul-Licameli,2021-08-20T02:20:49Z,spelling in commit comment: *hiding,0,0.987966001033783
692611922,1377,Paul-Licameli,2021-08-20T02:23:19Z,"at least this small change might be better: use sortedcliparray() not getclips() because clips in a wavetrack are not necessarily stored in sorted order by start time. (i don't really like that, and maybe wavetrack should be rewritten instead to guarantee the invariant of sortedness of clips. but, it's not so yet.)",-1,0.6895931363105774
692612707,1377,Paul-Licameli,2021-08-20T02:26:03Z,"as mentioned, you might instead assume the two arrays of clips are already sorted.",0,0.9921969175338745
692613911,1377,Paul-Licameli,2021-08-20T02:29:33Z,"and then instead, you might use std::mismatch on the two ranges of pointers, and the appropriate lambda, expressing what you mean very simply.",0,0.9940061569213867
692614089,1377,Paul-Licameli,2021-08-20T02:30:06Z,"""existence""",0,0.9911365509033203
692616426,1377,Paul-Licameli,2021-08-20T02:37:24Z,"wait, is it correct to return false whenever a wavetrack is last, or not followed by another wave track? no -- you should return false only if the track is mono, link type 0.",0,0.9932572841644287
692618929,1377,Paul-Licameli,2021-08-20T02:45:33Z,"this doesn't cause a project to fail to load in projectfilemanager.cpp. still it should be fixed, in case the return value needs reuse somewhere else.",0,0.9914052486419678
692625828,1377,Paul-Licameli,2021-08-20T03:07:59Z,"one more matter: you still need the loading procedure to defend against unexpected values for ""linked"" that are not within the enumeration. you can map all values outside { 0, 1, 2, 3 } to grouped (which means, making the least assumptions about non-mono tracks.)",0,0.99192214012146
692783640,1377,vsverchinsky,2021-08-20T08:53:26Z,:/ thanks for spotting this!,-1,0.9941232800483704
1293713001,5027,crsib,2023-08-14T16:36:55Z,love the naming :-),1,0.9928200840950012
1293895763,5027,Paul-Licameli,2023-08-14T19:40:38Z,still reviewing?,0,0.9873849153518677
1295626701,5027,saintmatthieu,2023-08-16T09:25:44Z,`mclips` are not necessarily in order. i'd expect `getinterval` to be consistent with the visual experience. why not sorting first?,0,0.9830300211906433
1295629567,5027,saintmatthieu,2023-08-16T09:28:07Z,is `right->mclips.size() == mclips.size()` not necessarily true?,0,0.993274450302124
1295659526,5027,saintmatthieu,2023-08-16T09:54:24Z,"`gettrack().mclips`, similarly to `gettrack().intervals()`, is destined to return possibly stereo data. here we are in a single-channel context. wouldn't it spare future changes if we used `wavechannel::intervals()` right away ?",0,0.9898165464401245
1295687008,5027,saintmatthieu,2023-08-16T10:18:42Z,`waveclip` is in practice still mono but soon to become stereo-capable. it'd be wrong for a `wavechannelinterval` to return data that belongs to another channel. are there plans to have a mono api ?,0,0.9863877296447754
1295709385,5027,saintmatthieu,2023-08-16T10:41:16Z,renaming this `getchannelrms` would make it less confusing.,0,0.9879827499389648
1295713082,5027,saintmatthieu,2023-08-16T10:45:09Z,not used (and hence `stepsperwindow` too),0,0.9902976155281067
1295716847,5027,saintmatthieu,2023-08-16T10:48:52Z,here - some british spelling ;),0,0.989227294921875
1295721226,5027,saintmatthieu,2023-08-16T10:53:15Z,does this really cast to `false` ? i'd rather see `false`.,0,0.9914429783821106
1295729238,5027,saintmatthieu,2023-08-16T11:01:23Z,hm. `effectrepeat` seems unused. are we aware of that ?,0,0.9857419729232788
1295732381,5027,saintmatthieu,2023-08-16T11:04:56Z,"consider placing these four lines in a scope, so as to reassure the reader that `iter` is only used for that.",0,0.9911132454872131
1295736925,5027,saintmatthieu,2023-08-16T11:09:49Z,interesting. here's an effect that requires joint-stereo processing. but it doesn't care about clip boundaries ...,0,0.5947318077087402
1295824055,5027,saintmatthieu,2023-08-16T12:31:12Z,"so calling `setselected` on each channel was redundant because `tracks.any ()` already returns all tracks, leader or not?",0,0.9904338121414185
1295837212,5027,saintmatthieu,2023-08-16T12:42:26Z,"this nested iteration could well have been interval-then-channel, which is what the code before this change was doing. any particular reason why you chose this order?",0,0.9900743365287781
1295927271,5027,saintmatthieu,2023-08-16T13:41:32Z,what's the track shifter?,0,0.9944096207618713
1295971437,5027,saintmatthieu,2023-08-16T14:04:49Z,"`wavetrack` will not be a `wavechannel` anymore, is that correct ?",0,0.9935587048530579
1296059458,5027,Paul-Licameli,2023-08-16T15:07:08Z,"it might be nicer that way, but for now, the correctness of these transformations does not depend on sorting. sorting with each access may be too expensive and keeping sortedness as an invariant would need too much other review to be sure of its completeness.",0,0.9818934202194214
1296063083,5027,Paul-Licameli,2023-08-16T15:09:53Z,"wherever clips are iterated before, they will be iterated in the same sequence through this new layer of api. that is more conservative, and one less source of surprising behavior changes.",0,0.9896809458732605
1296068707,5027,Paul-Licameli,2023-08-16T15:14:09Z,"it is still possible to make such tracks, but consider it undefined behavior as this huge code restructuring is happening in stages. i have told qa not to test such cases and not to worry about preserving behavior. ultimately, there will be just one wavetrack with wide clips each storing a vector of sequences, possibly more than one. no longer any correspondence of waveclips between two wavetracks.",0,0.9762108325958252
1296074080,5027,Paul-Licameli,2023-08-16T15:18:19Z,maybe. indeed the next pr changes this again.,0,0.9786673188209534
1296082790,5027,Paul-Licameli,2023-08-16T15:25:01Z,or rather the next planned pr,0,0.9920058846473694
1296091712,5027,Paul-Licameli,2023-08-16T15:31:42Z,wavechannelinterval is the mono api for the rest of the world that uses wavetrack. the next draft pr gives it a getfloats member function and eliminates some calls of getclip. look ahead at it if you wish.,0,0.9920618534088135
1296093308,5027,Paul-Licameli,2023-08-16T15:32:55Z,i thought there was already too much diff but i might add a commit to rename that,0,0.9879327416419983
1296095512,5027,Paul-Licameli,2023-08-16T15:34:41Z,default construction of built in integral types is always the zero,0,0.9924440979957581
1296098334,5027,Paul-Licameli,2023-08-16T15:36:37Z,think again. each effect class has a header file that isnt included anywhere else but its implementation. so how do any of them work? put a breakpoint in the constructor and figure it out.,0,0.9798397421836853
1296106629,5027,Paul-Licameli,2023-08-16T15:43:12Z,"there is post processing to restore clip boundaries, remapped by the time stretch. the logic for this is unfortunately replicated in sbsmseffect, nyquist, and eq rather than having a unified implementation applied to all effects. i became aware of this problem in other refactoring but decided not to address it. the scope of the restructuring is already big enough.",0,0.7703020572662354
1296110266,5027,Paul-Licameli,2023-08-16T15:46:05Z,see the finalize member function,0,0.9952512979507446
1296114220,5027,Paul-Licameli,2023-08-16T15:49:21Z,"the selected boolean was in track but is now instead in the channel group info structure. this was accomplished much earlier in this release cycle. but vitalys great import export refactoring, which i never did review completely, developed somewhat independently of my work and so it reintroduced one of the unnecessary loops that i had eliminated.",0,0.9844914078712463
1296117056,5027,Paul-Licameli,2023-08-16T15:51:39Z,"track names were another thing formerly duplicated in channels of a stereo track. i eliminated the duplicate data and the need to keep channels consistent. likewise rate, gain, pan. things really to be associated with the stereo track as a whole, not with one channel of it.",0,0.9898137450218201
1296125573,5027,Paul-Licameli,2023-08-16T15:58:26Z,code before this change was certainly not iterating interval-major. i dont understand you.,0,0.6015233397483826
1296129365,5027,Paul-Licameli,2023-08-16T16:01:29Z,a thing involved in implementing drags of clips but also of midi track data in other subclasses of the abstract base. also movement of labels. there are certain menu commands that you can bind to keystrokes for shifting track data left and right. cares a lot about maintaining this non graphical ui.,0,0.9730206727981567
1296132754,5027,Paul-Licameli,2023-08-16T16:03:18Z,in future it will contain wavechannels and not be a wavechannel. but things are transitioning to that in stages.,0,0.9889606833457947
1296141150,5027,Paul-Licameli,2023-08-16T16:10:31Z,you may remember the other recent work to disallow mismatch of rates across channels.,0,0.9909866452217102
1296895613,5027,saintmatthieu,2023-08-17T08:56:02Z,"all makes sense, thanks.",1,0.5994883179664612
1296912289,5027,saintmatthieu,2023-08-17T09:10:19Z,"ok, got confused by the looks of it and forgetting that `track` itself really just is a channel (so far).",0,0.6458847522735596
1499188139,5965,saintmatthieu,2024-02-22T12:45:11Z,what is this for?,0,0.9856045246124268
1499541354,5965,saintmatthieu,2024-02-22T16:36:15Z,the change on this particular line isn't needed.,0,0.9872032999992371
1499543595,5965,saintmatthieu,2024-02-22T16:37:27Z,same here (for the sake of clarity),0,0.9925588369369507
1500375041,5965,saintmatthieu,2024-02-23T09:00:46Z,"i missed to update that comment in the pitch-shift pr, you may want to complete it.",0,0.9893240332603455
1500392924,5965,saintmatthieu,2024-02-23T09:17:42Z,"it should be the other way round, shouldn't it? namely the `const` method has the implementation, and the non-const one const-casts. otherwise there is no guarantee that your const method really doesn't modify your object. i tried it, to make sure i wasn't overlooking something, you may copy-paste: [code block]",0,0.9910467267036438
1500401327,5965,saintmatthieu,2024-02-23T09:25:29Z,"does the use of a shared pointer mean that note intervals may survive a note track? if we are sure it's not, using a `const notetrack&` would convey this information (and be more economic).",0,0.9905717372894287
1500428400,5965,Paul-Licameli,2024-02-23T09:49:36Z,mistakenly added,0,0.6670162677764893
1500429705,5965,Paul-Licameli,2024-02-23T09:50:37Z,i was thinking of moving it to a nonmember function in wavetrackutilities,0,0.9904484152793884
1500429975,5965,Paul-Licameli,2024-02-23T09:50:51Z,ditto,0,0.9754701256752014
1500499022,5965,saintmatthieu,2024-02-23T10:53:19Z,"this crashes. `iter` must not outlive the interval created by `rightmostornewclip`. looking for other places that use this faulty pattern, but a solution that prevents compilation of these would of course be ideal.",0,0.9516538381576538
1500516917,5965,saintmatthieu,2024-02-23T11:11:00Z,"i'm thinking that if `channelgroup::intervaliterator ::mpgroup` were a weak pointer rather than a naked pointer, then [code block] at least would return a nullptr, not garbage, and this could be checked by the user. if the user doesn't do the check, we still have a crash, but at least it could help debugging?",0,0.9828716516494751
1500535295,5965,saintmatthieu,2024-02-23T11:27:48Z,couldn't find another usage that might have this problem.,0,0.8714714646339417
1500594103,5965,saintmatthieu,2024-02-23T12:30:30Z,`pright` is not used anymore.,0,0.992667019367218
1500613043,5965,saintmatthieu,2024-02-23T12:47:46Z,"i remember from your explanation yesterday that you now needed to split the cloning implementation in two, sort of, but i can't remember why, if you could help me remember and understand this change.",0,0.9778131246566772
1500714591,5965,Paul-Licameli,2024-02-23T14:07:42Z,what steps exactly reproduce the crash?,0,0.9902349710464478
1500995046,5965,Paul-Licameli,2024-02-23T17:51:23Z,avoids violating some `isleader()` assertions.,0,0.9795035123825073
1500996235,5965,Paul-Licameli,2024-02-23T17:52:06Z,"put wave tracks into the temporary tracklist objects before doing other things with them, while they are still not yet wide tracks.",0,0.9926389455795288
1501217444,5965,Paul-Licameli,2024-02-23T22:01:56Z,"i don't understand -- delete the comment? or complete it, how? or you can do that as you will in master.",0,0.9257528781890869
1501221580,5965,Paul-Licameli,2024-02-23T22:08:22Z,"i don't really agree. it is not too hard by inspection of the non-const function to see that it doesn't change any data structure directly, but just exposes non-const pointers. this pattern of the const calling the non-const with a cast is a common enough idiom. the total lines of code is less as i did it.",0,0.9171271324157715
1501224266,5965,Paul-Licameli,2024-02-23T22:10:35Z,"i like it as i wrote it. less is assumed about lifetimes of things this way. maybe intervals would survive. i had reasons to rewrite wavetrack::interval to hold shared pointers, not references. but i admit, there, the pointers are to waveclip objects, not the track.",1,0.7556584477424622
1501224673,5965,Paul-Licameli,2024-02-23T22:11:13Z,"never mind, i understand the problem, which happened not to crash on the debug macos build, but that was an ""accident.""",0,0.9542931318283081
1501224732,5965,Paul-Licameli,2024-02-23T22:11:20Z,ok,0,0.9233372807502747
1502304287,5965,saintmatthieu,2024-02-26T09:41:11Z,do the const-cast in the direction i propose and no inspection is needed anymore but that of the const-cast of the return type. then the real implementation may grow and there still won't be a need for inspection. your arguments not to apply this suggestion aren't solid.,0,0.919774055480957
1502440641,5965,Paul-Licameli,2024-02-26T11:15:41Z,no.,0,0.9730188846588135
1505645434,5965,saintmatthieu,2024-02-28T09:36:42Z,"the reparenting is going to happen on the pre-condition that `index < mattachments.size() - 1`, which means that, if `mattachments.size() == 2`, calling `erase(parent, 0)` will reparent the remaining attachment but not `erase(parent, 1)`. i still don't understand why reparenting is necessary, but this looks worth being pointed out.",0,0.9786609411239624
1505769902,5965,saintmatthieu,2024-02-28T11:04:01Z,not used,0,0.9867091178894043
1505784110,5965,saintmatthieu,2024-02-28T11:15:51Z,shouldn't the modification `this->setlinktype(linktype::none);` be undone here?,0,0.9944671392440796
1505796220,5965,saintmatthieu,2024-02-28T11:26:24Z,"great to see these gone! i was expecting this commit to justify the previous one, a67b7aded083eea4a3fbdfb455e95801e49a60f6, but does it, actually?",1,0.9961887001991272
1506354952,5965,Paul-Licameli,2024-02-28T17:49:29Z,it is intentionally not stated as a precondition. the idea of reparenting is that each attachment is informed when its numerical slot in the array changes. there is no change for those before `index`.,0,0.993871808052063
1506358843,5965,Paul-Licameli,2024-02-28T17:52:52Z,"precisely not! the tentative stereo channel pair (as indicated by the ""leader"" attribute) is discovered to be ineligible to merge and so two mono tracks remain.",0,0.9836958646774292
1506360836,5965,Paul-Licameli,2024-02-28T17:54:17Z,"yes, it simplified the job, avoiding even more const-casting in wavetrack.cpp",0,0.9898659586906433
1512621233,5965,saintmatthieu,2024-03-05T10:51:59Z,"ouch, of course ...",0,0.9395157098770142
847708694,2801,Paul-Licameli,2022-04-11T20:27:38Z,"the steps aren't exactly as i described before, but that is all right. did you verify that each step in the transformation preserves the persistency of settings? maybe the second and fourth steps could be combined as the third step of three. because you never construct the validator in the second commit -- it isn't necessary to make msettings a reference and then change it to a value in the last step.",0,0.9846715331077576
847709728,2801,Paul-Licameli,2022-04-11T20:29:01Z,"my only objection is that this assignment to effectecho::validator::msettings is not needed, because it was already done in the construction of it. really the settings argument of this function isn't needed any more.",0,0.9645835757255554
848158592,2801,pietro68,2022-04-12T08:45:43Z,"i tried verifying persistency of settings. it happens only at the last step. in our previous discussion i noted that it did not happen in the first step and you said it was maybe not worth fixing, but i could at least try to fix it in the 2nd and 3rd steps. i must be sure that i understood you right: you are suggesting that i could combine step 2 and 4 into a 3rd step; the pre-existing 3rd step would then become the second. is that correct? i modified the second commit so to have msettings a value right from the start (will be observable in the next force-push)",0,0.965654194355011
848219269,2801,pietro68,2022-04-12T09:40:10Z,that's right! the correction of this will be visible in the next force-push.,0,0.6881181597709656
848328331,2801,Paul-Licameli,2022-04-12T11:30:45Z,i still see the unnecessary assignment to msettings.,0,0.7491354942321777
848381334,2801,pietro68,2022-04-12T12:32:55Z,"did you look at the latest force-push? there is an assignment `msettings = getsettings(access.get());` in `effectecho::populateorexchange` only at intermediate steps, but i guess that it is needed. in the last step there is no such assignment, in either `effectecho::populateorexchange` or `effectecho::validator::populateorexchange`",0,0.9935666918754578
850310212,2801,Paul-Licameli,2022-04-14T10:28:05Z,i reverse my previous comment at this line. do not put the validator into its final form at this commit. make msettings a reference at this step. change it to no reference only at the last step.,0,0.99524986743927
850310889,2801,Paul-Licameli,2022-04-14T10:29:03Z,do not add these lines in the second commit. only at the last commit.,0,0.9941285848617554
850312227,2801,Paul-Licameli,2022-04-14T10:30:58Z,again add this only at the last commit. getsettings should not be available until then. the point where the echo settings move out of the effect and i to effectsettings is only then.,0,0.9950838685035706
850312986,2801,Paul-Licameli,2022-04-14T10:32:12Z,use effectinstancewithsamplerate to simplify. remove the member function and variable for msamplerate. just inherit them.,0,0.994466245174408
850313597,2801,Paul-Licameli,2022-04-14T10:33:07Z,settings is an unnecessary variable name,0,0.9247991442680359
850314912,2801,Paul-Licameli,2022-04-14T10:35:09Z,"do not name and the settings argument in step 3. add that only at step 4. and step 3, static_cast mprocessor to effectecho and use its msettings. at step 4, remove those lines, as you must to compile without the msettings member. only then use the arguments.",0,0.9952947497367859
850315378,2801,Paul-Licameli,2022-04-14T10:35:53Z,ok this is now what i expect for step 3.,0,0.9848687648773193
850316029,2801,Paul-Licameli,2022-04-14T10:36:51Z,ok just that the argument name settings isnt needed at this step,0,0.9917530417442322
850319239,2801,Paul-Licameli,2022-04-14T10:41:41Z,"the base class should change only at this step. effectwithsettingsbase wont be used, so you can interactively rebase, removing the commit from me. this step causes a makesettings member to be defined and called. you must understand that it is not correct to use getsettings until this point, because the generated makesettings should not be used either before this. only when the msettings member of the effect is removed, must these other changes be made too, to keep all steps of the transformation correct.",0,0.9932398796081543
850371881,2801,pietro68,2022-04-14T11:59:38Z,"ok, done",0,0.9714605808258057
850372342,2801,pietro68,2022-04-14T12:00:14Z,"i commented it out + put a todo comment ""uncomment at final step""",0,0.9942917823791504
850372402,2801,pietro68,2022-04-14T12:00:21Z,"i commented it out + put a todo comment ""uncomment at final step""",0,0.9942917823791504
850381645,2801,pietro68,2022-04-14T12:13:28Z,"ok, done",0,0.9714605808258057
850381862,2801,pietro68,2022-04-14T12:13:42Z,done,0,0.8682363629341125
850383119,2801,pietro68,2022-04-14T12:15:23Z,"ok, done",0,0.9714605808258057
850383695,2801,pietro68,2022-04-14T12:16:14Z,"ok, removed",0,0.988579511642456
850508369,2801,pietro68,2022-04-14T14:33:01Z,"alright, commit with effectwithsettingsbase removed. the other point is understood now.",0,0.9944234490394592
1324750269,5193,Paul-Licameli,2023-09-13T16:05:09Z,"i might say ""channels"" not ""tracks"" in this name",0,0.9826835989952087
1324754212,5193,Paul-Licameli,2023-09-13T16:08:36Z,"if you rebase onto my fixup commit [a link] and resolve the conflict, then you will understand that the `push_back` above should be pulled out of the loop. `capturesequences` must contain leader tracks only, and each one only once. then test that recording to stereo tracks still works.",0,0.9953669309616089
1324754593,5193,Paul-Licameli,2023-09-13T16:08:54Z,that completes review of this one commit of the draft.,0,0.9919565916061401
1326646322,5193,Paul-Licameli,2023-09-15T00:22:50Z,indent,0,0.9154122471809387
1326650399,5193,Paul-Licameli,2023-09-15T00:31:00Z,that should be `track->getname()`,0,0.9953828454017639
1326650835,5193,Paul-Licameli,2023-09-15T00:31:54Z,just to make no assumptions about the continued validity of the old track pointer,0,0.9914244413375854
1326658724,5193,Paul-Licameli,2023-09-15T00:47:54Z,your commit comment suggest that you think this is redundant. i think you are right after all. i overlooked other details. but the extra insurance is harmless.,0,0.9327719807624817
1326667282,5193,Paul-Licameli,2023-09-15T01:05:14Z,thank you for making me look up this standard algorithm and refresh my memory of it.,1,0.8072170615196228
1327277637,5193,vsverchinsky,2023-09-15T13:17:58Z,"ah, overlooked that merge conflict, thanks!",1,0.9638354778289795
1329153951,5193,Paul-Licameli,2023-09-18T18:52:51Z,"keep this todo comment please, to remind me later to remove the line below",0,0.9933869242668152
1329157466,5193,Paul-Licameli,2023-09-18T18:56:52Z,still unresolved -- don't use `mpdata->ptrack` after `swapchannels` but use `track`,0,0.9936482310295105
1329183226,5193,Paul-Licameli,2023-09-18T19:24:33Z,return what?,0,0.7869825959205627
1329188043,5193,Paul-Licameli,2023-09-18T19:30:02Z,very good: we start to eliminate `makemultichanneltrack` except as an implementation detail of track.cpp. i would declare a variable to eliminate repetition of `*tracks.rbegin()`,1,0.8671934008598328
1329192748,5193,Paul-Licameli,2023-09-18T19:35:34Z,"you copy-pasted an old mistake in the words of the comment. should be ""new"" not ""changed""",0,0.9552074670791626
1329213428,5193,Paul-Licameli,2023-09-18T19:58:28Z,"i made a mistake here at 03c68afc55b2020b0e8086aa288090b4e5ea8ca2, neglecting the provisions for more than two channels (maybe in future). correct my mistake. change the condition back to `if (basetrackname.empty())`",0,0.9364319443702698
1329216367,5193,Paul-Licameli,2023-09-18T20:01:55Z,the comment before this deletion should be deleted too now,0,0.9946084022521973
1329256697,5193,Paul-Licameli,2023-09-18T20:41:07Z,"you did what i asked, removing this and instead creating a ""wide"" track (as a tracklist) through the factory. but now i see that this makes an unintended change of behavior. the call of `wavetrack::init()` in `emptycopy` doesn't happen, and so certain information of `first` is no longer copied into the new track -- things such as the color, and whatever else in future might be attached to the `channelgroup` client data site. so the new `create` function should take `first` as another argument, which could default to nullptr, and from which it copies information as in `emptycopy`. or instead of that -- i think it's nicer -- add `std::optional onchannels = {}` as an argument in `emptycopy` and call that.",0,0.9866757988929749
1329259771,5193,Paul-Licameli,2023-09-18T20:44:56Z,this no longer needs to be a loop. just do this once on `mix`.,0,0.9941642880439758
1329262169,5193,Paul-Licameli,2023-09-18T20:47:36Z,"in the present transitional state of the source tree, this needs to be `reallygetchannelindex`, i think",0,0.9923412799835205
1329264320,5193,Paul-Licameli,2023-09-18T20:50:04Z,duplicate these comments before the overload defined above.,0,0.9940921664237976
1329269810,5193,Paul-Licameli,2023-09-18T20:54:23Z,duplicate this assertion in a `` comment.,0,0.9928349256515503
1329279138,5193,Paul-Licameli,2023-09-18T21:05:26Z,don't delete the comment!,0,0.9521192908287048
1329280276,5193,Paul-Licameli,2023-09-18T21:06:48Z,"move the `monotostereo` call after the `reset`, consisntently with the comment. did you hit a breakpoint here in the debugger? i think you need to do what i wrote to avoid putting the `tracklist` objects into an inconsistent state.",0,0.9935821294784546
1329281522,5193,Paul-Licameli,2023-09-18T21:08:21Z,"it should also be asserted, and commented with ``, that `this` has null for `getowner()`.",0,0.9948099851608276
1329312677,5193,Paul-Licameli,2023-09-18T21:41:17Z,"""builds a wavetrack and places""",0,0.9923540353775024
1329920394,5193,Paul-Licameli,2023-09-19T10:39:04Z,"""flushes"" and ""moves"", consistent verb forms",0,0.9910523295402527
1329920851,5193,Paul-Licameli,2023-09-19T10:39:33Z,ditto,0,0.9754701256752014
1329952166,5193,Paul-Licameli,2023-09-19T11:11:57Z,why do you make bounds checks on this unsigned index variable only in importffmpeg.cpp but not in the other place that use `foreachchannel`? should there be checks in the other places?,0,0.9890962243080139
1329992362,5193,vsverchinsky,2023-09-19T11:52:34Z,"you are right, the problem is that `wavetrack::duplicate` copies both channels into new list, but we need only left",0,0.98667973279953
1329995063,5193,vsverchinsky,2023-09-19T11:54:48Z,then `//! !getowner()` only is enough precondition as it implies that `nchannels() == 1`,0,0.9940083026885986
1330003562,5193,vsverchinsky,2023-09-19T12:02:22Z,thanks!,1,0.8631753921508789
1330037918,5193,vsverchinsky,2023-09-19T12:20:38Z,"i don't think so, i need that to preserve existing loop exit condition. `const auto nchannels = std::min(sc->codeccontext->getchannels(), sc->initialchannels);` which formally is not same as `mstreams.size()`, but `nchannels` was used as an upper bound in the original loop",0,0.9891849756240845
1330200170,5193,Paul-Licameli,2023-09-19T14:10:51Z,"""and places""",0,0.9884069561958313
1330203388,5193,Paul-Licameli,2023-09-19T14:13:00Z,"in this commit's comment, ""eliminate""",0,0.9915890097618103
1335040294,5193,Paul-Licameli,2023-09-23T16:30:19Z,"thank you for figuring out what i omitted in recording. all of this looks like the right idea to me. why do you call it only an ""attempt""? did you observe that something still doesn't work?",1,0.9810164570808411
932062123,3258,crsib,2022-07-28T10:39:48Z,i am really confused by the naming. i would've never expected such a behavior from a function called reserve and it has not documentation provided otherwise.,-1,0.9871737957000732
932065689,3258,crsib,2022-07-28T10:43:59Z,and it is even more confusing that consume does nothing while reserve consumes,-1,0.885434091091156
932067878,3258,crsib,2022-07-28T10:46:38Z,"after looking into implementation i say that i do not understand why this is called a sink. at very least, please document the protocol, as the implementation of the protocol was unexpected to me.",0,0.9671028852462769
932068251,3258,crsib,2022-07-28T10:47:04Z,please document what this method is supposed to do,0,0.9928721785545349
932068331,3258,crsib,2022-07-28T10:47:09Z,please document what this method is supposed to do,0,0.9928721785545349
932071267,3258,crsib,2022-07-28T10:50:33Z,is it intentional that flush is kept out of the protocol?,0,0.9863893389701843
932073677,3258,crsib,2022-07-28T10:53:33Z,should we have this commit in a different pr that could be merged earlier?,0,0.9909175038337708
932076513,3258,crsib,2022-07-28T10:57:01Z,so probably it should be called `acknowledge`? `advance` usually has skip semantics.,0,0.9906176924705505
932077878,3258,crsib,2022-07-28T10:58:47Z,but should the source know about the user?,0,0.9870145320892334
932085722,3258,crsib,2022-07-28T11:08:27Z,"`source`, on the other hand, seems to do what i would expect from source (well, from the producer, but this is minor).",0,0.9825804829597473
932086961,3258,crsib,2022-07-28T11:09:59Z,"i would enjoy to see both `isgenerator` and `isprocessor` to be const, but that is very minor",0,0.914597749710083
932090461,3258,crsib,2022-07-28T11:14:28Z,"if a c++ exception will be thrown by a subclass - the process will terminate. but i do not say, that this is bad :-)",1,0.8600817918777466
932092334,3258,crsib,2022-07-28T11:17:01Z,and i agree that it now implies usage of guardedcall for the code reviewer.,0,0.9868861436843872
932111015,3258,crsib,2022-07-28T11:40:18Z,oh i see now why `processfinalize` is now `noexcept`,0,0.9848939776420593
932114104,3258,crsib,2022-07-28T11:44:16Z,i think that the implementation of the host should handle any exception that happened inside the host code. i am pretty sure that plugins themselves cannot throw a c++ exception :-),1,0.9513779878616333
932114901,3258,crsib,2022-07-28T11:45:13Z,stage is good.,1,0.9647084474563599
932234606,3258,crsib,2022-07-28T13:41:35Z,please document `bound`,0,0.9950290322303772
932398438,3258,Paul-Licameli,2022-07-28T15:35:44Z,yes,0,0.9686408638954163
932403666,3258,Paul-Licameli,2022-07-28T15:40:41Z,"it is optional. i agree this placement of progress update responsibility may not seem cleanest, but this is what the transformation accomplished while preserving the behavior. i didnt figure out a better way yet. i think an abstract stage object might report remaining latency, and a routine running the pipeline might watch that (those) value(s) from the stage(s) and the remaining() of the ultimate source, and handle progress update instead.",0,0.9902312159538269
932406746,3258,Paul-Licameli,2022-07-28T15:43:40Z,"this preserves what was there. which i wrote years ago. audacityexception, only, is the root of things we can catch and handle at the event loop.",0,0.9920029640197754
932408402,3258,Paul-Licameli,2022-07-28T15:45:16Z,"in the last commit, effectstate becomes a subclass of source, and the function becomes an override, with the understanding that it inherits all documentation for that.",0,0.9941213726997375
932416311,3258,Paul-Licameli,2022-07-28T15:52:56Z,just moving the indicator update? but why?,0,0.9901207685470581
934396247,3258,crsib,2022-08-01T10:51:50Z,"not critical i think, but making `advancedpositions` to be a class member may help to reduce the load on memory allocator a bit.",0,0.9778652191162109
934470308,3258,crsib,2022-08-01T12:27:03Z,should it be final?,0,0.9867123365402222
934520082,3258,Paul-Licameli,2022-08-01T13:19:41Z,or even our friend `alloca`. but avoidance of heap allocations is not very important for destructive effect processing.,0,0.9841358661651611
934522454,3258,Paul-Licameli,2022-08-01T13:22:07Z,"for now it can be. there might be future need to make this an abstract base class, if we figure out multi-core. and what is now in effectstage::produce would instead become another task viewing its upstream and down as source and sink. but i haven't arrived at those details yet.",0,0.9875405430793762
934527096,3258,crsib,2022-08-01T13:26:40Z,"yeah, i tend to forget that this is destructive path only :-)",1,0.45524123311042786
637226816,918,shoogle,2021-05-21T20:53:16Z,nice instructions! it's a pain to update instructions via prs so do you think we could put these in the [a link] instead? we could put a link to the wiki page in readme.md.,1,0.9229096174240112
637233364,918,shoogle,2021-05-21T21:08:16Z,"i personally think it is neater to put all `run` commands in a separate bash script that gets copied into the docker image. see this [a link] for musescore, and also note the surrounding comments about how to reduce the image size (and how not to do it). [a link] is where the tidying up happens.",0,0.9815912246704102
637235144,918,shoogle,2021-05-21T21:12:22Z,"switching to a bash script would also allow you to [a link] to avoid endless backslashes. you can also [a link] in arrays, unlike with backslashes.",0,0.9928968548774719
637238436,918,shoogle,2021-05-21T21:19:19Z,here's another place when an array would be ideal: [code block],0,0.9928365349769592
637244074,918,shoogle,2021-05-21T21:29:56Z,"this table is going to be a pain to maintain in markdown. i recommend linking to the relevant cmakelists.txt where the options are defined, or if they are in separate files then just tell people to use the `cmake -lh` option. if you really want a separate list, i recommend putting it in an online spreadsheet and linking to it from here. i'll pm you with more details about this.",-1,0.953984260559082
637246360,918,JamesCrook,2021-05-21T21:36:03Z,why pch disabled?,0,0.9437002539634705
637247405,918,JamesCrook,2021-05-21T21:38:57Z,is brew now a prerequisite on macos?,0,0.9907659292221069
637247832,918,shoogle,2021-05-21T21:40:14Z,this is more information that would be better in a spreadsheet. ideally the cmake configuration would simply fail with an appropriate error message if the correct library version is not available: [code block] you can give the command or link to the wiki page that has the command. this [a link] does something similar if qt is not installed.,0,0.992655873298645
637248567,918,JamesCrook,2021-05-21T21:42:05Z,"we should refer to the wiki for extended instructions for things like signing and notarization, and perhaps for portable version too.",0,0.9929741621017456
637249584,918,JamesCrook,2021-05-21T21:45:02Z,"wiki could say more about this (pkg-cfg issues), so as not to clutter up building.md with info about non standard builds.",0,0.9809802174568176
637458312,918,Be-ing,2021-05-22T22:37:08Z,[code block] unix makefiles is the default generator on linux and macos. there is no need to specify it explicitly (i personally use ninja though).,0,0.9932652711868286
637458385,918,Be-ing,2021-05-22T22:38:00Z,thank you for documenting these.,1,0.7696265578269958
637509732,918,crsib,2021-05-23T08:32:40Z,we had a specific request that there is a manual available in the source code. but i will put it on the wiki page as well after the branch has merged,0,0.9952355027198792
637509756,918,crsib,2021-05-23T08:33:02Z,"nice catch, i will look into it on monday",1,0.987311601638794
637510000,918,crsib,2021-05-23T08:35:08Z,"yeah, that why i have called it ""most notable"" lol i guess i will move it in a separate doc a rewrite it a bit. also, vs code makes such tables really easy to format :-)",1,0.9932523369789124
637510316,918,crsib,2021-05-23T08:37:23Z,"we have a spreadsheet, but i guess we need an ""offline"" version as well. i will move this table into a separate doc under the `linux` directory.",0,0.9941893815994263
637510429,918,crsib,2021-05-23T08:38:30Z,"that is a good question, i don't know :-) it is disabled for all the ci builds for some reason, hurts paul sometimes",1,0.9930340051651001
637510432,918,JamesCrook,2021-05-23T08:38:33Z,`[a link]` ?,0,0.9923710823059082
637510657,918,crsib,2021-05-23T08:40:27Z,absolutely not. but it is easier to install cmake using brew. for conan - pip3 is always installed with the latest versions of macos,0,0.9829181432723999
637510955,918,crsib,2021-05-23T08:42:20Z,"yeah, i'll move most of it under `linux/minimal_libraries_versions.md`. we had a request from the maintainers that we keep the build docs in source tree",0,0.9878666400909424
637512774,918,crsib,2021-05-23T08:56:58Z,an excellent point!,1,0.9938420057296753
637520372,918,JamesCrook,2021-05-23T10:00:06Z,that sounds a good balance between 'build docs in source tree' and 'provide alternative/elaborating info outside the main doc'.,0,0.8978585600852966
637535390,918,Paul-Licameli,2021-05-23T12:01:46Z,"building with pch off requires the insertion of more #include directives to make the build pass, and those extra #includes give the honest and complete picture of dependencies with my scripts.",0,0.9918496608734131
637567713,918,Be-ing,2021-05-23T16:07:15Z,i don't think it's a great idea to duplicate the content in multiple places. it is very likely one would not be updated when the other is. however a link from the wiki to this document in the code repository would be a good idea.,0,0.9095942974090576
637570675,918,Be-ing,2021-05-23T16:30:07Z,"also, i don't recommend using two wikis at once. if you're going to add more to github wiki, i suggest moving everything from mediawiki and closing the mediawiki to edits.",0,0.9752903580665588
637571616,918,Be-ing,2021-05-23T16:37:09Z,i see `buildsystem=1` listed in the examples above but it is not documented here. what does that option do?,0,0.9928094148635864
637810354,918,crsib,2021-05-24T09:24:18Z,"this activates so-called ""legacy build system"" in xcode. their new system is very confusing and we currently have odd issues with it.",-1,0.9222002029418945
637826179,918,crsib,2021-05-24T09:50:40Z,i'd rather prefer to have it explicit,0,0.9795547127723694
637826724,918,crsib,2021-05-24T09:51:39Z,"we should, but not in this pr",0,0.9497442841529846
809474337,2565,Paul-Licameli,2022-02-17T21:16:53Z,"""an""",0,0.9904956817626953
809474676,2565,Paul-Licameli,2022-02-17T21:17:27Z,wrong comment,-1,0.8904055953025818
809476763,2565,Paul-Licameli,2022-02-17T21:20:41Z,"maybe define pwind, then assign it to pconstwind, and get rid of the ugly c-style pointer cast",0,0.9597758650779724
809478101,2565,Paul-Licameli,2022-02-17T21:22:46Z,let's get rid of the rest of experimental_notebook in the source tree. that includes the line in experimental.cmake. the rest of the source code isn't available to turn it on again even if we wanted to.,0,0.9911673665046692
809479487,2565,Paul-Licameli,2022-02-17T21:24:54Z,put extra parentheses around this condition to suppress warnings (from clang at least). or rewrite as a for loop.,0,0.9920816421508789
809481379,2565,Paul-Licameli,2022-02-17T21:27:38Z,"notice that the bottom toolbar docking area is part of the right side of the container window, therefore it will be narrower when the effects panel shows, rather than limiting the vertical extent of that panel. not right or wrong -- just saying we understand the consequence.",0,0.9897683262825012
809482778,2565,Paul-Licameli,2022-02-17T21:29:50Z,clean this up as a modern `static_cast` while you are visiting the neighborhood.,0,0.9935919642448425
809483525,2565,Paul-Licameli,2022-02-17T21:30:50Z,tab order reminds me that we may need to check out how tabbing now works in the presence of the new window. might have opinions.,0,0.987485945224762
809484671,2565,Paul-Licameli,2022-02-17T21:32:24Z,"it would look a little nicer to me, to use a variable to eliminate the repeated calls to `window.gettracklistwindow()` and `window.getcontainerwindow()`",0,0.986939549446106
809485709,2565,Paul-Licameli,2022-02-17T21:33:59Z,"the only new #include in this pr, and it's a wxwidgets header. no new dependencies among audacity's own source code files. that is good.",1,0.7498149275779724
809864348,2565,Paul-Licameli,2022-02-18T10:17:24Z,"what happens if the user changes the theme? do you need to add to `projectwindow::onthemechange` to reset this color? or, is the background color in fact not seen because everything else in the window hides it?",0,0.9919778108596802
809867161,2565,Paul-Licameli,2022-02-18T10:20:32Z,another background color you may need to update with theme changes,0,0.9914546012878418
809868743,2565,Paul-Licameli,2022-02-18T10:22:38Z,is unsplitting enough without the call to hide?,0,0.9016464948654175
809869974,2565,Paul-Licameli,2022-02-18T10:24:16Z,is the explicit show() needed?,0,0.9948323965072632
809870585,2565,Paul-Licameli,2022-02-18T10:24:59Z,"what happens if you try to drag the separator? is that not wanted, and do you need to bind and veto another event?",0,0.9730738401412964
809910980,2565,vsverchinsky,2022-02-18T11:21:07Z,"thanks, will fix",1,0.6667729616165161
809911081,2565,vsverchinsky,2022-02-18T11:21:16Z,"thanks, will fix",1,0.6667729616165161
809911263,2565,vsverchinsky,2022-02-18T11:21:35Z,"makes sense, will fix",0,0.9636189937591553
809911402,2565,vsverchinsky,2022-02-18T11:21:48Z,will do,0,0.9619618058204651
809911726,2565,vsverchinsky,2022-02-18T11:22:20Z,"no need, i'll rewrite the loop",0,0.9913010001182556
809912440,2565,vsverchinsky,2022-02-18T11:23:23Z,"not sure that understand that, bottom toolbar docking area is a sibbling of the container window, isn't it?",0,0.9208999872207642
809912630,2565,vsverchinsky,2022-02-18T11:23:37Z,ok,0,0.9233372807502747
809913357,2565,vsverchinsky,2022-02-18T11:24:46Z,ok,0,0.9233372807502747
809919535,2565,vsverchinsky,2022-02-18T11:34:27Z,"in my prototype branch i had changed background color in response to the theme event, but there was no visible effect, because of the child windows. i mistakenly committed this line. if i understand you correctly you saying that we don't need the separator to be draggable?",-1,0.5533900260925293
809919754,2565,vsverchinsky,2022-02-18T11:34:46Z,"turned out - yes, thanks",1,0.9672293663024902
809949435,2565,Paul-Licameli,2022-02-18T12:20:29Z,i ask whether it is intended. maybe a limit on rightward dragging is needed.,0,0.972055971622467
809969950,2565,Paul-Licameli,2022-02-18T12:50:03Z,"you are right, i misread that",0,0.7803465127944946
813895221,2565,Paul-Licameli,2022-02-24T13:48:24Z,unused variable,0,0.9869065284729004
813899001,2565,Paul-Licameli,2022-02-24T13:52:38Z,"feel free to clean up wxmin, wxmax with std::min, std::max instead",0,0.9908587336540222
813901251,2565,Paul-Licameli,2022-02-24T13:54:58Z,"""among"" instead of ""between"" is better english",0,0.9880637526512146
813901571,2565,Paul-Licameli,2022-02-24T13:55:15Z,"i know you just moved this comment, but fix it",0,0.9792122840881348
813904640,2565,Paul-Licameli,2022-02-24T13:58:29Z,did you discover off by one mistakes in this function that you are also fixing? a commit comment should say so. should you fix it? is it making small but noticeable changes in other drawing that wasnt' specified?,0,0.9906946420669556
813917074,2565,Paul-Licameli,2022-02-24T14:12:00Z,"you add no calls to bevel. is it used in drawing functions that were changed? rather than change the more widely used function, adjust the rectangle that you pass into the function in the one relevant place.",0,0.9948838353157043
813919067,2565,Paul-Licameli,2022-02-24T14:14:06Z,but i think there are no such uses that you need to adjust.,0,0.9891848564147949
1365817464,5398,saintmatthieu,2023-10-19T16:23:10Z,"-licameli this is actually not right, which is why this pr is still a draft. i couldn't figure it out before the end of the day unfortunately. maybe you can spot what i'm doing wrong.",-1,0.7015981674194336
1366591554,5398,saintmatthieu,2023-10-20T07:36:59Z,fixed.,0,0.9905837774276733
1369935419,5398,Paul-Licameli,2023-10-24T10:21:38Z,"the compile on macos doesn't let you capture a structured binding name directly in a lambda. another fix is to change the lambda capture below from `[&]` to `[track = track, interval = interval]`",0,0.9938149452209473
1369979870,5398,Paul-Licameli,2023-10-24T10:59:05Z,"`foreachclip` might be used more consistently in these new functions, but that's not important. also i would redefine `foreachclip` as an inline function, deducing the type of the argument as a template parameter, avoiding the construction of a `std::function` object. but this is not important.",0,0.9922786951065063
1369980973,5398,Paul-Licameli,2023-10-24T11:00:15Z,actually this is needed only for clip 0. see the commits merged at 48154efe6d8ce8e02c570a665a31caab39786cdc. right channel envelopes are just ignored.,0,0.9950136542320251
1370008172,5398,Paul-Licameli,2023-10-24T11:28:08Z,"this replacement for `waveclip::applystretchratio` loses a few good things: - early quick exit when ratio is already 1 - pre- and post-conditions, stated in header comments, and asserted in the function",0,0.9611365795135498
1370027165,5398,Paul-Licameli,2023-10-24T11:43:37Z,"answering: exception safety was carefully documented for those sequence operations precisely because exceptions are possible (otherwise it would have been `excsafety{no-fail}`). it is a promise that in case of exceptions, the sequence object is restored to its prior state. a known problem with wide wave clips (such as we have them, with the wavetrack::interval facade) is that strong exception safety for the individual sequences does not imply strong exception safety of the wide clip as a whole when appending or flushing. maybe there is success for one channel but failure for the other, and then there is no reversion of the first channel to its previous state. i did not attempt to solve this unlikely problem for 3.4 and neither should you. just maybe it will happen if you record and run out of space on the drive. there is exception handling in this case to save as much of the recording as possible rather than throw away the entire recording. this hole in strong exception safety might mean it's one remaining way to end up with mis-aligned clips.",0,0.9908739328384399
1370031873,5398,Paul-Licameli,2023-10-24T11:46:40Z,the step `mrawaudiotempo = *mprojecttempo;` is lost in this version. should that be fixed?,0,0.993461012840271
1370035038,5398,Paul-Licameli,2023-10-24T11:49:20Z,cutlines? why not? they might be preserved un-stretched. maybe nobody cares.,0,0.9425327181816101
1370040993,5398,Paul-Licameli,2023-10-24T11:52:43Z,not completely like `this`. i noticed that the new constructor of `interval` always uses `floatsample` format. i don't see where you change format to match the track's when inserting the new interval.,0,0.9816679358482361
1370044774,5398,Paul-Licameli,2023-10-24T11:56:31Z,"more about formats: either the argument to this function should be `float *const *` or else the format should be an argument, not assumed to be `floatsample`. the latter solution has the appeal of more generality easily implemented, even if not yet needed.",0,0.9893675446510315
1370064102,5398,Paul-Licameli,2023-10-24T12:13:34Z,the assertions in this and the next two functions should be stated in header comments as preconditions.,0,0.9949479103088379
1370348438,5398,saintmatthieu,2023-10-24T14:52:40Z,"`dst`, as a freshly-created empty clip, doesn't have project tempo set yet. it will be when inserted with `wavetrack::insertinterval`.",0,0.9917576909065247
1370355728,5398,saintmatthieu,2023-10-24T14:57:26Z,"preserving them unstretched would probably be the best, but then when expanding they should be stretch-rendered to the stretch ratio of the parent clip, meaning re-introducing the possibility of stretch-rendering to a ratio other than 1. also, that should be done at interval level to ensure joint-stereo, (at least until wide clips are a reality), and i'm not sure how this would look like. so yeah, hoping nobody will care.",-1,0.6858388781547546
1370550065,5398,Paul-Licameli,2023-10-24T17:05:27Z,i see. consider this point resolved.,0,0.9693611264228821
1370555406,5398,Paul-Licameli,2023-10-24T17:10:00Z,"this is a design change. make sure designers agree. expansion of cutlines is done by waveclip::paste in waveclip::expandcutline. paste fails if ratios don't match. so i think the complete solution would be correct remapping of cutlines along the timeline at the time stretch is applied, but then computing the stretch of the cutline could be delayed until just before the paste.",0,0.9900762438774109
1370608744,5398,saintmatthieu,2023-10-24T17:56:08Z,absolutely - i've been overseeing this argument. addressing ...,0,0.9717167019844055
1370611388,5398,Paul-Licameli,2023-10-24T17:58:37Z,"""overseeing"" or ""overlooking""? (not the same...)",0,0.9540220499038696
1370624951,5398,saintmatthieu,2023-10-24T18:08:49Z,"logged a follow-up ticket that still awaits martin's (or leo's, but he's on vacation) input.",0,0.9858525991439819
1370638645,5398,saintmatthieu,2023-10-24T18:14:16Z,trying ... :crossed_fingers:,-1,0.8649426102638245
1374628854,5398,Paul-Licameli,2023-10-27T14:00:57Z,i think you may need to swap the two lines above to get correct results in all cases. because the function move envelope points after the collapsed part leftward.,0,0.9873719215393066
1374630945,5398,saintmatthieu,2023-10-27T14:02:40Z,"i wouldn't expect that, but to be on the safe side i'll push that change.",0,0.9615288972854614
802219407,2536,Paul-Licameli,2022-02-09T02:29:52Z,"""expectedvalue""",0,0.9926877021789551
802220147,2536,Paul-Licameli,2022-02-09T02:31:46Z,"""integers""",0,0.991811990737915
809895920,2536,Paul-Licameli,2022-02-18T10:59:12Z,you might lift the common assignment of `test_dir` before the `if()`,0,0.9947609305381775
809899064,2536,Paul-Licameli,2022-02-18T11:03:36Z,"""source files""",0,0.9935979843139648
809900918,2536,Paul-Licameli,2022-02-18T11:06:19Z,it may be useful to add `properties prop1 ...` and pass those to: [a link],0,0.9957731366157532
809901235,2536,Paul-Licameli,2022-02-18T11:06:48Z,and here are all the possible properties [a link],0,0.9955310225486755
809903941,2536,Paul-Licameli,2022-02-18T11:10:45Z,... unless one uses one of the properties: * fail_regular_expression * pass_regular_expression * skip_regular_expression * skip_return_code * will_fail,0,0.9598842263221741
809904752,2536,Paul-Licameli,2022-02-18T11:11:54Z,"maybe the function will have other keyword arguments to abbreviate other combinations of properties. don't ask me yet, what exactly. experience will tell what is useful.",0,0.9848086833953857
809906280,2536,crsib,2022-02-18T11:13:58Z,i have a very strong opinion that unit test should return 0 on success,0,0.8537847995758057
809906518,2536,Paul-Licameli,2022-02-18T11:14:21Z,"catch2 needs to link something? i thought it is just one amalgamated header file. or is that precisely what this line does, just adding in include path.",0,0.989052951335907
809906899,2536,crsib,2022-02-18T11:14:56Z,this can be easily added in the future in case we find a need for any additional ctest properties,0,0.9932426810264587
809907376,2536,Paul-Licameli,2022-02-18T11:15:35Z,"""proper""",0,0.9663078188896179
809907599,2536,crsib,2022-02-18T11:15:53Z,"""modern"" cmake uses `target_link_libraries` for header-only libraries as well.",0,0.9935564398765564
809910170,2536,Paul-Licameli,2022-02-18T11:19:47Z,"will we want arguments for command that can be given to add_unit_test? will we ever need to reuse a common test executable with different arguments? should there be a lower-level cmake function taken out of this, for invoking add_test with such options? i'm thinking we might in future need a more complicated thing like setup and cleanup of fixtures for a test or a group of tests, in which each setup or cleanup step is itself described as a ""test."" [a link]",0,0.9896109104156494
809912202,2536,Paul-Licameli,2022-02-18T11:23:06Z,i wonder if these fixes you figured out for dynamic libraries should be reused with image-compiler too. or have you done that already? maybe a common cmake function for such steps then.,0,0.976727306842804
809912950,2536,crsib,2022-02-18T11:24:09Z,"and still, i have very that if you need to it for unit tests you have serious design issues and should reconsider them. `add_unit_test` is expected to be used only to create unit tests.",0,0.5096511840820312
809914132,2536,Paul-Licameli,2022-02-18T11:25:55Z,"again maybe use a common low function for add_test, and consider how to pass other command arguments and test options into it.",0,0.9850990772247314
809914175,2536,crsib,2022-02-18T11:25:58Z,"they can be reused, but the image-compiler is a) rarely built, b) does not test the functionality of a library. for these reasons, it is left as-is for now.",0,0.9916495084762573
809935079,2536,Paul-Licameli,2022-02-18T11:58:10Z,got it,1,0.9044701457023621
1489495326,5952,LWinterberg,2024-02-14T13:50:44Z,it seems like there have been some wires crossed here - the overflow button should summon the clip context menu. clicking on the pitch/speed numbers should summon the dialog.,0,0.9473040103912354
1490046022,5952,Paul-Licameli,2024-02-14T20:46:49Z,do not put this here. just put in the file where the sole call to it is. besides which: this change is extraneous to what the first commit comment says.,0,0.992946445941925
1490055412,5952,Paul-Licameli,2024-02-14T20:54:22Z,this deletion is one cause of failure of compilation of the first commit,0,0.9866423606872559
1490056919,5952,Paul-Licameli,2024-02-14T20:55:38Z,`#include ` for `wxrect` is another needed change,0,0.9947279095649719
1490059483,5952,Paul-Licameli,2024-02-14T20:57:47Z,"as i said, i don't like enlarging this file with the new function, but `#include ` would be needed to fix its compilation",0,0.7593494057655334
1490064259,5952,Paul-Licameli,2024-02-14T21:01:47Z,"i dislike so called ""utility"" files unless the things put into them really are needed in more than one place.",-1,0.9374501705169678
1490083099,5952,Paul-Licameli,2024-02-14T21:21:38Z,i could fix the first commit so it compiles -- but then the second fails to link! you neglected to add the new files to `cmakelists.txt`. also the new files should have banners.,0,0.5069712996482849
1490087463,5952,Paul-Licameli,2024-02-14T21:26:35Z,"after i fix cmakelists.txt, still, to build i must add: [code block]",0,0.9912663102149963
1490088616,5952,Paul-Licameli,2024-02-14T21:27:52Z,"again, i don't see the need to move the code -- but also i notice, `selectinterval` is lost. intentional?",0,0.9864704012870789
1490095845,5952,Paul-Licameli,2024-02-14T21:36:27Z,"i was mistaken -- i see it is used in more than one place, now that i fix cmakelists.txt and rebuild.",0,0.9726294279098511
1490147265,5952,Paul-Licameli,2024-02-14T22:33:02Z,"for me, the debug build was violating an assertion in wxwidgets, but my build didn't have debug symbols and i couldn't see wxwidgets source code. after some trial and error, i figured out that replacing `wxcolour{}` with `*wxblack` was a sufficient fix.",0,0.9837406277656555
1490567583,5952,saintmatthieu,2024-02-15T08:05:01Z,it's a tentative removal. the clip still remains selected after the dialog is closed even without. i intended to ask if he remembered why he added this in 65d23cf019fe465c852a06314981544fc9699dab.,0,0.9930486679077148
1490575944,5952,crsib,2024-02-15T08:12:22Z,that was literally the task to select the clip on right click. probably has more details.,0,0.9934671521186829
1490976438,5952,Paul-Licameli,2024-02-15T13:02:00Z,"i feel foolish now -- yes, just making it happen at button-up not down was the right thing!",-1,0.9936648607254028
1490985949,5952,Paul-Licameli,2024-02-15T13:09:56Z,need `weak_from_this()` for third argument,0,0.9944033622741699
1495841977,5952,vsverchinsky,2024-02-20T13:39:43Z,`this` may not survive by the moment handler is invoked. i think it would be safer to grab weak pointers explicitly. `audacityproject` has `std::enable_shared_from_this` in its base.,0,0.9857262372970581
1495948664,5952,vsverchinsky,2024-02-20T14:46:53Z,could be shortened: [code block],0,0.9954084753990173
1495964213,5952,vsverchinsky,2024-02-20T14:55:06Z,"not a clipped clip, documentation for `getclippingbox` says: the clipped clip rect is what will be returned if `hascliprect` is `true`. otherwise i like the motivation to eliminate one call to `getclippingbox`",0,0.9056374430656433
1497173780,5952,vsverchinsky,2024-02-21T09:29:43Z,"could you please explain what ""lowlit"" and ""hightlit"" mean?",0,0.9913540482521057
1497187008,5952,vsverchinsky,2024-02-21T09:38:07Z,"""modern"" way: pass `shared_ptr`s by value, and use `std::move` [a link]",0,0.9921711683273315
1497260170,5952,vsverchinsky,2024-02-21T10:23:52Z,when i have an expression under `if` statement that spans across multiple lines then i prefer to enclose the body of the branch into `{ }` that make code much more readable to my taste,0,0.9769706726074219
1497341435,5952,vsverchinsky,2024-02-21T11:10:02Z,you could avoid introducing extra name `clipbuttontag`: [code block],0,0.9952545166015625
1497351614,5952,vsverchinsky,2024-02-21T11:18:43Z,":eyes: [a link] not the case in that particular set of arguments, but i don't like the idea of wrapping arguments into a structure to shorten the list...",-1,0.9791427850723267
1497376377,5952,vsverchinsky,2024-02-21T11:40:43Z,would be nice to reset `weak_ptr` in `release` and `cancel`,0,0.9903931021690369
1497383289,5952,vsverchinsky,2024-02-21T11:47:02Z,"`label` should be passed by value then, not reference. `move` on `iprop` is redundant",0,0.9923830628395081
1497386219,5952,vsverchinsky,2024-02-21T11:49:30Z,"ok, fixed in later commit",0,0.9931562542915344
1497755689,5952,saintmatthieu,2024-02-21T15:10:21Z,i agree.,0,0.9653030633926392
1497788026,5952,saintmatthieu,2024-02-21T15:27:06Z,nice!,1,0.9901132583618164
1497795126,5952,saintmatthieu,2024-02-21T15:31:34Z,first time i read something like this. i do see advantages.,0,0.7281643152236938
1497797426,5952,saintmatthieu,2024-02-21T15:33:00Z,"i thought about it, but couldn't think of a situation where it could change behaviour.",0,0.892276406288147
1497806040,5952,saintmatthieu,2024-02-21T15:38:33Z,"it wasn't when i wrote that line, but that was because of the `args&&...` in the class template. i removed `&&` and now i don't have to move the ints anymore. i think it's because before it expected right-reference types.",0,0.9808335304260254
890356970,3030,Paul-Licameli,2022-06-06T17:08:45Z,the addition of this `include` of this header allows the deletion of the other two.,0,0.9946289658546448
890363580,3030,Paul-Licameli,2022-06-06T17:17:35Z,"here and elsewhere, i suggest you learn the conventions for doxygen comments. see : [a link] simply adding `!` after `//` means a comment will also be extracted to the automatically generated web pages. if you install the program, you can run `doxygen nographs.dox` to generate web pages on your own computer, then open `dox/html/index.html` to test how it looks. i say this as a recommendation, not a requirement for merging this.",0,0.9867728352546692
890364577,3030,Paul-Licameli,2022-06-06T17:18:56Z,"for doxygen, you can write [code block] there are a few alternatives of the comment syntax that doxygen also recognizes.",0,0.9943379759788513
890369570,3030,Paul-Licameli,2022-06-06T17:25:36Z,maybe this mutable member should become private.,0,0.9778448343276978
890372457,3030,Paul-Licameli,2022-06-06T17:28:40Z,"pointer or reference as return type? i would prefer reference. it's a conventional way of saying, null isn't possible, and making it unnecessary to specify that with a `//! ` comment. but otherwise, seeing just this declaration, i as a possible caller of this function, would be left in doubt whether null checks on all the uses of this function should be done or not.",0,0.9546973705291748
890375698,3030,Paul-Licameli,2022-06-06T17:32:48Z,"now i see the lines in the function: [code block] suggesting that sometimes it's necessary to return null because the effect plugin can't be completely initialized yet. is that right? then, a comment in the header should explain.",0,0.9916885495185852
890377135,3030,Paul-Licameli,2022-06-06T17:34:35Z,i have learned to prefer `size_t` not `int` for loops like this.,0,0.9820444583892822
890377778,3030,Paul-Licameli,2022-06-06T17:35:28Z,not skipping the hidden parameters? as you wish.,0,0.9887813329696655
890384489,3030,Paul-Licameli,2022-06-06T17:44:16Z,"strictly speaking, the deletion of these two lines ought to wait until the commit ""define transferdatatowindow"" so that each step if the transformation is correct, introducing no temporary known bugs.",0,0.9881440997123718
890386775,3030,Paul-Licameli,2022-06-06T17:47:08Z,"the second commit, which introduces this function, might also rewrite `vst3parameterswindow::vst3parameterswindow` so that the commit comment is correct: only one call of `getparametercount` remains",0,0.9944970011711121
890392173,3030,Paul-Licameli,2022-06-06T17:53:46Z,i still have a feeling that putting `meffectclassinfo` into the wrapper base class might make nicer simplifications of usage... but i don't insist,0,0.967818021774292
890396253,3030,Paul-Licameli,2022-06-06T17:56:34Z,the commit that introduces this line needs `#include ` to compile on macos,0,0.994900643825531
890398888,3030,Paul-Licameli,2022-06-06T17:59:04Z,is this #include needed at the commit that adds it?,0,0.9950072765350342
890399307,3030,Paul-Licameli,2022-06-06T17:59:38Z,or this?,0,0.989923894405365
890409553,3030,Paul-Licameli,2022-06-06T18:13:21Z,"this added visit of parameters doesn't correspond to any deleted code. it doesn't skip the read-only parameters, as `syncparameters` does. it feels strange, and as we have discussed, that may be because `syncparameters` has perhaps a confused dual purpose. maybe all of this added visit should just be deleted.",-1,0.7158279418945312
890411424,3030,Paul-Licameli,2022-06-06T18:15:43Z,"this on the other hand is here because a call to `syncparameters` is deleted from `loaduserpreset`. but it uses a dummy settings, which is strange; but that is because `syncparameters` takes a non-const reference to settings, as it must in other contexts. so i think the visit above should be deleted, and these two lines should be retained, but some comment added to explain that this is only transitional, pending the definition of the instance class. we need to discuss with .",0,0.9769001007080078
890411704,3030,Paul-Licameli,2022-06-06T18:16:04Z,these lines are certainly good ones that will remain in the final version.,1,0.707342267036438
890430655,3030,Paul-Licameli,2022-06-06T18:37:31Z,`at` might allow brevity but it can throw an exception that isn't handled anywhere. i would rather use `find` and a test against `end` and skip parameters that are not found.,0,0.9766196608543396
890433609,3030,Paul-Licameli,2022-06-06T18:40:29Z,"this line is added at the last commit, to correspond with what `savesettings` does. but strictly it should be added earlier, in the commit ""define the structure, fetchsettings method, storesettings method""",0,0.9946931004524231
890434688,3030,Paul-Licameli,2022-06-06T18:42:02Z,extra `;`,0,0.9901298880577087
891141569,3030,pietro68,2022-06-07T12:14:13Z,"ok, done",0,0.9714605808258057
891141960,3030,pietro68,2022-06-07T12:14:40Z,"right, better skip them, done.",0,0.9786838889122009
891142093,3030,pietro68,2022-06-07T12:14:51Z,"ok, done",0,0.9714605808258057
891144778,3030,pietro68,2022-06-07T12:17:48Z,i take a chance now to refresh my rusty doxygen knowledge...,0,0.8957316875457764
891151172,3030,pietro68,2022-06-07T12:24:39Z,"that's right, it is for the case when meditcontroller could not be initialized. added comment for it.",0,0.9939262270927429
892191354,3030,pietro68,2022-06-08T10:27:53Z,"i forgot about that, now done.",0,0.8984813094139099
892196790,3030,pietro68,2022-06-08T10:34:24Z,"oops, actually no, it is a leftover from an attempt to find missing headers. will remove it.",0,0.6299934983253479
892196928,3030,pietro68,2022-06-08T10:34:34Z,same as above,0,0.9918335676193237
892206096,3030,pietro68,2022-06-08T10:45:22Z,"thanks, added",1,0.8128573298454285
892529430,3030,pietro68,2022-06-08T15:25:53Z,i will do an edit on that commit,0,0.9931091070175171
892530174,3030,pietro68,2022-06-08T15:26:34Z,ok,0,0.9233372807502747
892789786,3030,pietro68,2022-06-08T19:40:05Z,woops i just realized that i am searching the map two times - instead of .at() i should have used the iterator directly.,0,0.6402353644371033
892815680,3030,pietro68,2022-06-08T20:08:40Z,"i think i must rewrite this method, because it is not doing what is supposed to, i.e. take the input settings and move sliders and knobs on the plugin gui to reflect their values. what it is doing instead, is only passing on the settings to the audio processor (through the componenthandler).",0,0.9482139348983765
987841885,3696,Paul-Licameli,2022-10-05T12:02:18Z,"did you confirm that the buttons reformat after the value is changed and the preferences dialog is dismissed? if that doesn't work, then i maybe commit 3598fe4 added enough calls to invalidate().",0,0.9953664541244507
990495329,3696,Paul-Licameli,2022-10-07T20:59:49Z,"does mwhichmeters still need to be a bitwise or of non-exclusive choices? there was old, old code for an alternative combined play & record meter toolbar in one, instead of the separate ones. i forget when that was removed, but it appears the program is still constructing this third, combined meter toolbar, and yet never showing it and giving you no user interface to turn it on!",0,0.8578506112098694
990503702,3696,Paul-Licameli,2022-10-07T21:16:26Z,"the commit that adds percent_slider for the play and record meters is perhaps incomplete. i can double-click on the slider thumb and get a dialog to enter a value. but it must be a fraction from 0 to 1, not a percentage value. is that acceptable? a design question",0,0.9718390703201294
990504607,3696,Paul-Licameli,2022-10-07T21:18:13Z,i also see that not all calls to sendupdate() are followed by showtip() -- the dialog has some of those calls. should showtip() be added?,0,0.9945007562637329
990505528,3696,Paul-Licameli,2022-10-07T21:19:56Z,"at this commit, at least in macos, i do not yet get the hover texts over these two slider thumbs. but i do get them for track pan and gain and the mixer board gain slider. maybe a later commit will fix this. i haven't built them all yet.",0,0.9420137405395508
990512802,3696,Paul-Licameli,2022-10-07T21:35:50Z,"ok, after another commit that changes this default, i do see tooltips, on macos -- but only if i click the thumb, not when i just hover the mouse over it. this is different from the pan and gain sliders. the text i see is like "": 47%"" suggesting something was supposed to be formatted before the "":"" but is left empty. i think that is mname being empty at these lines of aslider.cpp: [code block] with pan and gain sliders, i see a hover text, but when i press the mouse, i see the same text, but it moves and is drawn in a bordered, rounded rectangle. that's a little strange.",0,0.9698455333709717
990515732,3696,Paul-Licameli,2022-10-07T21:42:34Z,"okay, at another commit, now i see the problems of previous commits corrected. names before the :, and a nice hover text with a rounded border. in fact, now the old behavior of the pan and gain sliders looks worse! there should be a minor issue i think to fix them to be consistent with the volume sliders. which is not part of the scope of this pr.",1,0.3936408758163452
990516259,3696,Paul-Licameli,2022-10-07T21:43:53Z,"it is still the case, however, that when double clicking the volume slider thumb to get a dialog, i'm still not entering a percentage value, but instead a fraction in the range 0.0 to 1.0.",0,0.9903028607368469
990522768,3696,Paul-Licameli,2022-10-07T22:00:14Z,"why getdefault() and not just read()? now if i change interface preferences so the bottom of scale is not -60 db, the drawing updates for it correctly, but the name spoken for the button still says -60, inconsistently with the display.",0,0.9323777556419373
990523979,3696,Paul-Licameli,2022-10-07T22:03:29Z,"`decibelscalecutoff.getdefault()` also occurs in the constructor of meterpanel. i put it there at commit 01a53e7da9b616d26d1bb49f381180f04438504f. as a behavior-preserving code transformation, it was correct as i did it, eliminating the use of the constant env_db_range. but was old behavior correct? perhaps not, and that other line should also be corrected to use read().",0,0.9898613691329956
997973101,3696,vsverchinsky,2022-10-18T09:42:15Z,"thanks, fixed",1,0.7960073947906494
997983670,3696,vsverchinsky,2022-10-18T09:52:00Z,"thanks, dialog now shows values in range 0..100",1,0.9614571928977966
1015364656,3696,Paul-Licameli,2022-11-07T12:30:23Z,"if you add the space yourself, for the special reasons explained in the comment, then do not include the spaces in the strings to be translated.",0,0.9941458702087402
1015365233,3696,Paul-Licameli,2022-11-07T12:30:59Z,this applies to five translatable strings in this function.,0,0.9941655397415161
1015380747,3696,Paul-Licameli,2022-11-07T12:47:48Z,i see the minor fault was in copy-pasted code and not introduced here. so it's just a recommendation.,0,0.9845742583274841
1251169150,4867,Paul-Licameli,2023-07-03T18:13:07Z,"as i said before: this entire class could be eliminated, and instead you can write `using projecttempolistener = std::function<...>;`",0,0.9933854937553406
1251172715,4867,Paul-Licameli,2023-07-03T18:16:36Z,you mean `oldtempo = mtempo`?,0,0.992565393447876
1251175841,4867,Paul-Licameli,2023-07-03T18:21:38Z,the extra indirection of wavecliplist serves no purpose. i say remove that class and simplify.,0,0.984879195690155
1251176742,4867,Paul-Licameli,2023-07-03T18:23:18Z,supply this before my approval. i think its very easy.,1,0.968733012676239
1251177056,4867,Paul-Licameli,2023-07-03T18:23:57Z,"not in principle difficult either, but i wont demand it",0,0.7641782164573669
1251179093,4867,Paul-Licameli,2023-07-03T18:27:49Z,"again i dont see why the publisher must be a member of projectmanager. i would just make it an independent attached object on the projects clientdata::site. and then it really needs only a .cpp file, no .h file, because it does all its magic by registering its factory at startup.",0,0.9844597578048706
1251182331,4867,Paul-Licameli,2023-07-03T18:33:59Z,"... if in fact there remains any need to define this interface, but i doubt even that",0,0.9276947975158691
1251195971,4867,Paul-Licameli,2023-07-03T18:50:35Z,"again: i think you can eliminate this class, and even eliminate the std::function alias, and make all of it implementation detail of the publisher. and new criticism: you need to iterate all tracks now, not just wave tracks.",0,0.9768622517585754
1251343297,4867,saintmatthieu,2023-07-03T23:50:57Z,silly me.,-1,0.9903083443641663
1251363199,4867,saintmatthieu,2023-07-04T00:45:20Z,looks like it works. coming up.,0,0.822354793548584
1251374331,4867,saintmatthieu,2023-07-04T01:13:28Z,you know it gets annoying when you're (probably) right for the 10th time in a row?,-1,0.974204957485199
1251853274,4867,saintmatthieu,2023-07-04T10:42:59Z,"now i remember why this is needed. if a clip is cut from project a and pasted in b, it needs to know immediately what the tempo of b is to be painted and played back correctly. the clip copy constructor cannot rely on that information from the other clip. when do we know for sure when a clip becomes visible in a project? i can only think of this moment, when the clip is pushed into a track's clip list. this class is here to make sure that this doesn't happen without a tempo update. but it doesn't have to be part of this very pr, we'll have time to debate over this.",0,0.6804388761520386
1251858094,4867,Paul-Licameli,2023-07-04T10:47:45Z,"`wavecliplist` only added a `std::optional ` data member, which could just as easily become part of `wavetrack.`",0,0.9914736747741699
1251868968,4867,Paul-Licameli,2023-07-04T10:57:59Z,pleased to see you figured this out. i had forgotten the details of using the allegro library. so you have completely implemented this new virtual for all except the wavetracks!,1,0.994806706905365
1251870199,4867,saintmatthieu,2023-07-04T10:59:09Z,"no, if you call `wavecliplist::pushback`, it sets the project tempo on the clip. [code block]",0,0.9943663477897644
1251870769,4867,Paul-Licameli,2023-07-04T10:59:41Z,expect a small conflict if you rebase this onto my clip-views branch. i eliminate `track::vrulersize`.,0,0.9935089945793152
1251873214,4867,Paul-Licameli,2023-07-04T11:02:01Z,"as i said, this header file isn't needed. just put all in the .cpp file. there are many examples already of .cpp files without companion .h files, when registration at startup time is enough to cause the code to be visited. for instance in src/export",0,0.9927893280982971
1251874566,4867,Paul-Licameli,2023-07-04T11:02:59Z,"compilation failed for me becuase ""observer.h"" was not included",0,0.9360297918319702
1251875419,4867,Paul-Licameli,2023-07-04T11:03:48Z,"compilation failed for me because ""float.h"" was not included",0,0.8382745385169983
1251878433,4867,Paul-Licameli,2023-07-04T11:07:12Z,i think this step of construction is not needed. there will not yet be any tracks.,0,0.9778058528900146
1251879071,4867,saintmatthieu,2023-07-04T11:07:57Z,yes - which leaves audacity in an inconsistent state : change project tempo and all tracks shrink or expand except for the most important one :d,1,0.9619491100311279
1251880405,4867,saintmatthieu,2023-07-04T11:09:08Z,thanks.,0,0.5270382761955261
1251883891,4867,Paul-Licameli,2023-07-04T11:12:41Z,"the previous solution remembered old project tempo in projecttimesignature. now you store last known tempo in each track. i think i understand what justifies this. it's not always duplicated everywhere. a track could be duplicated into an undo state or in the clipboard. it remembers what project tempo was at the time the duplicate track was created. we don't want to normalize it to some tempo value, because we want to delay the time when we must compute the time stretch, which is not perfectly invertible, and so, lossy.",0,0.9686748385429382
1251890514,4867,Paul-Licameli,2023-07-04T11:19:01Z,good to start testing. i think copy and paste will work fine for midi and label tracks. the tracklist listener was all you needed. (timetrack does not copy and paste.),1,0.9863152503967285
1251893508,4867,Paul-Licameli,2023-07-04T11:22:08Z,still unresolved,0,0.793069064617157
1251897254,4867,Paul-Licameli,2023-07-04T11:26:05Z,"still, you might simply change every `push_back` in wavetrack to use instead a new private member function of wavetrack that does this.",0,0.990406334400177
1251900156,4867,saintmatthieu,2023-07-04T11:28:36Z,"this, and also to reduce cognitive load when trying to figure out what happens when tracks in the undo stack miss out on project tempo updates and later get inserted into the list. now it's easier.",0,0.9529649019241333
1409749684,5685,Paul-Licameli,2023-11-29T19:07:14Z,"looking at the second of five commits so far. this change is correct for the purpose stated in the commit comment. but i would ask, how will the mouse actions be discoverable? the read-only mouse preferences pages too used to serve as a reference but that is gone. i will review the rest.",0,0.9696975350379944
1409751954,5685,Paul-Licameli,2023-11-29T19:09:26Z,"i now say, this commit is correct, but not complete. find all `""/gui/verticalzooming""` and see that the midi track, too, has a vertical ruler influenced by the same preference, and it also mentioned mouse actions in the context menu items.",0,0.9914058446884155
1409757690,5685,Paul-Licameli,2023-11-29T19:14:19Z,"you might qualify this little variable as `const` or to be even more modern, `constexpr`. that's a minor bit of style. i skip it sometimes when the scope of a variable is small, but it can be helpful if ever you have something at the top of a large function or block.",0,0.9725059866905212
1409764077,5685,Paul-Licameli,2023-11-29T19:20:27Z,this dispels my doubt about discoverability. rely on the tooltips.,0,0.8484039306640625
1409765319,5685,Paul-Licameli,2023-11-29T19:21:37Z,indentation. the convention is three spaces in most of our source files. you might change preferences in your source code editor.,0,0.9938253164291382
1410554377,5685,Paul-Licameli,2023-11-30T11:44:07Z,"this change is not quite equivalent to the previous version. ""right-click for menu."" was a message that appeared in the status bar, when you right click, and have not yet released the button. this is lost. but i suppose you observed this, and the answer is that it doesn't make sense as a discoverability aid if you really have to do that right click before you see the message suggesting right click! and you are just assuming right click for context menu is a widespread convention we don't need to mention. yes?",0,0.9274135828018188
1410561097,5685,Paul-Licameli,2023-11-30T11:50:33Z,"i think you didn't complete your intended work: this context menu items still mention the mouse button shortcuts, but you removed those for waveform and spectrum rulers.",0,0.9075484275817871
1410568118,5685,petersampsonaudacity,2023-11-30T11:57:12Z,-licameli that is a _**very**_ widespread convention an many apps and oss,0,0.746526837348938
1410703225,5685,LWinterberg,2023-11-30T13:50:53Z,indeed,0,0.9869857430458069
1410730330,5685,SteveDaulton,2023-11-30T14:12:10Z,"it's a widespread convention _when it is obvious_ that the pointer is over a clickable entity (frequently indicated by a change in ""hover over"" colour). the problem that i see in relation to the track's vertical ruler is that a high proportion of users are unaware that it is clickable.",0,0.9459302425384521
949402525,3317,crsib,2022-08-18T17:14:24Z,"i would like to see `xxo(""&generate"")`. this way this string will be reused.",0,0.9928003549575806
949403241,3317,crsib,2022-08-18T17:15:14Z,probably a wrong condition?,-1,0.5431514978408813
949404627,3317,crsib,2022-08-18T17:16:54Z,ditto,0,0.9754701256752014
949429313,3317,crsib,2022-08-18T17:45:53Z,wrong condition? after the #3391 mwstate should not be used.,0,0.9465093016624451
949431247,3317,crsib,2022-08-18T17:48:09Z,"i have checked all the design sources - button is always called ""preview"". also, it should be ""grouped"" with the ""apply"", right now it leans to the left (i. e. it is near the ""presets"" button)",0,0.990664005279541
949440166,3317,crsib,2022-08-18T17:59:00Z,"you can do `using observer::publisher ::publish`, but i don't yet understand why this function is public",0,0.9924254417419434
949445203,3317,crsib,2022-08-18T18:05:22Z,i think this should become a `realtimeeffectstate::setactive`. that specific method should also publish the message,0,0.9877183437347412
949453177,3317,LWinterberg,2022-08-18T18:15:22Z,"agree on calling it ""preview"" (changing to ""stop preview"" after it's been pressed). regarding the grouping, it apparently was difficult and martin didn't mind it ungrouped iirc.",0,0.957358181476593
949454645,3317,crsib,2022-08-18T18:17:19Z,"well, i know how to do such grouping :-)",1,0.8834108710289001
952381290,3317,ksoze95,2022-08-23T09:32:02Z,done.,0,0.9897913336753845
952383605,3317,ksoze95,2022-08-23T09:34:15Z,"changed. to xxo(""&generate"").",0,0.9945711493492126
952385550,3317,ksoze95,2022-08-23T09:36:12Z,done.,0,0.9897913336753845
952385899,3317,ksoze95,2022-08-23T09:36:29Z,done.,0,0.9897913336753845
952386225,3317,ksoze95,2022-08-23T09:36:50Z,"changed to use mptempprojectstate instead, plus tacked on a few other condition checks as well.",0,0.9930617213249207
952403973,3317,vsverchinsky,2022-08-23T09:54:12Z,"unnecessary check, could be `focus == play`",0,0.9922751784324646
952434281,3317,vsverchinsky,2022-08-23T10:25:54Z,`getaccess` does not return empty pointer,0,0.994362473487854
954200932,3317,crsib,2022-08-24T19:12:10Z,do we really need `char` here?,0,0.9890474677085876
954202628,3317,crsib,2022-08-24T19:13:43Z,you can use `publish` without this line. it was only required when you needed `publish` to be public.,0,0.9947391152381897
954204195,3317,crsib,2022-08-24T19:15:17Z,"i would like -licameli to review this specific method. generally it keeps the behavior from the realtimeeffectpanel, but probably paul can suggest something different",0,0.9704805612564087
954212302,3317,crsib,2022-08-24T19:22:21Z,"setactive will publish `realtimeeffectstatechange` when needed, so the following lines are redundant (and `projecthistory::get(*mproject).modifystate(false);` probably has visible side effects)",0,0.9932339787483215
954270449,3317,crsib,2022-08-24T20:27:11Z,"i would say that this should `xo` now, not that it matters :-) just whining",1,0.9586270451545715
954273274,3317,crsib,2022-08-24T20:30:43Z,"i think checking `mptempprojectstate` is enough. i would like to see this check to be wrapped into `isopenedfromeffectpanel` method (naming is hard, yes). otherwise it quite hard to understand when you see this code for the first time",0,0.9822143912315369
954285244,3317,crsib,2022-08-24T20:46:51Z,when we move away from `addstandardbuttons` - `mapplybtn` should be assigned there.,0,0.9928269982337952
954286214,3317,crsib,2022-08-24T20:48:08Z,you can use `mapplybtn` here,0,0.9954972267150879
954289937,3317,crsib,2022-08-24T20:53:14Z,"i say this line should go. `onenable` is now called only when the ui is opened from the fx panel, so there is no point to change the ""global"" state. this toggle should only affect a single effect.",0,0.9838885068893433
954291606,3317,crsib,2022-08-24T20:55:25Z,"let's replace it with that method i have proposed earlier. please not, that `msupportsrealtime` is always true for effects in the stack.",0,0.9948711395263672
954292420,3317,crsib,2022-08-24T20:56:30Z,give the early return couple lines above - i think this `if` can be ommited,0,0.9909371733665466
954293652,3317,crsib,2022-08-24T20:58:04Z,why not `if (msupportsrealtime)` as it was before?,0,0.9889751672744751
954294488,3317,crsib,2022-08-24T20:58:48Z,please update the comment. its something translators see.,0,0.9956925511360168
954294615,3317,crsib,2022-08-24T20:58:59Z,ditto,0,0.9754701256752014
954295234,3317,crsib,2022-08-24T20:59:49Z,this line should probably go too.,0,0.985645055770874
954295861,3317,crsib,2022-08-24T21:00:46Z,that not yet created method here please as well,0,0.9950512051582336
954650963,3317,ksoze95,2022-08-25T08:16:51Z,done.,0,0.9897913336753845
955323397,3317,crsib,2022-08-25T19:07:32Z,`isopenedfromeffectpanel`? minor though,0,0.990665853023529
955329853,3317,crsib,2022-08-25T19:13:44Z,it appears that both branches are identical now,0,0.9915379285812378
878683383,2957,Paul-Licameli,2022-05-21T11:11:39Z,i need to add `#include ` to build it,0,0.9936286807060242
878686979,2957,Paul-Licameli,2022-05-21T11:49:56Z,"this looks like a correct fix to me. ? but let's agree to go farther: write [code block] and eliminate the repetition of the string literal, using the named constant instead in three places. do likewise for the other string constant.",0,0.9103446006774902
878687521,2957,Paul-Licameli,2022-05-21T11:56:15Z,"these functions to fetch settings from the vst3 handle into our own map, and store them back, are a beginning toward statelessness by analogy with the transformation i am making for audiounits. for audiounits, the fetching and storing both perform a loop over the settings as defined by the handle. storesettings doesn't iterate our own hash map, but looks up in it. also in audiounits, the details of how to iterate the handle's metadata for settings is written just once in a higher-order function called `foreachparameter`, and that function takes a lambda for the loop body. i suggest you make similar changes.",0,0.9823746085166931
878696509,2957,Paul-Licameli,2022-05-21T13:37:14Z,"if you define `makesettings`, also define an efficient `copysettingscontents`. but make those definitions only very late, when all else is ready for the final switch to statelessness. so, not in this first stage pr.",0,0.9926901459693909
878703096,2957,Paul-Licameli,2022-05-21T14:42:17Z,"do not make `getsettings` a static function, until the last step to real statelessness. make it a non-static member function of vst3effect that ignores its argument and uses a vst3effectsettings member of the vst3effect, which is still stateful. this would parallel what i did with audiounits. this allows some changes to use `getsettings` where that will be needed, while not yet changing real behavior, when the transformation to statelessness is still incomplete.",0,0.9916143417358398
878703587,2957,Paul-Licameli,2022-05-21T14:47:33Z,"here and elsewhere, you might write just one line `fetchsettings(getsettings(settings))`",0,0.992405116558075
878704020,2957,Paul-Licameli,2022-05-21T14:52:24Z,"but then, also, fetchsettings should clear the map before iterating the parameters and reinserting them.",0,0.991594135761261
878704121,2957,Paul-Licameli,2022-05-21T14:53:26Z,"`fetchsettings` is called in all necessary places, good",1,0.8587866425514221
880153589,2957,vsverchinsky,2022-05-24T07:29:08Z,looks like a bug indeed,-1,0.6896082162857056
880160741,2957,vsverchinsky,2022-05-24T07:36:55Z,is that possible to store pointer to the controller instead?,0,0.9946027398109436
880188970,2957,vsverchinsky,2022-05-24T08:04:50Z,"parameters stored by `savesettings` are used by macroses in audacity and are meant to be read by human, i'm not sure if that was correct to skip other types of parameters, but this was an attempt to restrict the amount of parameters (there could be thousands of them) to a set of paramters that are useful and meaningful",0,0.9800043702125549
880235540,2957,pietro68,2022-05-24T08:47:17Z,"thanks for the clarification, i was wondering about that, it makes sense to do it this way.",1,0.9529054760932922
880239478,2957,pietro68,2022-05-24T08:50:53Z,"i am not sure i understand. do you mean, instead of storing the `value`, store the pointer `&meditcontroller`?",0,0.778473973274231
880240954,2957,pietro68,2022-05-24T08:52:20Z,"ok thanks - i wonder if we should correct this in a separate, trivial pr so that it goes in master soon?",1,0.808007001876831
880269728,2957,vsverchinsky,2022-05-24T09:20:13Z,"yes, instead of storing parameter values in `settings` use `settings` object to access underlying `editcontroller`",0,0.9944861531257629
880272334,2957,vsverchinsky,2022-05-24T09:22:41Z,"agree, -licameli ?",0,0.9872463941574097
880357301,2957,Paul-Licameli,2022-05-24T10:53:16Z,"agreed, write it, also eliminating the repetition of string literals.",0,0.9922218918800354
880424966,2957,Paul-Licameli,2022-05-24T12:11:18Z,maybe this `struct` should just simplify to a `using` alias,0,0.9883550405502319
880427286,2957,Paul-Licameli,2022-05-24T12:13:51Z,"this is not analogous to what i did for audiounits: the visitor function can return false, not to cause `foreachparameter` to fail, but only to cause it to stop visiting other parameters. in fact `foreachparameter` for audiounits ended up as a void-returning function, and yours might too.",0,0.992455005645752
880428276,2957,Paul-Licameli,2022-05-24T12:15:03Z,"as explained, skip over certain parameters that don't automate; but don't stop the visit or return a failure code.",0,0.9916369318962097
880436721,2957,Paul-Licameli,2022-05-24T12:23:55Z,"this function could also be used to simplify `supportsautomation` and `loadfactorydefaults` as for `loadsettings`, change it to use `foreachparameter`, and not iterating over `parms`. instead call `parms.read` as in `audiouniteffect::loadsettings`",0,0.9944591522216797
880442455,2957,Paul-Licameli,2022-05-24T12:29:52Z,"can we assume that the set of parameters, and the kcanautomate flag for each parameter, is unchanging during the lifetime of the loaded vst3 plug-in? and independent of any instance state? i would assume so. when you write copysettingscontents analogous to that for audiounits (not yet merged, but in the last of the sequence of prs for au), you may be making such an assumption.",0,0.9925094842910767
880448645,2957,Paul-Licameli,2022-05-24T12:36:20Z,"i'm missing some context. these lines are no longer in the last commit of this branch. are you suggesting that a pointer to `editcontroller` should be carried around in the `effectsettings` object? i don't like that. `effectsettings` should be thought of as a ""frozen"" description of instance state, not using any third-party library handles. thus our fetching and storing functions to synchronize frozen with live state, one way or the other. the `effectsettings` is something we can pass across inter-thread boundaries, and also copy from one live instance to the other by means of fetching from one and storing to the other. maybe it is not the most efficient way for every effect protocol, but it seems to me to have the generality that we need that would work with all of them in one unifying framework.",-1,0.8758081793785095
880696834,2957,pietro68,2022-05-24T16:00:51Z,now added in commit `created foreachparameters and used in 3 places`,0,0.9947372078895569
880698155,2957,pietro68,2022-05-24T16:02:07Z,now done in commit `created foreachparameters and used in 3 places` and will do the same for the standalone branch to fix this bug.,0,0.9944220185279846
880698645,2957,pietro68,2022-05-24T16:02:37Z,now done in commit `created foreachparameters and used in 3 places`,0,0.9939425587654114
880700714,2957,pietro68,2022-05-24T16:04:45Z,done in commit `getsettings turned to temporary version`,0,0.9937684535980225
880733329,2957,pietro68,2022-05-24T16:37:41Z,done in commit `simplified parameterinfo`,0,0.9946494698524475
880733783,2957,pietro68,2022-05-24T16:38:12Z,done in commit `correct the behavior of foreachparameter...`,0,0.9939646124839783
880734391,2957,pietro68,2022-05-24T16:38:53Z,done in commit `correct the behavior of foreachparameter...`,0,0.9939646124839783
881249818,2957,pietro68,2022-05-25T06:05:23Z,"i am not sure about using it for `supportsautomation`, because `foreachparameter` will always stop at the first parameter for which the visitor fails, and then return true - while `supportsautomation` stops at the first parameter which can be automated, returning true, but if none of the parameters can be automated, it will return false. i think i'd need a different version of `foreachparameter` for that, which will return true at the first successful visit and false if no successful visits happened (it could be named something like verifyatleastoneparameter)",0,0.9044958353042603
881270163,2957,pietro68,2022-05-25T06:37:20Z,"as for `loadfactorydefaults`, now done in commit `loadfactorydefaults uses foreachparameter`",0,0.9953964352607727
881315044,2957,pietro68,2022-05-25T07:31:49Z,"as for `loadsettings`, i need to have a talk about that first",0,0.9932896494865417
881912625,2957,pietro68,2022-05-25T17:09:38Z,"i prepared a version of `loadsettings` that uses `foreachparameter`, but it is deactivated (under #if 0) in favor of the existing version - this because i can not find a way to reach this method (i tried using macros, as hinted in our conversation, but the method called when playing back the macro will not take the else branch that calls loadsettings). when i can rebase on vitaly's recent work for stacks, i will be able to reach this method and test if the new version works.",0,0.9902092218399048
1209735362,4739,saintmatthieu,2023-05-30T05:51:05Z,"this sentence will probably let the user think that she now has to convert one of the tracks to the sample rate of the other. as pointed out, an alternative worth considering would be panning - simpler, no memory usage increase, lossless. please consider suggesting this in your sentence.",0,0.9841318726539612
1209860509,4739,DavidBailes,2023-05-30T07:53:17Z,"there is also the danger that the user changes the sample rate of one of the tracks by using the rate sub menu on the track's menu, rather than tracks > resample.",0,0.9284121990203857
883507503,2805,vsverchinsky,2022-05-27T11:01:38Z,"old implementation is a bit confusing, now it looks ok",0,0.5302985310554504
883521708,2805,vsverchinsky,2022-05-27T11:23:41Z,`bissecondchannel` didn't change before,0,0.9941341280937195
883523822,2805,vsverchinsky,2022-05-27T11:26:55Z,"if i understand correctly the meaning of `mchannelindex` this check won't yield same results as before, because `j` now increments only inside the new inner loop",0,0.9902554154396057
883537115,2805,vsverchinsky,2022-05-27T11:41:13Z,could be `wxstring::lower` [a link],0,0.993375837802887
1201670899,2805,saintmatthieu,2023-05-23T07:23:44Z,can you get the number of leaders and call `minitialtrackselection.reserve(numleaders)` ?,0,0.9954503178596497
1201696072,2805,saintmatthieu,2023-05-23T07:39:29Z,const,0,0.8837863802909851
1201708989,2805,saintmatthieu,2023-05-23T07:47:53Z,"would you mind explaining what this select command modes represent ? a quick exploration of audacity's ui didn't bring an answer. i couldn't even find the command ""select tracks"". i'd like to understand this as it might be something to be tested.",0,0.9498222470283508
1201719313,2805,saintmatthieu,2023-05-23T07:54:46Z,const,0,0.8837863802909851
1201730053,2805,saintmatthieu,2023-05-23T08:00:05Z,"i wouldn't mind a type specifier here, i.e. `for (track* channel : ...)` ; would spare readers like me wondering if we're unnecessarily increasing a smart pointer ref count.",0,0.9622125029563904
1201736815,2805,saintmatthieu,2023-05-23T08:03:56Z,"i also don't see how i can excite this code, i don't find a ""set track status"" command. (two lines below)",0,0.9857699871063232
1201747535,2805,saintmatthieu,2023-05-23T08:09:59Z,was moving `pnewleft->setselected(!tonewtrack);` downwards necessary? else the diff could have been kept lower by just deleting this line.,0,0.9920680522918701
1201783939,2805,saintmatthieu,2023-05-23T08:28:43Z,:thumbs_up:,1,0.9533231854438782
1201784256,2805,saintmatthieu,2023-05-23T08:28:48Z,:thumbs_up:,1,0.9533231854438782
1201807441,2805,saintmatthieu,2023-05-23T08:36:57Z,"using a binary `enum class allchannels { yes, no }` instead of a bool would be more work but ease the reading where it's used.",0,0.9918292164802551
1201881008,2805,saintmatthieu,2023-05-23T09:15:06Z,i'd be glad for an explanation of this setting. i found it in the preferences but couldn't observe any effect.,1,0.6983336210250854
1201948075,2805,saintmatthieu,2023-05-23T09:51:35Z,... in fact i can't see a place in the code where the enum value is changed :thinking_face: either we have a bug or this preference could be removed altogether.,0,0.6165228486061096
1202444035,2805,Paul-Licameli,2023-05-23T14:31:35Z,"i could, though i doubt this would bring much advantage.",0,0.9591988325119019
1202598554,2805,Paul-Licameli,2023-05-23T15:50:34Z,"the added argument in notify is only for transitional states of the big code transformation. ultimately it will be removed again, though not in this pull request.",0,0.9931679368019104
1202607149,2805,Paul-Licameli,2023-05-23T15:53:20Z,see this line in tracksbehaviorsprefs.cpp: [code block] the second argument is by reference. that code constructs a dialog that may modify the setting.,0,0.9949209094047546
1203514813,2805,saintmatthieu,2023-05-24T06:26:55Z,thanks to your explanation yesterday i could debug that. looks good.,1,0.9680925607681274
1203524672,2805,saintmatthieu,2023-05-24T06:33:42Z,"found out, cool stuff.",1,0.989837646484375
1234777260,4795,saintmatthieu,2023-06-20T06:06:59Z,"if `pleader` is a raw pointer, then you don't need the conditional operator, just pass `pleader`.",0,0.994280219078064
1234802568,4795,saintmatthieu,2023-06-20T06:38:34Z,"oh, i'm surprised here to see a per-project effect list. is it here in anticipation of the future master effect stack?",-1,0.5242002606391907
1234817130,4795,saintmatthieu,2023-06-20T06:54:39Z,"i vaguely remember you saying that `wavetrack` might at some stage not be a `track` anymore. maybe i'm remembering wrongly or you were not serious, else would this line become a problem then?",0,0.9555728435516357
1234836216,4795,saintmatthieu,2023-06-20T07:14:18Z,"excellent, just what my `stretchingsequence` will need.",1,0.9783053994178772
1234844600,4795,saintmatthieu,2023-06-20T07:21:51Z,"(github wouldn't let me ""comment on this file"" for some reason.) it's a little bit more work but not useless work to have one header per abstract class. seeing `audioiosequences.h` i thought ""what could be a `class audioiosequences` ?...""",0,0.7028547525405884
1234856901,4795,saintmatthieu,2023-06-20T07:32:44Z,"i never saw abstract interfaces being used for classification like that before. wouldn't simply adding a `isplayable` interface to `track` have done the job? if so i'd prefer that, to spare readers like me some eyebrow lifting.",0,0.9392057061195374
1234859175,4795,saintmatthieu,2023-06-20T07:34:41Z,"the indent is awkward, it took me longer than necessary to make sure that `result.otherplayablesequences.push_back(psequence);` resulted from the `if`.",-1,0.9775587916374207
1234866817,4795,saintmatthieu,2023-06-20T07:41:05Z,"to be kept in mind, but nothing to address in this pr: the `stretchingsequence::get` requiring a modification of its state, i'd like at some stage to have these `constplayablesequences` become non-const. right now i'm using a const_cast.",0,0.9891164898872375
1234877150,4795,saintmatthieu,2023-06-20T07:50:07Z,thank you!,1,0.9448403120040894
1234879141,4795,saintmatthieu,2023-06-20T07:51:49Z,`mplaybackbuffers.clear()` ?,0,0.9937676191329956
1234881700,4795,saintmatthieu,2023-06-20T07:53:59Z,you have something against `std::min_element` ?,0,0.9948523640632629
1234884120,4795,saintmatthieu,2023-06-20T07:55:55Z,"in any case, thanks for the clean-up.",1,0.8448635339736938
1234916925,4795,saintmatthieu,2023-06-20T08:23:18Z,"`t` is only used to index `mplaybacksequences`, hence a range loop would be appropriate and make this code a wee bit easier to understand.",0,0.9915260672569275
1234966600,4795,saintmatthieu,2023-06-20T09:02:26Z,"you've called this `nchannels` elsewhere, better stay consistent to ease reading.",0,0.9901036024093628
1234971515,4795,saintmatthieu,2023-06-20T09:06:32Z,can probably be `const`?,0,0.9924364686012268
1234975257,4795,saintmatthieu,2023-06-20T09:09:42Z,or `std::copy_if`,0,0.9932924509048462
1237758611,4795,Paul-Licameli,2023-06-21T22:01:51Z,exactly!,0,0.984325647354126
1237759798,4795,Paul-Licameli,2023-06-21T22:03:09Z,"in fact, the global effect list was a thing before 3.2, in the limited implementation of real-time effects then. it is now hidden but may be revealed again.",0,0.9929202198982239
1237766576,4795,Paul-Licameli,2023-06-21T22:10:05Z,"wavetrack will remain a kind of track but wavechannel will be a thing representing a part of the track. but realtimeeffectmanager will still know widesampesequence objects which will still correspond to trakcs, not channels.",0,0.9912469983100891
1237774889,4795,Paul-Licameli,2023-06-21T22:18:37Z,"i do not agree to any rule classes should correspond one to one with header files. sometimes the atomization is excessive. thats a judgment, not a precise criterion. sometimes too it is proper to have closely cooperating classes in one header file if the alternative is cyclic dependency, though that does not apply in this case.",0,0.9791271090507507
1237776383,4795,Paul-Licameli,2023-06-21T22:20:04Z,"no. track is a dirty legacy class with too many duties, which i am trying to remove from lob-audio-io.",-1,0.967881977558136
1237781518,4795,Paul-Licameli,2023-06-21T22:25:40Z,"a matter of taste. i find that i like indentation styles in which the variation of the leftmost column helps me to scan it and separate the parts. in this case, separating a long condition expression that doesnt fit on one line, from the consequent statement.",0,0.969828724861145
1237786971,4795,Paul-Licameli,2023-06-21T22:31:08Z,"im still not persuaded. i still feel like this abstract interface should be stateless, and any dependency on the history of the pattern of access in the concrete class justifies the use of mutable members.",0,0.737008273601532
1237789151,4795,Paul-Licameli,2023-06-21T22:34:15Z,"true, no difference for changes of capacity and for whatever small performance advantage.",0,0.9793524146080017
1237789810,4795,Paul-Licameli,2023-06-21T22:35:31Z,"min_element returns an iterator, not a value",0,0.9930291771888733
1237794495,4795,Paul-Licameli,2023-06-21T22:43:45Z,"good idea, that was not true before the transformation but it is now",1,0.96861332654953
1237796289,4795,Paul-Licameli,2023-06-21T22:46:49Z,"but there is a distinction to make, between the sample sequences of project data, and the number of device channels. they may go many to one.",0,0.9883583188056946
1237797087,4795,Paul-Licameli,2023-06-21T22:47:57Z,"maybe, small advantage to readability, and i strongly doubt it makes any difference in performance",-1,0.5181267857551575
1237799236,4795,Paul-Licameli,2023-06-21T22:51:36Z,good,1,0.8759189248085022
1237799301,4795,Paul-Licameli,2023-06-21T22:51:44Z,"but there is a distinction to make, between the sample sequences of project data, and the number of device channels. they may go many to one.",0,0.9883583188056946
1237799680,4795,Paul-Licameli,2023-06-21T22:52:28Z,"small advantage for readability, none for performance",0,0.9206327795982361
1237802790,4795,Paul-Licameli,2023-06-21T22:57:43Z,"yeah, but i would need a lambda or std::mem_fn",0,0.9925956130027771
1238124756,4795,saintmatthieu,2023-06-22T07:35:22Z,"i suppose that's an inconvenience of the decorator approach. the users see no distinction between the `wavetrack` implementations (const) and the stretching ones (mutable). to be transparent as to what really is const and what isn't, we would have needed a solution where the mixer gets a const `wavetrack` (if needed at all) and a mutable `sequencerealtimeprocessor`. in practice we're all right, though, so long as the same `stretchingsequence` isn't used by different threads, which i don't see happening.",0,0.931318461894989
1238128676,4795,saintmatthieu,2023-06-22T07:39:06Z,"of course, you have to dereference the return, but unless there is a risk `buffers` is empty, `min_element` never returns `end()`.",0,0.99246746301651
1440563161,5839,Paul-Licameli,2024-01-03T15:09:46Z,banners,0,0.9793654680252075
1440565838,5839,Paul-Licameli,2024-01-03T15:12:06Z,"these are not necessary to compile what is below. if they are required in other places that include this header, i would move them there.",0,0.9936304688453674
1440580244,5839,Paul-Licameli,2024-01-03T15:24:52Z,maybe return `nullopt` instead. elsewhere you write a function taking `optional `,0,0.9909535646438599
1440581028,5839,Paul-Licameli,2024-01-03T15:25:28Z,remind the reader that `{}` means undefined time signature,0,0.9936186075210571
1440591396,5839,Paul-Licameli,2024-01-03T15:35:13Z,you might replace the first two with forward declarations of incomplete types.,0,0.9931013584136963
1440597570,5839,Paul-Licameli,2024-01-03T15:40:40Z,"the comment is inconsistent with the code, which is right? you might try `std::mismatch` and might then not need the length comparison -- you expect just to get the end iterator of the prefix.",0,0.9869322180747986
1440617649,5839,Paul-Licameli,2024-01-03T15:59:14Z,why does a module have a unit test? can this go to `lib-file-formats`? i like a banner comment in each `cmakelists.txt` delimited by [code block],0,0.9928523898124695
1440618611,5839,Paul-Licameli,2024-01-03T16:00:03Z,see other examples. that banner just summarizes the purpose of the library.,0,0.9922519326210022
1440621480,5839,Paul-Licameli,2024-01-03T16:02:53Z,i'm failing to configure the build for macos: [code block],0,0.8826428651809692
1440623778,5839,saintmatthieu,2024-01-03T16:05:00Z,yes: see fe2caec,0,0.9930810332298279
1440625224,5839,Paul-Licameli,2024-01-03T16:05:57Z,"ok, i see you fixed the configuration problem. this completes a round of review.",0,0.9462110996246338
1440638643,5839,saintmatthieu,2024-01-03T16:17:02Z,"i agree, that's better.",0,0.5721462368965149
1440720209,5839,saintmatthieu,2024-01-03T17:39:13Z,"works for the acidizertags, but with sndfile i get the `redifinition with different basic type` error, don't know why.",0,0.9535330533981323
1440721353,5839,saintmatthieu,2024-01-03T17:40:10Z,i found an easier approach: remove trailing nulls (due to byte-padding for word alignment it would seem) and exactly compare the strings.,0,0.9886598587036133
1440970154,5839,Paul-Licameli,2024-01-03T21:25:44Z,you might also forward declare `sndfile`,0,0.9961589574813843
1442835173,5839,Paul-Licameli,2024-01-05T12:52:24Z,"emphasize with a comment, this should not be `auto`",0,0.9923784732818604
1442836478,5839,Paul-Licameli,2024-01-05T12:53:53Z,might move this line up and eliminate a few repeated expressions,0,0.9904869198799133
1442840162,5839,Paul-Licameli,2024-01-05T12:57:49Z,although both sizes happen to be 4 so it will work -- still the change in the last argument should be reverted.,0,0.9840831160545349
1442843720,5839,Paul-Licameli,2024-01-05T13:00:18Z,"i would make `file` a reference. otherwise it needs a null check to make me confident. it is just passed to a sndfile function, which is c style, but i don't know whether the library does null checks or would crash. better to use c++ style in this wrapper level.",0,0.9849153757095337
1442846936,5839,Paul-Licameli,2024-01-05T13:02:29Z,why not propagate the error out of this function and let the caller decide whether to eat it?,0,0.9817296862602234
1446660741,5839,saintmatthieu,2024-01-09T21:59:28Z,thanks,1,0.8643599152565002
1446663359,5839,saintmatthieu,2024-01-09T22:00:27Z,"reworked that utility code, this isn't an issue anymore.",0,0.9853078126907349
1446666190,5839,saintmatthieu,2024-01-09T22:02:09Z,"i don't expect this to be an issue beyond development of this utility, and am lazy handling it on the client side.",0,0.5682666301727295
1449177379,5839,crsib,2024-01-11T17:25:42Z,this utility is used only for tests?,0,0.9938493371009827
1449179896,5839,saintmatthieu,2024-01-11T17:27:59Z,yes.,0,0.9851860404014587
1449478588,5839,Paul-Licameli,2024-01-11T22:36:02Z,"this suggests to me, maybe you might like instead, simply `using acidizertags = std::variant ;`",0,0.9907724857330322
1449481096,5839,Paul-Licameli,2024-01-11T22:37:23Z,or not...,0,0.9698233008384705
1454004231,5839,Paul-Licameli,2024-01-16T20:40:12Z,you might simplify away these two constructors with `using libfileformats::acidizertags::acidizertags`,0,0.9939316511154175
1088873480,4033,Paul-Licameli,2023-01-27T11:53:06Z,this macro isn't needed and the named class doesn't exist,0,0.9932683110237122
1088878176,4033,Paul-Licameli,2023-01-27T11:56:51Z,these string literals are repeated in tracksbehaviorsprefs.cpp. eliminating duplication might be nice but in this case is not very important. no bug would result if they were differently modified. the strings are not used as identifiers.,0,0.9887804985046387
1088884895,4033,Paul-Licameli,2023-01-27T12:04:57Z,"what is now asserted instead of checked, should be commented above the function too as the precondition it assumes.",0,0.992355227470398
1088887895,4033,Paul-Licameli,2023-01-27T12:08:42Z,"the third commit has no errors, but i don't yet see what code duplication is removed as the commit comment says. or rather, this is allowing something to be reused?",0,0.9914152026176453
1088904428,4033,Paul-Licameli,2023-01-27T12:24:39Z,"here, assume negation of the while-condition: `dsttrack == dsttrackrange.end() || srctrack == srctrackrange.end()`",0,0.9942440390586853
1088904845,4033,Paul-Licameli,2023-01-27T12:25:11Z,"therefore, `srctrack == srctrackrange.end()`",0,0.9942687749862671
1088905605,4033,Paul-Licameli,2023-01-27T12:26:03Z,"but what about the other possibility, that destination tracks ran out before source tracks? don't you need to check that and visit extra source tracks? you do that at the top of the function, only when there are zero destination tracks.",0,0.989974319934845
1088907770,4033,Paul-Licameli,2023-01-27T12:28:40Z,"here and elsewhere that you call `f`, what proves that there is not a null dereference? track iterators are allowed to dereference an end iterator, getting a null, but then the second dereference might be unsafe. the function would look better with a test for empty src and early exit.",0,0.9909206628799438
1088910295,4033,Paul-Licameli,2023-01-27T12:31:47Z,"the algorithm in `foreachcopiedwavetrack` might visit one source track multiple times and count its space multiply in the estimate. this isn't needed for copying and pasting within a project because of the sharing of data. rather than all this work, it suggests to me that cross-project copying and pasting needs a smarter algorithm to replicate the graph structure and pattern of sharing. this could prevent explosion of file sizes in the first place without so much need to warn about it.",0,0.9869440793991089
1092026457,4033,vsverchinsky,2023-01-31T14:38:30Z,thanks!,1,0.8631753921508789
1092027700,4033,vsverchinsky,2023-01-31T14:39:27Z,"agreed, though not very clear where exactly such strings could be placed",0,0.9856514930725098
1092040429,4033,vsverchinsky,2023-01-31T14:48:53Z,"clipboard access and double checking on same condition (`!tracks.selected()`) - `dopastenotingselected` assumes that nothing is selected... but i agree that commit message isn't very clear, i'll change it to `audio paste code simplification`",0,0.9942834973335266
1092127119,4033,vsverchinsky,2023-01-31T15:48:32Z,"when copying tracks we consider two cases when pasting: 1) there is no selection 2) not empty region is selected in the first case we copy **all tracks** from `src` (used in simplified paste method `dopastenothingselected`). when selection isn't empty `n = min(src.size(), dst.size())` tracks are copied from `src`, plus the **last track** from `src` could be duplicated `m = dst.size() - n` times more, if `m > 0` (corresponds to a paste logic after `!tracks.selected()` condition in `onpaste`). in both cases `foreachcopiedwavetrack` visits tracks that are to be copied according to behaviour described above. does that answers your questions?",0,0.9943789839744568
1092139420,4033,vsverchinsky,2023-01-31T15:57:50Z,"not sure that understand your question. `dst` is allowed to be empty, `src` is expected to be not empty (and it can't have null tracks, right?). i don't see where null pointer dereference could happen in that case. i can comment about preconditions, but it's not a publicly available function which's purpose is to simplify implementation of another function.",0,0.8943549990653992
1092145210,4033,vsverchinsky,2023-01-31T16:01:55Z,also it's possible that different source tracks can reference same blocks,0,0.9891812205314636
1097389776,4033,Paul-Licameli,2023-02-06T13:40:25Z,"yes, i accept this reasoning. but then the new function should have a comment containing this explanation. reading the function in isolation made me question it.",0,0.9428843259811401
1097396828,4033,Paul-Licameli,2023-02-06T13:46:39Z,"right, to prove no null dereference happens, you must assume src is not an empty track list, and that is guaranteed at the call site. it's all happening within one file, yes, so i won't be pedantic about stating preconditions.",0,0.988548755645752
1110074000,4033,Paul-Licameli,2023-02-17T16:53:30Z,"i assume all visible design and wording changes were prescribed by someone else, but i think ""any time"" is more proper english usage. although grammarly just told me it's considered acceptable as one word now.",0,0.9782706499099731
1110080007,4033,petersampsonaudacity,2023-02-17T16:59:25Z,"grammarly says: and in a similar vein the guardian style guide (my personal touchstone in such matters) somewhat jocularly says: and here's the microsoft guide: [a link] so, i'm minded to agree with -licameli that it would be better as ""any time"" with the space. and i'm also minded to think that it would read better as ""allowing you to access trimmed data at any time"" - _with the ""added ""**at**""_",0,0.8573824167251587
1085667628,4171,Paul-Licameli,2023-01-24T17:35:48Z,"if i wrote this, i would do the extra work to define a .cpp file, so that (1) at least one .cpp file in the system includes the header file before any other, guaranteeing that the header is self-sufficient for compilation; and (2) making out-of-line functions doing most of the work that doesn't depend on the template type parameter, leaving only small template functions in the header to be inlined. see for instance observer, which separates an out-of-line, ""type erased"" part. i don't insist that you follow the suggestion for this pr.",0,0.988200306892395
1085671947,4171,Paul-Licameli,2023-01-24T17:39:30Z,it would also make sense to put this file in src/wrappers. the class resembles `wxpanelwrapper` for instance. but i don't insist. library extractions might soon upset the folder organization anyway. although a library for src/wrappers would definitely be a non-toolkit-neutral part of the program until we figure out better abstractions.,0,0.9707660675048828
1085678861,4171,Paul-Licameli,2023-01-24T17:45:34Z,"ditto, suggestion about folder placement. i don't insist.",0,0.9529210925102234
1085696529,4171,Paul-Licameli,2023-01-24T18:00:10Z,"and this file. but whatever the folders they are in, it is good to see realtimeeffectpanel shrink to its essentials.",0,0.5449157953262329
1085699734,4171,Paul-Licameli,2023-01-24T18:03:02Z,this comment got lost in the cut and paste.,0,0.8894899487495422
1085700720,4171,Paul-Licameli,2023-01-24T18:03:52Z,"and if restored, it should also be more complete, describing what the event handlers accomplish.",0,0.9938910007476807
1085710313,4171,Paul-Licameli,2023-01-24T18:12:38Z,do all these #include directives compile on all platforms? i thought ../ would be needed in some of them.,0,0.9902083873748779
1085729918,4171,Paul-Licameli,2023-01-24T18:29:11Z,maybe a more suggestive name? pluginmenubuilder?,0,0.9730389714241028
1085732024,4171,Paul-Licameli,2023-01-24T18:31:08Z,not reachable with default experimental.cmake but it's good you noticed it,1,0.9301226735115051
1085736854,4171,Paul-Licameli,2023-01-24T18:35:30Z,"i see one use of save() not followed by the publication, and that is in `pluginmanager::initializeplugins()`. is that right or wrong?",0,0.9901924133300781
1085739171,4171,Paul-Licameli,2023-01-24T18:37:38Z,"not wrong, i see, because the only subscriber is realtimeeffectlistwindow which cannot possibly be constructed earlier than that initialization.",0,0.9847598671913147
1085753030,4171,Paul-Licameli,2023-01-24T18:47:47Z,"""its"" not it's",0,0.9232506155967712
1085765993,4171,Paul-Licameli,2023-01-24T18:55:41Z,"the constructor makes subscriptions. `resettrack()` destroys both subscriptions. `settrack()` restores the old subscription to non-null, but not the new one. is that right or wrong?",0,0.9894724488258362
1085770239,4171,Paul-Licameli,2023-01-24T18:58:17Z,i am glad to see you figured out the usage of menuvisitor! i hope it did not seem unnecessarily difficult. if you gained some more understanding of registry.h and registry.cpp that is good -- they need some re-work which will need careful review by someone.,1,0.9944061040878296
1085790643,4171,Paul-Licameli,2023-01-24T19:10:32Z,this repeated lambda might be a local variable defined once,0,0.992352306842804
1085794586,4171,Paul-Licameli,2023-01-24T19:13:06Z,"i checked the function again to see what these two {}s are -- and i discovered, `realflags` is passed around among many functions in menuhelper.cpp but never used! i don't know where in source code history it became unused -- but you have an opportunity to simplify with one more commit.",0,0.8785091638565063
1086585722,4171,vsverchinsky,2023-01-25T12:36:07Z,"i believe so, yes. if i remember correctly `src` folder is added to include directories somewhere in cmake",0,0.9811534881591797
1086586960,4171,vsverchinsky,2023-01-25T12:37:28Z,it used to provide macros menu helpers too. and it doesn't build menus,0,0.9909572601318359
1086593332,4171,vsverchinsky,2023-01-25T12:44:17Z,"`mpluginschangedsubscription.reset()` shouldn't be here, thanks!",0,0.6268369555473328
1086595431,4171,vsverchinsky,2023-01-25T12:46:33Z,"had to spend some time to figure out how it works, yes :)",0,0.8462859392166138
1086619354,4171,vsverchinsky,2023-01-25T13:08:54Z,yep,0,0.7848060131072998
1086642480,4171,vsverchinsky,2023-01-25T13:30:05Z,tracked it down to c3db93c . i guess that was removed intentionally.,0,0.9898663759231567
1087817905,4171,Paul-Licameli,2023-01-26T12:47:08Z,you made the suggested simplification to remove duplication. amusingly: you could even simplify this more to: [code block] the implicit constructor of `std::function` used when you call `menuhelper::populateeffectsmenu` works even when the template parameter is of type pointer-to-member-function.,0,0.9928345680236816
1109800197,4171,Paul-Licameli,2023-02-17T13:20:06Z,"the definition of `isrealtimenotactiveflag` is in this file. it becomes unused, so may be deleted too.",0,0.994987964630127
1109822540,4171,Paul-Licameli,2023-02-17T13:38:13Z,maybe you could use composition instead of inheritance: a member of a type inheriting prefslistener. then you would not need to play with type traits to pass through to the base. instead updateprefs is directly invoked directly on this member and on the base class to do different unrelated things that can happen in either sequence.,0,0.9853830337524414
1109827312,4171,Paul-Licameli,2023-02-17T13:42:03Z,"this variable is not longer used, so remove it too",0,0.9929929971694946
1109846173,4171,Paul-Licameli,2023-02-17T13:57:03Z,"a wise comment. i like it that you are aware of dependencies you add. but i checked that this does not add a dependency cycle. true, it may still be an undesirable dependency, but we can figure out some trick to break it if we need that later.",1,0.9902371764183044
1109912192,4171,Paul-Licameli,2023-02-17T14:45:35Z,"... or maybe, even without composition, all you need is: [code block]",0,0.991436779499054
1399351314,5653,vsverchinsky,2023-11-20T15:15:33Z,when included from another library that macro will expand into [code block],0,0.9952671527862549
1399642138,5653,vsverchinsky,2023-11-20T19:20:30Z,i see many c4661s: [code block],0,0.9935746788978577
1399671727,5653,vsverchinsky,2023-11-20T19:45:16Z,"there is also at least one `mclips.push_back` in `insertclip`, which is used in many places. but `insertclip` may start send lots of redundant/unwanted messages on projects that have many clips. so i don't understand why `onnewclip` is not in `insertclip`, but simple insertion of it seem to be too ""dirty"" fix.",0,0.9611455202102661
1399684315,5653,vsverchinsky,2023-11-20T19:55:53Z,why not observer?,0,0.9848847389221191
1399689038,5653,vsverchinsky,2023-11-20T20:00:29Z,`deserialization` flag feels like extra parameter,0,0.9519871473312378
1399694565,5653,vsverchinsky,2023-11-20T20:07:21Z,"my guess is that there will be an extra call to `setcolorindex` during deserialization: one from `onnewclip`, and second in `handlexmlattribute`, right?",0,0.9875895380973816
1399737435,5653,Paul-Licameli,2023-11-20T20:54:17Z,"as linked in crtpbase.h, it's recommended here: [a link] i use the same in `extract-lib-note-track` which has passed code review but is not yet merged into master.",0,0.9955961108207703
1399738822,5653,Paul-Licameli,2023-11-20T20:55:43Z,see the bottom of that page,0,0.9926652312278748
1399741865,5653,Paul-Licameli,2023-11-20T20:59:49Z,i see the same in the logs for the build of `extract-lib-note-track`. i think i should instead give an inline '{}' body to the dtor in the class definition and let the linker de-duplicate it.,0,0.9909172654151917
1400428663,5653,Paul-Licameli,2023-11-21T11:23:05Z,"how would i create the observers and the subscriptions if wavetrack is the publisher? each new wavetrack must inform its own listener, which has its own separate state (the wave track color), of the event of addition of clips. so the listener must be created too with each wavetrack -- and that's where `clientdata` is useful, if also i use `buildall` instead of creation on demand. it allows hooking of a constructor of a class. and i need `buildall` so that the new attached object is present from the beginning, before any clips are created or deserialized. but you are right that i could then also use observer instead of this class. there is the problem of getting deep-copy right, but that is what `reparent` is for.",0,0.976408064365387
1400429819,5653,Paul-Licameli,2023-11-21T11:24:09Z,"i'm not sure of the complete set of messages that will be useful in future. i could easily use observer and an enumeration now for creation, deserialization, deletion, ...",0,0.6833458542823792
1400431032,5653,Paul-Licameli,2023-11-21T11:25:11Z,"yes, does it matter much? it would matter in case a file serialized wave color without clip color, but then the clip colors would still be initialized. i don't think there are any such legacy files, though.",0,0.9893403649330139
1407510341,5653,crsib,2023-11-28T10:02:13Z,i think we should revise the usage of crtpbase in a separate pr. i have opened a task for that #5704,0,0.9838783740997314
1484049761,5653,crsib,2024-02-09T09:10:41Z,"serializable cache is not a usual thing, tbh",0,0.9678021669387817
1484057855,5653,crsib,2024-02-09T09:18:09Z,"i think this violates srp and in a bad way. i missed it somehow, during the first pass of the review, but it caught my eye when i saw color index serialization in the wave cache.",-1,0.9556484818458557
1492104404,5653,crsib,2024-02-16T08:16:33Z,"i have a strong opinion that the fix is worse than the problem. i understand that it is pointless to argue. otherwise, my review would've ended here.",0,0.5872217416763306
1952468963,8211,saintmatthieu,2025-02-12T11:28:01Z,could probably be `const` ?,0,0.9901934266090393
1952482053,8211,saintmatthieu,2025-02-12T11:34:56Z,"this guy is a `static` and the `updatemanager` is also a static. maybe make it a const, non-optional member of the manager ?",0,0.991676926612854
1952487646,8211,saintmatthieu,2025-02-12T11:39:35Z,"being paranoid: i guess it's better not to share uuid although the user gave her consent than the other way round, right? in that case, `result == wxok` would be stricter and hence safer.",0,0.7835088968276978
1952488815,8211,saintmatthieu,2025-02-12T11:40:30Z,(you could even write an `assert(result == wxok || result == wxno)`),0,0.9946460723876953
1952490227,8211,saintmatthieu,2025-02-12T11:41:30Z,spelling ;),0,0.8659493327140808
1952494395,8211,saintmatthieu,2025-02-12T11:44:56Z,i'm lazy - could you explain why we need this line?,-1,0.9443755149841309
1952522083,8211,saintmatthieu,2025-02-12T12:05:49Z,just curious: what's the leading `x` for ?,0,0.9833729863166809
1952554437,8211,saintmatthieu,2025-02-12T12:26:57Z,"i see that not all `request`s are subject to optional headers, e.g. in `downloadavatar`. what's the rule of thumb here ?",0,0.9920803904533386
1952561692,8211,kryksyh,2025-02-12T12:32:23Z,"it was asked from the backend team, not sure about that",0,0.9582787156105042
1952563442,8211,kryksyh,2025-02-12T12:33:35Z,yes :grinning_face_with_sweat:,1,0.9546302556991577
1952565478,8211,kryksyh,2025-02-12T12:35:03Z,"yes, it should be const",0,0.9916676878929138
1952571356,8211,kryksyh,2025-02-12T12:39:04Z,"we are setting these headers only for requests sent to the audio.com backend. avatars and project data requests are sent to the storage, and they do not require those.",0,0.9942149519920349
1952574816,8211,kryksyh,2025-02-12T12:41:30Z,"after the preferences window is closed, the configuration file is updated, but the option objects may contain cached data that needs to be updated.",0,0.9918606877326965
1952598613,8211,kryksyh,2025-02-12T12:58:26Z,"that's a good point, it makes sense.",1,0.9739742875099182
1952646690,8211,saintmatthieu,2025-02-12T13:27:09Z,"ok, so i should not expect any `setoptionalheaders` outside the lib-cloud-audiocom module. still i find it hard to figure out which requests should have the uuid and which not. is there an explicit list someplace, or anything to help code readers?",0,0.8830062747001648
1953009270,8211,kryksyh,2025-02-12T16:25:54Z,"yes no, i don't think so",0,0.9818229675292969
1609888328,6472,igorkorsukov,2024-05-22T12:46:55Z,"it may be better to pass the entire context as a property, this is done in other places, this can be useful when more properties from it are needed (for example, a selected loop)",0,0.9915643930435181
1609897022,6472,igorkorsukov,2024-05-22T12:51:53Z,"no objections, but for information, the theme can be used in the cpp directly, like this [code block]",0,0.9867289662361145
1609915563,6472,igorkorsukov,2024-05-22T13:03:52Z,"at the moment, the reasons why we need to have a base class with virtual methods and an inheritor are not clear. i believe this is not necessary.",0,0.9862240552902222
1609916455,6472,igorkorsukov,2024-05-22T13:04:28Z,in au4 we don't use singletons,0,0.98827064037323
1609919823,6472,igorkorsukov,2024-05-22T13:06:46Z,"i think its possible in one line... (in au3, in my opinion, the code width is too small, i think this is a legacy of many years ago, when there were small monitors with low resolution)",0,0.959014356136322
1609931800,6472,igorkorsukov,2024-05-22T13:14:20Z,"it's best to avoid in-out arguments unless clearly necessary. for example, here i think its better to do this: [code block]",0,0.9905912280082703
1609933644,6472,igorkorsukov,2024-05-22T13:15:27Z,missing return?,0,0.9871187210083008
1609937809,6472,igorkorsukov,2024-05-22T13:18:05Z,better [code block],0,0.9894154071807861
1609940250,6472,igorkorsukov,2024-05-22T13:19:10Z,in au4 we use `camelcase` for method names,0,0.9940131306648254
1609944423,6472,igorkorsukov,2024-05-22T13:21:00Z,and i think these methods can be made static for convenience,0,0.9867227673530579
1609947692,6472,igorkorsukov,2024-05-22T13:22:42Z,see [a link],0,0.9957407712936401
1609948885,6472,igorkorsukov,2024-05-22T13:23:23Z,not necessary for us,0,0.9915251135826111
1609950796,6472,igorkorsukov,2024-05-22T13:24:36Z,"here the painter cannot be null, there is no mandatory check",0,0.9906656742095947
1609952121,6472,igorkorsukov,2024-05-22T13:25:21Z,"please do not use auto unless necessary (for example, if the type is too complex)",0,0.9841914176940918
1609954278,6472,igorkorsukov,2024-05-22T13:26:22Z,theres no need to call saves and restore here.,0,0.9911080598831177
1609957324,6472,igorkorsukov,2024-05-22T13:28:05Z,"i think here its better to explicitly set the pen for the painter. this code essentially does nothing, it modifies a local variable that is not passed to the painter.",0,0.9805640578269958
1609960070,6472,igorkorsukov,2024-05-22T13:29:42Z,"there are a lot of objects being passed by non-constant reference, are they all changed by this method?",0,0.99137282371521
1609964624,6472,igorkorsukov,2024-05-22T13:32:07Z,"pen (color) does not change, so there is no need to set it in the loop",0,0.982192873954773
1609965665,6472,igorkorsukov,2024-05-22T13:32:45Z,"pen (color) does not change, so there is no need to set it in the loop",0,0.982192873954773
1609967091,6472,igorkorsukov,2024-05-22T13:33:36Z,in au4 we use `camelcase` for method names,0,0.9940131306648254
1609967751,6472,igorkorsukov,2024-05-22T13:33:58Z,not need,0,0.9910385608673096
1609971235,6472,igorkorsukov,2024-05-22T13:36:03Z,"its better to use a structure with named fields, its much more convenient and clearer than `std::get<0>`",0,0.9848204255104065
1609979066,6472,igorkorsukov,2024-05-22T13:37:31Z,"please always initialize with default values, like this [code block]",0,0.9933801889419556
1609981287,6472,igorkorsukov,2024-05-22T13:38:22Z,there is no need to explicitly call initialization here,0,0.9946697354316711
1609983481,6472,igorkorsukov,2024-05-22T13:39:42Z,"in au4 we prefer to use `=` for initialization, and only use `{}` where necessary [code block]",0,0.9945525527000427
1610174197,6472,grliszas14,2024-05-22T15:07:00Z,"it makes sense if you know that there can be different types of rulers in audacity. i implemented timeline but you can also have ""beats and measures"" ruler - which needs to have the same methods implemented. i can remove it right now if you want but we're gonna need it later anyway",0,0.9824001789093018
1610190614,6472,grliszas14,2024-05-22T15:15:39Z,"isn't it a good habit to use {} initialization? i mean it has advantage of additional check - it saves you from conversions that lose information like: int b{8.1} -> will produce compilation error int b = 8.1 -> will compile, but b is 8 instead of 8.1 i know it's rather rare case but :p",1,0.9811248779296875
1610529838,6472,igorkorsukov,2024-05-22T19:19:13Z,"yes, i assumed that there might be something like that, but then the architecture must be appropriate. that is, then it turns out that there should be something like this: * single implementation of timeline for different things * must be type of timeline * there must be a factory that created a formatter for a given type. (these are all assumptions, i didn't look at how it was done in au3 :) ) yes, everything may be like this... but it may not be like that :) therefore, i suggest not complicating things until it is clear why it is needed. because in reality it may be a little different.",1,0.9865702986717224
1610559240,6472,igorkorsukov,2024-05-22T19:46:09Z,"there may be some benefits to using `{}`, but the big value is readability, and easy to read code means consistent code. it's common practice in the muse framework to use `=`, and there's no good reason to change hundreds of thousands of lines of code to do otherwise :) more philosophical thoughts, if we use `{}` to initialize class members, then it is consistent to use `{}` to initialize local variables, but in practice this is not the case, in one place its one thing, in another place its another :) another point, i often see `double v {}`, but this only raises questions about what the default value is, and how much time is spent on thinking depends on the developers experience :) in the `double v = 0.0;` option, for developers of any experience the same minimum time of awareness. i.e., pros and cons of both approaches can be found if it is important for you to use `{}`, for technical reasons, or you are used to it and think that it is more correct, then i do not insist on using `=`. i see that au3 uses `{}`, so it could be a big cognitive problem to switch to `=` for no obvious reason (other than code consistency)",1,0.9913523197174072
1611079042,6472,grliszas14,2024-05-23T06:32:09Z,"it's not that important for me, i'll switch to `=`, that's not a problem :) it's just the first time i see a different opinion about that, but it's always good to get a different point of view - that's why i asked. good point with `double v{}`, i didn't think about that",1,0.9939542412757874
1611080264,6472,grliszas14,2024-05-23T06:33:29Z,"sure, then i'm going to remove base class for now",0,0.9860759377479553
1611624288,6472,igorkorsukov,2024-05-23T12:41:07Z,i think it can be one line,0,0.98286372423172
1611631775,6472,igorkorsukov,2024-05-23T12:46:24Z,"better get this values once, not on each loop iteration",0,0.9877864122390747
1613304394,6472,grliszas14,2024-05-24T11:11:40Z,fixed,0,0.920660674571991
1613304488,6472,grliszas14,2024-05-24T11:11:44Z,fixed,0,0.920660674571991
1469226612,5899,crsib,2024-01-29T08:26:38Z,"i don't expect this class to be used anywhere except for the current effects implementation. it makes very strict assumptions about the reader/writer and gives a fair amount of problems due to its' double buffering, which made 3.2 such a torture.",-1,0.7851350903511047
1469228090,5899,crsib,2024-01-29T08:27:37Z,"this class uses `this_thread::yield` every second loop and doesn't use `pause`. it makes sense, but not exactly correct.",0,0.9557942152023315
1469230102,5899,crsib,2024-01-29T08:28:44Z,this library is surely long needed.,0,0.9616520404815674
1469233583,5899,crsib,2024-01-29T08:32:08Z,"i see absolutely no justification for using exceptions here. they are meant to signal exceptional situations. in the worst case, they can be used to get back deep into the call stack, but that always indicates serious problems with program design.",0,0.5563490986824036
1469260885,5899,crsib,2024-01-29T08:56:19Z,reporting progress is very complex in mt environments. i'm not sure that this value will be meaningful by the time the progress is reported.,0,0.7931846976280212
1469267455,5899,crsib,2024-01-29T09:01:51Z,"this, however, introduces **false sharing**, which is a problem in this case. `abandoned` is mostly read, and rarely modified (never, ideally). `total` is modified every call to `operator ()`, effectively invalidating `abandoned` for every other cpu.",0,0.9747825264930725
1469272601,5899,crsib,2024-01-29T09:06:22Z,"this looks like a cancellation pattern but with progress tracking. i don't think that the progress tracking is accurate or needed here. at the same time, i think that using an exception and, specifically, an exception from the `details` namespace reduces the scope where this class is useful.",0,0.9771800637245178
1469272935,5899,crsib,2024-01-29T09:06:41Z,what is the justification of the capital p here?,0,0.9902442693710327
1469273925,5899,crsib,2024-01-29T09:07:31Z,"no license identifier. previously, audacity ignored it in most files, but that is not correct.",0,0.9889510273933411
1469290575,5899,crsib,2024-01-29T09:20:42Z,why? this limits the use of this class.,0,0.984266459941864
1469291704,5899,crsib,2024-01-29T09:21:31Z,typo in `seriallyx`,0,0.994632363319397
1469293991,5899,crsib,2024-01-29T09:23:18Z,good!,1,0.9942196607589722
1469298485,5899,crsib,2024-01-29T09:26:43Z,"what is the justification for making progress callable? i would not object if the users below were allowed to receive a callable instead of progress. however, progress is used only to stop the workers if the exception occurs.",0,0.9891166090965271
1469299382,5899,crsib,2024-01-29T09:27:24Z,i find such code to be very poorly readable.,-1,0.9491943717002869
1469303947,5899,crsib,2024-01-29T09:30:39Z,"i like that the assertion is not the only check, but do we need the `n_threads > 0` at all?",0,0.5696547627449036
1469305155,5899,crsib,2024-01-29T09:31:39Z,i am very concerned about this code. it must be rewritten without the comma.,-1,0.9852759838104248
1469312138,5899,crsib,2024-01-29T09:36:30Z,"contrary to the previous place, i see very little reason to split this into multiple lines instead of using ++index right in place.",0,0.9807953238487244
1469314006,5899,crsib,2024-01-29T09:37:59Z,"i can't say i like this, but i understand that this is safe.",1,0.9387547373771667
1469315838,5899,crsib,2024-01-29T09:39:20Z,not having thread pools limits the usability of this function quite significantly.,0,0.9370602965354919
1469355245,5899,crsib,2024-01-29T10:05:40Z,"if i understand correctly, this function may put cpu to 100% load during the playback. there must be more control over the thread priorities and count here.",0,0.9885949492454529
1469364578,5899,Paul-Licameli,2024-01-29T10:12:14Z,it was first written and used in scrubbing to communicate to the thread that fetches audio in response to mouse movements. that file is just moved without change and does not need review.,0,0.9939477443695068
1469366071,5899,Paul-Licameli,2024-01-29T10:13:26Z,that file too is just moved unchanged and not used in the new files.,0,0.99289870262146
1469371665,5899,Paul-Licameli,2024-01-29T10:17:46Z,"the alternative is to complicate how tasks are written, requiring them to test and exit. it is simpler instead to let them use a possibly non-returning function, which also, in the future c++20 version perhaps, would instead become a coroutine suspension point. then there could be the possibility of non-resumption or migration of a task to another thread in a more sophisticated task scheduler.",0,0.9885327816009521
1469373488,5899,Paul-Licameli,2024-01-29T10:19:08Z,"very good point. and this is why i wrote the `noninterfering` utility class template, which should more to lib-concurrency and be used here.",1,0.9822891354560852
1469375300,5899,Paul-Licameli,2024-01-29T10:20:33Z,none really. we don't have very well defined conventions. we have already namespace observer,0,0.8962481021881104
1469379783,5899,Paul-Licameli,2024-01-29T10:23:53Z,"at least when the supplied argument is 1, you know that the task just runs serially on the calling thread, so you can easily confirm first that the algorithm is serially correct before debugging it with multiple threads. in the first application of this algorithm for tempo detection, the calling thread is the main thread and is the only one that may update the progress dialog.",0,0.9923008680343628
1469381766,5899,Paul-Licameli,2024-01-29T10:25:25Z,it's the unfortunate correct way to forward an argument perfectly.,-1,0.9778540730476379
1469383258,5899,Paul-Licameli,2024-01-29T10:26:32Z,wrong -- `index` is used twice in arguments of a constructor and order of evaluation is not specified. i must increment only in another statement.,0,0.7087939381599426
1469384410,5899,Paul-Licameli,2024-01-29T10:27:25Z,synchronizing on the get of a future of a packaged_task that runs on the thread should be equivalent to joining the thread.,0,0.9929848313331604
1469385759,5899,crsib,2024-01-29T10:28:26Z,"i can have a task where i need to handle complications explicitly. i do have such use cases now, but not using this class, obviously. i don't see how handling the result complicates anything.",0,0.9791923761367798
1469386483,5899,Paul-Licameli,2024-01-29T10:29:02Z,i didn't want to distract myself yet with writing a thread pool too. i wanted to get to a demonstration of some real performance wins and also ease of use of the new utility in a few places. do we already have a usable thread pool in a third party library/,0,0.9100872278213501
1802849473,7561,kryksyh,2024-10-16T10:39:22Z,"i don't like the code duplication here, how can i propagate the action from trackeditactionscontroller to qml item?",-1,0.8522863388061523
1802856579,7561,Eism,2024-10-16T10:43:48Z,please add nullptr check here,0,0.9953804016113281
1802863007,7561,Eism,2024-10-16T10:47:51Z,previous version was better: verb + noun,0,0.9883739948272705
1802864843,7561,Eism,2024-10-16T10:48:46Z,also please add nullptr check,0,0.995612621307373
1802869632,7561,Eism,2024-10-16T10:51:13Z,i think you first should remove the track and then send a notification,0,0.9916708469390869
1802889398,7561,kryksyh,2024-10-16T11:06:01Z,i can't agree with that.,-1,0.7623767256736755
1802891373,7561,kryksyh,2024-10-16T11:07:42Z,"what if a subscriber tries to access data associated with the track directly or indirectly, say the name of the deleted track? if the track is deleted its data will be unavailable.",0,0.9808390140533447
1802898022,7561,Eism,2024-10-16T11:13:02Z,"registering such actions is used in cases where we know for sure that these actions will be used in several places and usually they do not depend on the ui, i.e. in the case of track-rename i would assume that it accepts trackid and newname - the data is prepared and only needs to be applied. i am not sure that there is an action for renaming a track, so i would suggest not registering such an action and simply handling the rename call - call titleedit in qml. so probably we need a previous solution with `var operations` for menubutton",0,0.9916137456893921
1802905555,7561,kryksyh,2024-10-16T11:19:26Z,"but, i'm okay to stick to either style, but we should enforce it. right now there is a total mess in [a link]",-1,0.9777944087982178
1802911137,7561,kryksyh,2024-10-16T11:24:08Z,in qt they solved the problem by emitting two events `xxxabouttoberemoved` and `xxxremoved` which we do not have in au3 yet. so i would rather have this event before the data is gone.,0,0.9914701581001282
1804252221,7561,Eism,2024-10-17T07:28:44Z,no longer needed,0,0.9761536717414856
1804400906,7561,kryksyh,2024-10-17T09:09:23Z,uiaction is needed to populate the menu; please correct me if i'm wrong.,0,0.9772046208381653
1804603965,7561,grliszas14,2024-10-17T11:35:17Z,i would add [code block],0,0.9954500794410706
1804608658,7561,grliszas14,2024-10-17T11:39:13Z,shouldn't it be effects? (looking at q_invokable function in trackslistmodel) [code block],0,0.994155764579773
1804618727,7561,grliszas14,2024-10-17T11:47:39Z,"ups, looks like my formatter stopped working :grimacing_face:",-1,0.9942787885665894
1804631549,7561,kryksyh,2024-10-17T11:57:47Z,"oops, typo, thanks",1,0.7539929151535034
1804632708,7561,kryksyh,2024-10-17T11:58:45Z,sure,0,0.9422702193260193
1804841090,7561,igorkorsukov,2024-10-17T13:57:59Z,"i don't find the implementation of this method in this pr.. but its presence here may be a problem. usually the actions are received by the controller, which calls the service.. which performs the action and notifies about the change, the view model is subscribed to the changes...",0,0.9547165036201477
1804845024,7561,igorkorsukov,2024-10-17T14:00:08Z,"in fact, all these constants can be omitted... this is how it is done historically... but there is little sense and convenience (rather, it is even inconvenient)",0,0.9319453835487366
1804849624,7561,igorkorsukov,2024-10-17T14:02:47Z,"this should be called in trackeditinteraction()->deletetrack. the point is that if trackeditinteraction()->deletetrack is called from somewhere else.. the logic associated with the history should also be executed, i.e. it is part of the logic of the trackeditinteraction()->deletetrack method",0,0.9915044903755188
1804904526,7561,grliszas14,2024-10-17T14:32:23Z,actually i started to think about that in terms of implementing clip overlapping: when you move a clip over another clip in the end you end up with doing multiple actions at once: 1. clip move 2. clip trim or clip delete both of these will add state to the undo-stack while i think it should be considered as one action what do you think?,0,0.9887977242469788
1804917797,7561,igorkorsukov,2024-10-17T14:40:07Z,"yes, it looks like one action. in such cases usually something like this (schematically): [code block] i.e. there are private methods that perform one action without side effects there are public methods that perform some logic using the algorithm with private methods",0,0.991313636302948
1804929107,7561,igorkorsukov,2024-10-17T14:46:55Z,there is also this option: [code block] but the first option with private methods without side effects is better,0,0.9917427897453308
1804959958,7561,kryksyh,2024-10-17T15:05:22Z,"yes, it was a leftover, removed.",0,0.9870542883872986
1804960217,7561,kryksyh,2024-10-17T15:05:33Z,"okay, removed",0,0.9883775115013123
1806045916,7561,Eism,2024-10-18T07:52:34Z,"in the case of track-rename, we have to create menuitem manually and add it to the list",0,0.993019163608551
1806188261,7561,igorkorsukov,2024-10-18T09:29:27Z,to understand why this item is created manually and not from an action?,0,0.9908128380775452
1806190806,7561,igorkorsukov,2024-10-18T09:31:23Z,"here you need to explicitly specify translatablestring otherwise the utility for generating the file for translation will not process these lines (there is just a parser by keywords, translatablestring is a keyword)",0,0.9930216670036316
1806194201,7561,kryksyh,2024-10-18T09:33:47Z,here is the discussion with [a link],0,0.9934136271476746
1806195231,7561,kryksyh,2024-10-18T09:34:33Z,basically because the rename is only to be executed from the context menu,0,0.9869568347930908
1806195476,7561,kryksyh,2024-10-18T09:34:45Z,"i see, thanks",1,0.8456934690475464
1806196055,7561,igorkorsukov,2024-10-18T09:35:14Z,to understand why this item is created manually and not from an action?,0,0.9908128380775452
1806201237,7561,igorkorsukov,2024-10-18T09:38:58Z,"i don't think that's the reason, most of the action is from one place now... but that's changing..",0,0.9512320160865784
1806204922,7561,igorkorsukov,2024-10-18T09:41:06Z,"for example, i really like the control that is sometimes used on websites, when you hover the mouse over the action button - and the actions open up in a fan, usually there are 3-5 actions, the most popular ones... :)",1,0.9943939447402954
1806228646,7561,kryksyh,2024-10-18T09:55:09Z,are you talking about [a link]? that actually would be awesome to have as optional feature.,1,0.7942245602607727
669643255,1295,Paul-Licameli,2021-07-14T14:00:32Z,"the commit comment means ""now"", not ""not"", right?",0,0.989464282989502
669643878,1295,Paul-Licameli,2021-07-14T14:01:11Z,shuttlegui.* all look good,1,0.8935650587081909
669644469,1295,Paul-Licameli,2021-07-14T14:01:51Z,"i'd `emplace_back` instead, unimportant",0,0.9932996034622192
669645814,1295,crsib,2021-07-14T14:03:31Z,"yes, i will fix that",0,0.9876794219017029
669651901,1295,Paul-Licameli,2021-07-14T14:10:35Z,i think this function and the next would be nicer as const. the format arguments array should remain unchanged. this is not imporant enough to block the pr.,0,0.9806857109069824
669652728,1295,Paul-Licameli,2021-07-14T14:11:33Z,"why stable sort? how could two formatarguments have the same placeholderposition now? maybe if one placeholder is a prefix of another? hm, sounds like a caller mistake then.",0,0.9787119626998901
669654542,1295,Paul-Licameli,2021-07-14T14:13:31Z,i see that this explains why wxwrapsizer was not constructed with `wxremove_leading_spaces`,0,0.9924865961074829
669657159,1295,Paul-Licameli,2021-07-14T14:16:24Z,"i'm done with this commit, approve it so far with suggestions for later",0,0.6621021628379822
669663102,1295,crsib,2021-07-14T14:22:58Z,"this is an edge case handling. i'm not sure, that this edge case will ever occur. technically it is possible, that a placeholder is missing from the translation to one language, but is present in another (why? i don't know). in this case, `placeholderposition` will be `npos`. if we have several cases of that - `stable_sort` will preserve the original order for the format arguments. so i think, that for 99.9% of cases `sort` is sufficient. but for the majority of cases, both `sort` and `stable_sort` will be no-op, because there will be only one item to format.",0,0.9682630300521851
669665189,1295,Paul-Licameli,2021-07-14T14:25:10Z,maybe other uses of mview in this file should have null checks too,0,0.9850983619689941
669665337,1295,Paul-Licameli,2021-07-14T14:25:20Z,ok,0,0.9233372807502747
669667350,1295,Paul-Licameli,2021-07-14T14:27:31Z,might just be `read` because false is the default specified for that settings object,0,0.9905808568000793
669667544,1295,Paul-Licameli,2021-07-14T14:27:40Z,might also just be `read`,0,0.9904108047485352
669668387,1295,crsib,2021-07-14T14:28:32Z,"i'm not aware of other crashes, but i will check. this one i found out accidentally while testing",0,0.9593227505683899
669668602,1295,Paul-Licameli,2021-07-14T14:28:46Z,add `gprefs->flush();`,0,0.9933192729949951
669670733,1295,Paul-Licameli,2021-07-14T14:31:01Z,"do we want to spell out ""application""?",0,0.9923381209373474
669671813,1295,Paul-Licameli,2021-07-14T14:32:09Z,* how to turn * is replaced with,0,0.9931319355964661
669674187,1295,Paul-Licameli,2021-07-14T14:34:49Z,move the comment to the line just before the xo,0,0.9916286468505859
669674412,1295,Paul-Licameli,2021-07-14T14:35:04Z,"same question about ""app""",0,0.9881551265716553
669681016,1295,Paul-Licameli,2021-07-14T14:41:52Z,move the hint to the line before the xxc,0,0.9940191507339478
669683559,1295,Paul-Licameli,2021-07-14T14:44:38Z,"no problems here, but there is duplication of code in updatenoticedialog. later in master, fix the duplication. maybe a common function taking shuttlegui&.",0,0.9880670309066772
669683674,1295,crsib,2021-07-14T14:44:46Z,i've asked jouni about it,0,0.9770429134368896
669687044,1295,Paul-Licameli,2021-07-14T14:48:24Z,large number of moved lines makes this diff hard to understand,0,0.8719845414161682
669689434,1295,Paul-Licameli,2021-07-14T14:50:56Z,sorry i must return to this commit later today.,-1,0.9917674660682678
669701773,1295,crsib,2021-07-14T15:04:10Z,"a huge text blob in the middle of the layout made it very hard to read and debug. probably, i should move the license blob to a different file, so the diff will be shorter",-1,0.9036777019500732
669822671,1295,crsib,2021-07-14T17:40:51Z,"this would make the algorithm much more complex or use extra memory. the second is feasible, i think",0,0.98723304271698
669823117,1295,crsib,2021-07-14T17:41:31Z,it will also allow replacing stable_sort with sort,0,0.9950278401374817
669878340,1295,Paul-Licameli,2021-07-14T19:04:55Z,these is a way for msgfmt to make errors if the format substitutions dont match. lets make sure to use it when accepting translations.,0,0.9890046715736389
669883472,1295,crsib,2021-07-14T19:13:05Z,i'm not quite sure what i should here. btw stable_sort is replaced by sort as a part of addressing another comment,0,0.7072994112968445
670033700,1295,Paul-Licameli,2021-07-15T00:09:00Z,"my last comment mentioned something i should remember in the next round of acceptance of translations, not anything for you to do now. if english has %s but some .po file omits it, i think there is a way to detect that error when i accept translations.",0,0.984558641910553
1427776485,5789,LWinterberg,2023-12-15T09:51:52Z,"""copy selection timestamp"" would be the better string for this function.",0,0.9898741245269775
1427801560,5789,LWinterberg,2023-12-15T10:16:52Z,"why is copy bound to the word ""selection""? it's not a clickable part of the ui, meaning it's not a place where you'd click and expect anything to happen. i'd expect ctrl+c to copy if one of the numerictextctrl boxes is focused.",0,0.9785625338554382
1427815256,5789,LWinterberg,2023-12-15T10:29:37Z,"it is unusual for timestamps to be of variable length. they usually are more useful to be used in conjunction with other programs, and those other programs usually expect a fixed format like iso 8601 or smpte timecodes. i'm not saying that our output _must_ be one of these standards - but imagine implementing a reverse function, where you can paste a timestamp into the numerictextctrl. if the timecode was always the same, it'd simplify things.",0,0.9785003066062927
1427841606,5789,LWinterberg,2023-12-15T10:57:00Z,"i think this is the wrong place for this menu entry - the function will happily copy a point selection (just the black line) as eg 3m57.117s-3m57.117s. the menu entry can just live directly in the select menu, underneath ""store cursor position"".",0,0.8735975027084351
1427884015,5789,lededev,2023-12-15T11:44:50Z,"receive, modify menu location and menu item description.",0,0.9940435290336609
1427884231,5789,lededev,2023-12-15T11:44:58Z,"ok, because this time control has multiple display formats, i will leave the output as is and just remove the spaces.",0,0.9923912882804871
1427884354,5789,lededev,2023-12-15T11:45:03Z,"this is more efficient, as you only need to move the mouse to click once, and the right-click will not lose the focus of the audio selection. why not let us keep the right click, delete the double click, and then implement a regular operation of ctrl+c to mtimecontrols?",0,0.9883345365524292
1427967074,5789,LWinterberg,2023-12-15T13:18:30Z,"if we only were concerned about making timecode copying more efficient, you'd be absolutely right. you even could dedicate a copy button next to the selection settings button to give that functionality some affordance, so it's possible to figure out you even can copy without consulting the manual. unfortunately, we can't really do that. audacity has millions of users all with different needs and most of them casual. copying timecodes is not important enough to warrant a permanently visible button, and as we're working on simplifying the app, adding invisible/""you have to read the manual to find it"" features is going in the wrong direction. the compromise solution here is to allow users which need this function to set themselves one-button shortcuts, and that is something you can do for any menu item: ![a link]",-1,0.49483394622802734
1427978429,5789,lededev,2023-12-15T13:30:47Z,"configuring shortcut keys is indeed convenient for keyboard-focused users, but for users who use the keyboard and mouse more balancedly, positioning the mouse on a text label and right-clicking to complete a shortcut function is as convenient as keyboard shortcuts. if possible, i hope to retain the mouse shortcut operation of right-clicking the ""select"" text label on the toolbar to activate this function. that position will not cause any side effects, and since there will be a system floating window notify after the operation, it will not cause any confusion to the user.",0,0.9339109659194946
1427991901,5789,DavidBailes,2023-12-15T13:45:01Z,"i'm not sure the user would expect this. they may well be using these controls to fine tune a time selection, and then press ctrl + c to copy the audio the audio to the clipboard. so i don't think changing the effect of the shortcut here is a good idea.",0,0.8858542442321777
1427998721,5789,lededev,2023-12-15T13:52:18Z,"only when mtimecontrols got focus, then they can handle ctrl+c, and that time, user can not copy audio because focus not on track window. i just think that the operation of first clicking to select the time control and then pressing ctrl+c is a bit cumbersome, this requires a combination of mouse and keyboard and cannot be completed with one hand. and it will make the track selection area lose focus.",-1,0.5576201677322388
1428014340,5789,DavidBailes,2023-12-15T14:08:06Z,oh yes they can!,0,0.9541916847229004
1428021999,5789,lededev,2023-12-15T14:15:29Z,"in that case, i also agree to remove ctrl+c. this is just a small function. it seems to be enough to provide a configurable keyboard shortcut and a mouse shortcut operation entrance.",0,0.9935111403465271
1798899165,7515,igorkorsukov,2024-10-14T07:32:36Z,let's add `using trackidlist = std::vector ;`,0,0.9947741627693176
1799104985,7515,grliszas14,2024-10-14T09:50:42Z,fixed,0,0.920660674571991
1801037172,7515,saintmatthieu,2024-10-15T12:05:04Z,"as discussed 1-1: there is no plan for discontinuous time selection ( please confirm), hence the time selection can entirely be determined by m_selectedstarttime and m_selectedendtime.",0,0.9946183562278748
1801044450,7515,saintmatthieu,2024-10-15T12:10:34Z,"in audacity 3, some logic like the generators determine where to generate based on this time selection and the (possibly discontinuous) set of selected tracks. in audacity 4, with discontinuous clip selection, it seems to me like there is going to be an additional, prevailing logic: generators will first check if there are selected clips (`m_selectedclip` will by then be `m_selectedclips`) and use this as placeholder, else it will fall back on the au3 behavior.",0,0.9873392581939697
1801055990,7515,igorkorsukov,2024-10-15T12:19:14Z,we have some help functions for work with containers [a link] [code block],0,0.9944570064544678
1801056754,7515,igorkorsukov,2024-10-15T12:19:43Z,see [a link],0,0.9957407712936401
1801258998,7515,saintmatthieu,2024-10-15T14:12:47Z,`const trackidlist&`,0,0.9946540594100952
1801259360,7515,saintmatthieu,2024-10-15T14:13:00Z,... and below,0,0.9281920194625854
1801260629,7515,saintmatthieu,2024-10-15T14:13:38Z,would you rename to `splittracksat` ? it reads better.,0,0.9907116293907166
1801267820,7515,saintmatthieu,2024-10-15T14:17:22Z,could you make this method internally call `setselectedtracks({})` ? it would make easier to recognize that the logic is the same for both.,0,0.9927046895027161
1801289224,7515,saintmatthieu,2024-10-15T14:26:18Z,`pasteintonewtracks()` seems more correct?,0,0.9914462566375732
1801345389,7515,saintmatthieu,2024-10-15T14:52:50Z,"i don't really understand this undo logic overall: 1. get the index of the first selected track in the project (which could be `trackidlist.size()` if none is selected), call it _i_ 2. undo, 3. reload the tracks from the project, which provides new track list. 4. set the _i_th track from the reloaded list as the selected track. would that work if: a. i create and select a track, b. i create a new track - it should get automatically selected. c. i undo. in this case, _i_ would be `1`, but `newtrackidlist.size() == 1`, and no track would be selected anymore. i audacity 3, the selection reverts to the track created in step a. i wonder how it's implemented there, or what undo manager the muse framework provides and if it could be reused just for the track selection state.",0,0.9586306810379028
1802479232,7515,grliszas14,2024-10-16T07:05:09Z,"i will create a new task for it, this case needs some extra care - it's not working as intended anyway (and never was based on your example)",0,0.9913042783737183
1802554399,7515,saintmatthieu,2024-10-16T07:57:28Z,nice,1,0.7884483337402344
1802589175,7515,saintmatthieu,2024-10-16T08:17:36Z,"it seems to me that all `selectionactive`-related members (signal, getter, setter, state variable) are not used externally at all, as a consequence of which it should be removed to simplify and clarify the logic even more. or is there a reason to keep it i'm missing?",0,0.989924430847168
1802599067,7515,saintmatthieu,2024-10-16T08:23:35Z,"this confused me for a while, i thought we might really pass a range, but in fact, looking at line 22 shows that `m_startpoint.y()` just equals `y` at this stage. at least please replace `m_startpoint.y()` with just `y` to help the slow-minded of my kind understand your code better. you could even have a `determinatetrack(double y)` that'd internally just call `determinatetracks(y, y)`, but that'd be a stretch.",-1,0.733394205570221
1802605708,7515,saintmatthieu,2024-10-16T08:27:10Z,"btw, you have a `::resetdataselection` method in this class that does this, which you could probably get rid of.",0,0.9877070784568787
1802611302,7515,saintmatthieu,2024-10-16T08:30:29Z,"i think this method might be simplified to [code block] which would also make it behave more like au3. say i have two tracks selected, and i click on one of them to drag my selection. in audacity 3, this will deselect the non-clicked track, while here it won't. or was this a new spec i'm not aware of?",0,0.9831861257553101
1802639426,7515,saintmatthieu,2024-10-16T08:47:26Z,"about `isdataselected()` : i'm not sure what it is supposed to tell its clients? for sure it's only about time (it doesn't consider whether a track is selected or not). it would return true if start time were 10 and end time were 1. start and end time setters are part of the public interface, and i don't see sanity checks to make sure that end time is never set to something less than start time, so it could happen. i'm not saying that these checks should be added now, but if this isn't intended to be possible and `isdataselected` intends in fact to say `timeselectionisnotempty`, then i would like it to be renamed as such. it is used in many places in the code, and this could reveal bugs. likewise for `isdataselectedontrack`: what it tells now is only whether the track of the given id is selected or not, so i would like this see renamed to `istrackselected`.",0,0.9714131355285645
1802647093,7515,saintmatthieu,2024-10-16T08:52:08Z,i forgot: the implementation of `isdataselected` should also add the `&&` that end time is strictly larger than start time (if negative selection spans are indeed not intended).,0,0.9562439322471619
1802665930,7515,grliszas14,2024-10-16T09:02:10Z,"hmmm, it's actually used in tracksclipsview.qml `property bool isneedselectioncursor: !selectioncontroller.selectionactive && mainmousearea.mouseontracks`",0,0.9821611642837524
1802720861,7515,grliszas14,2024-10-16T09:23:49Z,"it's used on qml side so i can't remove it but it will be good to use it here instead of these two lines, good catch :d",1,0.9956716299057007
1802811086,7515,saintmatthieu,2024-10-16T10:18:03Z,"i think that last check must `m_selectedendtime.wav > m_selectedstarttime.val`, shouldn't it? i.e. if they are equal, this method should return false - i think.",0,0.9861887097358704
1802831590,7515,saintmatthieu,2024-10-16T10:26:31Z,"that makes a lot of sense now. i'm wondering more and more if `m_selectedtracks` couldn't disappear in favor of calls to `selectioncontroller()->selectedtracks()`, to avoid this app state being maintained in two places. or does something speak against it?",0,0.9507482647895813
1802845092,7515,saintmatthieu,2024-10-16T10:35:52Z,i looked and it seems to me that this `m_audiodataselected` variable could disappear and query `selectioncontroller()->timeselectionisnotempty()` where its value is read.,0,0.9929279685020447
1802846376,7515,saintmatthieu,2024-10-16T10:36:50Z,nice.,1,0.7452678084373474
1802848329,7515,saintmatthieu,2024-10-16T10:38:23Z,"i'm more confident now: `doglobalcut()`, `doglobaldelete()` and other such should check this, and be no-opts if the selection is just a point selection.",0,0.7485230565071106
1802882942,7515,grliszas14,2024-10-16T11:01:00Z,"i'd like to get rid of it too but for now it's ""not possible"", meaning: it will break sync of track headers and tracks in the clips view. i will address it anyway as i believe sergey will find out what's wrong with it but i need to extend muse framework first. as this may take some additional time until this thing gets merged into musescore i suggest we merge it for now as is. added appropriate comment in the code though",0,0.9296953082084656
1802894600,7515,saintmatthieu,2024-10-16T11:10:11Z,smart :smiling_face_with_sunglasses:,1,0.9877167344093323
1802897556,7515,saintmatthieu,2024-10-16T11:12:41Z,"if `m_stracklist.size() == 0`, `index(m_tracklist.size() - 1)` will wrap around to an enormous number, won't it? it that's intended, please add a comment, otherwise typecast to index before subtracting.",0,0.9940409064292908
1803066821,7515,igorkorsukov,2024-10-16T13:04:43Z,"i think this logic should not be in a view model, but in the controller itself (in the setselectedclip method). i.e. if this method is called from another place, the logic should be exactly the same",0,0.9871784448623657
1803074102,7515,igorkorsukov,2024-10-16T13:09:24Z,looks like it's time to write unit tests for this controller :),0,0.9648481607437134
642968339,948,Paul-Licameli,2021-06-01T10:10:55Z,"let's avoid c-style casts or function notation for scalar types. either use uniform initialization where you can: 'uint8_t{...}' or if you can't (because ui doesn't allow narrowing; if hexchartonum returned int for instance), then use static_cast.",0,0.9917842149734497
642969586,948,Paul-Licameli,2021-06-01T10:12:41Z,i lately came across similar concerns preparing my updated less-dithering branch.,0,0.9342789053916931
642974354,948,crsib,2021-06-01T10:20:00Z,"well, actually it is a c++ cast using converting constructor or whatever it's called. i can change it to static_cast, although this form is shorter and more expressive. the cast itself is required because of integer promotion rules when performing <<",0,0.9928111433982849
642975210,948,Paul-Licameli,2021-06-01T10:21:19Z,"interesting that you use noexcept. i haven't formed that habit yet. i often say in code comments that there are parts of the code that must be no-throw. the annotation could be useful. the compiler does not have to prove that exceptions are impossible from a noexcept function (and even if it could, the program would still be valid). rather the standard requires calls to terminate will happen if exceptions do try to escape. but i'm not familiar with whatever warnings compilers make that could help you make such a proof.",1,0.7042198777198792
642977181,948,crsib,2021-06-01T10:24:17Z,"i will remove it here, it was just a force of habit. i worked on the platform with no exception, so having noexcept everywhere made code behave similarly everywhere",0,0.9535143971443176
642980276,948,Paul-Licameli,2021-06-01T10:28:55Z,#pragma once or follow the convention for #include guards?,0,0.994534969329834
642980844,948,Paul-Licameli,2021-06-01T10:29:51Z,#pragma once is not standard,0,0.9932774901390076
642981246,948,crsib,2021-06-01T10:30:32Z,i really think we should change our conventions. i've never seen a single compiler that had no support for pragma once,0,0.6347877979278564
642985152,948,Paul-Licameli,2021-06-01T10:37:03Z,i didn't say remove it!,0,0.9518945813179016
642988180,948,Paul-Licameli,2021-06-01T10:42:05Z,"ahh, spaceship.",0,0.8519344925880432
642994634,948,Paul-Licameli,2021-06-01T10:52:32Z,no comments?,0,0.9902690649032593
642995157,948,Paul-Licameli,2021-06-01T10:53:21Z,comment that these are lexicographical?,0,0.9895898699760437
642997900,948,Paul-Licameli,2021-06-01T10:57:44Z,is one purpose of this to allow a set or map of these values? is it worth the trouble also to customize std::hash for unordered containers too?,0,0.9917757511138916
642998573,948,crsib,2021-06-01T10:58:48Z,"excellent point, i will implement it!",1,0.9963309168815613
642999027,948,Paul-Licameli,2021-06-01T10:59:33Z,i might assert that return value is 36 then define a constant so i don't repeat 36,0,0.9916222095489502
642999154,948,Paul-Licameli,2021-06-01T10:59:45Z,ditto assertion,0,0.9436940550804138
642999514,948,Paul-Licameli,2021-06-01T11:00:19Z,return const bytes & ?,0,0.994471549987793
642999697,948,crsib,2021-06-01T11:00:36Z,"well, it is wrong here anyway. `std::vector` has a throwable copy constructor. anyway, besides the generated code size it only matters for move constructors. i will add one :)",1,0.9800991415977478
643000808,948,Paul-Licameli,2021-06-01T11:02:24Z,"` // c++20 return std::none_of(mdata.begin(), mdata.end(), std::identity); ` :-)",1,0.7350091934204102
643001837,948,Paul-Licameli,2021-06-01T11:03:58Z,uninitialized or zeroes? say,0,0.9911656975746155
643002722,948,Paul-Licameli,2021-06-01T11:05:29Z,"constructs zeroes, not uninitialized. say.",0,0.9935883283615112
643004854,948,crsib,2021-06-01T11:09:05Z,"oh, it has std::array, ignore my part about std::vector",0,0.9783847332000732
643005287,948,Paul-Licameli,2021-06-01T11:09:44Z,"subtract 1 from inputend if hasbraces? readbyte won't err if you don't, but i had to reread it",0,0.9941563606262207
643007363,948,Paul-Licameli,2021-06-01T11:13:05Z,"you require that str is exactly a uuid or a brace-enclosed one, else return nil. you aren't writing a function that just allows a prefix of a string to be a uuid. comment that. though maybe i am supposed to guess that because the function isn't also returning a std::string::const_iterator.",0,0.9897218346595764
643007805,948,Paul-Licameli,2021-06-01T11:13:51Z,"when i ask for comments, i mean in the header. because it's about the contract, not just the implementation.",0,0.9911284446716309
643009512,948,Paul-Licameli,2021-06-01T11:16:40Z,"i try to be alert to truncation problems. sure, there is no harm here. so actually it's just the first operand of | that needs a static_cast.",0,0.984666109085083
643009644,948,Paul-Licameli,2021-06-01T11:16:52Z,i'm done,0,0.8608697056770325
643011512,948,Paul-Licameli,2021-06-01T11:20:03Z,a separate move ctor wouldn't make sense for a std::array argument,0,0.9835350513458252
643012692,948,Paul-Licameli,2021-06-01T11:21:59Z,"ah, one more thing. why not negate the return value, and call this explicit operator bool ?",0,0.9881150722503662
643013573,948,Paul-Licameli,2021-06-01T11:23:28Z,that could make it more concise to declare a uuid variable within `if(...)` and narrow its scope.,0,0.9919010996818542
643423130,948,Paul-Licameli,2021-06-01T19:29:57Z,visibility might be unnecessary. it's all inline.,0,0.985734224319458
643423646,948,Paul-Licameli,2021-06-01T19:30:50Z,should start that line. or break it out before the `/*!` on a `//!` line.,0,0.9908080697059631
675199981,1323,Paul-Licameli,2021-07-22T22:21:37Z,this might be just a constexpr variable. or even just wxpath_separator which is acceptable (belonging to wxbase),0,0.9933005571365356
677039421,1323,Paul-Licameli,2021-07-27T00:55:51Z,"this line made me look up what `download` is in versionpatch.h. i see it is a wxstring. but that is uninformative. i like wrapping strings up in classes that indicate the purpose of the string, to prevent mistaken inter-conversions. and there exists a type urlstring, lately added. can you use that type in versionpatch.h? can you insert a commit in the sequence before this commit, to make that change?",0,0.849197506904602
677043260,1323,Paul-Licameli,2021-07-27T01:08:08Z,"- is downloadreponse really needed in the lambda capture? - are you sure this lambda executes in the main thread? (try a breakpoint). if not, are you sure it is safe to destroy the dialog? if not, then consider callafter. - but then, mprogressdialog should not be a unique_ptr. it should be a wxwindowptr<>. remember that wxwindow objects have special memory management and should not be handled with the usual c++ smart pointers. - [a link]",0,0.9906191825866699
677043962,1323,Paul-Licameli,2021-07-27T01:09:59Z,repeat my question about the lambda capture.,0,0.9887735247612
677076944,1323,Paul-Licameli,2021-07-27T02:46:33Z,"wait, is mversionpatch.download a url or is it a file name? i'm confused now.",-1,0.766806423664093
677077405,1323,Paul-Licameli,2021-07-27T02:47:48Z,"maybe you can get away with this, extracting the last path component. it's a little hacky.",0,0.7968698740005493
677078096,1323,Paul-Licameli,2021-07-27T02:49:55Z,"you might use the recently added basicui::makeprogress() to make this bit of code ""toolkit-neutral."" but it is not important, yet, to do that here.",0,0.9910549521446228
677079075,1323,Paul-Licameli,2021-07-27T02:53:04Z,this variable is not yet used. i suppose a later commit? then it might be added with that commit.,0,0.9917170405387878
677080685,1323,Paul-Licameli,2021-07-27T02:57:45Z,"i see a problem. this line might crash, though in very unusual cases. you assign mprogressdialog only once (in std::call_once). you use it here, outside that lambda. but you destroy it in the request-finished callback. so, what happens if the program runs so long that getupdates() is called twice?",0,0.8697189688682556
677080946,1323,Paul-Licameli,2021-07-27T02:58:36Z,is call_once really right? or should you do this each time? see elsewhere about lifetime of the progress dialog.,0,0.9938931465148926
677083474,1323,Paul-Licameli,2021-07-27T03:06:49Z,"why not use this constructor of wxfilename: wxfilename(const wxstring& path, const wxstring& name, wxpathformat format = wxpath_native)",0,0.9946371912956238
677086637,1323,Paul-Licameli,2021-07-27T03:16:32Z,why not do this error checking?,0,0.9873653650283813
677088172,1323,Paul-Licameli,2021-07-27T03:21:55Z,"what if there was an error downloading? (see other comment about missing check.) if you know there was an error, then you should not make this call. but if there was an error, is your callback called or not? if you callback is called even in case of error, how do you know if there was one? it is not clear to me from the class curlreponse how this is communicated to the caller. so ask crisp.",0,0.9881246089935303
677089439,1323,Paul-Licameli,2021-07-27T03:26:24Z,"it looks like this commit corrects the previous commit, which was not actualy correct for macos, right? squash the two commits. make a sequence of commits that are stages of implementation that are each buildable and runnable without errors. but don't leave a sequence of known bugs and corrections.",0,0.988760769367218
677089854,1323,Paul-Licameli,2021-07-27T03:27:46Z,"now i see you already found the problem about threads i already mentioned. so as i said, use interactive rebase and fix-up the original. don't leave a record of mistakes and corrections.",0,0.9874309301376343
677090303,1323,Paul-Licameli,2021-07-27T03:29:17Z,"... and you already did notice my basicui too, ok",0,0.9671249985694885
677090603,1323,Paul-Licameli,2021-07-27T03:30:15Z,"yes, null check now avoids the crash. but maybe the progress dialog should be created more than once, not in call_once, so the destructions and creations match.",0,0.9911309480667114
677090863,1323,Paul-Licameli,2021-07-27T03:31:05Z,should this deletion be part of the first commit?,0,0.9914537668228149
677587323,1323,gera-gas,2021-07-27T15:55:21Z,"it is a link to audacity installer file and have a two use cases here: 1 - using like `std::string` url for make request for curl. 2 - using like `wxstring` for `wxfilename`, that contain the name of latest audacity patch. may be i should create a new type for this cases like: `using patchlink = wxstring` for give a more anformation about `mversionpatch.download` field.",0,0.9932271838188171
677590711,1323,gera-gas,2021-07-27T15:59:12Z,"because it can successfully read in next callback cycle, may be need additional checking the all readed bytes in `finishcallback` also.",0,0.9943252205848694
677689748,1323,gera-gas,2021-07-27T18:15:11Z,"destructions and creations is already match, because `setrequestfinishedcallback` with progress dialog desruction called once, only when downloading is finished.",0,0.9949872493743896
677696472,1323,Paul-Licameli,2021-07-27T18:25:18Z,"well, leave it alone for now. urls use / as separator. i was wondering whether this would work wrong on windows where \ is the sperator, but you try to interpret a url as a file path. but if it tests all right, i won't insist on the type distinctions.",0,0.9591796398162842
677727359,1323,gera-gas,2021-07-27T19:11:08Z,"yes, it work fine, i already tested it on windows too.",0,0.8510430455207825
681184785,1323,Paul-Licameli,2021-08-02T18:30:27Z,"makeprogress or makegenericprogress, as appropriate -- i may have overspecified it. if there is no ""denominator"" for the ""numerator"" -- no real estimate of the incomplete work, then the generic progress is the right one. ah, but the download callback is supplied ""current"" and ""expected."" so that means, don't use generic?",0,0.9916915893554688
681189877,1323,Paul-Licameli,2021-08-02T18:39:12Z,"but my point was that using call_once isn't right. maybe the dialog will be created more than once, in unusual but possible circumstances. maybe download fails once, but is attempted again.",0,0.9764801263809204
681394032,1323,Paul-Licameli,2021-08-03T02:48:42Z,"you know you can leave out ` ` in c++17? improved deduction of types in constructor expressions and declarations! i am convinced now that this mutex is doing a correct thing. i think there would be a more ligthweight way to do this with std::atomic instead -- the mutex is only guarding the transition of a boolen from false to true. but, don't bother doing this.",1,0.8591077327728271
681395292,1323,Paul-Licameli,2021-08-03T02:52:43Z,"you reset monprogress to false on some of the exit paths. but i think you must do it more places. the returns at lines 124 and 139 -- where you detect a network failure or a corruption of the download -- should also reset monprogress to false. otherwise, automatic update checking will never be tried again, while the program remains running. you also failed to cover the case that `mversionpatch.version > currentbuildversion()` is false, or the case that the dialog return code is neither `wxid_yes` nor `wx_id_no`. which i don't know is possible from the context.",0,0.9851471781730652
681888825,1323,gera-gas,2021-08-03T15:50:24Z,"yes, because i add it manualy, therefore i agree with you about raii approach (smart classes) for fix the same possible problems.",0,0.9806539416313171
681890560,1323,gera-gas,2021-08-03T15:52:26Z,"also, i think, i solve this possible moments by create own `udatelocker` class, that atomic blocking entry to update process with raii support.",0,0.9920837879180908
681902945,1323,Paul-Licameli,2021-08-03T16:07:14Z,doing it with raii would be even better. see valuerestorer in memoryx.h which may already do what you want. no new class needed. [code block] do you understand the idea?,0,0.9721776843070984
682067749,1323,gera-gas,2021-08-03T20:10:36Z,"yes, i implemented something like this, but thanks for `valuerestorer` example, i think i can change the part of same logic by `valuerestorer` using.",1,0.5977585911750793
766702422,2261,Paul-Licameli,2021-12-10T14:03:40Z,"one of the c++ core guidelines i like is that each virtual function declaration should be marked with exactly one of `virtual` `override` or `final` as appropriate, and for these two it should be `override`.",0,0.9791852831840515
766708087,2261,Paul-Licameli,2021-12-10T14:11:39Z,"oh, i see i misunderstood the context. this is not overriding uihandle functions. `virtual` is right.",0,0.948944628238678
766716097,2261,Paul-Licameli,2021-12-10T14:22:17Z,clang gives me a warning about '&&' within '||'. add parentheses to make the intent unmistakable.,0,0.9927768707275391
766716675,2261,Paul-Licameli,2021-12-10T14:23:04Z,"same track, or aligned partner track",0,0.9915314316749573
766719835,2261,Paul-Licameli,2021-12-10T14:27:04Z,"i would prefer to iterate the intervals, as in the other branch, not the clips, for uniformity, and in case wavetrack might add some other kind of interval in future (who knows?) you can static_cast the extra() pointer of each interval to wavetrack::intervaldata* and then test for the clip you want to exclude.",0,0.9931966066360474
766724470,2261,Paul-Licameli,2021-12-10T14:32:56Z,"the two shared_ptr arguments could be const references, and so they should, to aid the human reader. instead i read this then stopped to see whether `track` and `clip` were being reassigned for some reason.",0,0.9929999113082886
766726172,2261,Paul-Licameli,2021-12-10T14:35:07Z,a const auto & here for consistency,0,0.9943087697029114
766729889,2261,Paul-Licameli,2021-12-10T14:39:42Z,another argument might be const reference,0,0.9925423860549927
766736544,2261,Paul-Licameli,2021-12-10T14:48:07Z,"see how selecthandle overrides enter, hasescape, and escape member functions. these allow you to hit the esc key and dismiss the yellow snap lines, enabling a fine, un-snapped adjustment, if that is what the user really wants. the same might be done here. maybe some common base class, derived from uihandle, should be defined? hm.",0,0.9899154901504517
766737995,2261,Paul-Licameli,2021-12-10T14:49:57Z,"you may note that i could have done the extra work i suggested in the uihandle subclasses recently added to adornedrulerpanel, but i didn't. this is not mandatory extra work. but i should reconsider how the pattern might be made easier and reusable across uihandle classes that snap.",0,0.9882572293281555
766742647,2261,Paul-Licameli,2021-12-10T14:55:35Z,"see trackpaneldrawable::drawingarea: default behavior should not be to return an empty wxrect, but to return the second argument unchanged.",0,0.9944633841514587
766786258,2261,vsverchinsky,2021-12-10T15:49:45Z,"funny, the tool i use to analyze a code suggests quite opposite: it says that parenthesizes are redundant :) but i usually tend to put them too. thank you!",1,0.9971534013748169
766787284,2261,vsverchinsky,2021-12-10T15:50:59Z,didn't think of that. thank you!,1,0.9933562874794006
767576126,2261,vsverchinsky,2021-12-13T10:06:25Z,"if i try to hit escape when using a select handle it just resets the current selection, with a debugger attached i see that both `::escape` and `::cancel` member functions are triggered, did i misunderstand something?",0,0.9620031714439392
767706669,2261,Paul-Licameli,2021-12-13T12:18:57Z,you can hit escape to dismiss the yellow snap line before the click. it seems you can't dismiss the yellow snap line while dragging.,0,0.9928185939788818
767709406,2261,Paul-Licameli,2021-12-13T12:23:01Z,"just a discussion... i would prefer `static_cast` myself here... but actually, i'd rather see `std::any_cast`. the extra information in intervaldata looks like a place i could rewrite things with `std::any` now that we use c++17. i think `any_cast` makes a simpler check than `dynamic_cast`. just equality of a statically determined `typeid` of the template parameter with the dynamically determined `typeid` in the `any`.",0,0.9753140807151794
767712918,2261,Paul-Licameli,2021-12-13T12:27:38Z,still not resolved,0,0.7692859768867493
767713130,2261,vsverchinsky,2021-12-13T12:27:57Z,"does not seem to work as well, i still get snap lines during the selection",0,0.96833735704422
767724619,2261,crsib,2021-12-13T12:44:27Z,"i've never seen much performance impact from using `dynamic_cast`. it can be slow in tight loops with deep hierarchies, but that's not the case here.",0,0.974230945110321
767725826,2261,vsverchinsky,2021-12-13T12:46:09Z,"[a link] i agree that sometimes we can justify using `static_cast` instead of `dynamic_cast` if we want to get as much performance as possible, and we do guarantee that the specified type is the only possible option here. but one of the reasons why this part of the code was rewritten is that we may want to add more interval types to a wave track in the future, wasn't it?",0,0.9885845184326172
767726398,2261,Paul-Licameli,2021-12-13T12:46:59Z,a general comment: i'm reviewing changes in the class adjustborders. the other subclass of cliptrimpolicy is adjustbetweenborders. that class is not constructed anywhere. is there a mistake?,0,0.9874446392059326
767726453,2261,vsverchinsky,2021-12-13T12:47:05Z,"sorry, will fix that, thanks!",-1,0.9927821159362793
767729066,2261,vsverchinsky,2021-12-13T12:50:59Z,"it's not a mistake, adjustbetweenborders moves borders of both clips if they are close enough, and it was my understanding of how things should happen, and turned out that i was wrong. but i was told that we may need this in the future.",0,0.9597440958023071
767730463,2261,Paul-Licameli,2021-12-13T12:53:03Z,you are right about dynamic_cast being better for future generality. i should have remembered myself. so would be any_cast. with std::any i wouldn't need to invent dumb little base classes like trackintervaldata just to have a virtual destructor.,0,0.7664591670036316
767736547,2261,crsib,2021-12-13T13:01:41Z,"`std::any` has costs attached. it's not a `zero-cost` abstraction in general, although compilers may implement a fast-path for small objects.",0,0.9881028532981873
885526547,3009,Paul-Licameli,2022-05-31T11:35:03Z,"the second commit fails to compile for me, unless i add to vst3utils.h: [code block]",0,0.9892904162406921
885527691,3009,Paul-Licameli,2022-05-31T11:36:26Z,"this commit adds an argument to fillparameters and buildplainui. instead, this could replace the editcontroller argument, and that can be fetched from the wrapper.",0,0.9947388768196106
885534638,3009,Paul-Licameli,2022-05-31T11:45:02Z,"i think vitaly mentioned that the set of parameters might really be very large. maybe not too large though, to make it inconvenient to cache all. could uses of `foreachparameter` be further simplified, if the set of flags to filter on is passed as another argument to it, and with suitable default values? (maybe two arguments, for flags to include any of, and flags to exclude all of, for `fillparameters`) update -- i no longer like the suggestion i made in this comment very much",-1,0.8521575927734375
885541109,3009,Paul-Licameli,2022-05-31T11:51:28Z,"explain in a comment that this is mutable because it is cached once on demand. or even better: define a class parametercache. give the wrapper a `const std::shared_ptr` to a cache. put the mutable member in the cache class, and give it a `const` member function that gives a reference to this vector. give `vstwrapper` a constructor taking `std::shared_ptr` to this cache. the constructor calls `make_shared` if the argument is null, or else uses the given argument. these suggestions anticipate the definition of an instance, which can share the cache of parameters with its plug-in.",0,0.9913055300712585
885542995,3009,Paul-Licameli,2022-05-31T11:53:40Z,maybe you can call this `anyof` by analogy with `std::any_of`,0,0.9874849915504456
885555676,3009,Paul-Licameli,2022-05-31T12:08:24Z,"the rewrite of `loadsettings` at the second commit is surely wrong, because it never uses `parms` at all. i would rather see a more correct sequence of transformation steps, in which the second commit has the correct lookup in `parms`. then later commits complete the transformation of this function.",0,0.8912368416786194
885572910,3009,Paul-Licameli,2022-05-31T12:24:58Z,"where before, `fuid::fromtuid` was called once -- now it is called twice, here and also inside `savepreset`. that looks wrong. and a similar problem, for loading presets. simpler maybe just to pass a reference to `meffectclassinfo` into each of the new functions and let the utility level do the details. or even simpler -- make `meffectclassinfo` a third member of the wrapper base class (this means rewriting the first commit). then there is no argument. the class info, as you can see from some examination, is `const` and set when the vst effect is constructed.",0,0.7535308003425598
885579739,3009,Paul-Licameli,2022-05-31T12:32:19Z,"there is no filtering at all by parameter flags. is this doing excessive work then? one if the flags is for read-only status. perhaps, exclude those from the fetching and storing.",0,0.9886271357536316
885582088,3009,Paul-Licameli,2022-05-31T12:34:49Z,you cause failure if a parameter is known in the plug-in but not known in the mapping. this is not like what i did for audiounits. i think it's better to ignore this case and continue storing other parameters.,0,0.9852502942085266
885584453,3009,Paul-Licameli,2022-05-31T12:37:17Z,the commit that defines this function should also delete the code that is make unnecessary in the other functions that load settings or presets or import.,0,0.9933903217315674
885586590,3009,Paul-Licameli,2022-05-31T12:39:23Z,"remember also the calls to `mplainui->reloadparameters();` that move into this function, when this pr is rebased onto 's #2990. (but wait for that pr to be redrafted in response to the first round of review.)",0,0.9923722743988037
885588112,3009,Paul-Licameli,2022-05-31T12:40:54Z,"the commit comment that removes this function should include more explanation, as in the issue checklist. this step of course has no analogue for au or vst2.",0,0.9921833872795105
885860826,3009,pietro68,2022-05-31T16:31:32Z,"apologies, it was not yet clear to me that i should cmake-generate with pch off, when doing development. when turning it off, i actually found that i'd also need `#include `",-1,0.5964794754981995
885867847,3009,pietro68,2022-05-31T16:38:38Z,"good point, will do that",1,0.9815465807914734
885882444,3009,pietro68,2022-05-31T16:54:17Z,"i have seen that there are about 2000 parameters for the gain plugin which i am using in my tests - so yes, very large (and btw. i can not fathom why a gain plugin needs to have 2k parameters...). scanning 2k of them each time is definitively overkill, so i'd implement what you suggest. however, i think that to make it worth, i'd need to have not just one vector as we have now, but a set of vector e.g. one for the params which are automatable, one for the readonly ones, as needed by the callers of foreachparameter - otherwise if i had only one vector, we'd be back to square one i.e. i'd have to scan all 2000 items of it anyway.",0,0.8196155428886414
885893973,3009,pietro68,2022-05-31T17:07:50Z,"ok, done",0,0.9714605808258057
886000549,3009,Paul-Licameli,2022-05-31T18:25:36Z,"note this from steinberg's header file, ivsteditcontroller.h: [code block] so, check my logic please: i think we can always ignore the hidden parameters. because, see how `parameterinfo.flags` is used. in the places where only the automatable parameters are examined -- that implies that the read-only are excluded. in `syncparameters`, all (and only) the read-onlies are excluded (explicitly). therefore, these visits exclude all the hidden. in `fillparameters`, when building a plain ui -- we may examine some read-only parameters. but, we exclude the hidden ones. therefore: we always ignore the hidden. maybe you can easily verify with some temporary code, that most of these gain parameters are hidden?",0,0.9880111813545227
886204252,3009,Paul-Licameli,2022-05-31T23:28:32Z,make `ownsettings` a reference and avoid a map copy,0,0.9949074387550354
886204869,3009,Paul-Licameli,2022-05-31T23:29:17Z,could write: `auto &ownsettings = getsettings(settings); ownsettings.clear();` and eliminate the assignment a the end,0,0.9931564927101135
886206938,3009,Paul-Licameli,2022-05-31T23:31:33Z,"when you correct the lookup into `parms`, also remove `parseautomationparameterkey` which becomes unused",0,0.9952219128608704
888220716,3009,pietro68,2022-06-02T17:43:16Z,"apologies, it looks like the vst3 gain plugin i used for the tests (blue cat's gain suite) is very unusual - it has 2049 parameters but only 2 of them are ""real"" and automatable, i.e. gain amount and on/off - and none of the 2049 params is hidden. i tried with another gain plugin and it has only two parameters. so maybe we can leave things as they are?",-1,0.6718493103981018
888282544,3009,pietro68,2022-06-02T18:49:53Z,"i tried what you suggest, but i came to a point where i had to use the mutable keyword anyway. the problem is, when it is time for constructing vst3wrapper, meditcontroller is still null - if it was not, i could send it as an arg to the vst3wrapper ctor, to be used to populate the cache - and there would no need to have a mutable something. but the fact that the cache can be populated only when meditcontroller is not null, implies that the cache must be mutable.",0,0.9734068512916565
888293842,3009,Paul-Licameli,2022-06-02T19:04:58Z,maybe so. but how strange. is there a way to dump information and find out more about this strange plug-in?,-1,0.9751800298690796
888294453,3009,pietro68,2022-06-02T19:05:55Z,"actually, this duplication happened only for loadpreset. i removed the extra unnecessary conversion in vst3wrapper::loadpreset and verified it still works.",0,0.9938377737998962
888297232,3009,Paul-Licameli,2022-06-02T19:09:49Z,"what i meant was, the member shared_ptr to the cache can be const, the cache object can be const, but then the members of the cache object need to be mutable. there is still mutable, but hidden at a lower level. is that not what you had to do? i recommend the shared_ptr so the plug-in and its instances can share just one cached definition of the set of parameters that is initialized only once, so we can be sure all visits are really over the same set of parameters. i did something like this for audiounit, but the details did not require shared_ptr or mutable.",0,0.988502025604248
888305532,3009,pietro68,2022-06-02T19:21:17Z,"ok, done",0,0.9714605808258057
888306274,3009,pietro68,2022-06-02T19:22:26Z,"alright, also done now",0,0.9920526742935181
889904204,3009,pietro68,2022-06-06T07:47:07Z,ok,0,0.9233372807502747
889904764,3009,pietro68,2022-06-06T07:47:58Z,"good point, ok",1,0.9443855881690979
889904854,3009,pietro68,2022-06-06T07:48:08Z,ok,0,0.9233372807502747
1701795368,7017,igorkorsukov,2024-08-02T12:41:18Z,"we talked about this a little bit. i believe that an application should have one settings file. this code makes it so that there are two settings files, one that is created by the muse framework (it stores, for example, theme settings) and the other is created here.",0,0.9825397729873657
1701804395,7017,vsverchinsky,2024-08-02T12:49:10Z,should be removed from `src`,0,0.9948030114173889
1702015363,7017,saintmatthieu,2024-08-02T15:34:41Z,"after su a few days ago we had a follow-up discussion with and and iiuc there was a consensus to trying to use the au3 library as a black box with its own persistency mechanism and making sure that this library exposes the necessary read/write from it. but i can conceive that one mechanism for all settings for may make things better on the middle term. only i haven't tried it and seen how the pluginmanager reacts to it. i guess we can experiment with multiple setting files for now and maybe change in the future? the code i had to write for that isn't much, throwing it away if necessary wouldn't be a big loss. i wouldn't block this pr for that, though.",0,0.9184930324554443
1702207647,7017,igorkorsukov,2024-08-02T18:52:11Z,"i only have concerns about the main config file (i have no concerns about the plugin config files). when we move on, and the au3 code disappears completely or almost disappears, the user will still have 2 main config files - this will look very strange, and some effort will need to be made to ensure backward compatibility. there will also be problems directly when rewriting a code. for example, now a selected device can store au3, then we rewrite this functionality to the new code (without wx), but so that a user does not loss anything, we will still need to store (or at least read) from the au3 settings file. in fact, i have already implemented an adapter to the muse::settings, since we seemed to have discussed this yesterday. [a link]",0,0.7791540026664734
1703819046,7017,saintmatthieu,2024-08-05T09:21:31Z,"i see : indeed, changing the setting implementation of the general config is even beyond the scope of this pr. sorry that i mixed things up, will revert that line as soon as i can verify that my poc still runs without it. (having troubles launch the app at the moment.)",-1,0.9926661849021912
1710043302,7017,vsverchinsky,2024-08-08T18:13:46Z,unnecessary change,0,0.709006667137146
1710052614,7017,vsverchinsky,2024-08-08T18:20:13Z,"that could be a single `platformcompatibilitywx.cpp` which simply wraps calls to `wxstandardpaths`, the new implementation does not depend on wx, but might introduce unwanted behavior change.",0,0.9855427742004395
1710060709,7017,vsverchinsky,2024-08-08T18:25:37Z,unnecessary change,0,0.709006667137146
1710061559,7017,vsverchinsky,2024-08-08T18:26:08Z,unnecessary change,0,0.709006667137146
1710061675,7017,vsverchinsky,2024-08-08T18:26:12Z,unnecessary change,0,0.709006667137146
1710061952,7017,vsverchinsky,2024-08-08T18:26:25Z,unnecessary change,0,0.709006667137146
1710062076,7017,vsverchinsky,2024-08-08T18:26:30Z,unnecessary change,0,0.709006667137146
1710062546,7017,vsverchinsky,2024-08-08T18:26:49Z,unnecessary change,0,0.709006667137146
1710067781,7017,vsverchinsky,2024-08-08T18:30:35Z,is it used at all?,0,0.9917933344841003
1710081680,7017,vsverchinsky,2024-08-08T18:40:31Z,may be `basicui::*` would be a good replacement for it?,0,0.993156373500824
1710150187,7017,vsverchinsky,2024-08-08T19:26:08Z,am i miss something? this line seem to never evaluate to `true`,0,0.6490305066108704
1710161365,7017,vsverchinsky,2024-08-08T19:31:45Z,"just remembered that we have `globalhook`s, but i do not insist that we should use that one here",0,0.9923900961875916
1710168887,7017,vsverchinsky,2024-08-08T19:36:47Z,changes in that file are not necessary,0,0.9937257170677185
1710170394,7017,vsverchinsky,2024-08-08T19:37:39Z,unnecessary change,0,0.709006667137146
1710171593,7017,vsverchinsky,2024-08-08T19:38:21Z,unnecessary change,0,0.709006667137146
1710171909,7017,vsverchinsky,2024-08-08T19:38:34Z,unnecessary change,0,0.709006667137146
1710172288,7017,vsverchinsky,2024-08-08T19:38:51Z,unnecessary change,0,0.709006667137146
1710172512,7017,vsverchinsky,2024-08-08T19:38:59Z,unnecessary change,0,0.709006667137146
1710972226,7017,vsverchinsky,2024-08-09T07:46:02Z,i like previous name more :),1,0.8094176650047302
1711132553,7017,saintmatthieu,2024-08-09T09:26:21Z,awesome ! how come i didn't think of that.,1,0.9958155751228333
1711143324,7017,saintmatthieu,2024-08-09T09:33:28Z,hm. not anymore. good catch.,1,0.9696193933486938
1711160460,7017,saintmatthieu,2024-08-09T09:45:02Z,"i think so too. i was being extra conservative. (`mmessageboxcb` was also meant to be injected with `getmessageboxcb()`, but i lost that injection somewhere along the way. anyway.)",0,0.9698328375816345
1711170425,7017,saintmatthieu,2024-08-09T09:52:00Z,"i didn't pay attention. was added in [a link]. i can't see how this could be executed either, though. remove ? then we'd have one callback injection less.",0,0.8916390538215637
1711200658,7017,saintmatthieu,2024-08-09T10:13:54Z,"awesome ! how come i didn't think of it. also maybe qt has such helpers, too, when it gets needed in au4. i'll give it a try.",1,0.9963181018829346
1065800814,4053,crsib,2023-01-10T13:44:03Z,why do we have this enum?,0,0.9902100563049316
1065801159,4053,crsib,2023-01-10T13:44:24Z,should the state be `final`?,0,0.9888138175010681
1065802987,4053,crsib,2023-01-10T13:46:11Z,do we need this struct at all? why is it not `final`?,0,0.9928997755050659
1065803426,4053,crsib,2023-01-10T13:46:36Z,i don't like this naming at all. it is really confusing when reading,-1,0.9942514896392822
1065807072,4053,crsib,2023-01-10T13:50:00Z,should this be explicit?,0,0.9909560084342957
1065809568,4053,crsib,2023-01-10T13:52:21Z,"you may call me very picky, but i think that this is a very confusing name.",-1,0.9850941896438599
1065811994,4053,crsib,2023-01-10T13:54:25Z,if i'd see this in a forest - i would run away screaming. it is very hard to understand what happens here just by reading the code.,-1,0.985779881477356
1065814912,4053,crsib,2023-01-10T13:56:56Z,`title` was so much more descriptive,0,0.9715942740440369
1065820142,4053,crsib,2023-01-10T14:01:29Z,"something like `const basicmenu::menuitemtext& menuitemtext` feels much more readable. i don't quite like `basicmenu` name either, but it's too late to do anything about it.",0,0.8738276362419128
1065826484,4053,crsib,2023-01-10T14:06:58Z,do we really need optional here? how is it different from checking for `phelp.empty()`? why is is called `phelp`?,0,0.9945915341377258
1065832443,4053,crsib,2023-01-10T14:12:16Z,"generally i would like more consistency here, i. e. getters in both places",0,0.98172527551651
1066061451,4053,crsib,2023-01-10T17:16:17Z,why filehistorymenus needs to be a nested class?,0,0.9881812334060669
1066068178,4053,crsib,2023-01-10T17:21:25Z,"i understand that this somehow reflects the decisions made by wxwidgets, but this is probably the most confusing name of this pr",-1,0.7298550009727478
1066778465,4053,crsib,2023-01-11T09:44:34Z,i would much prefer to have a factory function to tricks with tag types. `freshmenu` caries very little semantics. sound like something related to food ([a link],0,0.9695014953613281
1066782359,4053,crsib,2023-01-11T09:48:05Z,"there are 4 method that accept very similar list of parameters. provided that all of them are in one namespace it feels that item should be a structure. as i noted earlier, naming is not clear at all too.",0,0.9882392883300781
1066785533,4053,crsib,2023-01-11T09:50:52Z,not final,0,0.9797123670578003
1066786697,4053,crsib,2023-01-11T09:52:00Z,"we break down ""item::text"" here. overall, it feels that we need this structure, not the previous ones.",0,0.9925395846366882
1066788967,4053,crsib,2023-01-11T09:54:07Z,"no final. naming is very unclear. i would much prefer something like `menuiteminfo`. (no, `basicmenu::info` doesn't help to understand the intention at all)",0,0.6431763768196106
1066789327,4053,crsib,2023-01-11T09:54:24Z,not final.,0,0.961384117603302
1066790673,4053,crsib,2023-01-11T09:55:38Z,all the previous comments apply here,0,0.9940955638885498
1066795592,4053,crsib,2023-01-11T10:00:01Z,"i think this should be removed before merge, to be fair.",0,0.9659509658813477
1066796055,4053,crsib,2023-01-11T10:00:27Z,overall it feels that this file should be split.,0,0.9841338396072388
1066821630,4053,crsib,2023-01-11T10:24:49Z,i think popup should not be the part of this class. this way we will be able to separate menu data and how the specific framework builds menus,0,0.9755188822746277
1066823377,4053,crsib,2023-01-11T10:26:33Z,should we use `handle` interface here instead?,0,0.9946407079696655
1066827183,4053,crsib,2023-01-11T10:30:18Z,"optionally, we can rename `freshmenu` as `emptymenu`. but i still prefer something like `makemenu` or `makeemptymenu`",0,0.9917568564414978
1066846273,4053,crsib,2023-01-11T10:49:27Z,but should they be implicit? i have nothing against though,0,0.9810153245925903
1066895353,4053,crsib,2023-01-11T11:43:35Z,even getting here doesn't help me understanding `item::state` (i might have missed something). if this is a mask - why not call it something like `statemask` or so?,0,0.9825327396392822
1857999177,7785,igorkorsukov,2024-11-26T08:06:44Z,"why was it necessary to link this module? this looks unexpected, it is alarming that the audio module depends on the track editing module",-1,0.9666798710823059
1858027143,7785,igorkorsukov,2024-11-26T08:25:31Z,i think better to just include `effects/effects_base/effectstypes.h`,0,0.9869354367256165
1858071064,7785,igorkorsukov,2024-11-26T08:55:39Z,it is better to add the required method to the `ieffectsprovider` and use it through injection,0,0.993190586566925
1858074245,7785,Eism,2024-11-26T08:57:36Z,"better not to use the abbreviation, at first i didn't understand what rt is",0,0.9386597871780396
1858075969,7785,igorkorsukov,2024-11-26T08:58:45Z,it is better to add the required method to the `itrackeditproject` and use it by [code block],0,0.994616687297821
1858079426,7785,Eism,2024-11-26T09:00:47Z,"i am also confused by the item in the audio module. item is about ui, as for me, the audio module should not operate with such concepts",-1,0.7870199680328369
1858083751,7785,igorkorsukov,2024-11-26T09:03:32Z,"i believe there is a better place for all this. the audio engine is a low-level utility service, it is unexpected to see it accessing the global context, working with tracks, subscribing to track events... i think that all this added code needs to be moved to the `effects_base` module, adding a new interface, something like `irealtimeeffects` and its implementation.",0,0.9554509520530701
1858087586,7785,Eism,2024-11-26T09:06:10Z,"these comments are useless, you set for them `uictxprojectopened` context, so this won't happen and the likelihood that someone will encounter this is low (i am not sure that someone will change their context)",0,0.6304810047149658
1858098593,7785,Eism,2024-11-26T09:13:28Z,"the default value is false, so you don't need to set it here we use true in rare cases, and this is not your case",0,0.9933899641036987
1858099946,7785,Eism,2024-11-26T09:14:19Z,you can use `normalcolor`,0,0.9946281313896179
1858103701,7785,Eism,2024-11-26T09:16:48Z,if you need a border for flatbutton you should override backgrounditem,0,0.9938534498214722
1858106614,7785,Eism,2024-11-26T09:18:39Z,you can use menubutton for it,0,0.9942964911460876
1858109376,7785,Eism,2024-11-26T09:20:29Z,better to use component.oncompleted for root item,0,0.9924513697624207
1858638824,7785,saintmatthieu,2024-11-26T14:25:59Z,"i already have a `realtimeeffectlistitem.qml` :) wanted to avoid the two getting confused. i agree that ""list item"" does sound ui-like indeed. however, the sequence of realtime effects we set on the audio engine (or in the effect module, debate is ongoing) needs a name. what do you suggest ? ""sequence"" instead of ""list"" would do. ""entry"" instead of ""item"", too. pick your combination :)",1,0.9934712648391724
1858641176,7785,saintmatthieu,2024-11-26T14:27:20Z,ok.,0,0.980760931968689
1859138525,7785,saintmatthieu,2024-11-26T19:44:46Z,why ?,0,0.9233791828155518
1859138780,7785,saintmatthieu,2024-11-26T19:45:01Z,"awesome, thanks !",1,0.9962412118911743
1859142299,7785,saintmatthieu,2024-11-26T19:48:32Z,"thanks for the suggestion, i looked into this. the default for flatbutton is that component of id `defaultbackgroundcomponent`. it does everything i want my button to do, except for the border thing (it uses `ui.theme.borderwidth`, which equals 0, though). i haven't found a ready-to-go solution to reuse it without duplicating it or changing the framework to expose that property in the flatbutton. this last option seems like the right one, but i'm lazy and maybe there's another correct way ?",1,0.9587894678115845
1859146971,7785,saintmatthieu,2024-11-26T19:53:07Z,"... which is the default, so i can remove this line. thanks !",1,0.9924060702323914
1860073191,7785,Eism,2024-11-27T07:31:50Z,"i will suggest duplicating, overriding backgrounditem is done exactly for such cases, so as not to create a lot of properties",0,0.9925109148025513
1860075613,7785,Eism,2024-11-27T07:34:00Z,to initialize the model after all the elements on the page have been created in the future it may be that the model will depend on some other parameters from the page that may not have been created yet,0,0.9855930209159851
1860114819,7785,saintmatthieu,2024-11-27T07:52:52Z,"yeah, but then i have a button whose only difference to the rest of the ui is that it has a non-zero border. if i duplicate it and `menubutton` changes on the framework, my button will not get automatically updated. so there seems not to be a way i overlooked. will go for the duplication now but will look into making a pr in the framework.",0,0.9780308604240417
1860119205,7785,saintmatthieu,2024-11-27T07:56:03Z,so children are initialized before their parents? i never realized. ok then.,0,0.9814008474349976
1860602708,7785,saintmatthieu,2024-11-27T12:47:45Z,"i just gave it a try: it's not enough to just duplicate `defaultbackgroundcomponent`, i'd have to duplicate the entire `flatbutton`. so nevermind, for now, it'll be the rectangle wrapper. and how about flatbutton.qml: [code block] and then [code block] this only exposes one more property and gives the client control over the properties of the default item. (only a pity that i have to use `component.oncompleted`)",-1,0.6111059188842773
1860606187,7785,igorkorsukov,2024-11-27T12:50:14Z,"just in case, if we use data types from another module that are described only in the `.h` file, or interfaces, then we do not need to link these modules. in the current implementation of au4, it is usually necessary to link only au3wrap and global (linked automatically) i.e. to use trackid you don't need to link trackedit, to use effectid you don't need to link effects_base",0,0.9928717017173767
1861640674,7785,Eism,2024-11-28T07:32:33Z,"no, you are bringing the private part out, this approach is wrong let me clarify, i meant to duplicate defaultbackgroundcomponent",0,0.9767569899559021
1861804737,7785,saintmatthieu,2024-11-28T09:22:58Z,"like i said,",0,0.9855049252510071
1861833149,7785,Eism,2024-11-28T09:41:29Z,can you get it from effectmeta?,0,0.9946268200874329
1861836496,7785,Eism,2024-11-28T09:43:31Z,show how you tried to duplicate,0,0.9920483231544495
1861849576,7785,Eism,2024-11-28T09:52:06Z,magic structure can we describe it? create our structure with important fields,0,0.9806907773017883
1861856019,7785,saintmatthieu,2024-11-28T09:56:21Z,i threw the experiment away. you can see for yourself that defaultbackgroundcomponent has dependencies on flatbutton.,0,0.9768317341804504
1861857477,7785,saintmatthieu,2024-11-28T09:57:12Z,also.,0,0.9842071533203125
1863100382,7785,saintmatthieu,2024-11-29T08:00:00Z,was in fact just used as identifier. just using `uintptr_t` is better indeed.,0,0.9927378296852112
808094571,2561,vsverchinsky,2022-02-16T15:08:59Z,unnecessary assignment,0,0.5215676426887512
808943625,2561,Paul-Licameli,2022-02-17T11:21:16Z,do not delete the i18n_hint comment that helps the translators,0,0.9921420812606812
808946753,2561,Paul-Licameli,2022-02-17T11:25:18Z,"why was it necessary for resolving this issue, to delete this logic that appends ""label track"", ""note track"", etc. to `name`? this name is not the name you will see on the screen. it is a name that the screen reader will speak. may not agree with this change. you are removing the default name (i didn't like it either) so the suffix ""label track"", etc. so now you are prepending ""track #n"" always. i think that is all right.",0,0.938290536403656
808953758,2561,Paul-Licameli,2022-02-17T11:34:24Z,you review yourself? :-),1,0.9235349297523499
808959204,2561,Paul-Licameli,2022-02-17T11:41:24Z,"certain import file formats might contain multiple channels that become multiple tracks. should you consider giving them unique names? but in the usual case of one track, i understand that you would not want to add the numeral.",0,0.9911143779754639
808962900,2561,Paul-Licameli,2022-02-17T11:46:16Z,"i understand that you changed the factory to force you to fix compilation of all uses of it, and so consider at each place how to set the track name. how can we guarantee that future calls to these functions will also have names set? should you at least comment here that the caller should consider setting a unique track name?",0,0.9921826720237732
809106837,2561,vsverchinsky,2022-02-17T14:28:00Z,"that what i proposed, maybe not the best solution, and it needs to be improved (or reverted).",0,0.757698118686676
809115537,2561,vsverchinsky,2022-02-17T14:35:58Z,"this function doesn't set the name. the reason is that the track with random name isn't better than track without the name, when the intention is to have a track with a certain name. another reason is that there are many cases when track is created to hold some temprorary data and then inserted into another track. i'll improve the comment by adding ""an unnamed empty track"".",0,0.9901471734046936
809138170,2561,vsverchinsky,2022-02-17T14:55:33Z,"if i understand your question correctly, then i think `projectfilemanager::addimportedtracks` assigns unique names to the channels. yes.",0,0.9918870329856873
809144434,2561,vsverchinsky,2022-02-17T15:01:11Z,"i've found multiple instances, of the same string in different places and with different comments (or without them), and didn't find an approriate one for this case, but missed that one: `/* i18n-hint: the %d is replaced by the number of the track.*/` thanks.",1,0.8791201710700989
809147771,2561,vsverchinsky,2022-02-17T15:04:14Z,"yes, i need to improve my practice of self-reviewing)",0,0.956024706363678
809468755,2561,Paul-Licameli,2022-02-17T21:09:20Z,"if a translatable string literal is repeated exactly in more than one place, and without a context string, then it is enough the one occurrencde has a comment.",0,0.992763102054596
810002733,2561,DavidBailes,2022-02-18T13:34:42Z,"1. prepending ""track #n"". this is too verbose, and it would be better to prepend simply ""#n"". 2. removal of the conditional appending of ""label track"", ""note track"", etc. please don't remove this. the idea is that when for example someone changes the default name of a newly created label track from ""label track"", to say ""fred"", the screen reader readers ""fred label track"" which reminds the user that it is a label track, and not an audio track (or indeed inform the user that it's a label track, if they did not create the project themselves). similarly for note tracks and time tracks.",0,0.742451548576355
811045288,2561,Paul-Licameli,2022-02-21T11:42:28Z,"the repetition of making a track, then setting its default name with a unique number, is repeated in a few places. i would suggest a static member function of labeltrack to simplify this repetition.",0,0.9921890497207642
811055555,2561,Paul-Licameli,2022-02-21T11:56:02Z,"please see the struct track::classtypeinfo and learn a bit about how it is used. maybe it should be extended with a field containing the default name for a track type, so there is a uniform way to specify it for label and wave and other types of tracks. if for some reason there is need for polymorphism in getting ""the default name for a track type"" but unspecified which type that is. but this generalization is for now a solution looking for a problem. don't do it, but think a little about it.",0,0.9846088886260986
811469915,2561,vsverchinsky,2022-02-21T23:04:06Z,"makes sense, thanks",1,0.9331464767456055
811985413,2561,Paul-Licameli,2022-02-22T14:09:58Z,"the latest changes to simplify the repetitions lost the use of makeuniquetrackname on pahts like this where the argument is explicit. tell me you meant that, or else fix it.",0,0.9921644926071167
811987500,2561,Paul-Licameli,2022-02-22T14:11:51Z,"comment the two functions above about the intention to add unique names, unless that is caller's responsibility. or maybe add a boolean to control whether there is unique numbering.",0,0.9933903217315674
811994001,2561,Paul-Licameli,2022-02-22T14:17:44Z,"as i review more, i see there are only two uses of this overload of labeltrack::create. the other one, in effect.cpp, does not want a unique name. so, just this call needs a fix.",0,0.9872318506240845
812002069,2561,Paul-Licameli,2022-02-22T14:25:19Z,"the four #include directives above were removed from an earlier version of this pull request, which was a happy thing reducing the dependencies. but now three of them return. i don't say it's a necessity for approval of this pr, to eliminate them. but i would like them eliminated at some future time. my hope is that note, time, and label track functionalities could be completely segregated from audacity into optional add-ons. in fact my big experimental misc-libraries branch accomplishes that. but this change may cause me some difficulties in rebasing all of it.",0,0.8189877867698669
812005264,2561,Paul-Licameli,2022-02-22T14:28:27Z,"nothing wrong with these latest changes, but i understand there is still debate and it's not yet final. if a virtual function can be added to track so that the dynamic_casts and #include of note, wave, and label tracks can go way, that would be nice. eliminating wavetrack.h is not as important -- i don't plan to segregate wavetrack from the audacity monolith in an add-on. wavetracks are just too much involved with everything else.",0,0.8617098927497864
812084656,2561,vsverchinsky,2022-02-22T15:43:58Z,only one with default name assigns unique name to the track,0,0.9945841431617737
812084846,2561,vsverchinsky,2022-02-22T15:44:08Z,thanks,1,0.8643599152565002
900290830,3070,Paul-Licameli,2022-06-17T16:06:55Z,"maybe these two lines should be switched, just to be sure that their sequence remains the same as it was in vst3effect before, so the sequence of their destruction is the same. or maybe it makes not difference.",0,0.9817124009132385
900292067,3070,Paul-Licameli,2022-06-17T16:08:38Z,"in the first commit, the inclusion here allows you to delete the same header included in two other places and still compile. do that.",0,0.9943838119506836
900293548,3070,Paul-Licameli,2022-06-17T16:10:34Z,"this line allows two other inclusions of module.h to be removed, at the first commit.",0,0.9943943023681641
900297819,3070,Paul-Licameli,2022-06-17T16:16:20Z,"remove the two uses of `std::optional::value` above and use the `*` operator instead. it breaks the mac build, as do certain other c++17 library functions that can throw new kinds of exceptions. but on mac they can't build and link unless a certain minimum version of the operating system is targeted, above our present minimum. the difference with `*` is that is just gives undefined behavior if there is no value, not an exception. but you have the proper null (or should i say nullopt) checks before use so it is safe.",0,0.9914073348045349
900299154,3070,Paul-Licameli,2022-06-17T16:18:13Z,this inclusion at the second commit lets you remove the header in one other place.,0,0.9943166375160217
900306896,3070,Paul-Licameli,2022-06-17T16:29:01Z,"you didn't write this assertion -- you only move a line that existed in another file. but read this uncommented assertion and ask, what's the proof? the proof should ideally be deduced from a postcondition stated explicitly in a comment in class base64. and size_t would be a better return type for `decode`.",0,0.9926449060440063
900308392,3070,Paul-Licameli,2022-06-17T16:31:06Z,again you add an #include and should check whether you can remove the same file elsewhere. and you can.,0,0.9947636127471924
900310450,3070,Paul-Licameli,2022-06-17T16:34:00Z,`fetchsettings` is given settings that are not assumed to be initially empty. be sure to assign nullopt along paths that fail to get state from the plug-in.,0,0.9929429888725281
900328842,3070,Paul-Licameli,2022-06-17T16:49:44Z,`value` again twice needs to be rewritten,0,0.9907225370407104
900339877,3070,Paul-Licameli,2022-06-17T16:57:03Z,"`loadsettings`, like `fetchsettings`, should make the given settings reflect exactly what is in the instance or the config file. so, add other branches that assign nullopt when the configuration does not contain a string.",0,0.9942581653594971
900342197,3070,Paul-Licameli,2022-06-17T16:58:35Z,it is documented that `savesettings` may assume `parms` is empty. this is unlike `loadsettings` which cannot assume `settings` begins empty.,0,0.9941500425338745
900350286,3070,Paul-Licameli,2022-06-17T17:03:41Z,"you anticipated me. i see this now, taking the commits in sequence. good: but of course rebase interactively and squash the fixes onto earlier commits before this is merged.",1,0.5408877730369568
900374024,3070,Paul-Licameli,2022-06-17T17:24:22Z,the wrapper base class already hass `meffectclassinfo` so this call and the call to `loadpreset` can pass just one argument.,0,0.9944819211959839
900376512,3070,Paul-Licameli,2022-06-17T17:27:56Z,"the commit that inserts the `fetchsettings` calls is good. it should be squashed with the earlier commit that rewrites `loadsettings` and `savesettings`. that commit isn't complete without the calls to `fetchsettings` because `savesettings` is assuming that the fetch was already done, and is not correct without it.",0,0.9799866080284119
908208492,3070,pietro68,2022-06-28T08:44:02Z,"ok, done",0,0.9714605808258057
908208624,3070,pietro68,2022-06-28T08:44:10Z,also done,0,0.9789647459983826
908208935,3070,pietro68,2022-06-28T08:44:24Z,done,0,0.8682363629341125
908217679,3070,pietro68,2022-06-28T08:52:16Z,done,0,0.8682363629341125
908222606,3070,pietro68,2022-06-28T08:56:50Z,"ok, done",0,0.9714605808258057
908223677,3070,pietro68,2022-06-28T08:57:45Z,"ok, done",0,0.9714605808258057
908235071,3070,pietro68,2022-06-28T09:08:49Z,"right, done",0,0.9782338738441467
908248750,3070,pietro68,2022-06-28T09:19:23Z,"ok, done",0,0.9714605808258057
908252300,3070,pietro68,2022-06-28T09:22:44Z,"ok, done",0,0.9714605808258057
908254685,3070,pietro68,2022-06-28T09:25:02Z,"i assume that by this you mean that in `loadsettings `i should add `else `branches to assign nullopt in case something could not be read, as you comment later.",0,0.9914980530738831
908264237,3070,pietro68,2022-06-28T09:34:09Z,woops! done.,-1,0.9773388504981995
908276814,3070,pietro68,2022-06-28T09:47:09Z,"ok, done",0,0.9714605808258057
908434278,3070,Paul-Licameli,2022-06-28T12:44:35Z,the second commit in the sequence is still not buildable. rebase and squash the fix onto the second commit.,0,0.9933700561523438
908498418,3070,Paul-Licameli,2022-06-28T13:42:59Z,"yes and i meant that the analogous is not needed in savesettings -- which would be, deleting a key/value pair from the config file.",0,0.9938874840736389
908535858,3070,pietro68,2022-06-28T14:13:00Z,"i interpret your comment in this way: 1) leave the assertion there, and write a comment in class base64 that the returned value should be <= buffer.getsize() 2) have `size_t len = static_cast ( base64::decode(str, buffer) );` - or do you mean 2) rewrite base64::decode so that it returns a size_t instead of an int ?",0,0.9928130507469177
1409618318,5675,Paul-Licameli,2023-11-29T17:09:13Z,"this leaves the function `onadvancedvzoom` unused, so delete it too",0,0.9947108030319214
1409629935,5675,Paul-Licameli,2023-11-29T17:18:14Z,"did you scan the code for all occurrences of ""/gui/verticalzooming""? maybe i should review #5685 first. so far this looks like a change i could not approve, because of incompleteness. the code is still governed by the behavior of a preference that you can't change any more in the user interface. that behavior would be ""stuck"" one way or another depending on your audacity.cfg file. by the way -- the long-distance coincidence of repeated string literals for the preference pathname is a thing i have long disliked. so instead there are the classes in `prefs.h` -- `boolsetting`, etc. -- which ought to eliminate all of these repetitions some day as a code cleanup. there would be a lot of volume of work there. maybe you can figure out examples and volunteer to do some of those cleanups if you like. that's for preferences we don't remove.",0,0.9196584820747375
1409642428,5675,Paul-Licameli,2023-11-29T17:29:00Z,"maybe you should remove one preference at a time in each commit, and do each really completely. ""/gui/adjustselectionedges"" is used in `viewinfo::updateprefs` so there is the same objection that it's possible to have behavior frozen one or another way depending on the config file. admittedly it's unlikely anyone would do this. still it leaves the code simplification incomplete. so you should also eliminate the member variable `viewinfo::badjustselectionedges` and simplify by assuming it was true wherever it was used before.",0,0.9822008609771729
1577565457,6306,saintmatthieu,2024-04-24T09:14:22Z,"oops, mistake ...",-1,0.9270806908607483
1577570177,6306,saintmatthieu,2024-04-24T09:17:41Z,"all right, i overlooked these implementations ... wip.",0,0.9879022836685181
1577624110,6306,saintmatthieu,2024-04-24T09:57:26Z,"i'm not sure here. eventually it will replace the offline processor, ""stealing"" its name (currently ""real-time compressor""), so maybe it should stay `after_3_1` and not be `always` ? on the other hand, i don't see any different consequence in returning `after_3_1` or `always`.",0,0.9365375638008118
1577637091,6306,crsib,2024-04-24T10:07:40Z,"if you reuse the old id, you should introduce after_3_6 (3_7?) this is a way paul has introduced to distinguish between rt/non-rt versions of built in effects",0,0.9937897324562073
1577639542,6306,saintmatthieu,2024-04-24T10:09:30Z,not needed.,0,0.9928713440895081
1577654326,6306,saintmatthieu,2024-04-24T10:21:27Z,also wrong - coming up.,0,0.7782170176506042
1577655583,6306,saintmatthieu,2024-04-24T10:22:33Z,these defaults should be reviewed.,0,0.9868196845054626
1579457253,6306,crsib,2024-04-25T13:18:47Z,"i think i fixed it on my branch too, hence the conflict",0,0.9830924868583679
1579504639,6306,crsib,2024-04-25T13:47:22Z,it's not quite clear what it tests tbh,0,0.8347882628440857
1579524442,6306,crsib,2024-04-25T13:56:20Z,"i would prefer static or ""constructor"" cast, by it is very minor",0,0.9793988466262817
1579531873,6306,crsib,2024-04-25T14:00:41Z,this looks ... odd. i think there should be something in line with `mslaves.push_back(compressorinstance { mprocessor })`,-1,0.7834296822547913
1579532749,6306,crsib,2024-04-25T14:01:10Z,see `effectreverb::instance::realtimeaddprocessor`,0,0.9951074123382568
1579538618,6306,Paul-Licameli,2024-04-25T14:04:28Z,why do files relating only to one particular effect belong in lib-effects? i don't agree with the file placement.,0,0.7573455572128296
1579541351,6306,crsib,2024-04-25T14:05:48Z,should this be configurable?,0,0.9924278855323792
1579589534,6306,crsib,2024-04-25T14:36:29Z,wdyt?,0,0.9878125786781311
1579593094,6306,crsib,2024-04-25T14:38:53Z,"provided that this effect is new, i think `realtimesince::always` makes much more sense",0,0.9908024072647095
1579595872,6306,crsib,2024-04-25T14:40:33Z,"the same i think applies to the compressor, as you have changed the id",0,0.9917486906051636
1580657016,6306,saintmatthieu,2024-04-26T08:16:31Z,"i agree, it's confusing.",-1,0.8966261148452759
1580658695,6306,saintmatthieu,2024-04-26T08:17:57Z,"because then they can be reused by another target, namely a unit test.",0,0.9907671809196472
1580659838,6306,saintmatthieu,2024-04-26T08:18:52Z,let's make sure we discuss the string i pushed in a follow-up commit.,0,0.9933388829231262
1581095954,6306,saintmatthieu,2024-04-26T14:11:34Z,yes.,0,0.9851860404014587
1581147854,6306,saintmatthieu,2024-04-26T14:50:58Z,"isn't this a capability? i expect the `realtimeeffectstate` class to create the correct number of slaves, provide the correct input, etc., which, afaics, it does, too.",0,0.992496132850647
1581155276,6306,saintmatthieu,2024-04-26T14:56:38Z,"it doesn't test much indeed. i've been using it a little bit as debug helper. maybe it will come in handy when i start tweaking the algorithm, which i consider doing after the ui follow-up work.",0,0.9216874837875366
1581155633,6306,saintmatthieu,2024-04-26T14:56:55Z,rebased.,0,0.9845768809318542
1581218815,6306,Paul-Licameli,2024-04-26T15:45:14Z,"it is extraneous to lib-effects. i would rather give it its own library if you must have unit tests. ideally mod-effect-classes could be separated as in my pull request and made independent of the audacity executable and given its own unit tests, but that presupposes much dependency breaking that is not yet figured out.",0,0.9850912690162659
1581377926,6306,saintmatthieu,2024-04-26T18:19:54Z,"i would also like to have framework-agnostic processors have their own library, easy to re-use by other projects. we're only at the beginning of the release cycle, the code around the compressor will not rest until 3.7, i'll have time to relocate.",0,0.9771941900253296
1581381732,6306,saintmatthieu,2024-04-26T18:22:34Z,done. they may be refined until the next release.,0,0.9923654198646545
1901568480,7978,grliszas14,2025-01-03T08:37:04Z,i think it would be nice to leave this test with expected values as before (but setting timepoint mode explicitly) and writing additional test checking duration mode,0,0.9746735692024231
1901573870,7978,embarc-gabriel,2025-01-03T08:45:02Z,"yes! sure! you are right! i should increase the test coverage, not the opposite.",1,0.9828798174858093
1901642617,7978,embarc-gabriel,2025-01-03T10:15:11Z,as far as i could see. we only use the duration variant on this timecode widget and i don t want to inject the formatter mode if this is not really needed. but to keep the test coverage i have added a file to test the beatsformatter itself.,0,0.9891887903213501
1901653828,7978,grliszas14,2025-01-03T10:28:35Z,perfect :thumbs_up:,1,0.9966699481010437
1901656949,7978,saintmatthieu,2025-01-03T10:32:19Z,hey -gabriel ! is it not the opposite? isn't the instance in `playbacktoolbar.qml` responsible for the display of this guy? ![a link],-1,0.9423733353614807
1901658965,7978,saintmatthieu,2025-01-03T10:35:09Z,"personally i wouldn't make such a critical argument optional with default, to make sure the user of this class gives it some thinking.",0,0.9627614617347717
1901659466,7978,saintmatthieu,2025-01-03T10:35:45Z,cannot be `const` ?,0,0.989559531211853
1901665221,7978,saintmatthieu,2025-01-03T10:43:29Z,"actually, why not keeping `m_fieldvalueoffset`, (making it const and) setting it in the ctor to 0 or 1 depending on the `beatsformattermode` ? that would reduce the diff and make the code more condensed.",0,0.9903843402862549
1901672164,7978,embarc-gabriel,2025-01-03T10:53:06Z,"yes! i tottaly missed these ones. i focused on the ones we use on the effeects. i don t know how i haven t seen it, the modification will be a little bit tricker than i thought because i will need to inject this information depending on whether we are on the bar or on the effect. i will work on this.",1,0.6470175385475159
1901675745,7978,embarc-gabriel,2025-01-03T10:57:57Z,"i don t know. i always think it is better to be explicit. an int can be anything. we can put 2, 3, 10 or whatever. that way we create many valid inputs that in the end shouldn t exist. using the enum we make these options impossible to be represented.",0,0.9364526271820068
1901954289,7978,saintmatthieu,2025-01-03T16:25:24Z,"""a simple enum""",0,0.994927167892456
1901964266,7978,saintmatthieu,2025-01-03T16:36:44Z,interesting. shouldn't the display stay at 0 until the value has reached 1 ?,0,0.8256951570510864
1901970650,7978,saintmatthieu,2025-01-03T16:44:18Z,here it's like i'd expect it.,0,0.9749994874000549
1901980140,7978,saintmatthieu,2025-01-03T16:55:39Z,"we're at 120bpm, so a beat is 0.5 seconds, so in 1.9 seconds, there are 3 beats (a complete 3/4 bar, that's ok) and the remained is 0.4 seconds. one tick is a fourth of a beat, so 0.125 seconds. 0.4/0.125 = 3.2. so i think it's correct. but it's hard to figure out. maybe encoding `double beatdur = 60/tempo; double tickdur = beatdur / 4;` and then [code block] would be helpful for the reader ?",0,0.9682429432868958
1905002230,7978,embarc-gabriel,2025-01-07T07:16:46Z,here i have just kept the same tests as before once i was not focused on the numericformatter. i don t know exactly the reason for this but i do know this is very explicit on the code that we need to round it to the nearest integer. [code block],0,0.9852933287620544
1905025676,7978,embarc-gabriel,2025-01-07T07:43:27Z,yes! very good point. i have improved the readability for these tests. i hope it is better now.,1,0.9950476884841919
1905032170,7978,saintmatthieu,2025-01-07T07:49:09Z,"... and it indeed is that way in audacity 3, too: ![a link] is this correct ?",0,0.7291931509971619
1905047992,7978,saintmatthieu,2025-01-07T08:04:34Z,"i do find this rounding all the more confusing that, for musical durations, neither of bar, beat or tick is rounded: ![a link]",-1,0.9721945524215698
1905049060,7978,saintmatthieu,2025-01-07T08:05:46Z,... but if no one has noticed so far it's also probably that it's not dramatic. let's move on with this pr and create a follow-up ticket if there's a consensus that it should be changed.,0,0.8731961846351624
1905099052,7978,grliszas14,2025-01-07T08:46:03Z,does it work? it has typo: `timecodemodeselectors -> timecodemodeselector`,0,0.9948925971984863
1905111163,7978,grliszas14,2025-01-07T08:55:17Z,"i'd move those two: `reloadformatter(); updatevaluestring();` outside of this function - as its name suggests, it should only setmode and nothing else. i think it will be better to make a connection within the constructor to respond to that change, sth like: `connect(this, &timecodemodel::valuechanged, [](){ reloadformatter(); updatevaluestring();}`",0,0.9902662634849548
1905120031,7978,grliszas14,2025-01-07T09:02:06Z,i think it's registered as `timecodemodeselector` not the `timecodemode` right? if it works anyway because of typedef or sth it would be nice to keep it consistent in all qml files,0,0.9894531965255737
1905153786,7978,embarc-gabriel,2025-01-07T09:25:52Z,thx. nice catch.,1,0.990435779094696
1905154102,7978,embarc-gabriel,2025-01-07T09:26:05Z,done.,0,0.9897913336753845
1905165250,7978,embarc-gabriel,2025-01-07T09:33:23Z,"i would say i agree to your point here. but if you take a look on the code, this pattern is used everywhere on this file. (settempo, setsamplerate, setuppersignature and so on). i have used this pattern to keep the consistency, once i think it is important as you correctly stated on the other comment. so imo there are two options: we refactor everything related to the setters on this file or keep it as it is. or maybe leave as it is and open other ticket to refactor it idk. what do you think ?",0,0.76027512550354
1905170922,7978,grliszas14,2025-01-07T09:37:42Z,"aaah, indeed it is, let's leave it as is then",0,0.9594773650169373
1905307279,7978,embarc-gabriel,2025-01-07T11:18:40Z,i totally agree with you. the behavior varies depending on the formatter used.,0,0.9102985858917236
728517739,1865,Paul-Licameli,2021-10-13T23:27:38Z,"putting new early return logic here and in editmenus means the association of ctrl+a, etc. with the actions is only default configuration and not hard coded. that is good. lit also means however that descriptions of what select all, cut, copy and paste menu commands do (and edit toolbar buttons, and macro commands) may need updating in the manual to explain the special cases of clip and label text editing. inconsistently, deletion is done with hard coded, un-configurable keys that do not overload what menu commands do. i do not suggest doing anything about that. just for now be aware. conversations with lately make me want to redesign the system of keystroke assignment to be contextual so that different command handler functions could map to the same key in different focusing contexts. needs much thought and work.",0,0.9210847616195679
728529657,1865,Paul-Licameli,2021-10-14T00:00:07Z,"i would like to see a null pointer check before dereference even if there is enough redundant protection in the enabling condition for this command, preventing call of this function when there are no tracks.",0,0.9873918890953064
728537686,1865,Paul-Licameli,2021-10-14T00:22:57Z,whose responsibility is it to push or modify the undo state? caller or called? it should be commented. was pushing of undo stack preserved in all the paths of editmenus? it is not obvious to me yet.,0,0.9894241690635681
728540077,1865,Paul-Licameli,2021-10-14T00:30:01Z,is the capacity to make a new label by pasting text lost or preserved elsewhere?,0,0.9877628087997437
728540634,1865,Paul-Licameli,2021-10-14T00:31:35Z,"oh, i see",0,0.9744234681129456
728541353,1865,Paul-Licameli,2021-10-14T00:33:34Z,similar question about refresh of the trackpanel.,0,0.9886201620101929
728543509,1865,Paul-Licameli,2021-10-14T00:39:49Z,"how cells and uihandles generally work is that they are responsible for undo operations but just return coded to direct the caller whether to refresh display. best that these new functions be consistent with that. maybe this contract isnt clearly commented either for cells and handles, so you are welcome to improve comments in those abstract base classes too.",0,0.9921625256538391
728547628,1865,Paul-Licameli,2021-10-14T00:51:35Z,"i think a problem here is that only left channels or mono tracks are ever focused by trackpanelax but you may need to redirect to a right channels affordance area in unusual cases. please write some ugly little fix, but my sense technical debt around the problem of better representing a tree of focusables is growing still more. maybe trackpanelnode (not cell) needs the notion of focusable  and your new virtual functions really need to be declared there. maybe trackpanelax needs to work in terms of those nodes, not the underlying tracks.",-1,0.7979742884635925
728550556,1865,Paul-Licameli,2021-10-14T00:59:27Z,is this test here just so that ctrl+whatever is dispatched to the command manager? but that assumes the editing keys are not customized to other unusual keystrokes. maybe nobody does that. still not the happiest solution.,0,0.5778268575668335
728820663,1865,vsverchinsky,2021-10-14T09:50:52Z,"i'd like to see `focusable` or introduce the focus concept into some of the basic track panel classes, this solution is rather a bit more generalized version of how text edit shortcuts work in labeltrackview. another option here is to track only the current textedithelper",0,0.9892424941062927
731855410,1865,vsverchinsky,2021-10-19T13:17:16Z,"it should be possible to assign alt+whatever for these commands (checked that, though i moved this check to textedithelper instead)",0,0.9947472214698792
731992664,1865,Paul-Licameli,2021-10-19T15:29:42Z,but what about assignments of shift+... ?,0,0.9893682599067688
732110729,1865,vsverchinsky,2021-10-19T17:51:32Z,"shift + ... during text typing is usually supposed to toggle to upper/lower case, isn't it? but ctrl + shift + ... should work too",0,0.9936031699180603
732117636,1865,vsverchinsky,2021-10-19T18:00:43Z,"though, additionally, we can check that the second keycode is a character",0,0.9942753911018372
732374401,1865,Paul-Licameli,2021-10-20T02:42:28Z,please explain the reason for this changed line.,0,0.9899545907974243
732569619,1865,vsverchinsky,2021-10-20T09:11:22Z,"sorry, i overlooked this during rebase, thanks!",-1,0.9921133518218994
733135863,1865,Paul-Licameli,2021-10-20T20:50:37Z,you might call capturekey and eliminate duplication.,0,0.9931104183197021
733137965,1865,Paul-Licameli,2021-10-20T20:53:59Z,comments explaining that these do not always push the undo stack.,0,0.9917002320289612
733139198,1865,Paul-Licameli,2021-10-20T20:55:50Z,update this comment,0,0.9811255931854248
1095699926,3996,Paul-Licameli,2023-02-03T11:29:00Z,"it's not obvious locally in the code here, but i understand a consequence of this is that changes of factory preset will ""dirty"" the project so you are prompted to save it when you close. am i right? is there another reason for this?",0,0.9829818606376648
1095704823,3996,Paul-Licameli,2023-02-03T11:35:07Z,"i understand the second of the six commits, except for this unexplained change. what does it accomplish?",0,0.986642599105835
1095712086,3996,Paul-Licameli,2023-02-03T11:44:24Z,"""initializecomponents""",0,0.9948408007621765
1095729471,3996,Paul-Licameli,2023-02-03T12:06:17Z,"is `internal` the right type for this and the other new exception, not `badenvironment`? if this failure occurs, do we want sentry data about it or not? `fileexception` does use `internal` but see the comment in its constructor explaining that as an unusual decision.",0,0.9896537661552429
1095745864,3996,Paul-Licameli,2023-02-03T12:26:33Z,"you assume here that `getcache` never returns null. if that is a correct and reliable assumption, make that clear with types: return a reference instead of apointer. if not, test for null.",0,0.9937790036201477
1095754559,3996,Paul-Licameli,2023-02-03T12:37:21Z,"in fact `getcache` is not now guaranteeing a non-null return, so please null check this.",0,0.9943259358406067
1095760719,3996,Paul-Licameli,2023-02-03T12:44:36Z,"why not simply combine the two functions ? just let `getcache` return a reference to `svst3plugincache[key]` and that will create and default-initialize a member that isn't there already. then the assertion isn't needed, and you know i don't like assertions without comments: when i review an assertion,. i'm not satisfied until i also review all uses of the function. less burden of review without it.",0,0.9086795449256897
1095762122,3996,Paul-Licameli,2023-02-03T12:46:14Z,"to make my last suggestion work, defaulted `vst3plugincache` must be distinguishable from one that was initialized as in the following code, so you can write another test here.",0,0.9945005178451538
1095766265,3996,Paul-Licameli,2023-02-03T12:51:06Z,"... and i think this assignment would make that distinguishability, if it is always reached, but it isn't.",0,0.9747903347015381
1095770933,3996,Paul-Licameli,2023-02-03T12:56:41Z,"this is a change of a user facing string that i suppose you must tell design about, if there is any important opinion about string consistency.",0,0.9870337247848511
1095821773,3996,vsverchinsky,2023-02-03T13:51:22Z,"it is correct, though formally there could be other types of parameter that aren't automatable or hidden. for such parameters it is correct to ""dirty"" the project too i think.",0,0.9826669096946716
1095827974,3996,vsverchinsky,2023-02-03T13:57:27Z,"some vst3 plugins can offer better processig quality in `koffline` mode. i think it used to be `koffline` some time before refactoring, but i've made a typo",0,0.9870807528495789
1095854102,3996,vsverchinsky,2023-02-03T14:23:03Z,"not sure how to answer the first question, but i don't think that it's a good idea to send preset loading failures to sentry. `loadpresetfromstream(filestream)` load preset file from disc, and user may attempt to load preset that was genrated by older version of same plugin, or even by another plugin.",0,0.7988802194595337
1095878003,3996,vsverchinsky,2023-02-03T14:42:44Z,"that would be mere formal check. cache for the effect id is created in the constructor and never erased. changing return type to reference would require ""fallback"" cache variable to be introduced, whichs purpose is to replace `nullptr`. what should be done if cache can't be found? throw an exception? i think it's overcomplication, considering that this is an implementation detail.",0,0.5433438420295715
1095891639,3996,vsverchinsky,2023-02-03T14:55:00Z,"the answer is in vst3wrapper constructor - cache initialization process. if `getcache` and `createcahce` were combined i had to add an initialization state. reference type might have convinced you that return value isn't nullptr (though that can be violated too), and the code is formally correct, but you must make sure that the state of returned object is correct too. i don't think that it worth changing.",0,0.9900744557380676
1095895869,3996,vsverchinsky,2023-02-03T14:58:32Z,"yes, and all other places should check that too. not obvious what should happen if `getcache` returns not initialized object",0,0.9938902854919434
1095898067,3996,vsverchinsky,2023-02-03T15:00:06Z,"right, thanks!",1,0.9598597884178162
1095905633,3996,vsverchinsky,2023-02-03T15:05:56Z,"yes, the meaning for `knoprogramlistid` is that plugin does not have program list parameter, which is fine.",0,0.9896775484085083
1096113497,3996,Paul-Licameli,2023-02-03T18:17:17Z,"so then, will you revert that change or comment that you are keeping it?",0,0.9881592988967896
1096121564,3996,Paul-Licameli,2023-02-03T18:25:23Z,"if there should not reporting for this error, then internal is the wrong choice. see this other example: [code block] if sqlite fails but tells the program it's exhaustion of device space, then we don't need to collect a report. only if sqlite fails for some other various reason do we want a report.",0,0.9804477691650391
1097269665,3996,vsverchinsky,2023-02-06T11:38:45Z,"no, i think `koffline` fits better for destructive processing. `realtimeinitialize` uses `krealtime` mode.",0,0.9879119992256165
1097270323,3996,vsverchinsky,2023-02-06T11:39:29Z,reverted that line,0,0.9856148958206177
1335981842,5239,vsverchinsky,2023-09-25T14:35:52Z,thanks for catching this!,1,0.9322888255119324
1336792018,5239,saintmatthieu,2023-09-26T07:59:22Z,i think this is the reason for the problem i found. it should be something like `interval.begin() + (interval.end()-interval.begin())*moldspeed/mspeed;`,0,0.9856735467910767
1336794046,5239,crsib,2023-09-26T08:00:49Z,"yes, you are totally right",0,0.8376495838165283
1336816927,5239,saintmatthieu,2023-09-26T08:19:20Z,"`applystretchratio` has so far meant rendering time-stretching. it took me some time to realize, though, that this is not this method's intent. please consider something else, something like `dochangeclipspeed` ?",0,0.9865336418151855
1336826104,5239,saintmatthieu,2023-09-26T08:26:08Z,reusing the `progressreporter` alias would be better for consistency.,0,0.9906021356582642
1336831495,5239,crsib,2023-09-26T08:29:53Z,"i haven't used it ... for consistency sake :-) i was just copying the waveclip interface, where applystretchratio is defined as [code block]",1,0.984772264957428
1336837198,5239,saintmatthieu,2023-09-26T08:34:08Z,thank you :grimacing_face:,-1,0.9941014647483826
1336846988,5239,saintmatthieu,2023-09-26T08:41:30Z,"oh really :grinning_face_with_sweat: well, do as you please, maybe i'll fix it up in some future pr.",1,0.9374125003814697
926729534,3271,Paul-Licameli,2022-07-21T14:13:11Z,i do not see why this moved member ever needed to be static. make it non-static and initialize it with `{}`,0,0.9856107234954834
926730470,3271,Paul-Licameli,2022-07-21T14:13:58Z,modernize with `static_cast` and `nullptr`,0,0.9947623610496521
926740583,3271,Paul-Licameli,2022-07-21T14:22:42Z,second commit needs to change `realpath` also in the mac-only lines below,0,0.9946660995483398
926742963,3271,Paul-Licameli,2022-07-21T14:24:41Z,mac build also requires `mpluginmain` in lines above,0,0.9952463507652283
926745379,3271,Paul-Licameli,2022-07-21T14:26:45Z,linux compilation will also need a fix in the second commit.,0,0.9893621802330017
926751540,3271,Paul-Licameli,2022-07-21T14:31:50Z,"""because""",0,0.9666597843170166
926752686,3271,Paul-Licameli,2022-07-21T14:32:47Z,"this is just a ""c"" pointer to function -- so initialize it to null",0,0.994519054889679
926755795,3271,Paul-Licameli,2022-07-21T14:35:37Z,you can modernize more casts and nulls,0,0.9932454228401184
926775732,3271,Paul-Licameli,2022-07-21T14:52:01Z,"redefine the old calldispatcher in terms of the new, passing maeffect. avoid duplication.",0,0.9926977753639221
926777358,3271,Paul-Licameli,2022-07-21T14:53:27Z,"if this function is redefined as `static`, which i recommend, then `mdispatcherlock` must become an argument, passed by reference. and you can also modernize by using `std::mutex` instead of the wx synchronization classes.",0,0.9951318502426147
926795790,3271,Paul-Licameli,2022-07-21T15:07:21Z,"here's a better idea for splitting load, phase 2. define a small structure holding maeffect and the mutex. make `calldispatcher` a member function of it that locks the mutex. make its destructor call the dispatcher with `effclose`, replacing the two places where you do that explicitly. you can also change the existing `maeffect` member to be of this structure type, and define an `operator ->`, which will let you avoid changing many lines of code.",0,0.986329972743988
926800886,3271,Paul-Licameli,2022-07-21T15:10:36Z,"`getstringfromhandle` can become a static, nonmember function if `handle` is of the new structure type.",0,0.9930303692817688
926828350,3271,Paul-Licameli,2022-07-21T15:29:58Z,"here's another idea. change the return type of `loadcommon` to be the new structure. give it an `explicit operator bool()` returning false when it contains a null pointer, and return `{}` for failure. define move construction and assignment for the new type, to transfer the pointer to the left hand side and leave it null on the right. do all of this -- and the loading of the plug-in can avoid destroying one aeffect only to build another one at once.",0,0.9908815622329712
926838617,3271,Paul-Licameli,2022-07-21T15:39:57Z,"the new structure should record whether `effopen` was done, and do `effclose` in the destructor only if so.",0,0.9941694736480713
926842900,3271,Paul-Licameli,2022-07-21T15:44:12Z,this was an error path that did not balance `effopen` and `effclose`. see how the smart pointer structure would make this easy to ensure.,0,0.9897782206535339
926854893,3271,Paul-Licameli,2022-07-21T15:55:47Z,"this may improve error checking, causing the function to return false of load failes for some other reason after constructing `maeffect` -- though i see no such reasons now. i reviewed where else this function is called and i see `vsteffectsmodule::loadplugin` does not check the status. so change that function to check and return null for failure.",0,0.9934826493263245
926860173,3271,Paul-Licameli,2022-07-21T16:01:10Z,"so, construction of a `vsteffect` may leave it in an unusable state if load fails. where should that failure be checked? where `make_unique ` happens, and one place is `loadplugin`, just mentioned, the other in `vsteffect::realtimeaddprocessor`. i don't yet see if you add a check there and return false, but i'm still marching through this commit sequence.",0,0.9901115298271179
926876501,3271,Paul-Licameli,2022-07-21T16:18:50Z,"when `loadcommon` is lifted out of `load`, then you might `move` its return value into a new argument of `load` to transfer ownership of the handle.",0,0.9934015870094299
926884383,3271,Paul-Licameli,2022-07-21T16:27:27Z,"now i see that `load` is not always preceded by `loadcommon` in the later commits. but that can't possibly work, can it? `load` assumes `mpluginmain` to be inititalized to non-null, but `loadcommon` is where that happens.",0,0.9891561269760132
926919372,3271,pietro68,2022-07-21T17:08:19Z,"ok, done",0,0.9714605808258057
926928620,3271,pietro68,2022-07-21T17:19:37Z,"tried making it non-static, but then it needs to be so, because it is referenced by ::audiomaster which is a static method. tried to make audiomaster non-static, but it looks like the vst api entry point really wants it to be static. at least i now initialized the static with {} as you said, though.",0,0.9841593503952026
927037421,3271,pietro68,2022-07-21T19:33:50Z,"right, done",0,0.9782338738441467
927038127,3271,pietro68,2022-07-21T19:34:55Z,"right, done",0,0.9782338738441467
927039007,3271,pietro68,2022-07-21T19:36:11Z,"ok, done",0,0.9714605808258057
927039180,3271,pietro68,2022-07-21T19:36:28Z,oops - done,-1,0.7322718501091003
927040830,3271,pietro68,2022-07-21T19:38:56Z,ok,0,0.9233372807502747
927043860,3271,Paul-Licameli,2022-07-21T19:43:21Z,cant you also rewrite the case in audiomaster to use `vst->mcurrenteffectid`?,0,0.9942014813423157
927390616,3271,pietro68,2022-07-22T07:54:50Z,"that's right, then it is possible - done.",0,0.9782755374908447
927439969,3271,pietro68,2022-07-22T08:52:28Z,"ok, done",0,0.9714605808258057
690250252,1482,crsib,2021-08-17T10:43:51Z,i would really prefer an explicit check here (and in general as well). i.e. `pwindows2 != nullptr`. the condition here takes multiple lines separated by comments so it reads like returning `pwindow2` instead of boolean. `auto` in function signature doesn't help too.,0,0.95926833152771
690254515,1482,crsib,2021-08-17T10:49:47Z,"please, let's not oversuse comma. while it's behavior is better defined now, i don't feel like it should be used, it doesn't really improve readability. [code block]",-1,0.9290372133255005
690256113,1482,crsib,2021-08-17T10:51:59Z,"it really feels like this namespace is related to windows os, not to application windows.",0,0.9737210869789124
690257199,1482,crsib,2021-08-17T10:53:40Z,comma again; why not [code block] ?,0,0.989066481590271
690258183,1482,crsib,2021-08-17T10:55:17Z,`const wxwindow*`?,0,0.9949390888214111
690259154,1482,crsib,2021-08-17T10:56:45Z,`const wxwindow&` or even `const wxwindow*`?,0,0.9926366806030273
690259495,1482,crsib,2021-08-17T10:57:15Z,`const wxwindow*`?,0,0.9949390888214111
690261060,1482,crsib,2021-08-17T10:59:43Z,`const wxwindow*`?,0,0.9949390888214111
690262933,1482,crsib,2021-08-17T11:02:38Z,i have very strong opinion that `static_cast` can't possibly be used within the template function. you leave both compiler and runtime helpless here. it is really no difference between c-cast and `static_cast` in this case. `dynamic_cast` is fast enough and this code is not performance-critical anyway.,0,0.9310101270675659
690277014,1482,vsverchinsky,2021-08-17T11:24:00Z,is that possible that for some reason these checks fail? what would be the consequence for the user?,0,0.985161304473877
690292776,1482,Paul-Licameli,2021-08-17T11:47:47Z,"i prefer the brevity of relying on the bool conversion. i can write trailing && on this line, not the next. i don't have strong feelings. putting it on the next is one of the silly rules of the musescore coding standard, and i don't know who i was trying to please with it. but we don't use those rules. auto in the function signature does help. it allows a function to return a lambda. i can't do it otherwise. the alternative is changing return type to a std::function, with its overheads, and maybe defeating the inlining of std::find_if. so i agree with only 1 out of 3 things.",0,0.6611925363540649
690293752,1482,Paul-Licameli,2021-08-17T11:49:11Z,disagree,0,0.8026720285415649
690294491,1482,Paul-Licameli,2021-08-17T11:50:14Z,"by using comma, i make it clear that these expressions really do deduce the same type.",0,0.9935048818588257
690295069,1482,Paul-Licameli,2021-08-17T11:51:10Z,"well... controls? as in dialog controls, which are each a wxwindow object.",0,0.9873561859130859
690295859,1482,Paul-Licameli,2021-08-17T11:52:17Z,see above for why i prefer it. just one auto instead of two autos makes it more legible to me. it expresses sameness of types.,0,0.8712393045425415
690298009,1482,Paul-Licameli,2021-08-17T11:55:20Z,"won't work for the retur value. would require findbypath to return const wxwindow*, and then see in the event deserializers how the windows must be changed. however, if you meant the predicate signature only -- ok",0,0.9923480749130249
690341759,1482,Paul-Licameli,2021-08-17T12:54:59Z,ok to const but -- no to pointer argument. i use reference types to communicate that nullptr is not allowed.,0,0.9907698035240173
690342133,1482,Paul-Licameli,2021-08-17T12:55:27Z,no! `const wxwindow &` yes.,0,0.942633330821991
690342341,1482,Paul-Licameli,2021-08-17T12:55:44Z,ditto,0,0.9754701256752014
690347752,1482,Paul-Licameli,2021-08-17T13:02:09Z,"if the checks fail, then dispatchevent will return false. that causes journal::dispatch() to throw syncexception. that exception's delayed handler action makes the program quit. that causes journal::getexitcode() to return a non-zero status on the command line. all of that is intended behavior, for the user who is the qa engineer. all of this means an interaction sequence recorded before, fails to rerun now, because the sequence of events fails on rerun -- the windows that should be the handlers of events don't exist in the rerun. tests need some way to fail when they should fail and report that .",0,0.976840615272522
690462988,1482,Paul-Licameli,2021-08-17T15:06:09Z,`static_cast` is not as bad c style pointer casts because it will not cast away const and will not allow conversion from base to derived when the inheritance relation is private or protected and is is not in the right scope for accessibility.,0,0.948722779750824
690486701,1482,Paul-Licameli,2021-08-17T15:32:08Z,"if you tell me `static_cast` is absolutely never justified for pointer downcasting, i strongly disagree with that. it is used in ""type erasure"" techniques such as you may soon review too for lib-xml. i will refuse to ""correct"" the `static_cast`s in that pr unnecessarily. wxwidgets event system is built around type erasure and is set up to invoke event handler functions without runtime checks. see, for instance, this line of audacity: [code block] explore how the macro is implemented, if you dare, especially what `wxcommandeventhandler` means inside it. set a breakpoint in the function, arrange to hit it, and see the call stack. this unchecked downcasting is pervasive in the handling of wxwidgets events and never a source of crashes in my experience. wx/event.h even uses that same term, ""type erasure:"" [code block]",-1,0.8311817049980164
690503221,1482,crsib,2021-08-17T15:51:07Z,"predicate, yes",0,0.9869630932807922
690591893,1482,vsverchinsky,2021-08-17T17:46:53Z,"looks like an attempt to bypass compile time restrictions to me, with runtime overhead :)",0,0.882046103477478
690594958,1482,vsverchinsky,2021-08-17T17:51:05Z,"yes, if more details on failure will be ever needed that may be corrected in the future",0,0.9807706475257874
691203453,1482,Paul-Licameli,2021-08-18T12:48:17Z,i tried to make the program return the line number of the journal file where failure occurred. however at least on macos it is truncated to an 8 bit value.,0,0.9794096946716309
691211006,1482,Paul-Licameli,2021-08-18T12:57:20Z,"the simplistic opinion that ""static_cast to downcast pointers is never right,"" is wrong. i now know that is not dmitry's opinion after the approving review of the lib-xml extraction. it can be right when the code you need to examine to prove the correctness of the static_cast is not open ended. but that isn't quite true with the wxwidgets events. i think you can get undefined behavior from what should be properly written event handlers, but you have to work hard to do it. like construct your own wxevent objects of the wrong class, and use seteventtype() on them, and then give them directly to a window to be processed. it's possible but not usual. it's deliberate ""fraud"" and not ""accident."" seteventtype() isn't supposed to be used. events constructed by the libraries have the integer wxeventtype consistent with the expected subtype of the wxevent object.",0,0.7379039525985718
691249849,1482,vsverchinsky,2021-08-18T13:41:37Z,"i like your style of debating :) i was not saying that it's right or wrong, i noted that you build an extra object at runtime to do something that looks like an attempt to persuade a compiler that it's safe to cast",1,0.9961174726486206
